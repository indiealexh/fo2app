var pG=Object.defineProperty,gG=Object.defineProperties;var fG=Object.getOwnPropertyDescriptors;var zg=Object.getOwnPropertySymbols;var rA=Object.prototype.hasOwnProperty,oA=Object.prototype.propertyIsEnumerable;var sA=(e,t,n)=>t in e?pG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||={})rA.call(t,n)&&sA(e,n,t[n]);if(zg)for(var n of zg(t))oA.call(t,n)&&sA(e,n,t[n]);return e},R=(e,t)=>gG(e,fG(t));var He=(e,t)=>{var n={};for(var i in e)rA.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&zg)for(var i of zg(e))t.indexOf(i)<0&&oA.call(e,i)&&(n[i]=e[i]);return n};function Dw(e,t){return Object.is(e,t)}var an=null,Fd=!1,Mw=1,Fn=Symbol("SIGNAL");function Ue(e){let t=an;return an=e,t}function aA(){return an}function mG(){return Fd}var Xo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Od(e){if(Fd)throw new Error("");if(an===null)return;an.consumerOnSignalRead(e);let t=an.nextProducerIndex++;if(Wg(an),t<an.producerNode.length&&an.producerNode[t]!==e&&Nd(an)){let n=an.producerNode[t];jg(n,an.producerIndexOfThis[t])}an.producerNode[t]!==e&&(an.producerNode[t]=e,an.producerIndexOfThis[t]=Nd(an)?dA(e,an,t):0),an.producerLastReadVersion[t]=e.version}function vG(){Mw++}function _d(e){if(!(Nd(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Mw)){if(!e.producerMustRecompute(e)&&!Bd(e)){Hg(e);return}e.producerRecomputeValue(e),Hg(e)}}function lA(e){if(e.liveConsumerNode===void 0)return;let t=Fd;Fd=!0;try{for(let n of e.liveConsumerNode)n.dirty||uA(n)}finally{Fd=t}}function cA(){return an?.consumerAllowSignalWrites!==!1}function uA(e){e.dirty=!0,lA(e),e.consumerMarkedDirty?.(e)}function Hg(e){e.dirty=!1,e.lastCleanEpoch=Mw}function tl(e){return e&&(e.nextProducerIndex=0),Ue(e)}function bc(e,t){if(Ue(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Nd(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)jg(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Bd(e){Wg(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(_d(n),i!==n.version))return!0}return!1}function Sc(e){if(Wg(e),Nd(e))for(let t=0;t<e.producerNode.length;t++)jg(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function dA(e,t,n){if(hA(e),e.liveConsumerNode.length===0&&pA(e))for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=dA(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function jg(e,t){if(hA(e),e.liveConsumerNode.length===1&&pA(e))for(let i=0;i<e.producerNode.length;i++)jg(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];Wg(s),s.producerIndexOfThis[i]=t}}function Nd(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Wg(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function hA(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function pA(e){return e.producerNode!==void 0}function gA(e){let t=Object.create(yG);t.computation=e;let n=()=>{if(_d(t),Od(t),t.value===Zo)throw t.error;return t.value};return n[Fn]=t,n}var el=Symbol("UNSET"),wc=Symbol("COMPUTING"),Zo=Symbol("ERRORED"),yG=R(S({},Xo),{value:el,dirty:!0,error:null,equal:Dw,kind:"computed",producerMustRecompute(e){return e.value===el||e.value===wc},producerRecomputeValue(e){if(e.value===wc)throw new Error("Detected cycle in computations.");let t=e.value;e.value=wc;let n=tl(e),i,s=!1;try{i=e.computation(),Ue(null),s=t!==el&&t!==Zo&&i!==Zo&&e.equal(t,i)}catch(r){i=Zo,e.error=r}finally{bc(e,n)}if(s){e.value=t;return}e.value=i,e.version++}});function CG(){throw new Error}var fA=CG;function mA(){fA()}function vA(e){fA=e}var wG=null;function yA(e){let t=Object.create(Iw);t.value=e;let n=()=>(Od(t),t.value);return n[Fn]=t,n}function Vd(e,t){cA()||mA(),e.equal(e.value,t)||(e.value=t,bG(e))}function Ew(e,t){cA()||mA(),Vd(e,t(e.value))}var Iw=R(S({},Xo),{equal:Dw,value:void 0,kind:"signal"});function bG(e){e.version++,vG(),lA(e),wG?.()}function Aw(e,t,n){let i=Object.create(SG);i.source=e,i.computation=t,n!=null&&(i.equal=n);let r=()=>{if(_d(i),Od(i),i.value===Zo)throw i.error;return i.value};return r[Fn]=i,r}function CA(e,t){_d(e),Vd(e,t),Hg(e)}function wA(e,t){_d(e),Ew(e,t),Hg(e)}var SG=R(S({},Xo),{value:el,dirty:!0,error:null,equal:Dw,producerMustRecompute(e){return e.value===el||e.value===wc},producerRecomputeValue(e){if(e.value===wc)throw new Error("Detected cycle in computations.");let t=e.value;e.value=wc;let n=tl(e),i;try{let s=e.source(),r=t===el||t===Zo?void 0:{source:e.sourceValue,value:t};i=e.computation(s,r),e.sourceValue=s}catch(s){i=Zo,e.error=s}finally{bc(e,n)}if(t!==el&&i!==Zo&&e.equal(t,i)){e.value=t;return}e.value=i,e.version++}});function bA(e,t,n){let i=Object.create(xG);n&&(i.consumerAllowSignalWrites=!0),i.fn=e,i.schedule=t;let s=l=>{i.cleanupFn=l};function r(l){return l.fn===null&&l.schedule===null}function o(l){r(l)||(Sc(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=xw)}let a=()=>{if(i.fn===null)return;if(mG())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!Bd(i))return;i.hasRun=!0;let l=tl(i);try{i.cleanupFn(),i.cleanupFn=xw,i.fn(s)}finally{bc(i,l)}};return i.ref={notify:()=>uA(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>o(i),[Fn]:i},i.ref}var xw=()=>{},xG=R(S({},Xo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule!==null&&e.schedule(e.ref)},hasRun:!1,cleanupFn:xw});function pe(e){return typeof e=="function"}function xc(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ug=xc(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,s)=>`${s+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function nl(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _t=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(pe(i))try{i()}catch(r){t=r instanceof Ug?r.errors:[r]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let r of s)try{SA(r)}catch(o){t=t??[],o instanceof Ug?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Ug(t)}}add(t){var n;if(t&&t!==this)if(this.closed)SA(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&nl(n,t)}remove(t){let{_finalizers:n}=this;n&&nl(n,t),t instanceof e&&t._removeParent(this)}};_t.EMPTY=(()=>{let e=new _t;return e.closed=!0,e})();var Rw=_t.EMPTY;function $g(e){return e instanceof _t||e&&"closed"in e&&pe(e.remove)&&pe(e.add)&&pe(e.unsubscribe)}function SA(e){pe(e)?e():e.unsubscribe()}var ks={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Dc={setTimeout(e,t,...n){let{delegate:i}=Dc;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Dc;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Yg(e){Dc.setTimeout(()=>{let{onUnhandledError:t}=ks;if(t)t(e);else throw e})}function Wr(){}var xA=Tw("C",void 0,void 0);function DA(e){return Tw("E",void 0,e)}function MA(e){return Tw("N",e,void 0)}function Tw(e,t,n){return{kind:e,value:t,error:n}}var il=null;function Mc(e){if(ks.useDeprecatedSynchronousErrorHandling){let t=!il;if(t&&(il={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=il;if(il=null,n)throw i}}else e()}function EA(e){ks.useDeprecatedSynchronousErrorHandling&&il&&(il.errorThrown=!0,il.error=e)}var sl=class extends _t{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,$g(t)&&t.add(this)):this.destination=EG}static create(t,n,i){return new Ec(t,n,i)}next(t){this.isStopped?Lw(MA(t),this):this._next(t)}error(t){this.isStopped?Lw(DA(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Lw(xA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DG=Function.prototype.bind;function kw(e,t){return DG.call(e,t)}var Pw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){Kg(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){Kg(i)}else Kg(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Kg(n)}}},Ec=class extends sl{constructor(t,n,i){super();let s;if(pe(t)||!t)s={next:t??void 0,error:n??void 0,complete:i??void 0};else{let r;this&&ks.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&kw(t.next,r),error:t.error&&kw(t.error,r),complete:t.complete&&kw(t.complete,r)}):s=t}this.destination=new Pw(s)}};function Kg(e){ks.useDeprecatedSynchronousErrorHandling?EA(e):Yg(e)}function MG(e){throw e}function Lw(e,t){let{onStoppedNotification:n}=ks;n&&Dc.setTimeout(()=>n(e,t))}var EG={closed:!0,next:Wr,error:MG,complete:Wr};var Ic=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ti(e){return e}function Fw(...e){return Nw(e)}function Nw(e){return e.length===0?Ti:e.length===1?e[0]:function(n){return e.reduce((i,s)=>s(i),n)}}var Pe=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,s){let r=AG(n)?n:new Ec(n,i,s);return Mc(()=>{let{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=IA(i),new i((s,r)=>{let o=new Ec({next:a=>{try{n(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Ic](){return this}pipe(...n){return Nw(n)(this)}toPromise(n){return n=IA(n),new n((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return e.create=t=>new e(t),e})();function IA(e){var t;return(t=e??ks.Promise)!==null&&t!==void 0?t:Promise}function IG(e){return e&&pe(e.next)&&pe(e.error)&&pe(e.complete)}function AG(e){return e&&e instanceof sl||IG(e)&&$g(e)}function Ow(e){return pe(e?.lift)}function Oe(e){return t=>{if(Ow(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(e,t,n,i,s){return new _w(e,t,n,i,s)}var _w=class extends sl{constructor(t,n,i,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ac(){return Oe((e,t)=>{let n=null;e._refCount++;let i=_e(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,r=n;n=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Qo=class extends Pe{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ow(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new _t;let n=this.getSubject();t.add(this.source.subscribe(_e(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=_t.EMPTY)}return t}refCount(){return Ac()(this)}};var AA=xc(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class e extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new qg(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new AA}next(n){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:s,observers:r}=this;return i||s?Rw:(this.currentObservers=null,r.push(n),new _t(()=>{this.currentObservers=null,nl(r,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:s,isStopped:r}=this;i?n.error(s):r&&n.complete()}asObservable(){let n=new Pe;return n.source=this,n}}return e.create=(t,n)=>new qg(t,n),e})(),qg=class extends St{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Rw}};var Sn=class extends St{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Bw={now(){return(Bw.delegate||Date).now()},delegate:void 0};var Zg=class extends _t{constructor(t,n){super()}schedule(t,n=0){return this}};var Gd={setInterval(e,t,...n){let{delegate:i}=Gd;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Gd;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Xg=class extends Zg{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let s=this.id,r=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(r,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,n),this}requestAsyncId(t,n,i=0){return Gd.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Gd.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,s;try{this.work(t)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,nl(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Rc=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};Rc.now=Bw.now;var Qg=class extends Rc{constructor(t,n=Rc.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var Vw=new Qg(Xg),RA=Vw;var $n=new Pe(e=>e.complete());function Jg(e){return e&&pe(e.schedule)}function Gw(e){return e[e.length-1]}function ef(e){return pe(Gw(e))?e.pop():void 0}function lr(e){return Jg(Gw(e))?e.pop():void 0}function TA(e,t){return typeof Gw(e)=="number"?e.pop():t}function LA(e,t,n,i){function s(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function kA(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rl(e){return this instanceof rl?(this.v=e,this):new rl(e)}function PA(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(g){return Promise.resolve(g).then(p,d)}}function a(p,g){i[p]&&(s[p]=function(f){return new Promise(function(m,v){r.push([p,f,m,v])>1||l(p,f)})},g&&(s[p]=g(s[p])))}function l(p,g){try{c(i[p](g))}catch(f){h(r[0][3],f)}}function c(p){p.value instanceof rl?Promise.resolve(p.value.v).then(u,d):h(r[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function h(p,g){p(g),r.shift(),r.length&&l(r[0][0],r[0][1])}}function FA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof kA=="function"?kA(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(o){return new Promise(function(a,l){o=e[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}var Tc=e=>e&&typeof e.length=="number"&&typeof e!="function";function tf(e){return pe(e?.then)}function nf(e){return pe(e[Ic])}function sf(e){return Symbol.asyncIterator&&pe(e?.[Symbol.asyncIterator])}function rf(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var of=RG();function af(e){return pe(e?.[of])}function lf(e){return PA(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:s}=yield rl(n.read());if(s)return yield rl(void 0);yield yield rl(i)}}finally{n.releaseLock()}})}function cf(e){return pe(e?.getReader)}function at(e){if(e instanceof Pe)return e;if(e!=null){if(nf(e))return TG(e);if(Tc(e))return kG(e);if(tf(e))return LG(e);if(sf(e))return NA(e);if(af(e))return PG(e);if(cf(e))return FG(e)}throw rf(e)}function TG(e){return new Pe(t=>{let n=e[Ic]();if(pe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kG(e){return new Pe(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function LG(e){return new Pe(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Yg)})}function PG(e){return new Pe(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function NA(e){return new Pe(t=>{NG(e,t).catch(n=>t.error(n))})}function FG(e){return NA(lf(e))}function NG(e,t){var n,i,s,r;return LA(this,void 0,void 0,function*(){try{for(n=FA(e);i=yield n.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&(yield r.call(n))}finally{if(s)throw s.error}}t.complete()})}function gi(e,t,n,i=0,s=!1){let r=t.schedule(function(){n(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!s)return r}function uf(e,t=0){return Oe((n,i)=>{n.subscribe(_e(i,s=>gi(i,e,()=>i.next(s),t),()=>gi(i,e,()=>i.complete(),t),s=>gi(i,e,()=>i.error(s),t)))})}function df(e,t=0){return Oe((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function OA(e,t){return at(e).pipe(df(t),uf(t))}function _A(e,t){return at(e).pipe(df(t),uf(t))}function BA(e,t){return new Pe(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function VA(e,t){return new Pe(n=>{let i;return gi(n,t,()=>{i=e[of](),gi(n,t,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){n.error(o);return}r?n.complete():n.next(s)},0,!0)}),()=>pe(i?.return)&&i.return()})}function hf(e,t){if(!e)throw new Error("Iterable cannot be null");return new Pe(n=>{gi(n,t,()=>{let i=e[Symbol.asyncIterator]();gi(n,t,()=>{i.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function GA(e,t){return hf(lf(e),t)}function zA(e,t){if(e!=null){if(nf(e))return OA(e,t);if(Tc(e))return BA(e,t);if(tf(e))return _A(e,t);if(sf(e))return hf(e,t);if(af(e))return VA(e,t);if(cf(e))return GA(e,t)}throw rf(e)}function vt(e,t){return t?zA(e,t):at(e)}function be(...e){let t=lr(e);return vt(e,t)}function Jo(e,t){let n=pe(e)?e:()=>e,i=s=>s.error(n());return new Pe(t?s=>t.schedule(i,0,s):i)}function zw(e){return!!e&&(e instanceof Pe||pe(e.lift)&&pe(e.subscribe))}var Ur=xc(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function HA(e){return e instanceof Date&&!isNaN(e)}function Me(e,t){return Oe((n,i)=>{let s=0;n.subscribe(_e(i,r=>{i.next(e.call(t,r,s++))}))})}var{isArray:OG}=Array;function _G(e,t){return OG(t)?e(...t):e(t)}function kc(e){return Me(t=>_G(e,t))}var{isArray:BG}=Array,{getPrototypeOf:VG,prototype:GG,keys:zG}=Object;function pf(e){if(e.length===1){let t=e[0];if(BG(t))return{args:t,keys:null};if(HG(t)){let n=zG(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function HG(e){return e&&typeof e=="object"&&VG(e)===GG}function gf(e,t){return e.reduce((n,i,s)=>(n[i]=t[s],n),{})}function ff(...e){let t=lr(e),n=ef(e),{args:i,keys:s}=pf(e);if(i.length===0)return vt([],t);let r=new Pe(jG(i,t,s?o=>gf(s,o):Ti));return n?r.pipe(kc(n)):r}function jG(e,t,n=Ti){return i=>{jA(t,()=>{let{length:s}=e,r=new Array(s),o=s,a=s;for(let l=0;l<s;l++)jA(t,()=>{let c=vt(e[l],t),u=!1;c.subscribe(_e(i,d=>{r[l]=d,u||(u=!0,a--),a||i.next(n(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}function jA(e,t,n){e?gi(n,e,t):t()}function WA(e,t,n,i,s,r,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},p=f=>c<i?g(f):l.push(f),g=f=>{r&&t.next(f),c++;let m=!1;at(n(f,u++)).subscribe(_e(t,v=>{s?.(v),r?p(v):t.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){let v=l.shift();o?gi(t,o,()=>g(v)):g(v)}h()}catch(v){t.error(v)}}))};return e.subscribe(_e(t,p,()=>{d=!0,h()})),()=>{a?.()}}function Et(e,t,n=1/0){return pe(t)?Et((i,s)=>Me((r,o)=>t(i,r,s,o))(at(e(i,s))),n):(typeof t=="number"&&(n=t),Oe((i,s)=>WA(i,s,e,n)))}function zd(e=1/0){return Et(Ti,e)}function UA(){return zd(1)}function cr(...e){return UA()(vt(e,lr(e)))}function ol(e){return new Pe(t=>{at(e()).subscribe(t)})}function Hw(...e){let t=ef(e),{args:n,keys:i}=pf(e),s=new Pe(r=>{let{length:o}=n;if(!o){r.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;at(n[u]).subscribe(_e(r,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||r.next(i?gf(i,a):a),r.complete())}))}});return t?s.pipe(kc(t)):s}var WG=["addListener","removeListener"],UG=["addEventListener","removeEventListener"],$G=["on","off"];function Lc(e,t,n,i){if(pe(n)&&(i=n,n=void 0),i)return Lc(e,t,n).pipe(kc(i));let[s,r]=qG(e)?UG.map(o=>a=>e[o](t,a,n)):YG(e)?WG.map($A(e,t)):KG(e)?$G.map($A(e,t)):[];if(!s&&Tc(e))return Et(o=>Lc(o,t,n))(at(e));if(!s)throw new TypeError("Invalid event target");return new Pe(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function $A(e,t){return n=>i=>e[n](t,i)}function YG(e){return pe(e.addListener)&&pe(e.removeListener)}function KG(e){return pe(e.on)&&pe(e.off)}function qG(e){return pe(e.addEventListener)&&pe(e.removeEventListener)}function YA(e=0,t,n=RA){let i=-1;return t!=null&&(Jg(t)?n=t:i=t),new Pe(s=>{let r=HA(e)?+e-n.now():e;r<0&&(r=0);let o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function mf(...e){let t=lr(e),n=TA(e,1/0),i=e;return i.length?i.length===1?at(i[0]):zd(n)(vt(i,t)):$n}var al=new Pe(Wr);function xn(e,t){return Oe((n,i)=>{let s=0;n.subscribe(_e(i,r=>e.call(t,r,s++)&&i.next(r)))})}function ea(e){return Oe((t,n)=>{let i=null,s=!1,r;i=t.subscribe(_e(n,void 0,void 0,o=>{r=at(e(o,ea(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(n))})}function KA(e,t,n,i,s){return(r,o)=>{let a=n,l=t,c=0;r.subscribe(_e(o,u=>{let d=c++;l=a?e(l,u,d):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function ll(e,t){return pe(t)?Et(e,t,1):Et(e,1)}function qA(e){return new Pe(t=>e.subscribe(t))}var ZG={connector:()=>new St};function vf(e,t=ZG){let{connector:n}=t;return Oe((i,s)=>{let r=n();at(e(qA(r))).subscribe(s),s.add(i.subscribe(r))})}function ta(e){return Oe((t,n)=>{let i=!1;t.subscribe(_e(n,s=>{i=!0,n.next(s)},()=>{i||n.next(e),n.complete()}))})}function ln(e){return e<=0?()=>$n:Oe((t,n)=>{let i=0;t.subscribe(_e(n,s=>{++i<=e&&(n.next(s),e<=i&&n.complete())}))})}function ZA(){return Oe((e,t)=>{e.subscribe(_e(t,Wr))})}function XA(e){return Me(()=>e)}function jw(e,t){return t?n=>cr(t.pipe(ln(1),ZA()),n.pipe(jw(e))):Et((n,i)=>at(e(n,i)).pipe(ln(1),XA(n)))}function Ww(e,t=Vw){let n=YA(e,t);return jw(()=>n)}function yf(e=XG){return Oe((t,n)=>{let i=!1;t.subscribe(_e(n,s=>{i=!0,n.next(s)},()=>i?n.complete():n.error(e())))})}function XG(){return new Ur}function Pc(e){return Oe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function $r(e,t){let n=arguments.length>=2;return i=>i.pipe(e?xn((s,r)=>e(s,r,i)):Ti,ln(1),n?ta(t):yf(()=>new Ur))}function Fc(e){return e<=0?()=>$n:Oe((t,n)=>{let i=[];t.subscribe(_e(n,s=>{i.push(s),e<i.length&&i.shift()},()=>{for(let s of i)n.next(s);n.complete()},void 0,()=>{i=null}))})}function Uw(e,t){let n=arguments.length>=2;return i=>i.pipe(e?xn((s,r)=>e(s,r,i)):Ti,Fc(1),n?ta(t):yf(()=>new Ur))}function QA(e,t){let n=pe(e)?e:()=>e;return pe(t)?vf(t,{connector:n}):i=>new Qo(i,n)}function $w(e){return e?t=>vf(e)(t):t=>QA(new St)(t)}function Yw(e,t){return Oe(KA(e,t,arguments.length>=2,!0))}function Kw(...e){let t=lr(e);return Oe((n,i)=>{(t?cr(e,n,t):cr(e,n)).subscribe(i)})}function Dn(e,t){return Oe((n,i)=>{let s=null,r=0,o=!1,a=()=>o&&!s&&i.complete();n.subscribe(_e(i,l=>{s?.unsubscribe();let c=0,u=r++;at(e(l,u)).subscribe(s=_e(i,d=>i.next(t?t(l,d,u,c++):d),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function qw(e){return Oe((t,n)=>{at(e).subscribe(_e(n,()=>n.complete(),Wr)),!n.closed&&t.subscribe(n)})}function Gt(e,t,n){let i=pe(e)||t||n?{next:e,error:t,complete:n}:e;return i?Oe((s,r)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;s.subscribe(_e(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Ti}var eb={JSACTION:"jsaction"},tb={JSACTION:"__jsaction",OWNER:"__owner"},nR={};function QG(e){return e[tb.JSACTION]}function JA(e,t){e[tb.JSACTION]=t}function JG(e){return nR[e]}function ez(e,t){nR[e]=t}var ve={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},tz=[ve.MOUSEENTER,ve.MOUSELEAVE,"pointerenter","pointerleave"],SSe=[ve.CLICK,ve.DBLCLICK,ve.FOCUSIN,ve.FOCUSOUT,ve.KEYDOWN,ve.KEYUP,ve.KEYPRESS,ve.MOUSEOVER,ve.MOUSEOUT,ve.SUBMIT,ve.TOUCHSTART,ve.TOUCHEND,ve.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],nz=[ve.FOCUS,ve.BLUR,ve.ERROR,ve.LOAD,ve.TOGGLE],nb=e=>nz.indexOf(e)>=0;var iz=3,sz=13,rz=32,ki={MAC_ENTER:iz,ENTER:sz,SPACE:rz};function oz(e){return e===ve.MOUSEENTER?ve.MOUSEOVER:e===ve.MOUSELEAVE?ve.MOUSEOUT:e===ve.POINTERENTER?ve.POINTEROVER:e===ve.POINTERLEAVE?ve.POINTEROUT:e}function az(e,t,n,i){let s=!1;nb(t)&&(s=!0);let r=typeof i=="boolean"?{capture:s,passive:i}:s;return e.addEventListener(t,n,r),{eventType:t,handler:n,capture:s,passive:i}}function lz(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function cz(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var eR=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function uz(e){return e.which===2||e.which==null&&e.button===4}function dz(e){return eR&&e.metaKey||!eR&&e.ctrlKey||uz(e)||e.shiftKey}var xSe=typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),DSe=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)),MSe=typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&/Gecko/.test(navigator.product);function hz(e,t,n){let i=e.relatedTarget;return(e.type===ve.MOUSEOVER&&t===ve.MOUSEENTER||e.type===ve.MOUSEOUT&&t===ve.MOUSELEAVE||e.type===ve.POINTEROVER&&t===ve.POINTERENTER||e.type===ve.POINTEROUT&&t===ve.POINTERLEAVE)&&(!i||i!==n&&!n.contains(i))}function pz(e,t){let n={};for(let i in e){if(i==="srcElement"||i==="target")continue;let s=i,r=e[s];typeof r!="function"&&(n[s]=r)}return e.type===ve.MOUSEOVER?n.type=ve.MOUSEENTER:e.type===ve.MOUSEOUT?n.type=ve.MOUSELEAVE:e.type===ve.POINTEROVER?n.type=ve.POINTERENTER:n.type=ve.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n._originalEvent=e,n}var ESe={Enter:ki.ENTER," ":ki.SPACE},ISe={A:ki.ENTER,BUTTON:0,CHECKBOX:ki.SPACE,COMBOBOX:ki.ENTER,FILE:0,GRIDCELL:ki.ENTER,LINK:ki.ENTER,LISTBOX:ki.ENTER,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:ki.SPACE,RADIOGROUP:ki.SPACE,RESET:0,SUBMIT:0,SWITCH:ki.SPACE,TAB:0,TREE:ki.ENTER,TREEITEM:ki.ENTER};var gz=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Sf=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,i){gz&&(this.element.style.cursor="pointer"),this.handlerInfos.push(az(this.element,t,n(this.element),i))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)lz(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},fz={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function na(e){return e.eventType}function ib(e,t){e.eventType=t}function wf(e){return e.event}function iR(e,t){e.event=t}function sR(e){return e.targetElement}function rR(e,t){e.targetElement=t}function oR(e){return e.eic}function mz(e,t){e.eic=t}function vz(e){return e.timeStamp}function yz(e,t){e.timeStamp=t}function bf(e){return e.eia}function aR(e,t,n){e.eia=[t,n]}function Zw(e){e.eia=void 0}function Cf(e){return e[1]}function Cz(e){return e.eirp}function lR(e,t){e.eirp=t}function cR(e){return e.eir}function uR(e,t){e.eir=t}function dR(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function wz(e,t,n,i,s,r,o,a){return{eventType:e,event:t,targetElement:n,eic:i,timeStamp:s,eia:r,eirp:o,eiack:a}}var Xw=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return na(this.eventInfo)}setEventType(t){ib(this.eventInfo,t)}getEvent(){return wf(this.eventInfo)}setEvent(t){iR(this.eventInfo,t)}getTargetElement(){return sR(this.eventInfo)}setTargetElement(t){rR(this.eventInfo,t)}getContainer(){return oR(this.eventInfo)}setContainer(t){mz(this.eventInfo,t)}getTimestamp(){return vz(this.eventInfo)}setTimestamp(t){yz(this.eventInfo,t)}getAction(){let t=bf(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){Zw(this.eventInfo);return}aR(this.eventInfo,t.name,t.element)}getIsReplay(){return Cz(this.eventInfo)}setIsReplay(t){lR(this.eventInfo,t)}getResolved(){return cR(this.eventInfo)}setResolved(t){uR(this.eventInfo,t)}clone(){return new e(dR(this.eventInfo))}},bz={},Sz=/\s*;\s*/,xz=ve.CLICK,Qw=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&na(t)===ve.CLICK&&dz(wf(t))?ib(t,ve.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){cR(t)||(this.populateAction(t,sR(t)),uR(t,!0))}resolveParentAction(t){let n=bf(t),i=n&&Cf(n);Zw(t);let s=i&&this.getParentNode(i);s&&this.populateAction(t,s)}populateAction(t,n){let i=n;for(;i&&i!==oR(t)&&(i.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(i,t),!bf(t));)i=this.getParentNode(i);let s=bf(t);if(s&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(na(t)===ve.MOUSEENTER||na(t)===ve.MOUSELEAVE||na(t)===ve.POINTERENTER||na(t)===ve.POINTERLEAVE)))if(hz(wf(t),na(t),Cf(s))){let r=pz(wf(t),Cf(s));iR(t,r),rR(t,Cf(s))}else Zw(t)}getParentNode(t){let n=t[tb.OWNER];if(n)return n;let i=t.parentNode;return i?.nodeName==="#document-fragment"?i?.host??null:i}populateActionOnElement(t,n){let i=this.parseActions(t),s=i[na(n)];s!==void 0&&aR(n,s,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,i)}parseActions(t){let n=QG(t);if(!n){let i=t.getAttribute(eb.JSACTION);if(!i)n=bz,JA(t,n);else{if(n=JG(i),!n){n={};let s=i.split(Sz);for(let r=0;r<s.length;r++){let o=s[r];if(!o)continue;let a=o.indexOf(fz.EVENT_ACTION_SEPARATOR),l=a!==-1,c=l?o.substr(0,a).trim():xz,u=l?o.substr(a+1).trim():o;n[c]=u}ez(i,n)}JA(t,n)}}return n}addA11yClickSupport(t,n,i){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=i}},hR=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(hR||{}),Jw=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:i}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=i}dispatch(t){let n=new Xw(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let i=n.getAction();if(i&&Dz(i.element,n)&&cz(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function Dz(e,t){return e.tagName==="A"&&(t.getEventType()===ve.CLICK||t.getEventType()===ve.CLICKMOD)}var pR=Symbol.for("propagationStopped"),sb={REPLAY:101};var Mz="`preventDefault` called during event replay.";var Ez="`composedPath` called during event replay.",xf=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new Qw({clickModSupport:n}),this.dispatcher=new Jw(i=>{this.dispatchToDelegate(i)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&Rz(t),Iz(t);t.getAction();){if(Tz(t),nb(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),Az(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function Iz(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),i=()=>{t[pR]=!0,n()};cl(t,"stopPropagation",i),cl(t,"stopImmediatePropagation",i)}function Az(e){return!!e.getEvent()[pR]}function Rz(e){let t=e.getEvent(),n=e.getTargetElement(),i=t.preventDefault.bind(t);cl(t,"target",n),cl(t,"eventPhase",sb.REPLAY),cl(t,"preventDefault",()=>{throw i(),new Error(Mz+"")}),cl(t,"composedPath",()=>{throw new Error(Ez+"")})}function Tz(e){let t=e.getEvent(),n=e.getAction()?.element;n&&cl(t,"currentTarget",n,{configurable:!0})}function cl(e,t,n,{configurable:i=!1}={}){Object.defineProperty(e,t,{value:n,configurable:i})}function gR(e,t){e.ecrd(n=>{t.dispatch(n)},hR.I_AM_THE_JSACTION_FRAMEWORK)}function kz(e){return e?.q??[]}function Lz(e){e&&(tR(e.c,e.et,e.h),tR(e.c,e.etc,e.h,!0))}function tR(e,t,n,i){for(let s=0;s<t.length;s++)e.removeEventListener(t[s],n,i)}var Pz=!1,fR=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=Pz;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,i,s){let r=wz(n,i,i.target,s,Date.now());this.handleEventInfo(r)}handleEventInfo(n){if(!this.dispatcher){lR(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,i,s){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&tz.indexOf(n)>=0)return;let r=(a,l,c)=>{this.handleEvent(a,l,c)};this.eventHandlers[n]=r;let o=oz(i||n);if(o!==n){let a=this.browserEventTypeToExtraEventTypes[o]||[];a.push(n),this.browserEventTypeToExtraEventTypes[o]=a}this.containerManager.addEventListener(o,a=>l=>{r(n,l,a)},s)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),Lz(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let i=0;i<n.length;i++){let s=n[i],r=this.getEventTypesForBrowserEventType(s.eventType);for(let o=0;o<r.length;o++){let a=dR(s);ib(a,r[o]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let i=[];return this.eventHandlers[n]&&i.push(n),this.browserEventTypeToExtraEventTypes[n]&&i.push(...this.browserEventTypeToExtraEventTypes[n]),i}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,i){this.ecrd(n,i)}ecrd(n,i){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let s=0;s<this.queuedEventInfos.length;s++)this.handleEventInfo(this.queuedEventInfos[s]);this.queuedEventInfos=null}}}return e})();function mR(e,t=window){return kz(t._ejsas?.[e])}function rb(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var m1="https://g.co/ng/security#xss",ce=class extends Error{code;constructor(t,n){super(pm(t,n)),this.code=t}};function pm(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var v1=Symbol("InputSignalNode#UNSET"),Fz=R(S({},Iw),{transformFn:void 0,applyValueToInputSignal(e,t){Vd(e,t)}});function y1(e,t){let n=Object.create(Fz);n.value=e,n.transformFn=t?.transform;function i(){if(Od(n),n.value===v1)throw new ce(-950,!1);return n.value}return i[Fn]=n,i}function gm(e){return{toString:e}.toString()}var $d=globalThis;function ht(e){for(let t in e)if(e[t]===ht)return t;throw Error("Could not find renamed property on target object.")}function Nz(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function mi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(mi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function vR(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var Oz=ht({__forward_ref__:ht});function ua(e){return e.__forward_ref__=ua,e.toString=function(){return mi(this())},e}function Kn(e){return C1(e)?e():e}function C1(e){return typeof e=="function"&&e.hasOwnProperty(Oz)&&e.__forward_ref__===ua}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Jr(e){return{providers:e.providers||[],imports:e.imports||[]}}function fm(e){return yR(e,b1)||yR(e,S1)}function w1(e){return fm(e)!==null}function yR(e,t){return e.hasOwnProperty(t)?e[t]:null}function _z(e){let t=e&&(e[b1]||e[S1]);return t||null}function CR(e){return e&&(e.hasOwnProperty(wR)||e.hasOwnProperty(Bz))?e[wR]:null}var b1=ht({\u0275prov:ht}),wR=ht({\u0275inj:ht}),S1=ht({ngInjectableDef:ht}),Bz=ht({ngInjectorDef:ht}),se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function x1(e){return e&&!!e.\u0275providers}var Vz=ht({\u0275cmp:ht}),Gz=ht({\u0275dir:ht}),zz=ht({\u0275pipe:ht}),Hz=ht({\u0275mod:ht}),Vf=ht({\u0275fac:ht}),Ud=ht({__NG_ELEMENT_ID__:ht}),bR=ht({__NG_ENV_ID__:ht});function d0(e){return typeof e=="string"?e:e==null?"":String(e)}function jz(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():d0(e)}function Wz(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ce(-200,e)}function h0(e,t){throw new ce(-201,!1)}var Fe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Fe||{}),wb;function D1(){return wb}function Ji(e){let t=wb;return wb=e,t}function M1(e,t,n){let i=fm(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Fe.Optional)return null;if(t!==void 0)return t;h0(e,"Injector")}var Uz={},Yd=Uz,$z="__NG_DI_FLAG__",Gf="ngTempTokenPath",Yz="ngTokenPath",Kz=/\n/gm,qz="\u0275",SR="__source",Gc;function Zz(){return Gc}function ia(e){let t=Gc;return Gc=e,t}function Xz(e,t=Fe.Default){if(Gc===void 0)throw new ce(-203,!1);return Gc===null?M1(e,void 0,t):Gc.get(e,t&Fe.Optional?null:void 0,t)}function Ie(e,t=Fe.Default){return(D1()||Xz)(Kn(e),t)}function _(e,t=Fe.Default){return Ie(e,mm(t))}function mm(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bb(e){let t=[];for(let n=0;n<e.length;n++){let i=Kn(e[n]);if(Array.isArray(i)){if(i.length===0)throw new ce(900,!1);let s,r=Fe.Default;for(let o=0;o<i.length;o++){let a=i[o],l=Qz(a);typeof l=="number"?l===-1?s=a.token:r|=l:s=a}t.push(Ie(s,r))}else t.push(Ie(i))}return t}function Qz(e){return e[$z]}function Jz(e,t,n,i){let s=e[Gf];throw t[SR]&&s.unshift(t[SR]),e.message=eH(`
`+e.message,s,n,i),e[Yz]=s,e[Gf]=null,e}function eH(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==qz?e.slice(2):e;let s=mi(t);if(Array.isArray(t))s=t.map(mi).join(" -> ");else if(typeof t=="object"){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+(typeof a=="string"?JSON.stringify(a):mi(a)))}s=`{${r.join(", ")}}`}return`${n}${i?"("+i+")":""}[${s}]: ${e.replace(Kz,`
  `)}`}function Wc(e,t){let n=e.hasOwnProperty(Vf);return n?e[Vf]:null}function p0(e,t){e.forEach(n=>Array.isArray(n)?p0(n,t):t(n))}function E1(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function zf(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function tH(e,t,n,i){let s=e.length;if(s==t)e.push(n,i);else if(s===1)e.push(i,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let r=s-2;e[s]=e[r],s--}e[t]=n,e[t+1]=i}}function nH(e,t,n){let i=th(e,t);return i>=0?e[i|1]=n:(i=~i,tH(e,i,t,n)),i}function ob(e,t){let n=th(e,t);if(n>=0)return e[n|1]}function th(e,t){return iH(e,t,1)}function iH(e,t,n){let i=0,s=e.length>>n;for(;s!==i;){let r=i+(s-i>>1),o=e[r<<n];if(t===o)return r<<n;o>t?s=r:i=r+1}return~(s<<n)}var Uc={},es=[],ra=new se(""),I1=new se("",-1),A1=new se(""),Hf=class{get(t,n=Yd){if(n===Yd){let i=new Error(`NullInjectorError: No provider for ${mi(t)}!`);throw i.name="NullInjectorError",i}return n}};function R1(e,t){let n=e[Hz]||null;if(!n&&t===!0)throw new Error(`Type ${mi(e)} does not have '\u0275mod' property.`);return n}function oa(e){return e[Vz]||null}function g0(e){return e[Gz]||null}function f0(e){return e[zz]||null}function T1(e){let t=oa(e)||g0(e)||f0(e);return t!==null&&t.standalone}function eo(e){return{\u0275providers:e}}function sH(...e){return{\u0275providers:m0(!0,e),\u0275fromNgModule:!0}}function m0(e,...t){let n=[],i=new Set,s,r=o=>{n.push(o)};return p0(t,o=>{let a=o;Sb(a,r,[],i)&&(s||=[],s.push(a))}),s!==void 0&&k1(s,r),n}function k1(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:s}=e[n];v0(s,r=>{t(r,i)})}}function Sb(e,t,n,i){if(e=Kn(e),!e)return!1;let s=null,r=CR(e),o=!r&&oa(e);if(!r&&!o){let l=e.ngModule;if(r=CR(l),r)s=l;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Sb(c,t,n,i)}}else if(r){if(r.imports!=null&&!a){i.add(s);let c;try{p0(r.imports,u=>{Sb(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&k1(c,t)}if(!a){let c=Wc(s)||(()=>new s);t({provide:s,useFactory:c,deps:es},s),t({provide:A1,useValue:s,multi:!0},s),t({provide:ra,useValue:()=>Ie(s),multi:!0},s)}let l=r.providers;if(l!=null&&!a){let c=e;v0(l,u=>{t(u,c)})}}else return!1;return s!==e&&e.providers!==void 0}function v0(e,t){for(let n of e)x1(n)&&(n=n.\u0275providers),Array.isArray(n)?v0(n,t):t(n)}var rH=ht({provide:String,useValue:ht});function L1(e){return e!==null&&typeof e=="object"&&rH in e}function oH(e){return!!(e&&e.useExisting)}function aH(e){return!!(e&&e.useFactory)}function $c(e){return typeof e=="function"}function lH(e){return!!e.useClass}var vm=new se(""),kf={},cH={},ab;function y0(){return ab===void 0&&(ab=new Hf),ab}var Ni=class{},Kd=class extends Ni{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,i,s){super(),this.parent=n,this.source=i,this.scopes=s,Db(t,o=>this.processProvider(o)),this.records.set(I1,Nc(void 0,this)),s.has("environment")&&this.records.set(Ni,Nc(void 0,this));let r=this.records.get(vm);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(A1,es,Fe.Self))}destroy(){jd(this),this._destroyed=!0;let t=Ue(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ue(t)}}onDestroy(t){return jd(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){jd(this);let n=ia(this),i=Ji(void 0),s;try{return t()}finally{ia(n),Ji(i)}}get(t,n=Yd,i=Fe.Default){if(jd(this),t.hasOwnProperty(bR))return t[bR](this);i=mm(i);let s,r=ia(this),o=Ji(void 0);try{if(!(i&Fe.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=gH(t)&&fm(t);c&&this.injectableDefInScope(c)?l=Nc(xb(t),kf):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Fe.Self?y0():this.parent;return n=i&Fe.Optional&&n===Yd?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Gf]=a[Gf]||[]).unshift(mi(t)),r)throw a;return Jz(a,t,"R3InjectorError",this.source)}else throw a}finally{Ji(o),ia(r)}}resolveInjectorInitializers(){let t=Ue(null),n=ia(this),i=Ji(void 0),s;try{let r=this.get(ra,es,Fe.Self);for(let o of r)o()}finally{ia(n),Ji(i),Ue(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(mi(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Kn(t);let n=$c(t)?t:Kn(t&&t.provide),i=dH(t);if(!$c(t)&&t.multi===!0){let s=this.records.get(n);s||(s=Nc(void 0,kf,!0),s.factory=()=>bb(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=Ue(null);try{return n.value===kf&&(n.value=cH,n.value=n.factory()),typeof n.value=="object"&&n.value&&pH(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ue(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Kn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xb(e){let t=fm(e),n=t!==null?t.factory:Wc(e);if(n!==null)return n;if(e instanceof se)throw new ce(204,!1);if(e instanceof Function)return uH(e);throw new ce(204,!1)}function uH(e){if(e.length>0)throw new ce(204,!1);let n=_z(e);return n!==null?()=>n.factory(e):()=>new e}function dH(e){if(L1(e))return Nc(void 0,e.useValue);{let t=P1(e);return Nc(t,kf)}}function P1(e,t,n){let i;if($c(e)){let s=Kn(e);return Wc(s)||xb(s)}else if(L1(e))i=()=>Kn(e.useValue);else if(aH(e))i=()=>e.useFactory(...bb(e.deps||[]));else if(oH(e))i=()=>Ie(Kn(e.useExisting));else{let s=Kn(e&&(e.useClass||e.provide));if(hH(e))i=()=>new s(...bb(e.deps));else return Wc(s)||xb(s)}return i}function jd(e){if(e.destroyed)throw new ce(205,!1)}function Nc(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function hH(e){return!!e.deps}function pH(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function gH(e){return typeof e=="function"||typeof e=="object"&&e instanceof se}function Db(e,t){for(let n of e)Array.isArray(n)?Db(n,t):n&&x1(n)?Db(n.\u0275providers,t):t(n)}function is(e,t){e instanceof Kd&&jd(e);let n,i=ia(e),s=Ji(void 0);try{return t()}finally{ia(i),Ji(s)}}function F1(){return D1()!==void 0||Zz()!=null}function ym(e){if(!F1())throw new ce(-203,!1)}function fH(e){return typeof e=="function"}var Oi=0,Ae=1,Ee=2,Mn=3,Ps=4,Os=5,dr=6,jf=7,hr=8,aa=9,Yr=10,It=11,qd=12,xR=13,nh=14,ns=15,Yc=16,Oc=17,Kc=18,Cm=19,N1=20,sa=21,Lf=22,dl=23,Pi=24,Nn=25,O1=1,hl=6,Kr=7,Wf=8,Uf=9,Fi=10;function Fs(e){return Array.isArray(e)&&typeof e[O1]=="object"}function mr(e){return Array.isArray(e)&&e[O1]===!0}function _1(e){return(e.flags&4)!==0}function da(e){return e.componentOffset>-1}function B1(e){return(e.flags&1)===1}function qr(e){return!!e.template}function Zd(e){return(e[Ee]&512)!==0}function Jc(e){return(e[Ee]&256)===256}var Mb=class{previousValue;currentValue;firstChange;constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function V1(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}var vr=(()=>{let e=()=>G1;return e.ngInherit=!0,e})();function G1(e){return e.type.prototype.ngOnChanges&&(e.setInput=vH),mH}function mH(){let e=H1(this),t=e?.current;if(t){let n=e.previous;if(n===Uc)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function vH(e,t,n,i,s){let r=this.declaredInputs[i],o=H1(e)||yH(e,{previous:Uc,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new Mb(c&&c.currentValue,n,l===Uc),V1(e,t,s,n)}var z1="__ngSimpleChanges__";function H1(e){return e[z1]||null}function yH(e,t){return e[z1]=t}var DR=null;var ts=function(e,t,n){DR?.(e,t,n)},CH="svg",wH="math";function Ns(e){for(;Array.isArray(e);)e=e[Oi];return e}function bH(e,t){return Ns(t[e])}function ss(e,t){return Ns(t[e.index])}function wm(e,t){return e.data[t]}function pr(e,t){let n=t[e];return Fs(n)?n:n[Oi]}function C0(e){return(e[Ee]&128)===128}function SH(e){return mr(e[Mn])}function MR(e,t){return t==null?null:e[t]}function j1(e){e[Oc]=0}function w0(e){e[Ee]&1024||(e[Ee]|=1024,C0(e)&&ih(e))}function bm(e){return!!(e[Ee]&9216||e[Pi]?.dirty)}function Eb(e){e[Yr].changeDetectionScheduler?.notify(9),e[Ee]&64&&(e[Ee]|=1024),bm(e)&&ih(e)}function ih(e){e[Yr].changeDetectionScheduler?.notify(0);let t=pl(e);for(;t!==null&&!(t[Ee]&8192||(t[Ee]|=8192,!C0(t)));)t=pl(t)}function W1(e,t){if(Jc(e))throw new ce(911,!1);e[sa]===null&&(e[sa]=[]),e[sa].push(t)}function xH(e,t){if(e[sa]===null)return;let n=e[sa].indexOf(t);n!==-1&&e[sa].splice(n,1)}function pl(e){let t=e[Mn];return mr(t)?t[Mn]:t}function DH(e){return e[jf]??=[]}function MH(e){return e.cleanup??=[]}var $e={lFrame:Q1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ib=!1;function EH(){return $e.lFrame.elementDepthCount}function IH(){$e.lFrame.elementDepthCount++}function AH(){$e.lFrame.elementDepthCount--}function U1(){return $e.bindingsEnabled}function sh(){return $e.skipHydrationRootTNode!==null}function RH(e){return $e.skipHydrationRootTNode===e}function TH(e){$e.skipHydrationRootTNode=e}function kH(){$e.skipHydrationRootTNode=null}function Ht(){return $e.lFrame.lView}function rs(){return $e.lFrame.tView}function _i(){let e=$1();for(;e!==null&&e.type===64;)e=e.parent;return e}function $1(){return $e.lFrame.currentTNode}function LH(){let e=$e.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Sm(e,t){let n=$e.lFrame;n.currentTNode=e,n.isParent=t}function Y1(){return $e.lFrame.isParent}function PH(){$e.lFrame.isParent=!1}function K1(){return Ib}function $f(e){let t=Ib;return Ib=e,t}function FH(e){return $e.lFrame.bindingIndex=e}function b0(){return $e.lFrame.bindingIndex++}function NH(e){let t=$e.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function OH(){return $e.lFrame.inI18n}function _H(e,t){let n=$e.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ab(t)}function BH(){return $e.lFrame.currentDirectiveIndex}function Ab(e){$e.lFrame.currentDirectiveIndex=e}function VH(e){let t=$e.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function q1(e){$e.lFrame.currentQueryIndex=e}function GH(e){let t=e[Ae];return t.type===2?t.declTNode:t.type===1?e[Os]:null}function Z1(e,t,n){if(n&Fe.SkipSelf){let s=t,r=e;for(;s=s.parent,s===null&&!(n&Fe.Host);)if(s=GH(r),s===null||(r=r[nh],s.type&10))break;if(s===null)return!1;t=s,e=r}let i=$e.lFrame=X1();return i.currentTNode=t,i.lView=e,!0}function S0(e){let t=X1(),n=e[Ae];$e.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function X1(){let e=$e.lFrame,t=e===null?null:e.child;return t===null?Q1(e):t}function Q1(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function J1(){let e=$e.lFrame;return $e.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var eT=J1;function x0(){let e=J1();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function rh(){return $e.lFrame.selectedIndex}function gl(e){$e.lFrame.selectedIndex=e}function D0(){let e=$e.lFrame;return wm(e.tView,e.selectedIndex)}function tT(){return $e.lFrame.currentNamespace}var nT=!0;function iT(){return nT}function ha(e){nT=e}function zH(e,t,n){let{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(i){let o=G1(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),r&&((n.preOrderHooks??=[]).push(e,r),(n.preOrderCheckHooks??=[]).push(e,r))}function HH(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let r=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Pf(e,t,n){sT(e,t,3,n)}function Ff(e,t,n,i){(e[Ee]&3)===n&&sT(e,t,n,i)}function lb(e,t){let n=e[Ee];(n&3)===t&&(n&=16383,n+=1,e[Ee]=n)}function sT(e,t,n,i){let s=i!==void 0?e[Oc]&65535:0,r=i??-1,o=t.length-1,a=0;for(let l=s;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[Oc]+=65536),(a<r||r==-1)&&(jH(e,n,t,l),e[Oc]=(e[Oc]&4294901760)+l+2),l++}function ER(e,t){ts(4,e,t);let n=Ue(null);try{t.call(e)}finally{Ue(n),ts(5,e,t)}}function jH(e,t,n,i){let s=n[i]<0,r=n[i+1],o=s?-n[i]:n[i],a=e[o];s?e[Ee]>>14<e[Oc]>>16&&(e[Ee]&3)===t&&(e[Ee]+=16384,ER(a,r)):ER(a,r)}var zc=-1,fl=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,i){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=i}};function WH(e){return e instanceof fl}function UH(e){return(e.flags&8)!==0}function $H(e){return(e.flags&16)!==0}function YH(e,t,n){let i=0;for(;i<n.length;){let s=n[i];if(typeof s=="number"){if(s!==0)break;i++;let r=n[i++],o=n[i++],a=n[i++];e.setAttribute(t,o,a,r)}else{let r=s,o=n[++i];KH(r)?e.setProperty(t,r,o):e.setAttribute(t,r,o),i++}}return i}function rT(e){return e===3||e===4||e===6}function KH(e){return e.charCodeAt(0)===64}function Yf(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?n=s:n===0||(n===-1||n===2?IR(e,n,s,null,t[++i]):IR(e,n,s,null,null))}}return e}function IR(e,t,n,i,s){let r=0,o=e.length;if(t===-1)o=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===n){if(i===null){s!==null&&(e[r+1]=s);return}else if(i===e[r+1]){e[r+2]=s;return}}r++,i!==null&&r++,s!==null&&r++}o!==-1&&(e.splice(o,0,t),r=o+1),e.splice(r++,0,n),i!==null&&e.splice(r++,0,i),s!==null&&e.splice(r++,0,s)}var cb={},Hc=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=mm(i);let s=this.injector.get(t,cb,i);return s!==cb||n===cb?s:this.parentInjector.get(t,n,i)}};function oT(e){return e!==zc}function Kf(e){return e&32767}function qH(e){return e>>16}function qf(e,t){let n=qH(e),i=t;for(;n>0;)i=i[nh],n--;return i}var Rb=!0;function AR(e){let t=Rb;return Rb=e,t}var ZH=256,aT=ZH-1,lT=5,XH=0,ur={};function QH(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ud)&&(i=n[Ud]),i==null&&(i=n[Ud]=XH++);let s=i&aT,r=1<<s;t.data[e+(s>>lT)]|=r}function Zf(e,t){let n=cT(e,t);if(n!==-1)return n;let i=t[Ae];i.firstCreatePass&&(e.injectorIndex=t.length,ub(i.data,e),ub(t,null),ub(i.blueprint,null));let s=M0(e,t),r=e.injectorIndex;if(oT(s)){let o=Kf(s),a=qf(s,t),l=a[Ae].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function ub(e,t){e.push(0,0,0,0,0,0,0,0,t)}function cT(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function M0(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,s=t;for(;s!==null;){if(i=gT(s),i===null)return zc;if(n++,s=s[nh],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return zc}function Tb(e,t,n){QH(e,t,n)}function JH(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let i=n.length,s=0;for(;s<i;){let r=n[s];if(rT(r))break;if(r===0)s=s+2;else if(typeof r=="number")for(s++;s<i&&typeof n[s]=="string";)s++;else{if(r===t)return n[s+1];s=s+2}}}return null}function uT(e,t,n){if(n&Fe.Optional||e!==void 0)return e;h0(t,"NodeInjector")}function dT(e,t,n,i){if(n&Fe.Optional&&i===void 0&&(i=null),!(n&(Fe.Self|Fe.Host))){let s=e[aa],r=Ji(void 0);try{return s?s.get(t,i,n&Fe.Optional):M1(t,i,n&Fe.Optional)}finally{Ji(r)}}return uT(i,t,n)}function hT(e,t,n,i=Fe.Default,s){if(e!==null){if(t[Ee]&2048&&!(i&Fe.Self)){let o=s6(e,t,n,i,ur);if(o!==ur)return o}let r=pT(e,t,n,i,ur);if(r!==ur)return r}return dT(t,n,i,s)}function pT(e,t,n,i,s){let r=n6(n);if(typeof r=="function"){if(!Z1(t,e,i))return i&Fe.Host?uT(s,n,i):dT(t,n,i,s);try{let o;if(o=r(i),o==null&&!(i&Fe.Optional))h0(n);else return o}finally{eT()}}else if(typeof r=="number"){let o=null,a=cT(e,t),l=zc,c=i&Fe.Host?t[ns][Os]:null;for((a===-1||i&Fe.SkipSelf)&&(l=a===-1?M0(e,t):t[a+8],l===zc||!TR(i,!1)?a=-1:(o=t[Ae],a=Kf(l),t=qf(l,t)));a!==-1;){let u=t[Ae];if(RR(r,a,u.data)){let d=e6(a,t,n,o,i,c);if(d!==ur)return d}l=t[a+8],l!==zc&&TR(i,t[Ae].data[a+8]===c)&&RR(r,a,t)?(o=u,a=Kf(l),t=qf(l,t)):a=-1}}return s}function e6(e,t,n,i,s,r){let o=t[Ae],a=o.data[e+8],l=i==null?da(a)&&Rb:i!=o&&(a.type&3)!==0,c=s&Fe.Host&&r===a,u=t6(a,o,n,l,c);return u!==null?Xf(t,o,u,a):ur}function t6(e,t,n,i,s){let r=e.providerIndexes,o=t.data,a=r&1048575,l=e.directiveStart,c=e.directiveEnd,u=r>>20,d=i?a:a+u,h=s?a+u:c;for(let p=d;p<h;p++){let g=o[p];if(p<l&&n===g||p>=l&&g.type===n)return p}if(s){let p=o[l];if(p&&qr(p)&&p.type===n)return l}return null}function Xf(e,t,n,i){let s=e[n],r=t.data;if(WH(s)){let o=s;o.resolving&&Wz(jz(r[n]));let a=AR(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Ji(o.injectImpl):null,u=Z1(e,i,Fe.Default);try{s=e[n]=o.factory(void 0,r,e,i),t.firstCreatePass&&n>=i.directiveStart&&zH(n,r[n],t)}finally{c!==null&&Ji(c),AR(a),o.resolving=!1,eT()}}return s}function n6(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Ud)?e[Ud]:void 0;return typeof t=="number"?t>=0?t&aT:i6:t}function RR(e,t,n){let i=1<<e;return!!(n[t+(e>>lT)]&i)}function TR(e,t){return!(e&Fe.Self)&&!(e&Fe.Host&&t)}var ul=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return hT(this._tNode,this._lView,t,mm(i),n)}};function i6(){return new ul(_i(),Ht())}function yr(e){return gm(()=>{let t=e.prototype.constructor,n=t[Vf]||kb(t),i=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==i;){let r=s[Vf]||kb(s);if(r&&r!==n)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function kb(e){return C1(e)?()=>{let t=kb(Kn(e));return t&&t()}:Wc(e)}function s6(e,t,n,i,s){let r=e,o=t;for(;r!==null&&o!==null&&o[Ee]&2048&&!Zd(o);){let a=pT(r,o,n,i|Fe.Self,ur);if(a!==ur)return a;let l=r.parent;if(!l){let c=o[N1];if(c){let u=c.get(n,ur,i);if(u!==ur)return u}l=gT(o),o=o[nh]}r=l}return s}function gT(e){let t=e[Ae],n=t.type;return n===2?t.declTNode:n===1?e[Os]:null}function E0(e){return JH(_i(),e)}function kR(e,t=null,n=null,i){let s=fT(e,t,n,i);return s.resolveInjectorInitializers(),s}function fT(e,t=null,n=null,i,s=new Set){let r=[n||es,sH(e)];return i=i||(typeof e=="object"?void 0:mi(e)),new Kd(r,t||y0(),i||null,s)}var cn=class e{static THROW_IF_NOT_FOUND=Yd;static NULL=new Hf;static create(t,n){if(Array.isArray(t))return kR({name:""},n,t,"");{let i=t.name??"";return kR({name:i},t.parent,t.providers,i)}}static \u0275prov=re({token:e,providedIn:"any",factory:()=>Ie(I1)});static __NG_ELEMENT_ID__=-1};var r6=new se("");r6.__NG_ELEMENT_ID__=e=>{let t=_i();if(t===null)throw new ce(204,!1);if(t.type&2)return t.value;if(e&Fe.Optional)return null;throw new ce(204,!1)};var mT=!1,eu=(()=>{class e{static __NG_ELEMENT_ID__=o6;static __NG_ENV_ID__=n=>n}return e})(),Qf=class extends eu{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return W1(this._lView,t),()=>xH(this._lView,t)}};function o6(){return new Qf(Ht())}var Zr=class{},xm=new se("",{providedIn:"root",factory:()=>!1});var vT=new se(""),I0=new se(""),_s=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Sn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),a6=(()=>{class e{internalPendingTasks=_(_s);scheduler=_(Zr);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(n))}}async run(n){let i=this.add();try{return await n()}finally{i()}}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),Lb=class extends St{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,F1()&&(this.destroyRef=_(eu,{optional:!0})??void 0,this.pendingTasks=_(_s,{optional:!0})??void 0)}emit(t){let n=Ue(null);try{super.next(t)}finally{Ue(n)}}subscribe(t,n,i){let s=t,r=n||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=this.wrapInTimeout(r),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:s,error:r,complete:o});return t instanceof _t&&t.add(a),a}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(n),i!==void 0&&this.pendingTasks?.remove(i)})}}},N=Lb;function Xd(...e){}function yT(e){let t,n;function i(){e=Xd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function LR(e){return queueMicrotask(()=>e()),()=>{e=Xd}}var A0="isAngularZone",Jf=A0+"_ID",l6=0,lt=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new N(!1);onMicrotaskEmpty=new N(!1);onStable=new N(!1);onError=new N(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:r=mT}=t;if(typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&i,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=r,d6(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(A0)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ce(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,s){let r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,c6,Xd,Xd);try{return r.runTask(o,n,i)}finally{r.cancelTask(o)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},c6={};function R0(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function u6(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){yT(()=>{e.callbackScheduled=!1,Pb(e),e.isCheckStableRunning=!0,R0(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Pb(e)}function d6(e){let t=()=>{u6(e)},n=l6++;e._inner=e._inner.fork({name:"angular",properties:{[A0]:!0,[Jf]:n,[Jf+n]:!0},onInvokeTask:(i,s,r,o,a,l)=>{if(h6(l))return i.invokeTask(r,o,a,l);try{return PR(e),i.invokeTask(r,o,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),FR(e)}},onInvoke:(i,s,r,o,a,l,c)=>{try{return PR(e),i.invoke(r,o,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!p6(l)&&t(),FR(e)}},onHasTask:(i,s,r,o)=>{i.hasTask(r,o),s===r&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,Pb(e),R0(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,s,r,o)=>(i.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function Pb(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function PR(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function FR(e){e._nesting--,R0(e)}var em=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new N;onMicrotaskEmpty=new N;onStable=new N;onError=new N;run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,s){return t.apply(n,i)}};function h6(e){return CT(e,"__ignore_ng_zone__")}function p6(e){return CT(e,"__scheduler_tick__")}function CT(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var gr=class{_console=console;handleError(t){this._console.error("ERROR",t)}},g6=new se("",{providedIn:"root",factory:()=>{let e=_(lt),t=_(gr);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function NR(e,t){return y1(e,t)}function f6(e){return y1(v1,e)}var wT=(NR.required=f6,NR);function m6(){return T0(_i(),Ht())}function T0(e,t){return new vi(ss(e,t))}var vi=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=m6}return e})();var OR=new Set;function Bi(e){OR.has(e)||(OR.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function v6(e){return typeof e=="function"&&e[Fn]!==void 0}function On(e,t){Bi("NgSignals");let n=yA(e),i=n[Fn];return t?.equal&&(i.equal=t.equal),n.set=s=>Vd(i,s),n.update=s=>Ew(i,s),n.asReadonly=k0.bind(n),n}function k0(){let e=this[Fn];if(e.readonlyFn===void 0){let t=()=>this();t[Fn]=e,e.readonlyFn=t}return e.readonlyFn}function bT(e){return v6(e)&&typeof e.set=="function"}var y6="ngSkipHydration",C6="ngskiphydration";function ST(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let i=t[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===C6)return!0}return!1}function xT(e){return e.hasAttribute(y6)}function tm(e){return(e.flags&128)===128}function w6(e){if(tm(e))return!0;let t=e.parent;for(;t;){if(tm(e)||ST(t))return!0;t=t.parent}return!1}var DT=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(DT||{}),MT=new Map,b6=0;function S6(){return b6++}function x6(e){MT.set(e[Cm],e)}function Fb(e){MT.delete(e[Cm])}var _R="__ngContext__";function oh(e,t){Fs(t)?(e[_R]=t[Cm],x6(t)):e[_R]=t}function ET(e){return AT(e[qd])}function IT(e){return AT(e[Ps])}function AT(e){for(;e!==null&&!mr(e);)e=e[Ps];return e}var Nb;function RT(e){Nb=e}function Dm(){if(Nb!==void 0)return Nb;if(typeof document<"u")return document;throw new ce(210,!1)}var ml=new se("",{providedIn:"root",factory:()=>D6}),D6="ng",L0=new se(""),pa=new se("",{providedIn:"platform",factory:()=>"unknown"});var P0=new se("",{providedIn:"root",factory:()=>Dm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function M6(){let e=new yl;return _(pa)==="browser"&&(e.store=E6(Dm(),_(ml))),e}var yl=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:M6});store={};onSerializeCallbacks={};get(n,i){return this.store[n]!==void 0?this.store[n]:i}set(n,i){this.store[n]=i}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,i){this.onSerializeCallbacks[n]=i}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function E6(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var TT="h",kT="b",I6="f",A6="n",R6="e",T6="t",F0="c",LT="x",nm="r",k6="i",L6="n",PT="d";var P6="di",F6="s",N6="p";var Df=new se(""),FT=!1,NT=new se("",{providedIn:"root",factory:()=>FT});var OT=new se(""),O6=!1,_6=new se(""),BR=new se("",{providedIn:"root",factory:()=>new Map}),N0=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(N0||{}),tu=new se("");var _c=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(_c||{}),_T=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),B6=[_c.EarlyRead,_c.Write,_c.MixedReadWrite,_c.Read],V6=(()=>{class e{ngZone=_(lt);scheduler=_(Zr);errorHandler=_(gr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){_(tu,{optional:!0})}execute(){this.executing=!0;for(let n of B6)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[n]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>i.hooks[n](i.pipelinedValue),i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(7))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,i){return i?i.run(N0.AFTER_NEXT_RENDER,n):n()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ob=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,i,s,r=null){this.impl=t,this.hooks=n,this.once=i,this.snapshot=r,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function O0(e,t){!t?.injector&&ym(O0);let n=t?.injector??_(cn);return Bi("NgAfterNextRender"),z6(e,n,t,!0)}function G6(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function z6(e,t,n,i){let s=t.get(_T);s.impl??=t.get(V6);let r=t.get(tu,null,{optional:!0}),o=n?.phase??_c.MixedReadWrite,a=n?.manualCleanup!==!0?t.get(eu):null,l=new Ob(s.impl,G6(e,o),i,a,r?.snapshot(null));return s.impl.register(l),l}var Li=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(Li||{}),VR=0,H6=1,mn=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(mn||{});var j6=0,_0=1;var W6=4,U6=5;var $6=7,jc=8,Y6=9,BT=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(BT||{});function Nf(e,t){let n=q6(e),i=t[n];if(i!==null){for(let s of i)s();t[n]=null}}function K6(e){Nf(1,e),Nf(0,e),Nf(2,e)}function q6(e){let t=W6;return e===1?t=U6:e===2&&(t=Y6),t}function VT(e){return e+1}function Mm(e,t){let n=e[Ae],i=VT(t.index);return e[i]}function Em(e,t){let n=VT(t.index);return e.data[n]}function Z6(e,t,n){let i=t[Ae],s=Em(i,n);switch(e){case mn.Complete:return s.primaryTmplIndex;case mn.Loading:return s.loadingTmplIndex;case mn.Error:return s.errorTmplIndex;case mn.Placeholder:return s.placeholderTmplIndex;default:return null}}function GR(e,t){return t===mn.Placeholder?e.placeholderBlockConfig?.[VR]??null:t===mn.Loading?e.loadingBlockConfig?.[VR]??null:null}function X6(e){return e.loadingBlockConfig?.[H6]??null}function zR(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let i of t)n.add(i);return e.length===n.size?e:Array.from(n)}function Q6(e,t){let n=t.primaryTmplIndex+Nn;return wm(e,n)}var Im="ngb";var J6=(e,t,n)=>{let i=e,s=i.__jsaction_fns??new Map,r=s.get(t)??[];r.push(n),s.set(t,r),i.__jsaction_fns=s},ej=(e,t)=>{let n=e.getAttribute(Im)??"",i=e,s=t.get(n)??new Set;s.has(i)||s.add(i),t.set(n,s)};var tj=e=>{e.removeAttribute(eb.JSACTION),e.removeAttribute(Im),e.__jsaction_fns=void 0},nj=new se("",{providedIn:"root",factory:()=>({})});function GT(e,t){let n=t?.__jsaction_fns?.get(e.type);if(n)for(let i of n)i(e)}var zT=new se("");var ij="__nghData__",HT=ij,sj="__nghDeferData__",rj=sj,db="ngh",oj="nghm",jT=()=>null;function aj(e,t,n=!1){let i=e.getAttribute(db);if(i==null)return null;let[s,r]=i.split("|");if(i=n?r:s,!i)return null;let o=r?`|${r}`:"",a=n?s:o,l={};if(i!==""){let u=t.get(yl,null,{optional:!0});u!==null&&(l=u.get(HT,[])[Number(i)])}let c={data:l,firstChild:e.firstChild??null};return n&&(c.firstChild=e,Am(c,0,e.nextSibling)),a?e.setAttribute(db,a):e.removeAttribute(db),c}function lj(){jT=aj}function WT(e,t,n=!1){return jT(e,t,n)}function cj(e){let t=e._lView;return t[Ae].type===2?null:(Zd(t)&&(t=t[Nn]),t)}function uj(e){return e.textContent?.replace(/\s/gm,"")}function dj(e){let t=Dm(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(r){let o=uj(r);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,s=[];for(;i=n.nextNode();)s.push(i);for(let r of s)r.textContent==="ngetn"?r.replaceWith(t.createTextNode("")):r.remove()}function Am(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function _b(e,t){return e.segmentHeads?.[t]??null}function hj(e){return e.get(_6,!1,{optional:!0})}function pj(e,t){let n=e.data,i=n[R6]?.[t]??null;return i===null&&n[F0]?.[t]&&(i=B0(e,t)),i}function UT(e,t){return e.data[F0]?.[t]??null}function B0(e,t){let n=UT(e,t)??[],i=0;for(let s of n)i+=s[nm]*(s[LT]??1);return i}function gj(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[PT];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function ah(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[PT];e.disconnectedNodes=n?new Set(n):null}return!!gj(e)?.has(t)}function fj(e,t){let n=t.get(zT),s=t.get(yl).get(rj,{}),r=!1,o=e,a=null,l=[];for(;!r&&o;){r=n.has(o);let c=n.hydrating.get(o);if(a===null&&c!=null){a=c.promise;break}l.unshift(o),o=s[o][N6]}return{parentBlockPromise:a,hydrationQueue:l}}function $T(e,t){let n=e.contentQueries;if(n!==null){let i=Ue(null);try{for(let s=0;s<n.length;s+=2){let r=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];q1(r),a.contentQueries(2,t[o],o)}}}finally{Ue(i)}}}function Bb(e,t,n){q1(0);let i=Ue(null);try{t(e,n)}finally{Ue(i)}}function YT(e,t,n){if(_1(t)){let i=Ue(null);try{let s=t.directiveStart,r=t.directiveEnd;for(let o=s;o<r;o++){let a=e.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{Ue(i)}}}var fr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(fr||{}),Mf;function mj(){if(Mf===void 0&&(Mf=null,$d.trustedTypes))try{Mf=$d.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Mf}function Rm(e){return mj()?.createHTML(e)||e}var Ef;function vj(){if(Ef===void 0&&(Ef=null,$d.trustedTypes))try{Ef=$d.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ef}function HR(e){return vj()?.createScriptURL(e)||e}var Xr=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${m1})`}},Vb=class extends Xr{getTypeName(){return"HTML"}},Gb=class extends Xr{getTypeName(){return"Style"}},zb=class extends Xr{getTypeName(){return"Script"}},Hb=class extends Xr{getTypeName(){return"URL"}},jb=class extends Xr{getTypeName(){return"ResourceURL"}};function Cr(e){return e instanceof Xr?e.changingThisBreaksApplicationSecurity:e}function ga(e,t){let n=yj(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${m1})`)}return n===t}function yj(e){return e instanceof Xr&&e.getTypeName()||null}function KT(e){return new Vb(e)}function qT(e){return new Gb(e)}function ZT(e){return new zb(e)}function XT(e){return new Hb(e)}function QT(e){return new jb(e)}function Cj(e){let t=new Ub(e);return wj()?new Wb(t):t}var Wb=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(Rm(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},Ub=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=Rm(t),n}};function wj(){try{return!!new window.DOMParser().parseFromString(Rm(""),"text/html")}catch{return!1}}var bj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Tm(e){return e=String(e),e.match(bj)?e:"unsafe:"+e}function to(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function lh(...e){let t={};for(let n of e)for(let i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}var JT=to("area,br,col,hr,img,wbr"),ek=to("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tk=to("rp,rt"),Sj=lh(tk,ek),xj=lh(ek,to("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dj=lh(tk,to("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jR=lh(JT,xj,Dj,Sj),nk=to("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mj=to("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ej=to("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Ij=lh(nk,Mj,Ej),Aj=to("script,style,template"),$b=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let n=t.firstChild,i=!0,s=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){s.push(n),n=kj(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=Tj(n);if(r){n=r;break}n=s.pop()}}return this.buf.join("")}startElement(t){let n=WR(t).toLowerCase();if(!jR.hasOwnProperty(n))return this.sanitizedSomething=!0,!Aj.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=t.attributes;for(let s=0;s<i.length;s++){let r=i.item(s),o=r.name,a=o.toLowerCase();if(!Ij.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;nk[a]&&(l=Tm(l)),this.buf.push(" ",o,'="',UR(l),'"')}return this.buf.push(">"),!0}endElement(t){let n=WR(t).toLowerCase();jR.hasOwnProperty(n)&&!JT.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(UR(t))}};function Rj(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Tj(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw ik(t);return t}function kj(e){let t=e.firstChild;if(t&&Rj(e,t))throw ik(t);return t}function WR(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function ik(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var Lj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pj=/([^\#-~ |!])/g;function UR(e){return e.replace(/&/g,"&amp;").replace(Lj,function(t){let n=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(Pj,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var If;function sk(e,t){let n=null;try{If=If||Cj(e);let i=t?String(t):"";n=If.getInertBodyElement(i);let s=5,r=i;do{if(s===0)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=n.innerHTML,n=If.getInertBodyElement(i)}while(i!==r);let a=new $b().sanitizeChildren($R(n)||n);return Rm(a)}finally{if(n){let i=$R(n)||n;for(;i.firstChild;)i.firstChild.remove()}}}function $R(e){return"content"in e&&Fj(e)?e.content:null}function Fj(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var wr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(wr||{});function Nj(e){let t=ok();return t?t.sanitize(wr.URL,e)||"":ga(e,"URL")?Cr(e):Tm(d0(e))}function Oj(e){let t=ok();if(t)return HR(t.sanitize(wr.RESOURCE_URL,e)||"");if(ga(e,"ResourceURL"))return HR(Cr(e));throw new ce(904,!1)}function _j(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Oj:Nj}function rk(e,t,n){return _j(t,n)(e)}function ok(){let e=Ht();return e&&e[Yr].sanitizer}var Bj=/^>|^->|<!--|-->|--!>|<!-$/g,Vj=/(<|>)/g,Gj="\u200B$1\u200B";function zj(e){return e.replace(Bj,t=>t.replace(Vj,Gj))}function Hj(e){return e.ownerDocument.body}function ak(e){return e instanceof Function?e():e}function jj(e,t,n){let i=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let r=t.length;if(s+r===i||e.charCodeAt(s+r)<=32)return s}n=s+1}}var lk="ng-template";function Wj(e,t,n,i){let s=0;if(i){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&jj(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(V0(e))return!1;if(s=t.indexOf(1,s),s>-1){let r;for(;++s<t.length&&typeof(r=t[s])=="string";)if(r.toLowerCase()===n)return!0}return!1}function V0(e){return e.type===4&&e.value!==lk}function Uj(e,t,n){let i=e.type===4&&!n?lk:e.value;return t===i}function $j(e,t,n){let i=4,s=e.attrs,r=s!==null?qj(s):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!Ls(i)&&!Ls(l))return!1;if(o&&Ls(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!Uj(e,l,n)||l===""&&t.length===1){if(Ls(i))return!1;o=!0}}else if(i&8){if(s===null||!Wj(e,s,l,n)){if(Ls(i))return!1;o=!0}}else{let c=t[++a],u=Yj(l,s,V0(e),n);if(u===-1){if(Ls(i))return!1;o=!0;continue}if(c!==""){let d;if(u>r?d="":d=s[u+1].toLowerCase(),i&2&&c!==d){if(Ls(i))return!1;o=!0}}}}return Ls(i)||o}function Ls(e){return(e&1)===0}function Yj(e,t,n,i){if(t===null)return-1;let s=0;if(i||!n){let r=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)r=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=r?1:2}return-1}else return Zj(t,e)}function Kj(e,t,n=!1){for(let i=0;i<t.length;i++)if($j(e,t[i],n))return!0;return!1}function qj(e){for(let t=0;t<e.length;t++){let n=e[t];if(rT(n))return t}return e.length}function Zj(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function YR(e,t){return e?":not("+t.trim()+")":t}function Xj(e){let t=e[0],n=1,i=2,s="",r=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(i&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?s+="."+o:i&4&&(s+=" "+o);else s!==""&&!Ls(o)&&(t+=YR(r,s),s=""),i=o,r=r||!Ls(i);n++}return s!==""&&(t+=YR(r,s)),t}function Qj(e){return e.map(Xj).join(",")}function Jj(e){let t=[],n=[],i=1,s=2;for(;i<e.length;){let r=e[i];if(typeof r=="string")s===2?r!==""&&t.push(r,e[++i]):s===8&&n.push(r);else{if(!Ls(s))break;s=r}i++}return n.length&&t.push(1,...n),t}var km={};function ck(e,t){return e.createText(t)}function uk(e,t){return e.createComment(zj(t))}function G0(e,t,n){return e.createElement(t,n)}function im(e,t,n,i,s){e.insertBefore(t,n,i,s)}function dk(e,t,n){e.appendChild(t,n)}function KR(e,t,n,i,s){i!==null?im(e,t,n,i,s):dk(e,t,n)}function z0(e,t,n){e.removeChild(null,t,n)}function hk(e){e.textContent=""}function e8(e,t,n){e.setAttribute(t,"style",n)}function t8(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function pk(e,t,n){let{mergedAttrs:i,classes:s,styles:r}=n;i!==null&&YH(e,t,i),s!==null&&t8(e,t,s),r!==null&&e8(e,t,r)}function no(e=1){gk(rs(),Ht(),rh()+e,!1)}function gk(e,t,n,i){if(!i)if((t[Ee]&3)===3){let r=e.preOrderCheckHooks;r!==null&&Pf(t,r,n)}else{let r=e.preOrderHooks;r!==null&&Ff(t,r,0,n)}gl(n)}var la=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(la||{});function fk(e,t,n,i,s,r){let o=Ue(null);try{let a=null;s&la.SignalBased&&(a=t[i][Fn]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),s&la.HasDecoratorInputTransform&&(r=e.inputTransforms[i].call(t,r)),e.setInput!==null?e.setInput(t,a,r,n,i):V1(t,a,i,r)}finally{Ue(o)}}function H0(e,t,n,i,s,r,o,a,l,c,u){let d=t.blueprint.slice();return d[Oi]=s,d[Ee]=i|4|128|8|64|1024,(c!==null||e&&e[Ee]&2048)&&(d[Ee]|=2048),j1(d),d[Mn]=d[nh]=e,d[hr]=n,d[Yr]=o||e&&e[Yr],d[It]=a||e&&e[It],d[aa]=l||e&&e[aa]||null,d[Os]=r,d[Cm]=S6(),d[dr]=u,d[N1]=c,d[ns]=t.type==2?e[ns]:d,d}function mk(e,t,n,i,s){let r=rh(),o=i&2;try{gl(-1),o&&t.length>Nn&&gk(e,t,Nn,!1),ts(o?2:0,s),n(i,s)}finally{gl(r),ts(o?3:1,s)}}function n8(e,t,n){U1()&&(oh(ss(n,t),t),vk(e,t,n))}function vk(e,t,n){h8(e,t,n),(n.flags&64)===64&&p8(e,t,n)}function i8(e,t,n=ss){let i=t.localNames;if(i!==null){let s=t.index+1;for(let r=0;r<i.length;r+=2){let o=i[r+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function s8(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=yk(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function yk(e,t,n,i,s,r,o,a,l,c,u){let d=Nn+i,h=d+s,p=r8(d,h),g=typeof c=="function"?c():c;return p[Ae]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function r8(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:km);return n}function o8(e,t,n,i){let r=i.get(NT,FT)||n===fr.ShadowDom,o=e.selectRootElement(t,r);return a8(o),o}function a8(e){Ck(e)}var Ck=()=>null;function l8(e){xT(e)?hk(e):dj(e)}function c8(){Ck=l8}function u8(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function wk(e,t,n,i,s,r,o,a){let l=ss(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[i])?(j0(e,n,u,i,s),da(t)&&d8(n,t.index)):t.type&3?(i=u8(i),s=o!=null?o(s,t.value||"",i):s,r.setProperty(l,i,s)):t.type&12}function d8(e,t){let n=pr(t,e);n[Ee]&16||(n[Ee]|=64)}function h8(e,t,n){let i=n.directiveStart,s=n.directiveEnd;da(n)&&m8(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Zf(n,t);let r=n.initialInputs;for(let o=i;o<s;o++){let a=e.data[o],l=Xf(t,e,o,n);if(oh(l,t),r!==null&&C8(t,o-i,l,a,n,r),qr(a)){let c=pr(n.index,t);c[hr]=Xf(t,e,o,n)}}}function p8(e,t,n){let i=n.directiveStart,s=n.directiveEnd,r=n.index,o=BH();try{gl(r);for(let a=i;a<s;a++){let l=e.data[a],c=t[a];Ab(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&g8(l,c)}}finally{gl(-1),Ab(o)}}function g8(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function f8(e,t){let n=e.directiveRegistry,i=null;if(n)for(let s=0;s<n.length;s++){let r=n[s];Kj(t,r.selectors,!1)&&(i??=[],qr(r)?i.unshift(r):i.push(r))}return i}function bk(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function m8(e,t,n){let i=ss(t,e),s=s8(n),r=e[Yr].rendererFactory,o=Sk(e,H0(e,s,null,bk(n),i,t,null,r.createRenderer(i,n),null,null,null));return e[t.index]=o}function v8(e,t,n,i,s,r){let o=ss(e,t);y8(t[It],o,r,e.value,n,i,s)}function y8(e,t,n,i,s,r,o){if(r==null)e.removeAttribute(t,s,n);else{let a=o==null?d0(r):o(r,i||"",s);e.setAttribute(t,s,a,n)}}function C8(e,t,n,i,s,r){let o=r[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];fk(i,n,l,c,u,d)}}function w8(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function Sk(e,t){return e[qd]?e[xR][Ps]=t:e[qd]=t,e[xR]=t,t}function Lm(e,t){let n=e[aa],i=n?n.get(gr,null):null;i&&i.handleError(t)}function j0(e,t,n,i,s){for(let r=0;r<n.length;){let o=n[r++],a=n[r++],l=n[r++],c=t[o],u=e.data[o];fk(u,c,i,a,l,s)}}function b8(e,t){let n=pr(t,e),i=n[Ae];S8(i,n);let s=n[Oi];s!==null&&n[dr]===null&&(n[dr]=WT(s,n[aa])),W0(i,n,n[hr])}function S8(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function W0(e,t,n){S0(t);try{let i=e.viewQuery;i!==null&&Bb(1,i,n);let s=e.template;s!==null&&mk(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Kc]?.finishViewCreation(e),e.staticContentQueries&&$T(e,t),e.staticViewQueries&&Bb(2,e.viewQuery,n);let r=e.components;r!==null&&x8(t,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Ee]&=-5,x0()}}function x8(e,t){for(let n=0;n<t.length;n++)b8(e,t[n])}var Qr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Qr||{}),D8;function U0(e,t){return D8(e,t)}function nu(e){return(e.flags&32)===32}function Bc(e,t,n,i,s){if(i!=null){let r,o=!1;mr(i)?r=i:Fs(i)&&(o=!0,i=i[Oi]);let a=Ns(i);e===0&&n!==null?s==null?dk(t,n,a):im(t,n,a,s||null,!0):e===1&&n!==null?im(t,n,a,s||null,!0):e===2?z0(t,a,o):e===3&&t.destroyNode(a),r!=null&&_8(t,e,r,n,s)}}function M8(e,t){xk(e,t),t[Oi]=null,t[Os]=null}function E8(e,t,n,i,s,r){i[Oi]=s,i[Os]=t,Pm(e,i,n,1,s,r)}function xk(e,t){t[Yr].changeDetectionScheduler?.notify(10),Pm(e,t,t[It],2,null,null)}function I8(e){let t=e[qd];if(!t)return hb(e[Ae],e);for(;t;){let n=null;if(Fs(t))n=t[qd];else{let i=t[Fi];i&&(n=i)}if(!n){for(;t&&!t[Ps]&&t!==e;)Fs(t)&&hb(t[Ae],t),t=t[Mn];t===null&&(t=e),Fs(t)&&hb(t[Ae],t),n=t&&t[Ps]}t=n}}function A8(e,t,n,i){let s=Fi+i,r=n.length;i>0&&(n[s-1][Ps]=t),i<r-Fi?(t[Ps]=n[s],E1(n,Fi+i,t)):(n.push(t),t[Ps]=null),t[Mn]=n;let o=t[Yc];o!==null&&n!==o&&Dk(o,t);let a=t[Kc];a!==null&&a.insertView(e),Eb(t),t[Ee]|=128}function Dk(e,t){let n=e[Uf],i=t[Mn];if(Fs(i))e[Ee]|=2;else{let s=i[Mn][ns];t[ns]!==s&&(e[Ee]|=2)}n===null?e[Uf]=[t]:n.push(t)}function $0(e,t){let n=e[Uf],i=n.indexOf(t);n.splice(i,1)}function sm(e,t){if(e.length<=Fi)return;let n=Fi+t,i=e[n];if(i){let s=i[Yc];s!==null&&s!==e&&$0(s,i),t>0&&(e[n-1][Ps]=i[Ps]);let r=zf(e,Fi+t);M8(i[Ae],i);let o=r[Kc];o!==null&&o.detachView(r[Ae]),i[Mn]=null,i[Ps]=null,i[Ee]&=-129}return i}function Y0(e,t){if(Jc(t))return;let n=t[It];n.destroyNode&&Pm(e,t,n,3,null,null),I8(t)}function hb(e,t){if(Jc(t))return;let n=Ue(null);try{t[Ee]&=-129,t[Ee]|=256,t[Pi]&&Sc(t[Pi]),T8(e,t),R8(e,t),t[Ae].type===1&&t[It].destroy();let i=t[Yc];if(i!==null&&mr(t[Mn])){i!==t[Mn]&&$0(i,t);let s=t[Kc];s!==null&&s.detachView(e)}Fb(t)}finally{Ue(n)}}function R8(e,t){let n=e.cleanup,i=t[jf];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[n[o+1]];n[o].call(a)}i!==null&&(t[jf]=null);let s=t[sa];if(s!==null){t[sa]=null;for(let o=0;o<s.length;o++){let a=s[o];a()}}let r=t[dl];if(r!==null){t[dl]=null;for(let o of r)o.destroy()}}function T8(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let s=t[n[i]];if(!(s instanceof fl)){let r=n[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){let a=s[r[o]],l=r[o+1];ts(4,a,l);try{l.call(a)}finally{ts(5,a,l)}}else{ts(4,s,r);try{r.call(s)}finally{ts(5,s,r)}}}}}function k8(e,t,n){return L8(e,t.parent,n)}function L8(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[Oi];if(da(i)){let{encapsulation:s}=e.data[i.directiveStart+i.componentOffset];if(s===fr.None||s===fr.Emulated)return null}return ss(i,n)}function P8(e,t,n){return N8(e,t,n)}function F8(e,t,n){return e.type&40?ss(e,n):null}var N8=F8,qR;function Mk(e,t,n,i){let s=k8(e,i,t),r=t[It],o=i.parent||t[Os],a=P8(o,i,t);if(s!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)KR(r,s,n[l],a,!1);else KR(r,s,n,a,!1);qR!==void 0&&qR(r,i,t,n,s)}function Wd(e,t){if(t!==null){let n=t.type;if(n&3)return ss(t,e);if(n&4)return Yb(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return Wd(e,i);{let s=e[t.index];return mr(s)?Yb(-1,s):Ns(s)}}else{if(n&128)return Wd(e,t.next);if(n&32)return U0(t,e)()||Ns(e[t.index]);{let i=Ek(e,t);if(i!==null){if(Array.isArray(i))return i[0];let s=pl(e[ns]);return Wd(s,i)}else return Wd(e,t.next)}}}return null}function Ek(e,t){if(t!==null){let i=e[ns][Os],s=t.projection;return i.projection[s]}return null}function Yb(e,t){let n=Fi+e+1;if(n<t.length){let i=t[n],s=i[Ae].firstChild;if(s!==null)return Wd(i,s)}return t[Kr]}function K0(e,t,n,i,s,r,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=i[n.index],l=n.type;if(o&&t===0&&(a&&oh(Ns(a),i),n.flags|=2),!nu(n))if(l&8)K0(e,t,n.child,i,s,r,!1),Bc(t,e,s,a,r);else if(l&32){let c=U0(n,i),u;for(;u=c();)Bc(t,e,s,u,r);Bc(t,e,s,a,r)}else l&16?O8(e,t,i,n,s,r):Bc(t,e,s,a,r);n=o?n.projectionNext:n.next}}function Pm(e,t,n,i,s,r){K0(n,i,e.firstChild,t,s,r,!1)}function O8(e,t,n,i,s,r){let o=n[ns],l=o[Os].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Bc(t,e,s,u,r)}else{let c=l,u=o[Mn];tm(i)&&(c.flags|=128),K0(e,t,c,u,s,r,!0)}}function _8(e,t,n,i,s){let r=n[Kr],o=Ns(n);r!==o&&Bc(t,e,i,r,s);for(let a=Fi;a<n.length;a++){let l=n[a];Pm(l[Ae],l,e,t,i,r)}}function B8(e,t,n,i,s){if(t)s?e.addClass(n,i):e.removeClass(n,i);else{let r=i.indexOf("-")===-1?void 0:Qr.DashCase;s==null?e.removeStyle(n,i,r):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Qr.Important),e.setStyle(n,i,s,r))}}function V8(e,t,n,i){let s=Ue(null);try{let r=t.tView,a=e[Ee]&4096?4096:16,l=H0(e,r,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[Yc]=c;let u=e[Kc];return u!==null&&(l[Kc]=u.createEmbeddedView(r)),W0(r,l,n),l}finally{Ue(s)}}function Kb(e,t){return!t||t.firstChild===null||tm(e)}function Ik(e,t,n,i=!0){let s=t[Ae];if(A8(s,t,e,n),i){let o=Yb(n,e),a=t[It],l=a.parentNode(e[Kr]);l!==null&&E8(s,e[Os],a,t,l,o)}let r=t[dr];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function G8(e,t){let n=sm(e,t);return n!==void 0&&Y0(n[Ae],n),n}function rm(e,t,n,i,s=!1){for(;n!==null;){if(n.type===128){n=s?n.projectionNext:n.next;continue}let r=t[n.index];r!==null&&i.push(Ns(r)),mr(r)&&z8(r,i);let o=n.type;if(o&8)rm(e,t,n.child,i);else if(o&32){let a=U0(n,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=Ek(t,n);if(Array.isArray(a))i.push(...a);else{let l=pl(t[ns]);rm(l[Ae],l,a,i,!0)}}n=s?n.projectionNext:n.next}return i}function z8(e,t){for(let n=Fi;n<e.length;n++){let i=e[n],s=i[Ae].firstChild;s!==null&&rm(i[Ae],i,s,t)}e[Kr]!==e[Oi]&&t.push(e[Kr])}var Ak=[];function H8(e){return e[Pi]??j8(e)}function j8(e){let t=Ak.pop()??Object.create(U8);return t.lView=e,t}function W8(e){e.lView[Pi]!==e&&(e.lView=null,Ak.push(e))}var U8=R(S({},Xo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ih(e.lView)},consumerOnSignalRead(){this.lView[Pi]=this}});function $8(e){let t=e[Pi]??Object.create(Y8);return t.lView=e,t}var Y8=R(S({},Xo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=pl(e.lView);for(;t&&!Rk(t[Ae]);)t=pl(t);t&&w0(t)},consumerOnSignalRead(){this.lView[Pi]=this}});function Rk(e){return e.type!==2}function Tk(e){if(e[dl]===null)return;let t=!0;for(;t;){let n=!1;for(let i of e[dl])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=n&&!!(e[Ee]&8192)}}var K8=100;function kk(e,t=!0,n=0){let s=e[Yr].rendererFactory,r=!1;r||s.begin?.();try{q8(e,n)}catch(o){throw t&&Lm(e,o),o}finally{r||s.end?.()}}function q8(e,t){let n=K1();try{$f(!0),qb(e,t);let i=0;for(;bm(e);){if(i===K8)throw new ce(103,!1);i++,qb(e,1)}}finally{$f(n)}}function Z8(e,t,n,i){if(Jc(t))return;let s=t[Ee],r=!1,o=!1;S0(t);let a=!0,l=null,c=null;r||(Rk(e)?(c=H8(t),l=tl(c)):aA()===null?(a=!1,c=$8(t),l=tl(c)):t[Pi]&&(Sc(t[Pi]),t[Pi]=null));try{j1(t),FH(e.bindingStartIndex),n!==null&&mk(e,t,n,2,i);let u=(s&3)===3;if(!r)if(u){let p=e.preOrderCheckHooks;p!==null&&Pf(t,p,null)}else{let p=e.preOrderHooks;p!==null&&Ff(t,p,0,null),lb(t,0)}if(o||X8(t),Tk(t),Lk(t,0),e.contentQueries!==null&&$T(e,t),!r)if(u){let p=e.contentCheckHooks;p!==null&&Pf(t,p)}else{let p=e.contentHooks;p!==null&&Ff(t,p,1),lb(t,1)}J8(e,t);let d=e.components;d!==null&&Fk(t,d,0);let h=e.viewQuery;if(h!==null&&Bb(2,h,i),!r)if(u){let p=e.viewCheckHooks;p!==null&&Pf(t,p)}else{let p=e.viewHooks;p!==null&&Ff(t,p,2),lb(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Lf]){for(let p of t[Lf])p();t[Lf]=null}r||(t[Ee]&=-73)}catch(u){throw r||ih(t),u}finally{c!==null&&(bc(c,l),a&&W8(c)),x0()}}function Lk(e,t){for(let n=ET(e);n!==null;n=IT(n))for(let i=Fi;i<n.length;i++){let s=n[i];Pk(s,t)}}function X8(e){for(let t=ET(e);t!==null;t=IT(t)){if(!(t[Ee]&2))continue;let n=t[Uf];for(let i=0;i<n.length;i++){let s=n[i];w0(s)}}}function Q8(e,t,n){let i=pr(t,e);Pk(i,n)}function Pk(e,t){C0(e)&&qb(e,t)}function qb(e,t){let i=e[Ae],s=e[Ee],r=e[Pi],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(r?.dirty&&Bd(r)),o||=!1,r&&(r.dirty=!1),e[Ee]&=-9217,o)Z8(i,e,i.template,e[hr]);else if(s&8192){Tk(e),Lk(e,1);let a=i.components;a!==null&&Fk(e,a,1)}}function Fk(e,t,n){for(let i=0;i<t.length;i++)Q8(e,t[i],n)}function J8(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let s=n[i];if(s<0)gl(~s);else{let r=s,o=n[++i],a=n[++i];_H(o,r);let l=t[r];ts(24,l),a(2,l),ts(25,l)}}}finally{gl(-1)}}function Fm(e,t){let n=K1()?64:1088;for(e[Yr].changeDetectionScheduler?.notify(t);e;){e[Ee]|=n;let i=pl(e);if(Zd(e)&&!i)return e;e=i}return null}var qc=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[Ae];return rm(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i}get context(){return this._lView[hr]}get dirty(){return!!(this._lView[Ee]&9280)||!!this._lView[Pi]?.dirty}set context(t){this._lView[hr]=t}get destroyed(){return Jc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Mn];if(mr(t)){let n=t[Wf],i=n?n.indexOf(this):-1;i>-1&&(sm(t,i),zf(n,i))}this._attachedToViewContainer=!1}Y0(this._lView[Ae],this._lView)}onDestroy(t){W1(this._lView,t)}markForCheck(){Fm(this._cdRefInjectingView||this._lView,4)}markForRefresh(){w0(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ee]&=-129}reattach(){Eb(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,kk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Zd(this._lView),n=this._lView[Yc];n!==null&&!t&&$0(n,this._lView),xk(this._lView[Ae],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=t;let n=Zd(this._lView),i=this._lView[Yc];i!==null&&!n&&Dk(i,this._lView),Eb(this._lView)}};function Nk(e,t,n,i,s){let r=e.data[t];if(r===null)r=e5(e,t,n,i,s),OH()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=i,r.attrs=s;let o=LH();r.injectorIndex=o===null?-1:o.injectorIndex}return Sm(r,!0),r}function e5(e,t,n,i,s){let r=$1(),o=Y1(),a=o?r:r&&r.parent,l=e.data[t]=n5(e,a,n,t,i,s);return t5(e,l,r,o),l}function t5(e,t,n,i){e.firstChild===null&&(e.firstChild=t),n!==null&&(i?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function n5(e,t,n,i,s,r){let o=t?t.injectorIndex:-1,a=0;return sh()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var i5=new RegExp(`^(\\d+)*(${kT}|${TT})*(.*)`);function s5(e){let t=e.match(i5),[n,i,s,r]=t,o=i?parseInt(i,10):s,a=[];for(let[l,c,u]of r.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(c,d)}return[o,...a]}function r5(e){return!e.prev&&e.parent?.type===8}function pb(e){return e.index-Nn}function o5(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function Nm(e,t,n,i){let s=pb(i),r=o5(e,s);if(r===void 0){let o=e.data[L6];if(o?.[s])r=l5(o[s],n);else if(t.firstChild===i)r=e.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(r5(i)){let c=pb(i.parent);r=_b(e,c)}else{let c=ss(l,n);if(a)r=c.firstChild;else{let u=pb(l),d=_b(e,u);if(l.type===2&&d){let p=B0(e,u)+1;r=Om(p,d)}else r=c.nextSibling}}}}return r}function Om(e,t){let n=t;for(let i=0;i<e;i++)n=n.nextSibling;return n}function a5(e,t){let n=e;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];for(let o=0;o<r;o++)switch(s){case I6:n=n.firstChild;break;case A6:n=n.nextSibling;break}}return n}function l5(e,t){let[n,...i]=s5(e),s;if(n===TT)s=t[ns][Oi];else if(n===kT)s=Hj(t[ns][Oi]);else{let r=Number(n);s=Ns(t[r+Nn])}return a5(s,i)}var c5=!1;function u5(e){c5=e}function d5(e){let t=e[dr];if(t){let{i18nNodes:n,dehydratedIcuData:i}=t;if(n&&i){let s=e[It];for(let r of i.values())h5(s,n,r)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function h5(e,t,n){for(let i of n.node.cases[n.case]){let s=t.get(i.index-Nn);s&&z0(e,s,!1)}}function Ok(e){let t=e[hl]??[],i=e[Mn][It],s=[];for(let r of t)r.data[P6]!==void 0?s.push(r):p5(r,i);e[hl]=s}function p5(e,t){let n=0,i=e.firstChild;if(i){let s=e.data[nm];for(;n<s;){let r=i.nextSibling;z0(t,i,!1),i=r,n++}}}function q0(e){Ok(e);let t=e[Oi];Fs(t)&&om(t);for(let n=Fi;n<e.length;n++)om(e[n])}function om(e){d5(e);let t=e[Ae];for(let n=Nn;n<t.bindingStartIndex;n++)if(mr(e[n])){let i=e[n];q0(i)}else Fs(e[n])&&om(e[n])}function _k(e){let t=e._views;for(let n of t){let i=cj(n);i!==null&&i[Oi]!==null&&(Fs(i)?om(i):q0(i))}}function g5(e,t,n,i){e!==null&&(n.cleanup(t),q0(e.lContainer),_k(i))}function f5(e,t){let n=[];for(let i of t)for(let s=0;s<(i[LT]??1);s++){let r={data:i,firstChild:null};i[nm]>0&&(r.firstChild=e,e=Om(i[nm],e)),n.push(r)}return[e,n]}var Bk=()=>null;function m5(e,t){let n=e[hl];return!t||n===null||n.length===0?null:n[0].data[k6]===t?n.shift():(Ok(e),null)}function v5(){Bk=m5}function ZR(e,t){return Bk(e,t)}var Zb=class{},am=class{},Xb=class{resolveComponentFactory(t){throw Error(`No component factory found for ${mi(t)}.`)}},Zc=class{static NULL=new Xb},Xc=class{},io=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>y5()}return e})();function y5(){let e=Ht(),t=_i(),n=pr(t.index,e);return(Fs(n)?n:e)[It]}var C5=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>null})}return e})();function XR(e,t,n){let i=n?e.styles:null,s=n?e.classes:null,r=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")r=a;else if(r==1)s=vR(s,a);else if(r==2){let l=a,c=t[++o];i=vR(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=s:e.classesWithoutHost=s}function Be(e,t=Fe.Default){let n=Ht();if(n===null)return Ie(e,t);let i=_i();return hT(i,n,Kn(e),t)}function Vk(e,t,n,i){if(n===0)return-1;let s=t.length;for(let r=0;r<n;r++)t.push(i),e.blueprint.push(i),e.data.push(null);return s}function w5(e,t,n,i,s){let r=i===null?null:{"":-1},o=s(e,n);if(o!==null){let[a,l]=S5(e,n,o);D5(e,t,n,a,r,l)}r!==null&&i!==null&&b5(n,i,r)}function b5(e,t,n){let i=e.localNames=[];for(let s=0;s<t.length;s+=2){let r=n[t[s+1]];if(r==null)throw new ce(-301,!1);i.push(t[s],r)}}function S5(e,t,n){let i=[],s=null;for(let r of n)r.findHostDirectiveDefs!==null&&(s??=new Map,r.findHostDirectiveDefs(r,i,s)),qr(r)&&(i.push(r),x5(e,t,i.length-1));return da(t)?i.push(...n.slice(1)):i.push(...n),[i,s]}function x5(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function D5(e,t,n,i,s,r){for(let c=0;c<i.length;c++)Tb(Zf(n,t),e,i[c].type);k5(n,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Vk(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=Yf(n.mergedAttrs,u.hostAttrs),I5(e,n,t,l,u),T5(l,u,s),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}M5(e,n,r)}function M5(e,t,n){let i=t.directiveStart,s=t.directiveEnd,r=e.data,o=t.attrs,a=[],l=null,c=null;for(let u=i;u<s;u++){let d=r[u],h=n?n.get(d):null,p=h?h.inputs:null,g=h?h.outputs:null;l=QR(0,d.inputs,u,l,p),c=QR(1,d.outputs,u,c,g);let f=l!==null&&o!==null&&!V0(t)?E5(l,u,o):null;a.push(f)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function QR(e,t,n,i,s){for(let r in t){if(!t.hasOwnProperty(r))continue;let o=t[r];if(o===void 0)continue;i??={};let a,l=la.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(s!==null){if(!s.hasOwnProperty(r))continue;c=s[r]}e===0?JR(i,n,c,a,l):JR(i,n,c,a)}return i}function JR(e,t,n,i,s){let r;e.hasOwnProperty(n)?(r=e[n]).push(t,i):r=e[n]=[t,i],s!==void 0&&r.push(s)}function E5(e,t,n){let i=null,s=0;for(;s<n.length;){let r=n[s];if(r===0){s+=4;continue}else if(r===5){s+=2;continue}if(typeof r=="number")break;if(e.hasOwnProperty(r)){i===null&&(i=[]);let o=e[r];for(let a=0;a<o.length;a+=3)if(o[a]===t){i.push(r,o[a+1],o[a+2],n[s+1]);break}}s+=2}return i}function I5(e,t,n,i,s){e.data[i]=s;let r=s.factory||(s.factory=Wc(s.type,!0)),o=new fl(r,qr(s),Be);e.blueprint[i]=o,n[i]=o,A5(e,t,i,Vk(e,n,s.hostVars,km),s)}function A5(e,t,n,i,s){let r=s.hostBindings;if(r){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;R5(o)!=a&&o.push(a),o.push(n,i,r)}}function R5(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function T5(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;qr(t)&&(n[""]=e)}}function k5(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Gk(e,t,n,i,s,r,o,a){let l=t.consts,c=MR(l,o),u=Nk(t,e,2,i,c);return r&&w5(t,n,u,MR(l,a),s),u.mergedAttrs=Yf(u.mergedAttrs,u.attrs),u.attrs!==null&&XR(u,u.attrs,!1),u.mergedAttrs!==null&&XR(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function zk(e,t){HH(e,t),_1(t)&&e.queries.elementEnd(t)}var lm=class extends Zc{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=oa(t);return new Qd(n,this.ngModule)}};function e1(e,t){let n=[];for(let i in e){if(!e.hasOwnProperty(i))continue;let s=e[i];if(s===void 0)continue;let r=Array.isArray(s),o=r?s[0]:s,a=r?s[1]:la.None;t?n.push({propName:o,templateName:i,isSignal:(a&la.SignalBased)!==0}):n.push({propName:o,templateName:i})}return n}function L5(e,t,n){let i=t instanceof Ni?t:t?.injector;return i&&e.getStandaloneInjector!==null&&(i=e.getStandaloneInjector(i)||i),i?new Hc(n,i):n}function P5(e){let t=e.get(Xc,null);if(t===null)throw new ce(407,!1);let n=e.get(C5,null),i=e.get(Zr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:i}}function F5(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return G0(t,n,n==="svg"?CH:n==="math"?wH:null)}var Qd=class extends am{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,i=e1(t.inputs,!0);if(n!==null)for(let s of i)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return i}get outputs(){return e1(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Qj(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,i,s){let r=Ue(null);try{let o=this.componentDef,a=i?["ng-version","19.1.6"]:Jj(this.componentDef.selectors[0]),l=yk(0,null,null,1,0,null,null,null,null,[a],null),c=L5(o,s||this.ngModule,t),u=P5(c),d=u.rendererFactory.createRenderer(null,o),h=i?o8(d,i,o.encapsulation,c):F5(o,d),p=H0(null,l,null,512|bk(o),null,null,u,d,c,null,WT(h,c,!0));p[Nn]=h,S0(p);let g=null;try{let f=Gk(Nn,l,p,"#host",()=>[this.componentDef],!0,0);h&&(pk(d,h,f),oh(h,p)),vk(l,p,f),YT(l,f,p),zk(l,f),n!==void 0&&N5(f,this.ngContentSelectors,n),g=pr(f.index,p),p[hr]=g[hr],W0(l,p,null)}catch(f){throw g!==null&&Fb(g),Fb(p),f}finally{x0()}return new Qb(this.componentType,p)}finally{Ue(r)}}},Qb=class extends Zb{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n){super(),this._rootLView=n,this._tNode=wm(n[Ae],Nn),this.location=T0(this._tNode,n),this.instance=pr(this._tNode.index,n)[hr],this.hostView=this.changeDetectorRef=new qc(n,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,s;if(i!==null&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView;j0(r[Ae],r,s,t,n),this.previousInputValues.set(t,n);let o=pr(this._tNode.index,r);Fm(o,1)}}get injector(){return new ul(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function N5(e,t,n){let i=e.projection=[];for(let s=0;s<t.length;s++){let r=n[s];i.push(r!=null&&r.length?Array.from(r):null)}}var iu=(()=>{class e{static __NG_ELEMENT_ID__=O5}return e})();function O5(){let e=_i();return B5(e,Ht())}var _5=iu,Hk=class extends _5{_lContainer;_hostTNode;_hostLView;constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return T0(this._hostTNode,this._hostLView)}get injector(){return new ul(this._hostTNode,this._hostLView)}get parentInjector(){let t=M0(this._hostTNode,this._hostLView);if(oT(t)){let n=qf(t,this._hostLView),i=Kf(t),s=n[Ae].data[i+8];return new ul(s,n)}else return new ul(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=t1(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Fi}createEmbeddedView(t,n,i){let s,r;typeof i=="number"?s=i:i!=null&&(s=i.index,r=i.injector);let o=ZR(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},r,o);return this.insertImpl(a,s,Kb(this._hostTNode,o)),a}createComponent(t,n,i,s,r){let o=t&&!fH(t),a;if(o)a=n;else{let g=n||{};a=g.index,i=g.injector,s=g.projectableNodes,r=g.environmentInjector||g.ngModuleRef}let l=o?t:new Qd(oa(t)),c=i||this.parentInjector;if(!r&&l.ngModule==null){let f=(o?c:this.parentInjector).get(Ni,null);f&&(r=f)}let u=oa(l.componentType??{}),d=ZR(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,s,h,r);return this.insertImpl(p.hostView,a,Kb(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let s=t._lView;if(SH(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=s[Mn],c=new Hk(l,l[Os],l[Mn]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(n),o=this._lContainer;return Ik(o,s,r,i),t.attachToViewContainerRef(),E1(gb(o),r,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=t1(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=sm(this._lContainer,n);i&&(zf(gb(this._lContainer),n),Y0(i[Ae],i))}detach(t){let n=this._adjustIndex(t,-1),i=sm(this._lContainer,n);return i&&zf(gb(this._lContainer),n)!=null?new qc(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function t1(e){return e[Wf]}function gb(e){return e[Wf]||(e[Wf]=[])}function B5(e,t){let n,i=t[e.index];return mr(i)?n=i:(n=w8(i,t,null,e),t[e.index]=n,Sk(t,n)),jk(n,t,e,i),new Hk(n,e,t)}function V5(e,t){let n=e[It],i=n.createComment(""),s=ss(t,e),r=n.parentNode(s);return im(n,r,i,n.nextSibling(s),!1),i}var jk=Uk,Wk=()=>!1;function Uk(e,t,n,i){if(e[Kr])return;let s;n.type&8?s=Ns(i):s=V5(t,n),e[Kr]=s}function G5(e,t,n){if(e[Kr]&&e[hl])return!0;let i=n[dr],s=t.index-Nn;if(!i||w6(t)||ah(i,s))return!1;let o=_b(i,s),a=i.data[F0]?.[s],[l,c]=f5(o,a);return e[Kr]=l,e[hl]=c,!0}function z5(e,t,n,i){Wk(e,n,t)||Uk(e,t,n,i)}function H5(){jk=z5,Wk=G5}var ca=class{},Jd=class{};var Jb=class extends ca{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new lm(this);constructor(t,n,i,s=!0){super(),this.ngModuleType=t,this._parent=n;let r=R1(t);this._bootstrapComponents=ak(r.bootstrap),this._r3Injector=fT(t,n,[{provide:ca,useValue:this},{provide:Zc,useValue:this.componentFactoryResolver},...i],mi(t),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},e0=class extends Jd{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Jb(this.moduleType,t,[])}};var cm=class extends ca{injector;componentFactoryResolver=new lm(this);instance=null;constructor(t){super();let n=new Kd([...t.providers,{provide:ca,useValue:this},{provide:Zc,useValue:this.componentFactoryResolver}],t.parent||y0(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function _m(e,t,n=null){return new cm({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var j5=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=m0(!1,n.type),s=i.length>0?_m([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:e,providedIn:"environment",factory:()=>new e(Ie(Ni))})}return e})();function qn(e){return gm(()=>{let t=$k(e),n=R(S({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===DT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?s=>s.get(j5).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||fr.Emulated,styles:e.styles||es,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Bi("NgStandalone"),Yk(n);let i=e.dependencies;return n.directiveDefs=i1(i,!1),n.pipeDefs=i1(i,!0),n.id=$5(n),n})}function W5(e){return oa(e)||g0(e)}function U5(e){return e!==null}function so(e){return gm(()=>({type:e.type,bootstrap:e.bootstrap||es,declarations:e.declarations||es,imports:e.imports||es,exports:e.exports||es,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function n1(e,t){if(e==null)return Uc;let n={};for(let i in e)if(e.hasOwnProperty(i)){let s=e[i],r,o,a=la.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),t?(n[r]=a!==la.None?[i,a]:i,t[r]=o):n[r]=i}return n}function Zn(e){return gm(()=>{let t=$k(e);return Yk(t),t})}function $k(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Uc,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||es,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:n1(e.inputs,t),outputs:n1(e.outputs),debugInfo:null}}function Yk(e){e.features?.forEach(t=>t(e))}function i1(e,t){if(!e)return null;let n=t?f0:W5;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(U5)}function $5(e){let t=0,n=typeof e.consts=="function"?"":e.consts,i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let r of i.join("|"))t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Y5(e){return Object.getPrototypeOf(e.prototype).constructor}function Bs(e){let t=Y5(e.type),n=!0,i=[e];for(;t;){let s;if(qr(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ce(903,!1);s=t.\u0275dir}if(s){if(n){i.push(s);let o=e;o.inputs=Af(e.inputs),o.inputTransforms=Af(e.inputTransforms),o.declaredInputs=Af(e.declaredInputs),o.outputs=Af(e.outputs);let a=s.hostBindings;a&&Q5(e,a);let l=s.viewQuery,c=s.contentQueries;if(l&&Z5(e,l),c&&X5(e,c),K5(e,s),Nz(e.outputs,s.outputs),qr(s)&&s.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(s.data.animation)}}let r=s.features;if(r)for(let o=0;o<r.length;o++){let a=r[o];a&&a.ngInherit&&a(e),a===Bs&&(n=!1)}}t=Object.getPrototypeOf(t)}q5(i)}function K5(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];if(i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let s=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(s))continue;e.inputTransforms??={},e.inputTransforms[s]=t.inputTransforms[s]}}}function q5(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let s=e[i];s.hostVars=t+=s.hostVars,s.hostAttrs=Yf(s.hostAttrs,n=Yf(n,s.hostAttrs))}}function Af(e){return e===Uc?{}:e===es?[]:e}function Z5(e,t){let n=e.viewQuery;n?e.viewQuery=(i,s)=>{t(i,s),n(i,s)}:e.viewQuery=t}function X5(e,t){let n=e.contentQueries;n?e.contentQueries=(i,s,r)=>{t(i,s,r),n(i,s,r)}:e.contentQueries=t}function Q5(e,t){let n=e.hostBindings;n?e.hostBindings=(i,s)=>{t(i,s),n(i,s)}:e.hostBindings=t}function ch(e){let t=e.inputConfig,n={};for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)&&s[3]&&(n[i]=s[3])}e.inputTransforms=n}function Bm(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}var J5=Kk;function Kk(e,t,n,i){return ha(!0),t[It].createComment("")}function eW(e,t,n,i){let s=t[dr],r=!s||sh()||nu(n)||ah(s,i);if(ha(r),r)return Kk(e,t,n,i);let o=s.data[T6]?.[i]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Nm(s,e,t,n);Am(s,i,a);let l=B0(s,i);return Om(l,a)}function tW(){J5=eW}var nW=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,i,s,r){if(!this.cachedInjectors.has(n)){let o=s.length>0?_m(s,i,r):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:e,providedIn:"environment",factory:()=>new e})}return e})();var iW=new se("");function fb(e,t,n){return e.get(nW).getOrCreateInjector(t,e,n,"")}function sW(e,t,n){if(e instanceof Hc){let s=e.injector,r=e.parentInjector,o=fb(r,t,n);return new Hc(s,o)}let i=e.get(Ni);if(i!==e){let s=fb(i,t,n);return new Hc(e,s)}return fb(e,t,n)}function Vc(e,t,n,i=!1){let s=n[Mn],r=s[Ae];if(Jc(s))return;let o=Mm(s,t),a=o[_0],l=o[$6];if(!(l!==null&&e<l)&&s1(a,e)&&s1(o[j6]??-1,e)){let c=Em(r,t),d=!i&&!0&&(X6(c)!==null||GR(c,mn.Loading)!==null||GR(c,mn.Placeholder))?aW:oW;try{d(e,o,n,t,s)}catch(h){Lm(s,h)}}}function rW(e,t){return e[hl]?.find(n=>n.data[F6]===t[_0])??null}function oW(e,t,n,i,s){let r=Z6(e,s,i);if(r!==null){t[_0]=e;let o=s[Ae],a=r+Nn,l=wm(o,a),c=0;G8(n,c);let u;if(e===mn.Complete){let p=Em(o,i),g=p.providers;g&&g.length>0&&(u=sW(s[aa],p,g))}let d=rW(n,t);n[hl]=null;let h=V8(s,l,null,{injector:u,dehydratedView:d});if(Ik(n,h,c,Kb(l,d)),Fm(h,2),(e===mn.Complete||e===mn.Error)&&Array.isArray(t[jc])){for(let p of t[jc])p();t[jc]=null}}}function s1(e,t){return e<t}function r1(e,t,n){e.loadingPromise.then(()=>{e.loadingState===Li.COMPLETE?Vc(mn.Complete,t,n):e.loadingState===Li.FAILED&&Vc(mn.Error,t,n)})}var aW=null;var Z0=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var qk=new se("");function Cl(e){return!!e&&typeof e.then=="function"}function Zk(e){return!!e&&typeof e.subscribe=="function"}var Vm=new se("");var Xk=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=_(Vm,{optional:!0})??[];injector=_(cn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let s of this.appInits){let r=is(this.injector,s);if(Cl(r))n.push(r);else if(Zk(r)){let o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});n.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(s=>{this.reject(s)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qk=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>new um})}return e})(),um=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let n=t.zone,i=this.queues.get(n);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},wl=new se("");function lW(){vA(()=>{throw new ce(600,!1)})}function cW(e){return e.isBoundToModule}var uW=10;var En=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=_(g6);afterRenderManager=_(_T);zonelessEnabled=_(xm);rootEffectScheduler=_(Qk);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new St;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=_(_s).hasPendingTasks.pipe(Me(n=>!n));constructor(){_(tu,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=_(Ni);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){let s=n instanceof am;if(!this._injector.get(Xk).done){let h=!s&&T1(n),p=!1;throw new ce(405,p)}let o;s?o=n:o=this._injector.get(Zc).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=cW(o)?void 0:this._injector.get(ca),l=i||o.selector,c=o.create(cn.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(qk,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Of(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let i=this.tracingSnapshot;this.tracingSnapshot=null,i.run(N0.CHANGE_DETECTION,this._tick),i.dispose();return}if(this._runningTick)throw new ce(101,!1);let n=Ue(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ue(n),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xc,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<uW;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:s}of this.allViews)dW(i,s,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>bm(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;Of(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(wl,[]).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Of(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ce(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Of(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function dW(e,t,n,i){if(!n&&!bm(e))return;kk(e,t,n&&!i?0:1)}function hW(e,t,n){let i=t[aa],s=t[Ae];if(e.loadingState!==Li.NOT_STARTED)return e.loadingPromise??Promise.resolve();let r=Mm(t,n),o=Q6(s,e);e.loadingState=Li.IN_PROGRESS,Nf(1,r);let a=e.dependencyResolverFn,l=i.get(_s),c=l.add();return a?(e.loadingPromise=Promise.allSettled(a()).then(u=>{let d=!1,h=[],p=[];for(let g of u)if(g.status==="fulfilled"){let f=g.value,m=oa(f)||g0(f);if(m)h.push(m);else{let v=f0(f);v&&p.push(v)}}else{d=!0;break}if(e.loadingPromise=null,l.remove(c),d){if(e.loadingState=Li.FAILED,e.errorTmplIndex===null){let g="",f=new ce(-750,!1);Lm(t,f)}}else{e.loadingState=Li.COMPLETE;let g=o.tView;if(h.length>0){g.directiveRegistry=zR(g.directiveRegistry,h);let f=h.map(v=>v.type),m=m0(!1,...f);e.providers=m}p.length>0&&(g.pipeRegistry=zR(g.pipeRegistry,p))}}),e.loadingPromise):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=Li.COMPLETE,l.remove(c)}),e.loadingPromise)}function pW(e,t){return t[aa].get(iW,null,{optional:!0})?.behavior!==BT.Manual}function gW(e,t,n){let i=t[Ae],s=t[n.index];if(!pW(e,t))return;let r=Mm(t,n),o=Em(i,n);switch(K6(r),o.loadingState){case Li.NOT_STARTED:Vc(mn.Loading,n,s),hW(o,t,n),o.loadingState===Li.IN_PROGRESS&&r1(o,n,s);break;case Li.IN_PROGRESS:Vc(mn.Loading,n,s),r1(o,n,s);break;case Li.COMPLETE:Vc(mn.Complete,n,s);break;case Li.FAILED:Vc(mn.Error,n,s);break;default:}}async function fW(e,t,n){let i=e.get(zT),s=i.hydrating;if(s.has(t))return;let{parentBlockPromise:r,hydrationQueue:o}=fj(t,e);mW(i,o);let a=e.get(_s),l=a.add();r!==null&&await r;for(let c of o)await yW(c,i),await vW(e),s.get(c).resolve();await s.get(t)?.promise,a.remove(l),n&&n(o),g5(i.get(t),o,i,e.get(En))}function mW(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function vW(e){return new Promise(t=>O0(t,{injector:e}))}async function yW(e,t){let n=t.get(e);if(n===null)return;let{tNode:i,lView:s}=n,r=Mm(s,i);return new Promise(o=>{CW(r,o),gW(2,s,i)})}function CW(e,t){Array.isArray(e[jc])||(e[jc]=[]),e[jc].push(t)}function Gm(e,t,n,i){let s=Ht(),r=b0();if(Bm(s,r,t)){let o=rs(),a=D0();v8(a,s,e,t,n,i)}return Gm}function Rf(e,t){return e<<17|t<<2}function vl(e){return e>>17&32767}function wW(e){return(e&2)==2}function bW(e,t){return e&131071|t<<17}function t0(e){return e|2}function Qc(e){return(e&131068)>>2}function mb(e,t){return e&-131069|t<<2}function SW(e){return(e&1)===1}function n0(e){return e|1}function xW(e,t,n,i,s,r){let o=r?t.classBindings:t.styleBindings,a=vl(o),l=Qc(o);e[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||th(d,u)>0)&&(c=!0)}else u=n;if(s)if(l!==0){let h=vl(e[a+1]);e[i+1]=Rf(h,a),h!==0&&(e[h+1]=mb(e[h+1],i)),e[a+1]=bW(e[a+1],i)}else e[i+1]=Rf(a,0),a!==0&&(e[a+1]=mb(e[a+1],i)),a=i;else e[i+1]=Rf(l,0),a===0?a=i:e[l+1]=mb(e[l+1],i),l=i;c&&(e[i+1]=t0(e[i+1])),o1(e,u,i,!0),o1(e,u,i,!1),DW(t,u,e,i,r),o=Rf(a,l),r?t.classBindings=o:t.styleBindings=o}function DW(e,t,n,i,s){let r=s?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&th(r,t)>=0&&(n[i+1]=n0(n[i+1]))}function o1(e,t,n,i){let s=e[n+1],r=t===null,o=i?vl(s):Qc(s),a=!1;for(;o!==0&&(a===!1||r);){let l=e[o],c=e[o+1];MW(l,t)&&(a=!0,e[o+1]=i?n0(c):t0(c)),o=i?vl(c):Qc(c)}a&&(e[n+1]=i?t0(s):n0(s))}function MW(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?th(e,t)>=0:!1}function Vs(e,t,n){let i=Ht(),s=b0();if(Bm(i,s,t)){let r=rs(),o=D0();wk(r,o,i,e,t,i[It],n,!1)}return Vs}function a1(e,t,n,i,s){let r=t.inputs,o=s?"class":"style";j0(e,n,r[o],o,i)}function zm(e,t,n){return Jk(e,t,n,!1),zm}function X0(e,t){return Jk(e,t,null,!0),X0}function Jk(e,t,n,i){let s=Ht(),r=rs(),o=NH(2);if(r.firstUpdatePass&&IW(r,e,o,i),t!==km&&Bm(s,o,t)){let a=r.data[rh()];LW(r,a,s,s[It],e,s[o+1]=PW(t,n),i,o)}}function EW(e,t){return t>=e.expandoStartIndex}function IW(e,t,n,i){let s=e.data;if(s[n+1]===null){let r=s[rh()],o=EW(e,n);FW(r,i)&&t===null&&!o&&(t=!1),t=AW(s,r,t,i),xW(s,r,t,n,o,i)}}function AW(e,t,n,i){let s=VH(e),r=i?t.residualClasses:t.residualStyles;if(s===null)(i?t.classBindings:t.styleBindings)===0&&(n=vb(null,e,t,n,i),n=eh(n,t.attrs,i),r=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(n=vb(s,e,t,n,i),r===null){let l=RW(e,t,i);l!==void 0&&Array.isArray(l)&&(l=vb(null,e,t,l[1],i),l=eh(l,t.attrs,i),TW(e,t,i,l))}else r=kW(e,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),n}function RW(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Qc(i)!==0)return e[vl(i)]}function TW(e,t,n,i){let s=n?t.classBindings:t.styleBindings;e[vl(s)]=i}function kW(e,t,n){let i,s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++){let o=e[r].hostAttrs;i=eh(i,o,n)}return eh(i,t.attrs,n)}function vb(e,t,n,i,s){let r=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(r=t[a],i=eh(i,r.hostAttrs,s),r!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function eh(e,t,n){let i=n?1:2,s=-1;if(t!==null)for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?s=o:s===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),nH(e,o,n?!0:t[++r]))}return e===void 0?null:e}function LW(e,t,n,i,s,r,o,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=SW(c)?l1(l,t,n,s,Qc(c),o):void 0;if(!dm(u)){dm(r)||wW(c)&&(r=l1(l,null,n,s,a,o));let d=bH(rh(),n);B8(i,o,d,s,r)}}function l1(e,t,n,i,s,r){let o=t===null,a;for(;s>0;){let l=e[s],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[s+1];h===km&&(h=d?es:void 0);let p=d?ob(h,i):u===i?h:void 0;if(c&&!dm(p)&&(p=ob(l,i)),dm(p)&&(a=p,o))return a;let g=e[s+1];s=o?vl(g):Qc(g)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=ob(l,i))}return a}function dm(e){return e!==void 0}function PW(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=mi(Cr(e)))),e}function FW(e,t){return(e.flags&(t?8:16))!==0}function Bt(e,t,n,i){let s=Ht(),r=rs(),o=Nn+e,a=s[It],l=r.firstCreatePass?Gk(o,r,s,t,f8,U1(),n,i):r.data[o],c=eL(r,s,l,a,t,e);s[o]=c;let u=B1(l);return Sm(l,!0),pk(a,c,l),!nu(l)&&iT()&&Mk(r,s,c,l),EH()===0&&oh(c,s),IH(),u&&(n8(r,s,l),YT(r,l,s)),i!==null&&i8(s,l),Bt}function jt(){let e=_i();Y1()?PH():(e=e.parent,Sm(e,!1));let t=e;RH(t)&&kH(),AH();let n=rs();return n.firstCreatePass&&zk(n,t),t.classesWithoutHost!=null&&UH(t)&&a1(n,t,Ht(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&$H(t)&&a1(n,t,Ht(),t.stylesWithoutHost,!1),jt}function os(e,t,n,i){return Bt(e,t,n,i),jt(),os}var eL=(e,t,n,i,s,r)=>(ha(!0),G0(i,s,tT()));function NW(e,t,n,i,s,r){let o=t[dr],a=!o||sh()||nu(n)||ah(o,r);if(ha(a),a)return G0(i,s,tT());let l=Nm(o,e,t,n);return UT(o,r)&&Am(o,r,l.nextSibling),o&&(ST(n)||xT(l))&&da(n)&&(TH(n),hk(l)),l}function OW(){eL=NW}var _W=(e,t,n,i)=>(ha(!0),uk(t[It],""));function BW(e,t,n,i){let s,r=t[dr],o=!r||sh()||ah(r,i)||nu(n);if(ha(o),o)return uk(t[It],"");let a=Nm(r,e,t,n),l=pj(r,i);return Am(r,i,a),s=Om(l,a),s}function VW(){_W=BW}var hm="en-US";var GW=hm;function zW(e){typeof e=="string"&&(GW=e.toLowerCase().replace(/_/g,"-"))}var tL=(e,t,n)=>{};function c1(e){tL=e}function Gs(e,t,n,i){let s=Ht(),r=rs(),o=_i();return nL(r,s,s[It],o,e,t,i),Gs}function HW(e,t,n,i){let s=e.cleanup;if(s!=null)for(let r=0;r<s.length-1;r+=2){let o=s[r];if(o===n&&s[r+1]===i){let a=t[jf],l=s[r+2];return a.length>l?a[l]:null}typeof o=="string"&&(r+=2)}return null}function nL(e,t,n,i,s,r,o){let a=B1(i),c=e.firstCreatePass&&MH(e),u=t[hr],d=DH(t),h=!0;if(i.type&3||o){let f=ss(i,t),m=o?o(f):f,v=d.length,y=o?x=>o(Ns(x[i.index])):i.index,w=null;if(!o&&a&&(w=HW(e,t,s,i.index)),w!==null){let x=w.__ngLastListenerFn__||w;x.__ngNextListenerFn__=r,w.__ngLastListenerFn__=r,h=!1}else{r=d1(i,t,u,r),tL(f,s,r);let x=n.listen(m,s,r);d.push(r,x),c&&c.push(s,y,v,v+1)}}else r=d1(i,t,u,r);let p=i.outputs,g;if(h&&p!==null&&(g=p[s])){let f=g.length;if(f)for(let m=0;m<f;m+=2){let v=g[m],y=g[m+1],D=t[v][y].subscribe(r),M=d.length;d.push(r,D),c&&c.push(s,i.index,M,-(M+1))}}}function u1(e,t,n,i){let s=Ue(null);try{return ts(6,t,n),n(i)!==!1}catch(r){return Lm(e,r),!1}finally{ts(7,t,n),Ue(s)}}function d1(e,t,n,i){return function s(r){if(r===Function)return i;let o=da(e)?pr(e.index,t):t;Fm(o,5);let a=u1(t,n,i,r),l=s.__ngNextListenerFn__;for(;l;)a=u1(t,n,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function un(e,t=""){let n=Ht(),i=rs(),s=e+Nn,r=i.firstCreatePass?Nk(i,s,1,t,null):i.data[s],o=iL(i,n,r,t,e);n[s]=o,iT()&&Mk(i,n,o,r),Sm(r,!1)}var iL=(e,t,n,i,s)=>(ha(!0),ck(t[It],i));function jW(e,t,n,i,s){let r=t[dr],o=!r||sh()||nu(n)||ah(r,s);return ha(o),o?ck(t[It],i):Nm(r,e,t,n)}function WW(){iL=jW}function Q0(e,t,n){bT(t)&&(t=t());let i=Ht(),s=b0();if(Bm(i,s,t)){let r=rs(),o=D0();wk(r,o,i,e,t,i[It],n,!1)}return Q0}function sL(e,t){let n=bT(e);return n&&e.set(t),n}function J0(e,t){let n=Ht(),i=rs(),s=_i();return nL(i,n,n[It],s,e,t),J0}function UW(e,t,n){let i=rs();if(i.firstCreatePass){let s=qr(e);i0(n,i.data,i.blueprint,s,!0),i0(t,i.data,i.blueprint,s,!1)}}function i0(e,t,n,i,s){if(e=Kn(e),Array.isArray(e))for(let r=0;r<e.length;r++)i0(e[r],t,n,i,s);else{let r=rs(),o=Ht(),a=_i(),l=$c(e)?e:Kn(e.provide),c=P1(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if($c(e)||!e.multi){let p=new fl(c,s,Be),g=Cb(l,t,s?u:u+h,d);g===-1?(Tb(Zf(a,o),r,l),yb(r,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(p),o.push(p)):(n[g]=p,o[g]=p)}else{let p=Cb(l,t,u+h,d),g=Cb(l,t,u,u+h),f=p>=0&&n[p],m=g>=0&&n[g];if(s&&!m||!s&&!f){Tb(Zf(a,o),r,l);let v=KW(s?YW:$W,n.length,s,i,c);!s&&m&&(n[g].providerFactory=v),yb(r,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else{let v=rL(n[s?g:p],c,!s&&i);yb(r,e,p>-1?p:g,v)}!s&&i&&m&&n[g].componentProviders++}}}function yb(e,t,n,i){let s=$c(t),r=lH(t);if(s||r){let l=(r?Kn(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function rL(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Cb(e,t,n,i){for(let s=n;s<i;s++)if(t[s]===e)return s;return-1}function $W(e,t,n,i){return s0(this.multi,[])}function YW(e,t,n,i){let s=this.multi,r;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Xf(n,n[Ae],this.providerFactory.index,i);r=a.slice(0,o),s0(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],s0(s,r);return r}function s0(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function KW(e,t,n,i,s){let r=new fl(e,n,Be);return r.multi=[],r.index=t,r.componentProviders=0,rL(r,s,i&&!n),r}function fa(e,t=[]){return n=>{n.providersResolver=(i,s)=>UW(i,s?s(e):e,t)}}var r0=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},eS=(()=>{class e{compileModuleSync(n){return new e0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),s=R1(n),r=ak(s.declarations).reduce((o,a)=>{let l=oa(a);return l&&o.push(new Qd(l)),o},[]);return new r0(i,r)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var qW=(()=>{class e{zone=_(lt);changeDetectionScheduler=_(Zr);applicationRef=_(En);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ZW({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new lt(R(S({},XW()),{scheduleInRootZone:n})),[{provide:lt,useFactory:e},{provide:ra,multi:!0,useFactory:()=>{let i=_(qW,{optional:!0});return()=>i.initialize()}},{provide:ra,multi:!0,useFactory:()=>{let i=_(QW);return()=>{i.initialize()}}},t===!0?{provide:vT,useValue:!0}:[],{provide:I0,useValue:n??mT}]}function XW(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var QW=(()=>{class e{subscription=new _t;initialized=!1;zone=_(lt);pendingTasks=_(_s);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{lt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{lt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var oL=(()=>{class e{appRef=_(En);taskService=_(_s);ngZone=_(lt);zonelessEnabled=_(xm);tracing=_(tu,{optional:!0});disableScheduling=_(vT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new _t;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(I0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof em||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let i=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 13:{this.appRef.dirtyFlags|=16,i=!0;break}case 14:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{i=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let s=this.useMicrotaskScheduler?LR:yT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>s(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>s(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(n),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,LR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function aL(){return Bi("NgZoneless"),eo([{provide:Zr,useExisting:oL},{provide:lt,useClass:em},{provide:xm,useValue:!0},{provide:I0,useValue:!1},[]])}function JW(){return typeof $localize<"u"&&$localize.locale||hm}var tS=new se("",{providedIn:"root",factory:()=>_(tS,Fe.Optional|Fe.SkipSelf)||JW()});var o0=new se(""),eU=new se("");function Hd(e){return!e.moduleRef}function tU(e){let t=Hd(e)?e.r3Injector:e.moduleRef.injector,n=t.get(lt);return n.run(()=>{Hd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(gr,null),s;if(n.runOutsideAngular(()=>{s=n.onError.subscribe({next:r=>{i.handleError(r)}})}),Hd(e)){let r=()=>t.destroy(),o=e.platformInjector.get(o0);o.add(r),t.onDestroy(()=>{s.unsubscribe(),o.delete(r)})}else{let r=()=>e.moduleRef.destroy(),o=e.platformInjector.get(o0);o.add(r),e.moduleRef.onDestroy(()=>{Of(e.allPlatformModules,e.moduleRef),s.unsubscribe(),o.delete(r)})}return iU(i,n,()=>{let r=t.get(Xk);return r.runInitializers(),r.donePromise.then(()=>{let o=t.get(tS,hm);if(zW(o||hm),!t.get(eU,!0))return Hd(e)?t.get(En):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Hd(e)){let l=t.get(En);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return nU(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function nU(e,t){let n=e.injector.get(En);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>n.bootstrap(i));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new ce(-403,!1);t.push(e)}function iU(e,t,n){try{let i=n();return Cl(i)?i.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}var _f=null;function sU(e=[],t){return cn.create({name:t,providers:[{provide:vm,useValue:"platform"},{provide:o0,useValue:new Set([()=>_f=null])},...e]})}function rU(e=[]){if(_f)return _f;let t=sU(e);return _f=t,lW(),oU(t),t}function oU(e){let t=e.get(L0,null);is(e,()=>{t?.forEach(n=>n())})}function lL(){return!1}var ma=(()=>{class e{static __NG_ELEMENT_ID__=aU}return e})();function aU(e){return lU(_i(),Ht(),(e&16)===16)}function lU(e,t,n){if(da(e)&&!n){let i=pr(e.index,t);return new qc(i,i)}else if(e.type&175){let i=t[ns];return new qc(i,t)}return null}function cL(e){try{let{rootComponent:t,appProviders:n,platformProviders:i}=e,s=rU(i),r=[ZW({}),{provide:Zr,useExisting:oL},...n||[]],o=new cm({providers:r,parent:s,debugName:"",runEnvironmentInitializers:!1});return tU({r3Injector:o.injector,platformInjector:s,rootComponent:t})}catch(t){return Promise.reject(t)}}var Tf=new WeakSet,h1="",Bf=[];function p1(e){return e.get(OT,O6)}function uL(){let e=[{provide:OT,useFactory:()=>{let t=!0;{let n=_(ml);t=!!window._ejsas?.[n]}return t&&Bi("NgEventReplay"),t}}];return e.push({provide:ra,useValue:()=>{let t=_(cn),n=t.get(En);if(!Tf.has(n)){let i=_(BR);p1(t)&&c1((s,r,o)=>{J6(s,r,o),ej(s,i)})}},multi:!0},{provide:wl,useFactory:()=>{let t=_(ml),n=_(cn),i=_(En);return()=>{!p1(n)||Tf.has(i)||(Tf.add(i),i.onDestroy(()=>{Tf.delete(i),rb(t),c1(()=>{})}),i.whenStable().then(()=>{let s=n.get(nj);cU(s,n);let r=n.get(BR);r.get(h1)?.forEach(tj),r.delete(h1);let o=s.instance;hj(n)?i.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),e}var cU=(e,t)=>{let n=t.get(ml),i=window._ejsas[n],s=e.instance=new fR(new Sf(i.c));for(let a of i.et)s.addEvent(a);for(let a of i.etc)s.addEvent(a);let r=mR(n);s.replayEarlyEventInfos(r),rb(n);let o=new xf(a=>{uU(t,a,a.currentTarget)});gR(s,o)};function uU(e,t,n){let i=(n&&n.getAttribute(Im))??"";/d\d+/.test(i)?dU(i,e,t,n):t.eventPhase===sb.REPLAY&&GT(t,n)}function dU(e,t,n,i){Bf.push({event:n,currentTarget:i}),fW(t,e,hU)}function hU(e){let t=[...Bf],n=new Set(e);Bf=[];for(let{event:i,currentTarget:s}of t){let r=s.getAttribute(Im);n.has(r)?GT(i,s):Bf.push({event:i,currentTarget:s})}}var g1=!1;function pU(){g1||(g1=!0,lj(),OW(),WW(),VW(),tW(),H5(),v5(),c8())}function gU(e){return e.whenStable()}function dL(){let e=[{provide:Df,useFactory:()=>{let t=!0;return t=!!_(yl,{optional:!0})?.get(HT,null),t&&Bi("NgHydration"),t}},{provide:ra,useValue:()=>{u5(!1),_(Df)&&(fU(),pU())},multi:!0}];return e.push({provide:NT,useFactory:()=>_(Df)},{provide:wl,useFactory:()=>{if(_(Df)){let t=_(En);return()=>{gU(t).then(()=>{t.destroyed||_k(t)})}}return()=>{}},multi:!0}),eo(e)}function fU(){let e=Dm(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===oj){t=n;break}if(!t)throw new ce(-507,!1)}function k(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function fi(e,t){Bi("NgSignals");let n=gA(e);return t?.equal&&(n[Fn].equal=t.equal),n}var mU=e=>e;function vU(e,t){if(Bi("NgSignals"),typeof e=="function"){let n=Aw(e,mU,t?.equal);return f1(n)}else{let n=Aw(e.source,e.computation,e.equal);return f1(n)}}function f1(e){let t=e[Fn],n=e;return n.set=i=>CA(t,i),n.update=i=>wA(t,i),n.asReadonly=k0.bind(e),n}function Yn(e){let t=Ue(null);try{return e()}finally{Ue(t)}}var hL=(()=>{class e{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=yU}return e})();function yU(){return new hL(Ht(),_i())}var CU=!1,wU=(()=>{class e extends um{pendingTasks=_(_s);taskId=null;schedule(n){super.schedule(n),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),a0=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(t,n,i,s,r,o){this.scheduler=t,this.effectFn=n,this.zone=i,this.injector=r,this.watcher=bA(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(n){this.injector.get(gr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function bU(){}function SU(e,t){Bi("NgSignals"),!t?.injector&&ym(bU);let n=t?.injector??_(cn),i=t?.manualCleanup!==!0?n.get(eu):null,s=new a0(n.get(wU),e,typeof Zone>"u"?null:Zone.current,i,n,t?.allowSignalWrites??!1),r=n.get(ma,null,{optional:!0});return!r||!(r._lView[Ee]&8)?s.watcher.notify():(r._lView[Lf]??=[]).push(s.watcher.notify),s}var xU=CU;var l0=class{[Fn];constructor(t){this[Fn]=t}destroy(){this[Fn].destroy()}};function bl(e,t){if(xU)return SU(e,t);Bi("NgSignals"),!t?.injector&&ym(bl);let n=t?.injector??_(cn),i=t?.manualCleanup!==!0?n.get(eu):null,s,r=n.get(hL,null,{optional:!0}),o=n.get(Zr);return r!==null&&!t?.forceRoot?(s=EU(r.view,o,e),i instanceof Qf&&i._lView===r.view&&(i=null)):s=IU(e,n.get(Qk),o),s.injector=n,i!==null&&(s.onDestroyFn=i.onDestroy(()=>s.destroy())),new l0(s)}var pL=R(S({},Xo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Xd,run(){if(this.dirty=!1,this.hasRun&&!Bd(this))return;this.hasRun=!0;let e=i=>(this.cleanupFns??=[]).push(i),t=tl(this),n=$f(!1);try{this.maybeCleanup(),this.fn(e)}finally{$f(n),bc(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),DU=R(S({},pL),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Sc(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),MU=R(S({},pL),{consumerMarkedDirty(){this.view[Ee]|=8192,ih(this.view),this.notifier.notify(14)},destroy(){Sc(this),this.onDestroyFn(),this.maybeCleanup(),this.view[dl]?.delete(this)}});function EU(e,t,n){let i=Object.create(MU);return i.view=e,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=n,e[dl]??=new Set,e[dl].add(i),i.consumerMarkedDirty(i),i}function IU(e,t,n){let i=Object.create(DU);return i.fn=e,i.scheduler=t,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(13),i}var zt=function(e){return e[e.Idle=0]="Idle",e[e.Error=1]="Error",e[e.Loading=2]="Loading",e[e.Reloading=3]="Reloading",e[e.Resolved=4]="Resolved",e[e.Local=5]="Local",e}(zt||{});function nS(e){e?.injector||ym(nS);let t=e.request??(()=>null);return new u0(t,e.loader,void 0,e.equal?AU(e.equal):void 0,e.injector??_(cn))}var c0=class{value;constructor(t){this.value=t,this.value.set=this.set.bind(this),this.value.update=this.update.bind(this),this.value.asReadonly=k0}update(t){this.set(t(Yn(this.value)))}isLoading=fi(()=>this.status()===zt.Loading||this.status()===zt.Reloading);hasValue(){return this.value()!==void 0}asReadonly(){return this}},u0=class extends c0{loaderFn;defaultValue;equal;state;extendedRequest;pendingTasks;effectRef;pendingController;resolvePendingTask=void 0;destroyed=!1;constructor(t,n,i,s,r){super(fi(()=>this.state().value,{equal:s})),this.loaderFn=n,this.defaultValue=i,this.equal=s,this.pendingTasks=r.get(a6),this.extendedRequest=fi(()=>({request:t(),reload:On(0)})),this.state=vU({source:()=>{let{request:o,reload:a}=this.extendedRequest();return o===void 0||this.destroyed?zt.Idle:a()===0?zt.Loading:zt.Reloading},computation:(o,a)=>({status:o,previousStatus:a?.value.status??zt.Idle,value:a&&o===zt.Reloading?a.value.value:this.defaultValue,error:void 0})}),this.effectRef=bl(this.loadEffect.bind(this),{injector:r,manualCleanup:!0}),r.get(eu).onDestroy(()=>this.destroy())}status=fi(()=>this.state().status);error=fi(()=>this.state().error);set(t){if(this.destroyed)return;let n=Yn(this.state);(this.equal?this.equal(n.value,t):n.value===t)||(this.state.set({status:zt.Local,previousStatus:zt.Local,value:t,error:void 0}),this.abortInProgressLoad())}reload(){let t=Yn(this.status);return t===zt.Idle||t===zt.Loading||t===zt.Reloading?!1:(Yn(this.extendedRequest).reload.update(n=>n+1),!0)}destroy(){this.destroyed=!0,this.effectRef.destroy(),this.abortInProgressLoad(),this.state.set({status:zt.Idle,previousStatus:zt.Idle,value:this.defaultValue,error:void 0})}async loadEffect(){let{status:t}=Yn(this.state),{request:n,reload:i}=this.extendedRequest();if(i(),n===void 0)return;if(t!==zt.Loading&&t!==zt.Reloading)return;this.abortInProgressLoad();let s=this.resolvePendingTask=this.pendingTasks.add(),{signal:r}=this.pendingController=new AbortController;try{let o=await Yn(()=>this.loaderFn({abortSignal:r,request:n,previous:{status:t}}));if(r.aborted)return;this.state.set({status:zt.Resolved,previousStatus:zt.Resolved,value:o,error:void 0})}catch(o){if(r.aborted)return;this.state.set({status:zt.Error,previousStatus:zt.Error,value:this.defaultValue,error:o})}finally{s(),this.pendingController=void 0}}abortInProgressLoad(){Yn(()=>this.pendingController?.abort()),this.pendingController=void 0,this.resolvePendingTask?.(),this.resolvePendingTask=void 0}};function AU(e){return(t,n)=>t===void 0||n===void 0?t===n:e(t,n)}var mL=null;function ro(){return mL}function vL(e){mL??=e}var Hm=class{};var Gi=new se(""),yL=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>_(RU),providedIn:"platform"})}return e})();var RU=(()=>{class e extends yL{_location;_history;_doc=_(Gi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ro().getBaseHref(this._doc)}onPopState(n){let i=ro().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=ro().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,s){this._history.pushState(n,i,s)}replaceState(n,i,s){this._history.replaceState(n,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function CL(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function gL(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,i=n-(e[n-1]==="/"?1:0);return e.slice(0,i)+e.slice(n)}function Sl(e){return e&&e[0]!=="?"?"?"+e:e}var su=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>_(wL),providedIn:"root"})}return e})(),TU=new se(""),wL=(()=>{class e extends su{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Gi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return CL(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+Sl(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${i}${s}`:i}pushState(n,i,s,r){let o=this.prepareExternalUrl(s+Sl(r));this._platformLocation.pushState(n,i,o)}replaceState(n,i,s,r){let o=this.prepareExternalUrl(s+Sl(r));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||e)(Ie(yL),Ie(TU,8))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var uh=(()=>{class e{_subject=new St;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=PU(gL(fL(i))),this._locationStrategy.onPopState(s=>{this._subject.next({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Sl(i))}normalize(n){return e.stripTrailingSlash(LU(this._basePath,fL(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",s=null){this._locationStrategy.pushState(s,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sl(i)),s)}replaceState(n,i="",s=null){this._locationStrategy.replaceState(s,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sl(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(s=>s(n,i))}subscribe(n,i,s){return this._subject.subscribe({next:n,error:i??void 0,complete:s??void 0})}static normalizeQueryParams=Sl;static joinWithSlash=CL;static stripTrailingSlash=gL;static \u0275fac=function(i){return new(i||e)(Ie(su))};static \u0275prov=re({token:e,factory:()=>kU(),providedIn:"root"})}return e})();function kU(){return new uh(Ie(su))}function LU(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function fL(e){return e.replace(/\/index.html$/,"")}function PU(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function bL(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[s,r]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}var SL="browser",FU="server";function sS(e){return e===FU}var jm=class{};var Um=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let s=n.slice(0,i),r=n.slice(i+1).trim();this.addHeaderEntry(s,r)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.addHeaderEntry(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let s=(t.op==="a"?this.headers.get(n):void 0)||[];s.push(...i),this.headers.set(n,s);break;case"d":let r=t.value;if(!r)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>r.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}addHeaderEntry(t,n){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(n):this.headers.set(i,[n])}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(r=>r.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var OU="X-Request-URL",_U="text/plain",BU="application/json",zxe=`${BU}, ${_U}, */*`;var DL=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(DL||{}),rS=class{headers;status;statusText;url;ok;type;constructor(t,n=200,i="OK"){this.headers=t.headers||new Um,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var $m=class e extends rS{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=DL.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var VU=new se("");var Hxe=RegExp(`^${OU}:`,"m");var GU=new se(""),zU="b",HU="h",jU="s",WU="st",UU="u",$U="rt",Wm=new se(""),YU=["GET","HEAD"];function KU(e,t){let h=_(Wm),{isCacheActive:n}=h,i=He(h,["isCacheActive"]),{transferCache:s,method:r}=e;if(!n||s===!1||r==="POST"&&!i.includePostRequests&&!s||r!=="POST"&&!YU.includes(r)||!i.includeRequestsWithAuthHeaders&&qU(e)||i.filter?.(e)===!1)return t(e);let o=_(yl);if(_(GU,{optional:!0}))throw new ce(2803,!1);let l=e.url,c=ZU(e,l),u=o.get(c,null),d=i.includeHeaders;if(typeof s=="object"&&s.includeHeaders&&(d=s.includeHeaders),u){let{[zU]:p,[$U]:g,[HU]:f,[jU]:m,[WU]:v,[UU]:y}=u,w=p;switch(g){case"arraybuffer":w=new TextEncoder().encode(p).buffer;break;case"blob":w=new Blob([p]);break}let x=new Um(f);return be(new $m({body:w,headers:x,status:m,statusText:v,url:y}))}return t(e).pipe(Gt(p=>{p instanceof $m}))}function qU(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function xL(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function ZU(e,t){let{params:n,method:i,responseType:s}=e,r=xL(n),o=e.serializeBody();o instanceof URLSearchParams?o=xL(o):typeof o!="string"&&(o="");let a=[i,s,t,o,r].join("|"),l=XU(a);return l}function XU(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function ML(e){return[{provide:Wm,useFactory:()=>(Bi("NgHttpTransferCache"),S({isCacheActive:!0},e))},{provide:VU,useValue:KU,multi:!0,deps:[yl,Wm]},{provide:wl,multi:!0,useFactory:()=>{let t=_(En),n=_(Wm);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var aS=class extends Hm{supportsDOMEvents=!0},lS=class e extends aS{static makeCurrent(){vL(new e)}onAndCancel(t,n,i,s){return t.addEventListener(n,i,s),()=>{t.removeEventListener(n,i,s)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=JU();return n==null?null:e7(n)}resetBaseElement(){dh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return bL(document.cookie,t)}},dh=null;function JU(){return dh=dh||document.querySelector("base"),dh?dh.getAttribute("href"):null}function e7(e){return new URL(e,document.baseURI).pathname}var t7=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),cS=new se(""),kL=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,s,r){return this._findPluginFor(i).addEventListener(n,i,s,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(r=>r.supports(n)),!i)throw new ce(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||e)(Ie(cS),Ie(lt))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),Km=class{_doc;constructor(t){this._doc=t}manager},Ym="ng-app-id";function EL(e){for(let t of e)t.remove()}function IL(e,t){let n=t.createElement("style");return n.textContent=e,n}function n7(e,t,n,i){let s=e.head?.querySelectorAll(`style[${Ym}="${t}"],link[${Ym}="${t}"]`);if(s)for(let r of s)r.removeAttribute(Ym),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&n.set(r.textContent,{usage:0,elements:[r]})}function uS(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var LL=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,i,s,r={}){this.doc=n,this.appId=i,this.nonce=s,this.isServer=sS(r),n7(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let s of n)this.addUsage(s,this.inline,IL);i?.forEach(s=>this.addUsage(s,this.external,uS))}removeStyles(n,i){for(let s of n)this.removeUsage(s,this.inline);i?.forEach(s=>this.removeUsage(s,this.external))}addUsage(n,i,s){let r=i.get(n);r?r.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(n,this.doc)))})}removeUsage(n,i){let s=i.get(n);s&&(s.usage--,s.usage<=0&&(EL(s.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])EL(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:s}]of this.inline)s.push(this.addElement(n,IL(i,this.doc)));for(let[i,{elements:s}]of this.external)s.push(this.addElement(n,uS(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(Ym,this.appId),n.appendChild(i)}static \u0275fac=function(i){return new(i||e)(Ie(Gi),Ie(ml),Ie(P0,8),Ie(pa))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),oS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hS=/%COMP%/g,PL="%COMP%",i7=`_nghost-${PL}`,s7=`_ngcontent-${PL}`,r7=!0,o7=new se("",{providedIn:"root",factory:()=>r7});function a7(e){return s7.replace(hS,e)}function l7(e){return i7.replace(hS,e)}function FL(e,t){return t.map(n=>n.replace(hS,e))}var AL=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,s,r,o,a,l,c=null,u=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=sS(a),this.defaultRenderer=new hh(n,o,l,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===fr.ShadowDom&&(i=R(S({},i),{encapsulation:fr.Emulated}));let s=this.getOrCreateRenderer(n,i);return s instanceof qm?s.applyToHost(n):s instanceof ph&&s.applyStyles(),s}getOrCreateRenderer(n,i){let s=this.rendererByCompId,r=s.get(i.id);if(!r){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case fr.Emulated:r=new qm(l,c,i,this.appId,u,o,a,d,this.tracingService);break;case fr.ShadowDom:return new dS(l,c,n,i,o,a,this.nonce,d,this.tracingService);default:r=new ph(l,c,i,u,o,a,d,this.tracingService);break}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||e)(Ie(kL),Ie(LL),Ie(ml),Ie(o7),Ie(Gi),Ie(pa),Ie(lt),Ie(P0),Ie(tu,8))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),hh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,i,s,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=s,this.tracingService=r}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(oS[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(RL(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(RL(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ce(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,s){if(s){n=s+":"+n;let r=oS[s];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let s=oS[i];s?t.removeAttributeNS(s,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,s){s&(Qr.DashCase|Qr.Important)?t.style.setProperty(n,i,s&Qr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Qr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i,s){if(typeof t=="string"&&(t=ro().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);let r=this.decoratePreventDefault(i);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(r=this.tracingService.wrapEventListener(t,n,r)),this.eventManager.addEventListener(t,n,r,s)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function RL(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var dS=class extends hh{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,i,s,r,o,a,l,c){super(t,r,o,l,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=FL(s.id,s.styles);for(let h of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let d=s.getExternalStyles?.();if(d)for(let h of d){let p=uS(h,r);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ph=class extends hh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,i,s,r,o,a,l,c){super(t,r,o,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=c?FL(c,i.styles):i.styles,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},qm=class extends ph{contentAttr;hostAttr;constructor(t,n,i,s,r,o,a,l,c){let u=s+"-"+i.id;super(t,n,i,r,o,a,l,c,u),this.contentAttr=a7(u),this.hostAttr=l7(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},c7=(()=>{class e extends Km{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,s,r){return n.addEventListener(i,s,r),()=>this.removeEventListener(n,i,s,r)}removeEventListener(n,i,s,r){return n.removeEventListener(i,s,r)}static \u0275fac=function(i){return new(i||e)(Ie(Gi))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),TL=["alt","control","meta","shift"],u7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d7={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},h7=(()=>{class e extends Km{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,s,r){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ro().onAndCancel(n,o.domEventName,a,r))}static parseEventName(n){let i=n.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let r=e._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),TL.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=r,i.length!=0||r.length===0)return null;let l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(n,i){let s=u7[n.key]||n.key,r="";return i.indexOf("code.")>-1&&(s=n.code,r="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),TL.forEach(o=>{if(o!==s){let a=d7[o];a(n)&&(r+=o+".")}}),r+=s,r===i)}static eventCallback(n,i,s){return r=>{e.matchEventFullKeyCode(r,n)&&s.runGuarded(()=>i(r))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||e)(Ie(Gi))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();function NL(e,t){return cL(S({rootComponent:e},p7(t)))}function p7(e){return{appProviders:[...y7,...e?.providers??[]],platformProviders:v7}}function g7(){lS.makeCurrent()}function f7(){return new gr}function m7(){return RT(document),document}var v7=[{provide:pa,useValue:SL},{provide:L0,useValue:g7,multi:!0},{provide:Gi,useFactory:m7,deps:[]}];var y7=[{provide:vm,useValue:"root"},{provide:gr,useFactory:f7,deps:[]},{provide:cS,useClass:c7,multi:!0,deps:[Gi,lt,pa]},{provide:cS,useClass:h7,multi:!0,deps:[Gi]},AL,LL,kL,{provide:Xc,useExisting:AL},{provide:jm,useClass:t7,deps:[]},[]];var OL=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(i){return new(i||e)(Ie(Gi))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var pS=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=Ie(C7),s},providedIn:"root"})}return e})(),C7=(()=>{class e extends pS{_doc;constructor(n){super(),this._doc=n}sanitize(n,i){if(i==null)return null;switch(n){case wr.NONE:return i;case wr.HTML:return ga(i,"HTML")?Cr(i):sk(this._doc,String(i)).toString();case wr.STYLE:return ga(i,"Style")?Cr(i):i;case wr.SCRIPT:if(ga(i,"Script"))return Cr(i);throw new ce(5200,!1);case wr.URL:return ga(i,"URL")?Cr(i):Tm(String(i));case wr.RESOURCE_URL:if(ga(i,"ResourceURL"))return Cr(i);throw new ce(5201,!1);default:throw new ce(5202,!1)}}bypassSecurityTrustHtml(n){return KT(n)}bypassSecurityTrustStyle(n){return qT(n)}bypassSecurityTrustScript(n){return ZT(n)}bypassSecurityTrustUrl(n){return XT(n)}bypassSecurityTrustResourceUrl(n){return QT(n)}static \u0275fac=function(i){return new(i||e)(Ie(Gi))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zm=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Zm||{});function w7(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function _L(){return w7(Zm.EventReplay,uL())}function BL(...e){let t=[],n=new Set,i=n.has(Zm.HttpTransferCacheOptions);for(let{\u0275providers:s,\u0275kind:r}of e)n.add(r),s.length&&t.push(s);return eo([[],dL(),n.has(Zm.NoHttpTransferCache)||i?[]:ML({}),t])}var Te="primary",Ah=Symbol("RouteTitle"),yS=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function uu(e){return new yS(e)}function S7(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let s={};for(let r=0;r<i.length;r++){let o=i[r],a=e[r];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:s}}function x7(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!br(e[n],t[n]))return!1;return!0}function br(e,t){let n=e?CS(e):void 0,i=t?CS(t):void 0;if(!n||!i||n.length!=i.length)return!1;let s;for(let r=0;r<n.length;r++)if(s=n[r],!$L(e[s],t[s]))return!1;return!0}function CS(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function $L(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((s,r)=>i[r]===s)}else return e===t}function YL(e){return e.length>0?e[e.length-1]:null}function ya(e){return zw(e)?e:Cl(e)?vt(Promise.resolve(e)):be(e)}var D7={exact:qL,subset:ZL},KL={exact:M7,subset:E7,ignored:()=>!0};function VL(e,t,n){return D7[n.paths](e.root,t.root,n.matrixParams)&&KL[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function M7(e,t){return br(e,t)}function qL(e,t,n){if(!Dl(e.segments,t.segments)||!Jm(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!qL(e.children[i],t.children[i],n))return!1;return!0}function E7(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>$L(e[n],t[n]))}function ZL(e,t,n){return XL(e,t,t.segments,n)}function XL(e,t,n,i){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!Dl(s,n)||t.hasChildren()||!Jm(s,n,i))}else if(e.segments.length===n.length){if(!Dl(e.segments,n)||!Jm(e.segments,n,i))return!1;for(let s in t.children)if(!e.children[s]||!ZL(e.children[s],t.children[s],i))return!1;return!0}else{let s=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!Dl(e.segments,s)||!Jm(e.segments,s,i)||!e.children[Te]?!1:XL(e.children[Te],t,r,i)}}function Jm(e,t,n){return t.every((i,s)=>KL[n](e[s].parameters,i.parameters))}var ao=class{root;queryParams;fragment;_queryParamMap;constructor(t=new it([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=uu(this.queryParams),this._queryParamMap}toString(){return R7.serialize(this)}},it=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ev(this)}},xl=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=uu(this.parameters),this._parameterMap}toString(){return JL(this)}};function I7(e,t){return Dl(e,t)&&e.every((n,i)=>br(n.parameters,t[i].parameters))}function Dl(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function A7(e,t){let n=[];return Object.entries(e.children).forEach(([i,s])=>{i===Te&&(n=n.concat(t(s,i)))}),Object.entries(e.children).forEach(([i,s])=>{i!==Te&&(n=n.concat(t(s,i)))}),n}var US=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>new Ch,providedIn:"root"})}return e})(),Ch=class{parse(t){let n=new bS(t);return new ao(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${gh(t.root,!0)}`,i=L7(t.queryParams),s=typeof t.fragment=="string"?`#${T7(t.fragment)}`:"";return`${n}${i}${s}`}},R7=new Ch;function ev(e){return e.segments.map(t=>JL(t)).join("/")}function gh(e,t){if(!e.hasChildren())return ev(e);if(t){let n=e.children[Te]?gh(e.children[Te],!1):"",i=[];return Object.entries(e.children).forEach(([s,r])=>{s!==Te&&i.push(`${s}:${gh(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=A7(e,(i,s)=>s===Te?[gh(e.children[Te],!1)]:[`${s}:${gh(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Te]!=null?`${ev(e)}/${n[0]}`:`${ev(e)}/(${n.join("//")})`}}function QL(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xm(e){return QL(e).replace(/%3B/gi,";")}function T7(e){return encodeURI(e)}function wS(e){return QL(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tv(e){return decodeURIComponent(e)}function GL(e){return tv(e.replace(/\+/g,"%20"))}function JL(e){return`${wS(e.path)}${k7(e.parameters)}`}function k7(e){return Object.entries(e).map(([t,n])=>`;${wS(t)}=${wS(n)}`).join("")}function L7(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(s=>`${Xm(n)}=${Xm(s)}`).join("&"):`${Xm(n)}=${Xm(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var P7=/^[^\/()?;#]+/;function gS(e){let t=e.match(P7);return t?t[0]:""}var F7=/^[^\/()?;=#]+/;function N7(e){let t=e.match(F7);return t?t[0]:""}var O7=/^[^=?&#]+/;function _7(e){let t=e.match(O7);return t?t[0]:""}var B7=/^[^&#]+/;function V7(e){let t=e.match(B7);return t?t[0]:""}var bS=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new it([],{}):new it([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[Te]=new it(t,n)),i}parseSegment(){let t=gS(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(t),new xl(tv(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=N7(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=gS(this.remaining);s&&(i=s,this.capture(i))}t[tv(n)]=tv(i)}parseQueryParam(t){let n=_7(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=V7(this.remaining);o&&(i=o,this.capture(i))}let s=GL(n),r=GL(i);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=gS(this.remaining),s=this.remaining[i.length];if(s!=="/"&&s!==")"&&s!==";")throw new ce(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Te);let o=this.parseChildren();n[r]=Object.keys(o).length===1?o[Te]:new it([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ce(4011,!1)}};function eP(e){return e.segments.length>0?new it([],{[Te]:e}):e}function tP(e){let t={};for(let[i,s]of Object.entries(e.children)){let r=tP(s);if(i===Te&&r.segments.length===0&&r.hasChildren())for(let[o,a]of Object.entries(r.children))t[o]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let n=new it(e.segments,t);return G7(n)}function G7(e){if(e.numberOfChildren===1&&e.children[Te]){let t=e.children[Te];return new it(e.segments.concat(t.segments),t.children)}return e}function Ml(e){return e instanceof ao}function z7(e,t,n=null,i=null){let s=nP(e);return iP(s,t,n,i)}function nP(e){let t;function n(r){let o={};for(let l of r.children){let c=n(l);o[l.outlet]=c}let a=new it(r.url,o);return r===e&&(t=a),a}let i=n(e.root),s=eP(i);return t??s}function iP(e,t,n,i){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return fS(s,s,s,n,i);let r=H7(t);if(r.toRoot())return fS(s,s,new it([],{}),n,i);let o=j7(r,s,e),a=o.processChildren?mh(o.segmentGroup,o.index,r.commands):rP(o.segmentGroup,o.index,r.commands);return fS(s,o.segmentGroup,a,n,i)}function nv(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function wh(e){return typeof e=="object"&&e!=null&&e.outlets}function fS(e,t,n,i,s){let r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;e===t?o=n:o=sP(e,t,n);let a=eP(tP(o));return new ao(a,r,s)}function sP(e,t,n){let i={};return Object.entries(e.children).forEach(([s,r])=>{r===t?i[s]=n:i[s]=sP(r,t,n)}),new it(e.segments,i)}var iv=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&nv(i[0]))throw new ce(4003,!1);let s=i.find(wh);if(s&&s!==YL(i))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function H7(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new iv(!0,0,e);let t=0,n=!1,i=e.reduce((s,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return typeof r!="string"?[...s,r]:o===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,r]},[]);return new iv(n,t,i)}var au=class{segmentGroup;processChildren;index;constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function j7(e,t,n){if(e.isAbsolute)return new au(t,!0,0);if(!n)return new au(t,!1,NaN);if(n.parent===null)return new au(n,!0,0);let i=nv(e.commands[0])?0:1,s=n.segments.length-1+i;return W7(n,s,e.numberOfDoubleDots)}function W7(e,t,n){let i=e,s=t,r=n;for(;r>s;){if(r-=s,i=i.parent,!i)throw new ce(4005,!1);s=i.segments.length}return new au(i,!1,s-r)}function U7(e){return wh(e[0])?e[0].outlets:{[Te]:e}}function rP(e,t,n){if(e??=new it([],{}),e.segments.length===0&&e.hasChildren())return mh(e,t,n);let i=$7(e,t,n),s=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let r=new it(e.segments.slice(0,i.pathIndex),{});return r.children[Te]=new it(e.segments.slice(i.pathIndex),e.children),mh(r,0,s)}else return i.match&&s.length===0?new it(e.segments,{}):i.match&&!e.hasChildren()?SS(e,t,n):i.match?mh(e,0,s):SS(e,t,n)}function mh(e,t,n){if(n.length===0)return new it(e.segments,{});{let i=U7(n),s={};if(Object.keys(i).some(r=>r!==Te)&&e.children[Te]&&e.numberOfChildren===1&&e.children[Te].segments.length===0){let r=mh(e.children[Te],t,n);return new it(e.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[r]=rP(e.children[r],t,o))}),Object.entries(e.children).forEach(([r,o])=>{i[r]===void 0&&(s[r]=o)}),new it(e.segments,s)}}function $7(e,t,n){let i=0,s=t,r={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(i>=n.length)return r;let o=e.segments[s],a=n[i];if(wh(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!HL(l,c,o))return r;i+=2}else{if(!HL(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}function SS(e,t,n){let i=e.segments.slice(0,t),s=0;for(;s<n.length;){let r=n[s];if(wh(r)){let l=Y7(r.outlets);return new it(i,l)}if(s===0&&nv(n[0])){let l=e.segments[t];i.push(new xl(l.path,zL(n[0]))),s++;continue}let o=wh(r)?r.outlets[Te]:`${r}`,a=s<n.length-1?n[s+1]:null;o&&a&&nv(a)?(i.push(new xl(o,zL(a))),s+=2):(i.push(new xl(o,{})),s++)}return new it(i,{})}function Y7(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=SS(new it([],{}),0,i))}),t}function zL(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function HL(e,t,n){return e==n.path&&br(t,n.parameters)}var vh="imperative",In=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(In||{}),as=class{id;url;constructor(t,n){this.id=t,this.url=n}},bh=class extends as{type=In.NavigationStart;navigationTrigger;restoredState;constructor(t,n,i="imperative",s=null){super(t,n),this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},va=class extends as{urlAfterRedirects;type=In.NavigationEnd;constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Hi=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Hi||{}),xS=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(xS||{}),oo=class extends as{reason;code;type=In.NavigationCancel;constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},El=class extends as{reason;code;type=In.NavigationSkipped;constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s}},Sh=class extends as{error;target;type=In.NavigationError;constructor(t,n,i,s){super(t,n),this.error=i,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sv=class extends as{urlAfterRedirects;state;type=In.RoutesRecognized;constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},DS=class extends as{urlAfterRedirects;state;type=In.GuardsCheckStart;constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},MS=class extends as{urlAfterRedirects;state;shouldActivate;type=In.GuardsCheckEnd;constructor(t,n,i,s,r){super(t,n),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ES=class extends as{urlAfterRedirects;state;type=In.ResolveStart;constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},IS=class extends as{urlAfterRedirects;state;type=In.ResolveEnd;constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},AS=class{route;type=In.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},RS=class{route;type=In.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},TS=class{snapshot;type=In.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kS=class{snapshot;type=In.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},LS=class{snapshot;type=In.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},PS=class{snapshot;type=In.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var xh=class{},du=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function K7(e,t){return e.providers&&!e._injector&&(e._injector=_m(e.providers,t,`Route: ${e.path}`)),e._injector??t}function zs(e){return e.outlet||Te}function q7(e,t){let n=e.filter(i=>zs(i)===t);return n.push(...e.filter(i=>zs(i)!==t)),n}function Rh(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var FS=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Rh(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new dv(this.rootInjector)}},dv=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,i){let s=this.getOrCreateContext(n);s.outlet=i,this.contexts.set(n,s)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new FS(this.rootInjector),this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(i){return new(i||e)(Ie(Ni))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rv=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=NS(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=NS(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=OS(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return OS(t,this._root).map(n=>n.value)}};function NS(e,t){if(e===t.value)return t;for(let n of t.children){let i=NS(e,n);if(i)return i}return null}function OS(e,t){if(e===t.value)return[t];for(let n of t.children){let i=OS(e,n);if(i.length)return i.unshift(t),i}return[]}var zi=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function ou(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ov=class extends rv{snapshot;constructor(t,n){super(t),this.snapshot=n,$S(this,t)}toString(){return this.snapshot.toString()}};function oP(e){let t=Z7(e),n=new Sn([new xl("",{})]),i=new Sn({}),s=new Sn({}),r=new Sn({}),o=new Sn(""),a=new Il(n,i,r,o,s,Te,e,t.root);return a.snapshot=t.root,new ov(new zi(a,[]),t)}function Z7(e){let t={},n={},i={},s="",r=new lu([],t,i,s,n,Te,e,null,{});return new lv("",new zi(r,[]))}var Il=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,i,s,r,o,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Me(c=>c[Ah]))??be(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Me(t=>uu(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Me(t=>uu(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function av(e,t,n="emptyOnly"){let i,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:S(S({},t.params),e.params),data:S(S({},t.data),e.data),resolve:S(S(S(S({},e.data),t.data),s?.data),e._resolvedData)}:i={params:S({},e.params),data:S({},e.data),resolve:S(S({},e.data),e._resolvedData??{})},s&&lP(s)&&(i.resolve[Ah]=s.title),i}var lu=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ah]}constructor(t,n,i,s,r,o,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=uu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=uu(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},lv=class extends rv{url;constructor(t,n){super(n),this.url=t,$S(this,n)}toString(){return aP(this._root)}};function $S(e,t){t.value._routerState=e,t.children.forEach(n=>$S(e,n))}function aP(e){let t=e.children.length>0?` { ${e.children.map(aP).join(", ")} } `:"";return`${e.value}${t}`}function mS(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,br(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),br(t.params,n.params)||e.paramsSubject.next(n.params),x7(t.url,n.url)||e.urlSubject.next(n.url),br(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function _S(e,t){let n=br(e.params,t.params)&&I7(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||_S(e.parent,t.parent))}function lP(e){return typeof e.title=="string"||e.title===null}var X7=new se(""),YS=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Te;activateEvents=new N;deactivateEvents=new N;attachEvents=new N;detachEvents=new N;routerOutletData=wT(void 0);parentContexts=_(dv);location=_(iu);changeDetector=_(ma);inputBinder=_(KS,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:s}=n.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=n;let s=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new BS(n,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||e)};static \u0275dir=Zn({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vr]})}return e})(),BS=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,n,i,s){this.route=t,this.childContexts=n,this.parent=i,this.outletData=s}get(t,n){return t===Il?this.route:t===dv?this.childContexts:t===X7?this.outletData:this.parent.get(t,n)}},KS=new se("");function Q7(e,t,n){let i=Dh(e,t._root,n?n._root:void 0);return new ov(i,t)}function Dh(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let s=J7(e,t,n);return new zi(i,s)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Dh(e,a)),o}}let i=e9(t.value),s=t.children.map(r=>Dh(e,r));return new zi(i,s)}}function J7(e,t,n){return t.children.map(i=>{for(let s of n.children)if(e.shouldReuseRoute(i.value,s.value.snapshot))return Dh(e,i,s);return Dh(e,i)})}function e9(e){return new Il(new Sn(e.url),new Sn(e.params),new Sn(e.queryParams),new Sn(e.fragment),new Sn(e.data),e.outlet,e.component,e)}var Mh=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},cP="ngNavigationCancelingError";function cv(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Ml(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=uP(!1,Hi.Redirect);return s.url=n,s.navigationBehaviorOptions=i,s}function uP(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[cP]=!0,n.cancellationCode=t,n}function t9(e){return dP(e)&&Ml(e.url)}function dP(e){return!!e&&e[cP]}var n9=(e,t,n,i)=>Me(s=>(new VS(t,s.targetRouterState,s.currentRouterState,n,i).activate(e),s)),VS=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,i,s,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),mS(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let s=ou(n);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(s===r)if(s.component){let o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,i);else r&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=ou(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=ou(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let s=ou(n);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new PS(r.value.snapshot))}),t.children.length&&this.forwardEvent(new kS(t.value.snapshot))}activateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(mS(s),s===r)if(s.component){let o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,i);else if(s.component){let o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),mS(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},uv=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},cu=class{component;route;constructor(t,n){this.component=t,this.route=n}};function i9(e,t,n){let i=e._root,s=t?t._root:null;return fh(i,s,n,[i.value])}function s9(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function pu(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!w1(e)?e:t.get(e):i}function fh(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=ou(t);return e.children.forEach(o=>{r9(o,r[o.value.outlet],n,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>yh(a,n.getContext(o),s)),s}function r9(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=o9(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new uv(i)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?fh(e,t,a?a.children:null,i,s):fh(e,t,n,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new cu(a.outlet.component,o))}else o&&yh(t,a,s),s.canActivateChecks.push(new uv(i)),r.component?fh(e,null,a?a.children:null,i,s):fh(e,null,n,i,s);return s}function o9(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Dl(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Dl(e.url,t.url)||!br(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_S(e,t)||!br(e.queryParams,t.queryParams);case"paramsChange":default:return!_S(e,t)}}function yh(e,t,n){let i=ou(e),s=e.value;Object.entries(i).forEach(([r,o])=>{s.component?t?yh(o,t.children.getContext(r),n):yh(o,null,n):yh(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new cu(t.outlet.component,s)):n.canDeactivateChecks.push(new cu(null,s)):n.canDeactivateChecks.push(new cu(null,s))}function Th(e){return typeof e=="function"}function a9(e){return typeof e=="boolean"}function l9(e){return e&&Th(e.canLoad)}function c9(e){return e&&Th(e.canActivate)}function u9(e){return e&&Th(e.canActivateChild)}function d9(e){return e&&Th(e.canDeactivate)}function h9(e){return e&&Th(e.canMatch)}function hP(e){return e instanceof Ur||e?.name==="EmptyError"}var Qm=Symbol("INITIAL_VALUE");function hu(){return Dn(e=>ff(e.map(t=>t.pipe(ln(1),Kw(Qm)))).pipe(Me(t=>{for(let n of t)if(n!==!0){if(n===Qm)return Qm;if(n===!1||p9(n))return n}return!0}),xn(t=>t!==Qm),ln(1)))}function p9(e){return Ml(e)||e instanceof Mh}function g9(e,t){return Et(n=>{let{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=n;return o.length===0&&r.length===0?be(R(S({},n),{guardsResult:!0})):f9(o,i,s,e).pipe(Et(a=>a&&a9(a)?m9(i,r,e,t):be(a)),Me(a=>R(S({},n),{guardsResult:a})))})}function f9(e,t,n,i){return vt(e).pipe(Et(s=>b9(s.component,s.route,n,t,i)),$r(s=>s!==!0,!0))}function m9(e,t,n,i){return vt(t).pipe(ll(s=>cr(y9(s.route.parent,i),v9(s.route,i),w9(e,s.path,n),C9(e,s.route,n))),$r(s=>s!==!0,!0))}function v9(e,t){return e!==null&&t&&t(new LS(e)),be(!0)}function y9(e,t){return e!==null&&t&&t(new TS(e)),be(!0)}function C9(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return be(!0);let s=i.map(r=>ol(()=>{let o=Rh(t)??n,a=pu(r,o),l=c9(a)?a.canActivate(t,e):is(o,()=>a(t,e));return ya(l).pipe($r())}));return be(s).pipe(hu())}function w9(e,t,n){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>s9(o)).filter(o=>o!==null).map(o=>ol(()=>{let a=o.guards.map(l=>{let c=Rh(o.node)??n,u=pu(l,c),d=u9(u)?u.canActivateChild(i,e):is(c,()=>u(i,e));return ya(d).pipe($r())});return be(a).pipe(hu())}));return be(r).pipe(hu())}function b9(e,t,n,i,s){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return be(!0);let o=r.map(a=>{let l=Rh(t)??s,c=pu(a,l),u=d9(c)?c.canDeactivate(e,t,n,i):is(l,()=>c(e,t,n,i));return ya(u).pipe($r())});return be(o).pipe(hu())}function S9(e,t,n,i){let s=t.canLoad;if(s===void 0||s.length===0)return be(!0);let r=s.map(o=>{let a=pu(o,e),l=l9(a)?a.canLoad(t,n):is(e,()=>a(t,n));return ya(l)});return be(r).pipe(hu(),pP(i))}function pP(e){return Fw(Gt(t=>{if(typeof t!="boolean")throw cv(e,t)}),Me(t=>t===!0))}function x9(e,t,n,i){let s=t.canMatch;if(!s||s.length===0)return be(!0);let r=s.map(o=>{let a=pu(o,e),l=h9(a)?a.canMatch(t,n):is(e,()=>a(t,n));return ya(l)});return be(r).pipe(hu(),pP(i))}var Eh=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ih=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function ru(e){return Jo(new Eh(e))}function D9(e){return Jo(new ce(4e3,!1))}function M9(e){return Jo(uP(!1,Hi.GuardRejected))}var GS=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],s=n.root;for(;;){if(i=i.concat(s.segments),s.numberOfChildren===0)return be(i);if(s.numberOfChildren>1||!s.children[Te])return D9(`${t.redirectTo}`);s=s.children[Te]}}applyRedirectCommands(t,n,i,s,r){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:p,data:g,title:f}=s,m=is(r,()=>a({params:p,data:g,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:f}));if(m instanceof ao)throw new Ih(m);n=m}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n[0]==="/")throw new Ih(o);return o}applyRedirectCreateUrlTree(t,n,i,s){let r=this.createSegmentGroup(t,n.root,i,s);return new ao(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([s,r])=>{if(typeof r=="string"&&r[0]===":"){let a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(t,n,i,s){let r=this.createSegments(t,n.segments,i,s),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,s)}),new it(r,o)}createSegments(t,n,i,s){return n.map(r=>r.path[0]===":"?this.findPosParam(t,r,s):this.findOrReturn(r,i))}findPosParam(t,n,i){let s=i[n.path.substring(1)];if(!s)throw new ce(4001,!1);return s}findOrReturn(t,n){let i=0;for(let s of n){if(s.path===t.path)return n.splice(i),s;i++}return t}},zS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function E9(e,t,n,i,s){let r=gP(e,t,n);return r.matched?(i=K7(t,i),x9(i,t,n,s).pipe(Me(o=>o===!0?r:S({},zS)))):be(r)}function gP(e,t,n){if(t.path==="**")return I9(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?S({},zS):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||S7)(n,e,t);if(!s)return S({},zS);let r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let o=s.consumed.length>0?S(S({},r),s.consumed[s.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function I9(e){return{matched:!0,parameters:e.length>0?YL(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function jL(e,t,n,i){return n.length>0&&T9(e,n,i)?{segmentGroup:new it(t,R9(i,new it(n,e.children))),slicedSegments:[]}:n.length===0&&k9(e,n,i)?{segmentGroup:new it(e.segments,A9(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new it(e.segments,e.children),slicedSegments:n}}function A9(e,t,n,i){let s={};for(let r of n)if(hv(e,t,r)&&!i[zs(r)]){let o=new it([],{});s[zs(r)]=o}return S(S({},i),s)}function R9(e,t){let n={};n[Te]=t;for(let i of e)if(i.path===""&&zs(i)!==Te){let s=new it([],{});n[zs(i)]=s}return n}function T9(e,t,n){return n.some(i=>hv(e,t,i)&&zs(i)!==Te)}function k9(e,t,n){return n.some(i=>hv(e,t,i))}function hv(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function L9(e,t,n){return t.length===0&&!e.children[n]}var HS=class{};function P9(e,t,n,i,s,r,o="emptyOnly"){return new jS(e,t,n,i,s,o,r).recognize()}var F9=31,jS=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,i,s,r,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new GS(this.urlSerializer,this.urlTree)}noMatchError(t){return new ce(4002,`'${t.segmentGroup}'`)}recognize(){let t=jL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Me(({children:n,rootSnapshot:i})=>{let s=new zi(i,n),r=new lv("",s),o=z7(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),{state:r,tree:o}}))}match(t){let n=new lu([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Te,n).pipe(Me(i=>({children:i,rootSnapshot:n})),ea(i=>{if(i instanceof Ih)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Eh?this.noMatchError(i):i}))}processSegmentGroup(t,n,i,s,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i,r):this.processSegment(t,n,i,i.segments,s,!0,r).pipe(Me(o=>o instanceof zi?[o]:[]))}processChildren(t,n,i,s){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return vt(r).pipe(ll(o=>{let a=i.children[o],l=q7(n,o);return this.processSegmentGroup(t,l,a,o,s)}),Yw((o,a)=>(o.push(...a),o)),ta(null),Uw(),Et(o=>{if(o===null)return ru(i);let a=fP(o);return N9(a),be(a)}))}processSegment(t,n,i,s,r,o,a){return vt(n).pipe(ll(l=>this.processSegmentAgainstRoute(l._injector??t,n,l,i,s,r,o,a).pipe(ea(c=>{if(c instanceof Eh)return be(null);throw c}))),$r(l=>!!l),ea(l=>{if(hP(l))return L9(i,s,r)?be(new HS):ru(i);throw l}))}processSegmentAgainstRoute(t,n,i,s,r,o,a,l){return zs(i)!==o&&(o===Te||!hv(s,r,i))?ru(s):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,i,r,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,i,r,o,l):ru(s)}expandSegmentAgainstRouteUsingRedirect(t,n,i,s,r,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=gP(n,s,r);if(!l)return ru(n);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>F9&&(this.allowRedirects=!1));let p=new lu(r,c,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,WL(s),zs(s),s.component??s._loadedComponent??null,s,UL(s)),g=av(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let f=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,d,p,t);return this.applyRedirects.lineralizeSegments(s,f).pipe(Et(m=>this.processSegment(t,i,n,m.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,n,i,s,r,o){let a=E9(n,i,s,t,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(Dn(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,s).pipe(Dn(({routes:c})=>{let u=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:p}=l,g=new lu(h,d,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,WL(i),zs(i),i.component??i._loadedComponent??null,i,UL(i)),f=av(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(f.params),g.data=Object.freeze(f.data);let{segmentGroup:m,slicedSegments:v}=jL(n,h,p,c);if(v.length===0&&m.hasChildren())return this.processChildren(u,c,m,g).pipe(Me(w=>new zi(g,w)));if(c.length===0&&v.length===0)return be(new zi(g,[]));let y=zs(i)===r;return this.processSegment(u,c,m,v,y?Te:r,!0,g).pipe(Me(w=>new zi(g,w instanceof zi?[w]:[])))}))):ru(n)))}getChildConfig(t,n,i){return n.children?be({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?be({routes:n._loadedRoutes,injector:n._loadedInjector}):S9(t,n,i,this.urlSerializer).pipe(Et(s=>s?this.configLoader.loadChildren(t,n).pipe(Gt(r=>{n._loadedRoutes=r.routes,n._loadedInjector=r.injector})):M9(n))):be({routes:[],injector:t})}};function N9(e){e.sort((t,n)=>t.value.outlet===Te?-1:n.value.outlet===Te?1:t.value.outlet.localeCompare(n.value.outlet))}function O9(e){let t=e.value.routeConfig;return t&&t.path===""}function fP(e){let t=[],n=new Set;for(let i of e){if(!O9(i)){t.push(i);continue}let s=t.find(r=>i.value.routeConfig===r.value.routeConfig);s!==void 0?(s.children.push(...i.children),n.add(s)):t.push(i)}for(let i of n){let s=fP(i.children);t.push(new zi(i.value,s))}return t.filter(i=>!n.has(i))}function WL(e){return e.data||{}}function UL(e){return e.resolve||{}}function _9(e,t,n,i,s,r){return Et(o=>P9(e,t,n,i,o.extractedUrl,s,r).pipe(Me(({state:a,tree:l})=>R(S({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function B9(e,t){return Et(n=>{let{targetSnapshot:i,guards:{canActivateChecks:s}}=n;if(!s.length)return be(n);let r=new Set(s.map(l=>l.route)),o=new Set;for(let l of r)if(!o.has(l))for(let c of mP(l))o.add(c);let a=0;return vt(o).pipe(ll(l=>r.has(l)?V9(l,i,e,t):(l.data=av(l,l.parent,e).resolve,be(void 0))),Gt(()=>a++),Fc(1),Et(l=>a===o.size?be(n):$n))})}function mP(e){let t=e.children.map(n=>mP(n)).flat();return[e,...t]}function V9(e,t,n,i){let s=e.routeConfig,r=e._resolve;return s?.title!==void 0&&!lP(s)&&(r[Ah]=s.title),G9(r,e,t,i).pipe(Me(o=>(e._resolvedData=o,e.data=av(e,e.parent,n).resolve,null)))}function G9(e,t,n,i){let s=CS(e);if(s.length===0)return be({});let r={};return vt(s).pipe(Et(o=>z9(e[o],t,n,i).pipe($r(),Gt(a=>{if(a instanceof Mh)throw cv(new Ch,a);r[o]=a}))),Fc(1),Me(()=>r),ea(o=>hP(o)?$n:Jo(o)))}function z9(e,t,n,i){let s=Rh(t)??i,r=pu(e,s),o=r.resolve?r.resolve(t,n):is(s,()=>r(t,n));return ya(o)}function vS(e){return Dn(t=>{let n=e(t);return n?vt(n).pipe(Me(()=>t)):be(t)})}var vP=(()=>{class e{buildTitle(n){let i,s=n.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(r=>r.outlet===Te);return i}getResolvedTitleForRoute(n){return n.data[Ah]}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>_(H9),providedIn:"root"})}return e})(),H9=(()=>{class e extends vP{title;constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||e)(Ie(OL))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qS=new se("",{providedIn:"root",factory:()=>({})}),j9=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=qn({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,s){i&1&&os(0,"router-outlet")},dependencies:[YS],encapsulation:2})}return e})();function ZS(e){let t=e.children&&e.children.map(ZS),n=t?R(S({},e),{children:t}):S({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Te&&(n.component=j9),n}var XS=new se(""),W9=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(eS);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return be(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=ya(n.loadComponent()).pipe(Me(yP),Gt(r=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=r}),Pc(()=>{this.componentLoaders.delete(n)})),s=new Qo(i,()=>new St).pipe(Ac());return this.componentLoaders.set(n,s),s}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return be({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=U9(i,this.compiler,n,this.onLoadEndListener).pipe(Pc(()=>{this.childrenLoaders.delete(i)})),o=new Qo(r,()=>new St).pipe(Ac());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function U9(e,t,n,i){return ya(e.loadChildren()).pipe(Me(yP),Et(s=>s instanceof Jd||Array.isArray(s)?be(s):vt(t.compileModuleAsync(s))),Me(s=>{i&&i(e);let r,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(r=s.create(n).injector,o=r.get(XS,[],{optional:!0,self:!0}).flat()),{routes:o.map(ZS),injector:r}}))}function $9(e){return e&&typeof e=="object"&&"default"in e}function yP(e){return $9(e)?e.default:e}var QS=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>_(Y9),providedIn:"root"})}return e})(),Y9=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),K9=new se("");var q9=new se(""),Z9=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new St;transitionAbortSubject=new St;configLoader=_(W9);environmentInjector=_(Ni);urlSerializer=_(US);rootContexts=_(dv);location=_(uh);inputBindingEnabled=_(KS,{optional:!0})!==null;titleStrategy=_(vP);options=_(qS,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(QS);createViewTransition=_(K9,{optional:!0});navigationErrorHandler=_(q9,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>be(void 0);rootComponentType=null;constructor(){let n=s=>this.events.next(new AS(s)),i=s=>this.events.next(new RS(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;this.transitions?.next(R(S(S({},this.transitions.value),n),{id:i}))}setupNavigations(n,i,s){return this.transitions=new Sn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:vh,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xn(r=>r.id!==0),Me(r=>R(S({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Dn(r=>{let o=!1,a=!1;return be(r).pipe(Dn(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Hi.SupersededByNewNavigation),$n;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?R(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new El(l.id,this.urlSerializer.serialize(l.rawUrl),d,xS.IgnoredSameUrlNavigation)),l.resolve(!1),$n}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return be(l).pipe(Dn(d=>{let h=this.transitions?.getValue();return this.events.next(new bh(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?$n:Promise.resolve(d)}),_9(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Gt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=R(S({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new sv(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:p,restoredState:g,extras:f}=l,m=new bh(d,this.urlSerializer.serialize(h),p,g);this.events.next(m);let v=oP(this.rootComponentType).snapshot;return this.currentTransition=r=R(S({},l),{targetSnapshot:v,urlAfterRedirects:h,extras:R(S({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,be(r)}else{let d="";return this.events.next(new El(l.id,this.urlSerializer.serialize(l.extractedUrl),d,xS.IgnoredByUrlHandlingStrategy)),l.resolve(!1),$n}}),Gt(l=>{let c=new DS(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Me(l=>(this.currentTransition=r=R(S({},l),{guards:i9(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),r)),g9(this.environmentInjector,l=>this.events.next(l)),Gt(l=>{if(r.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw cv(this.urlSerializer,l.guardsResult);let c=new MS(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),xn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Hi.GuardRejected),!1)),vS(l=>{if(l.guards.canActivateChecks.length)return be(l).pipe(Gt(c=>{let u=new ES(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Dn(c=>{let u=!1;return be(c).pipe(B9(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Hi.NoDataFromResolver)}}))}),Gt(c=>{let u=new IS(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),vS(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Gt(h=>{u.component=h}),Me(()=>{})));for(let h of u.children)d.push(...c(h));return d};return ff(c(l.targetSnapshot.root)).pipe(ta(null),ln(1))}),vS(()=>this.afterPreactivation()),Dn(()=>{let{currentSnapshot:l,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?vt(u).pipe(Me(()=>r)):be(r)}),Me(l=>{let c=Q7(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r=R(S({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),Gt(()=>{this.events.next(new xh)}),n9(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ln(1),Gt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new va(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),qw(this.transitionAbortSubject.pipe(Gt(l=>{throw l}))),Pc(()=>{!o&&!a&&this.cancelNavigationTransition(r,"",Hi.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ea(l=>{if(a=!0,dP(l))this.events.next(new oo(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),t9(l)?this.events.next(new du(l.url,l.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Sh(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);try{let u=is(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Mh){let{message:d,cancellationCode:h}=cv(this.urlSerializer,u);this.events.next(new oo(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new du(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),l}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return $n}))}))}cancelNavigationTransition(n,i,s){let r=new oo(n.id,this.urlSerializer.serialize(n.extractedUrl),i,s);this.events.next(r),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function X9(e){return e!==vh}var Q9=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>_(J9),providedIn:"root"})}return e})(),WS=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},J9=(()=>{class e extends WS{static \u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),CP=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>_(e$),providedIn:"root"})}return e})(),e$=(()=>{class e extends CP{location=_(uh);urlSerializer=_(US);options=_(qS,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=_(QS);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ao;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=oP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&n(i.url,i.state)})}handleRouterEvent(n,i){if(n instanceof bh)this.stateMemento=this.createStateMemento();else if(n instanceof El)this.rawUrlTree=i.initialUrl;else if(n instanceof sv){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else n instanceof xh?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):n instanceof oo&&(n.code===Hi.GuardRejected||n.code===Hi.NoDataFromResolver)?this.restoreHistory(i):n instanceof Sh?this.restoreHistory(i,!0):n instanceof va&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,i){let s=n instanceof ao?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let r=this.browserPageId,o=S(S({},i.extras.state),this.generateNgRouterState(i.id,r));this.location.replaceState(s,"",o)}else{let r=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",r)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,r=this.currentPageId-s;r!==0?this.location.historyGo(r):this.currentUrlTree===n.finalUrl&&r===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function t$(e,t){e.events.pipe(xn(n=>n instanceof va||n instanceof oo||n instanceof Sh||n instanceof El),Me(n=>n instanceof va||n instanceof El?0:(n instanceof oo?n.code===Hi.Redirect||n.code===Hi.SupersededByNewNavigation:!1)?2:1),xn(n=>n!==2),ln(1)).subscribe(()=>{t()})}var n$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},i$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},JS=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(Z0);stateManager=_(CP);options=_(qS,{optional:!0})||{};pendingTasks=_(_s);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(Z9);urlSerializer=_(US);location=_(uh);urlHandlingStrategy=_(QS);_events=new St;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(Q9);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(XS,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(KS,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new _t;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(s!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof oo&&i.code!==Hi.Redirect&&i.code!==Hi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof va)this.navigated=!0;else if(i instanceof du){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=S({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||X9(s.source)},o);this.scheduleNavigation(a,vh,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}r$(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",i)},0)})}navigateToSyncWithBrowser(n,i,s){let r={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let l=S({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(r.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,i,o,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ZS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=S(S({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=s?s.snapshot:this.routerState.snapshot.root;d=nP(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return iP(d,n,u,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){let s=Ml(n)?n:this.parseUrl(n),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,vh,null,i)}navigate(n,i={skipLocationChange:!1}){return s$(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,i){let s;if(i===!0?s=S({},n$):i===!1?s=S({},i$):s=i,Ml(n))return VL(this.currentUrlTree,n,s);let r=this.parseUrl(n);return VL(this.currentUrlTree,r,s)}removeEmptyProps(n){return Object.entries(n).reduce((i,[s,r])=>(r!=null&&(i[s]=r),i),{})}scheduleNavigation(n,i,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return t$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function s$(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ce(4008,!1)}function r$(e){return!(e instanceof xh)&&!(e instanceof du)}var wP=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new St;constructor(n,i,s,r,o,a){this.router=n,this.route=i,this.tabIndexAttribute=s,this.renderer=r,this.el=o,this.locationStrategy=a;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof va&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ml(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,i,s,r,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||i||s||r||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let i=this.href===null?null:rk(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(n,i){let s=this.renderer,r=this.el.nativeElement;i!==null?s.setAttribute(r,n,i):s.removeAttribute(r,n)}get urlTree(){return this.routerLinkInput===null?null:Ml(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||e)(Be(JS),Be(Il),E0("tabindex"),Be(io),Be(vi),Be(su))};static \u0275dir=Zn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Gs("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Gm("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",k],skipLocationChange:[2,"skipLocationChange","skipLocationChange",k],replaceUrl:[2,"replaceUrl","replaceUrl",k],routerLink:"routerLink"},features:[ch,vr]})}return e})();var o$=new se("");function bP(e,...t){return eo([{provide:XS,multi:!0,useValue:e},[],{provide:Il,useFactory:a$,deps:[JS]},{provide:wl,multi:!0,useFactory:l$},t.map(n=>n.\u0275providers)])}function a$(e){return e.routerState.root}function l$(){let e=_(cn);return t=>{let n=e.get(En);if(t!==n.components[0])return;let i=e.get(JS),s=e.get(c$);e.get(u$)===1&&i.initialNavigation(),e.get(d$,null,Fe.Optional)?.setUpPreloading(),e.get(o$,null,Fe.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var c$=new se("",{factory:()=>new St}),u$=new se("",{providedIn:"root",factory:()=>1});var d$=new se("");var _l=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,s=i.get(e);return!s&&n&&(s=new Set,i.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let i=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),s=this.getListeners(n,t,!1)??new Set,r=new Set(s);r.size>0&&i(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(n,e)):()=>a(n,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function h$(e,t){return t}function hF(e){return e?.getLocaleTextFunc()??h$}function yo(e,t,n){n==null||typeof n=="string"&&n==""?pF(e,t):gs(e,t,n)}function gs(e,t,n){e.setAttribute(gF(t),n.toString())}function pF(e,t){e.removeAttribute(gF(t))}function gF(e){return`aria-${e}`}function ti(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function p$(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function g$(e){return e.getAttribute("aria-label")}function Xv(e,t){yo(e,"label",t)}function Lx(e,t){yo(e,"labelledby",t)}function fF(e,t){yo(e,"live",t)}function f$(e,t){yo(e,"atomic",t)}function m$(e,t){yo(e,"relevant",t)}function v$(e,t){yo(e,"disabled",t)}function mF(e,t){yo(e,"hidden",t)}function Px(e,t){gs(e,"expanded",t)}function y$(e,t){gs(e,"setsize",t)}function C$(e,t){gs(e,"posinset",t)}function w$(e,t){gs(e,"multiselectable",t)}function b$(e,t){gs(e,"rowcount",t)}function lD(e,t){gs(e,"rowindex",t)}function S$(e,t){gs(e,"rowspan",t)}function x$(e,t){gs(e,"colcount",t)}function vF(e,t){gs(e,"colindex",t)}function D$(e,t){gs(e,"colspan",t)}function M$(e,t){gs(e,"sort",t)}function E$(e){pF(e,"sort")}function Fx(e,t){yo(e,"selected",t)}function I$(e,t){yo(e,"controls",t.id),Lx(t,e.id)}function cD(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var ex,tx,nx,ix,sx,Nx,Ox,rx;function Ea(){return ex===void 0&&(ex=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ex}function yF(){if(tx===void 0){let e=window;tx=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return tx}function CF(){return nx===void 0&&(nx=/(firefox)/i.test(navigator.userAgent)),nx}function wF(){return ix===void 0&&(ix=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),ix}function Tl(){return sx===void 0&&(sx=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),sx}function _x(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!CF())?null:t.toString()}function A$(){if(rx!==void 0)return rx;if(!document.body)return-1;let e=1e6,t=CF()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),rx=e,e}function R$(){return Ox==null&&bF(),Ox}function bF(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(Ox=n,Nx=n===0)}function SF(){return Nx==null&&bF(),Nx}var pv;var T$="[tabindex], input, select, button, textarea, [href]",xF="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function uD(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,xF),r=Us(e);return i&&!s&&r}function xt(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||mF(e,!t)}function k$(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||mF(e,!t)}function Uh(e,t){let n="disabled",i=t?s=>s.setAttribute(n,""):s=>s.removeAttribute(n);i(e),RF(e.querySelectorAll("input"),s=>i(s))}function kl(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function Gl(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:r,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:f}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:f}}function dD(e){let t=Gl(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function $h(e){let t=Gl(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function DF(e){let{height:t,marginBottom:n,marginTop:i}=Gl(e);return Math.floor(t+n+i)}function Rv(e){let{width:t,marginLeft:n,marginRight:i}=Gl(e);return Math.floor(t+n+i)}function MF(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:s,borderBottomWidth:r}=Gl(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(s||0),bottom:t.bottom+(r||0)}}function Tv(){if(typeof pv=="boolean")return pv;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,pv=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),pv}function kv(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),yF()&&!Tv()&&(n=e.scrollWidth-e.getBoundingClientRect().width-n)),n}function Lv(e,t,n){n&&(Tv()?t*=-1:(Ea()||yF())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function _n(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function cs(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function EF(e){return!!e.offsetParent}function Us(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!EF(e)||window.getComputedStyle(e).visibility!=="visible")}function Yh(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function IF(e,t,n){n&&n.nextSibling===t||(e.firstChild?n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function AF(e,t){for(let n=0;n<t.length;n++){let i=t[n],s=e.children[n];s!==i&&e.insertBefore(i,s)}}function L$(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}function ip(e,t){if(t)for(let n of Object.keys(t)){let i=t[n];if(!n||!n.length||i==null)continue;let s=L$(n),r=i.toString(),o=r.replace(/\s*!important/g,""),a=o.length!=r.length?"important":void 0;e.style.setProperty(s,o,a)}}function P$(e){return e.clientWidth<e.scrollWidth}function F$(e){return e.clientHeight<e.scrollHeight}function Pv(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Mr(e,t)}function Mr(e,t){t=hD(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function _h(e,t){t=hD(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function hD(e){return typeof e=="number"?`${e}px`:e}function pD(e){return e instanceof Node||e instanceof HTMLElement}function N$(e){if(e==null)return[];let t=[];return RF(e,n=>t.push(n)),t}function O$(e,t){if(e)for(let n=0;n<e.length;n++){let i=e[n];t(i.name,i.value)}}function ds(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function RF(e,t){if(e!=null)for(let n=0;n<e.length;n++)t(e[n])}function Ia(e,t,n){let s=BF(e).ResizeObserver,r=s?new s(n):null;return r?.observe(t),()=>r?.disconnect()}function uo(e){return e==null||e===""?null:e}function H(e){return e!=null&&e!==""}function yt(e){return!H(e)}function Bx(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Kh(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function _$(e,t,n=!1){let i=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function r(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!n)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}var TF="https://www.ag-grid.com",SP={};function kF(e,t){SP[t]||(e(),SP[t]=!0)}function Da(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function yu(e,...t){kF(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Cu(e,...t){kF(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var ox=[],ax=!1;function xP(e){ox.push(e),!ax&&(ax=!0,window.setTimeout(()=>{let t=ox.slice();ox.length=0,ax=!1,t.forEach(n=>n())},0))}function An(e,t,n){let i;return function(...s){let r=this;window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(r,s)},n)}}function DP(e,t){let n=0;return function(...i){let s=this,r=new Date().getTime();r-n<t||(n=r,e.apply(s,i))}}function B$(e,t,n=100,i){let s=new Date().getTime(),r=null,o=!1,a=()=>{let l=new Date().getTime()-s>n;(e()||l)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),l&&i&&yu(i))};a(),o||(r=window.setInterval(a,10))}var W="33.1.0",MP=2e3,EP=100,LF="_version_",PF=null,V$=!1,Ll=`${TF}/javascript-data-grid`;function G$(e){PF=e}function z$(e){Ll=e}function FF(e,t,n){return PF?.getConsoleMessage(e,t)??[U$(e,t,n)]}function gD(e,t,n,i){V$||e(`error #${t}`,...FF(t,n,i))}function H$(e){if(!e)return String(e);let t={};for(let n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function j$(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=H$(e)),t}function Fv(e){return e===void 0?"undefined":e===null?"null":e}function Vx(e,t){return`${e}?${t.toString()}`}function W$(e,t,n){let i=Array.from(t.entries()).sort((r,o)=>o[1].length-r[1].length),s=Vx(e,t);for(let[r,o]of i){if(r===LF)continue;let a=s.length-n;if(a<=0)break;let l="...",c=a+l.length,u=o.length-c>EP?o.slice(0,o.length-c)+l:o.slice(0,EP)+l;t.set(r,u),s=Vx(e,t)}return s}function NF(e,t){let n=new URLSearchParams;if(n.append(LF,W),t)for(let r of Object.keys(t))n.append(r,j$(t[r]));let i=`${Ll}/errors/${e}`,s=Vx(i,n);return s.length<=MP?s:W$(i,n,MP)}var U$=(e,t,n)=>{let i=NF(e,t);return`${n?n+` 
`:""}Visit ${i}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function V(...e){gD(yu,e[0],e[1])}function Je(...e){gD(Cu,e[0],e[1])}function Gx(e,t,n){gD(Cu,e,t,n)}function $$(e,t){let n=t[0];return`error #${n} `+FF(n,t[1],e).join(" ")}function xa(...e){return $$(void 0,e)}function OF(e,t){return e.get("rowModelType")===t}function Jn(e,t){return OF(e,"clientSide")}function Pu(e,t){return OF(e,"serverSide")}function Rn(e,t){return e.get("domLayout")===t}function Pl(e){return Ov(e)!==void 0}function _F(e){return typeof e.get("getRowHeight")=="function"}function Y$(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Eu(e,t,n=!1,i){let{gos:s,environment:r}=e;if(i==null&&(i=r.getDefaultRowHeight()),_F(s)){if(n)return{height:i,estimated:!0};let l={node:t,data:t.data},c=s.getCallback("getRowHeight")(l);if(zx(c))return c===0&&V(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&s.get("masterDetail"))return K$(s);let o=s.get("rowHeight");return{height:o&&zx(o)?o:i,estimated:!1}}function K$(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return zx(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Fl(e){let{environment:t,gos:n}=e,i=n.get("rowHeight");if(!i||yt(i))return t.getDefaultRowHeight();let s=t.refreshRowHeightVariable();return s!==-1?s:(V(24),t.getDefaultRowHeight())}function zx(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Nv(e,t,n){let i=t[e.getDomDataKey()];return i?i[n]:void 0}function Bl(e,t,n,i){let s=e.getDomDataKey(),r=t[s];yt(r)&&(r={},t[s]=r),r[n]=i}function Vt(e){let{gos:t,eGridDiv:n}=e,i=null,s=t.get("getDocument");return s&&H(s)?i=s():n&&(i=n.ownerDocument),i&&H(i)?i:document}function BF(e){return Vt(e).defaultView||window}function qh(e){return e.eGridDiv.getRootNode()}function Dt(e){return qh(e).activeElement}function fD(e){let t=null,n=null;try{t=Vt(e).fullscreenElement}catch{}finally{t||(t=qh(e));let i=t.querySelector("body");i?n=i:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function q$(e){return fD(e)?.clientWidth??(window.innerHeight||-1)}function Z$(e){return fD(e)?.clientHeight??(window.innerHeight||-1)}function X$(e,t,n){let s=e.getBoundingClientRect().height,r=q$(n)-2,o=Z$(n)-2;if(!e.offsetParent)return;let l=MF(e.offsetParent),{clientY:c,clientX:u}=t,d=c-l.top-s/2,h=u-l.left-10,p=Vt(n),g=p.defaultView||window,f=g.pageYOffset||p.documentElement.scrollTop,m=g.pageXOffset||p.documentElement.scrollLeft;r>0&&h+e.clientWidth>r+m&&(h=r+m-e.clientWidth),h<0&&(h=0),o>0&&d+e.clientHeight>o+f&&(d=o+f-e.clientHeight),d<0&&(d=0),e.style.left=`${h}px`,e.style.top=`${d}px`}function VF(e){let t=Vt(e),n=Dt(e);return n===null||n===t.body}function wu(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function GF(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Rn(e,"print"))}function Dr(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function Hx(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function Q$(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function mD(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Iu(e){let t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(V(25,{id:i}),i=String(i)),i}}function J$(e,t){let n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function eY(e){let t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function bu(e){return e?.checkboxes??!0}function xv(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function jx(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function lx(e){return e?.hideDisabledCheckboxes??!1}function tY(e){return typeof e.get("rowSelection")!="string"}function fo(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function zF(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function nY(e){let t=zF(e);return t===!0||t==="enableSelection"}function iY(e){let t=zF(e);return t===!0||t==="enableDeselection"}function Wx(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function Ov(e){let t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Zh(e){return Ov(e)==="multiRow"}function sY(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function _v(e){let t=e.get("rowSelection");if(typeof t=="string"){let n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function HF(e,t=!0){let n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function Xh(e){let t=_v(e);return t==="descendants"||t==="filteredDescendants"}function IP(e){let t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function cx(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function ji(e){return e.get("columnMenu")==="legacy"}function rY(e){return!ji(e)}function jF(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function WF(e,t,n){typeof e!="object"&&(e={});let i=S({},e);return n.forEach(s=>{let r=t[s];typeof r<"u"&&(i[s]=r)}),i}function UF(e,t){if(!e)return;let n={},i=!1;if(Object.keys(e).forEach(o=>{n[o]=e[o],i=!0}),!i)return;let s={type:"gridOptionsChanged",options:n};t.dispatchEvent(s);let r=S({type:"componentStateChanged"},n);t.dispatchEvent(r)}function fe(e,t){return e.addGridCommonParams(t)}var $F="__ag_Grid_Stop_Propagation",oY=["touchstart","touchend","touchmove","touchcancel","scroll"],aY=["wheel"],ux={};function Au(e){e[$F]=!0}function ho(e){return e[$F]===!0}var YF=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof ux[n]=="boolean")return ux[n];let i=document.createElement(e[n]||"div");return n="on"+n,ux[n]=n in i}})();function KF(e,t,n){let i=t;for(;i;){let s=Nv(e,i,n);if(s)return s;i=i.parentElement}return null}function lY(e,t){return!t||!e?!1:uY(t).indexOf(e)>=0}function cY(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function uY(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():cY(t)}function dY(e,t,n,i){let s=qF(n),r;s!=null&&(r={passive:s}),e&&e.addEventListener&&e.addEventListener(t,n,i,r)}var qF=e=>{let t=oY.includes(e),n=aY.includes(e);if(t)return!0;if(n)return!1},F=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){let{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new _l),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i of Object.keys(t)){let s=t[i];s&&n.push(this._setupListener(e,i,s))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let i;return hY(e)?(e.__addEventListener(t,n),i=()=>(e.__removeEventListener(t,n),null)):(e instanceof HTMLElement?dY(this.beans.frameworkOverrides,e,t,n):e.addEventListener(t,n),i=()=>(e.removeEventListener(t,n),null)),this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,t){let{gos:n}=this;n.addPropertyEventListener(e,t);let i=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}let r={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(r)};e.forEach(s=>this.setupGridOptionListener(s,i))}getLocaleTextFunc(){return hF(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function hY(e){return e.__addEventListener!==void 0}var ZF=new Set(["__proto__","constructor","prototype"]);function pY(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let n of Object.keys(e))t(n,e[n])}}function wi(e,t,n=!0,i=!1){H(t)&&pY(t,(s,r)=>{if(ZF.has(s))return;let o=e[s];o!==r&&(i&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[s]=o),AP(r)&&AP(o)&&!Array.isArray(o)?wi(o,r,n,i):(n||r!==void 0)&&(e[s]=r))})}function Bh(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),s=e;for(let r=0;r<i.length;r++){if(s==null)return;s=s[i[r]]}return s}function AP(e){return typeof e=="object"&&e!==null}var gY=/[&<>"']/g,fY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function po(e,t){if(e==null)return null;let n=e.toString().toString();return t?n:n.replace(gY,i=>fY[i])}var mY={resizable:!0,sortable:!0},vY=0;function XF(){return vY++}function Ma(e){return e instanceof vD}var vD=class extends F{constructor(e,t,n,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=XF(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new _l,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=po(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){let{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:i}}=this;t?.initCol(this);let s=e.hide;s!==void 0?this.visible=!s:this.visible=!e.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(e,t,n){let i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){let{gos:e,colDef:{field:t,tooltipField:n}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=H(t)&&t.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=H(n)&&n.indexOf(".")>=0&&!i}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=e.width,i=e.initialWidth;return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);let n=this.frameworkEventListenerService?.wrap(t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return fe(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable(this,e)??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??mY[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return fe(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return yt(this.sort)}isSorting(){return H(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return V(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return fe(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(yt(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(yt(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,n){let i=this.createColumnEvent(e,t);n&&wi(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Qn(e){return e instanceof Dv}var Dv=class extends F{constructor(e,t,n,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=XF(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Ma(t)?e.push(t):Qn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let r=0,o=i.length;r<o;r++){let a=i[r];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let s=e&&t&&n;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{n.forEach(i=>{Qn(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},yY={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},CY=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Bx(e);let n=0;for(;;){let i=e??t;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},RP=Object.freeze([]);function st(e){if(e?.length)return e[e.length-1]}function zl(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,s)=>n?n(i,t[s]):t[s]===i)}function wY(e){return e.sort((t,n)=>t-n)}function $s(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function TP(e,t,n){for(let i=0;i<t.length;i++)$s(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}var Qv="ag-Grid-AutoColumn",QF="ag-Grid-SelectionColumn",bY="ag-Grid-RowNumbersColumn";function JF(e){let t=[],n=i=>{for(let s=0;s<i.length;s++){let r=i[s];Ma(r)?t.push(r):Qn(r)&&n(r.getChildren())}};return n(e),t}function lo(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function Bv(e,t,n){let i={};if(!t)return;go(null,t,r=>{i[r.getInstanceId()]=r}),n&&go(null,n,r=>{i[r.getInstanceId()]=null});let s=Object.values(i).filter(r=>r!=null);e.context.destroyBeans(s)}function yD(e){return e.getId().startsWith(Qv)}function mo(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(QF)??!1}function sp(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(bY)??!1}function Vv(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function SY(e,t){return zl(e,t,(n,i)=>n.getColId()===i.getColId())}function xY(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function Su(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function eN(e,t){let n=e===t,i=e.getColDef()===t,s=e.getColId()==t;return n||i||s}var DY=(e,t)=>(n,i)=>{let s={value1:void 0,value2:void 0},r=!1;return e&&(e[n]!==void 0&&(s.value1=e[n],r=!0),H(i)&&e[i]!==void 0&&(s.value2=e[i],r=!0)),!r&&t&&(t[n]!==void 0&&(s.value1=t[n]),H(i)&&t[i]!==void 0&&(s.value2=t[i])),s};function MY(e,t=null,n,i,s){let r=new CY,{existingCols:o,existingGroups:a,existingColKeys:l}=EY(i);r.addExistingKeys(l);let c=tN(e,t,0,n,o,r,a,s),{colGroupSvc:u}=e,d=u?.findMaxDepth(c,0)??0,h=u?u.balanceColumnTree(c,0,d,r):c;return go(null,h,(g,f)=>{Qn(g)&&g.setupExpandable(),g.originalParent=f}),{columnTree:h,treeDept:d}}function EY(e){let t=[],n=[],i=[];return e&&go(null,e,s=>{if(Qn(s)){let r=s;n.push(r)}else{let r=s;i.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}function tN(e,t,n,i,s,r,o,a){if(!t)return[];let{colGroupSvc:l}=e,c=new Array(t.length);for(let u=0;u<c.length;u++){let d=t[u];l&&LY(d)?c[u]=l.createProvidedColumnGroup(i,d,n,s,r,o,a):c[u]=IY(e,i,d,s,r,a)}return c}function IY(e,t,n,i,s,r){let o=RY(n,i);o&&i?.splice(o.idx,1);let a=o?.column;if(a){let l=Ux(e,n,a.getColId());a.setColDef(l,n,r),AY(e,a,l,r)}else{let l=s.getUniqueKey(n.colId,n.field),c=Ux(e,n,l);a=new vD(c,n,l,t),e.context.createBean(a)}return e.dataTypeSvc?.addColumnListeners(a),a}function nN(e,t,n,i,s,r,o,a){let{sortSvc:l,pinnedCols:c,colFlex:u}=e;n!==void 0&&t.setVisible(!n,a),l&&(l.updateColSort(t,i,a),s!==void 0&&l.setColSortIndex(t,s)),r!==void 0&&c?.setColPinned(t,r),o!==void 0&&u?.setColFlex(t,o)}function AY(e,t,n,i){nN(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);let s=t.getFlex();if(!(s!=null&&s>0))if(n.width!=null)t.setActualWidth(n.width,i);else{let r=t.getActualWidth();t.setActualWidth(r,i)}}function RY(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}function Ux(e,t,n,i){let{gos:s,dataTypeSvc:r,validation:o}=e,a={},l=s.get("defaultColDef");wi(a,l,!1,!0);let c=TY(e,a,t,n);c&&kY(e,c,a),wi(a,t,!1,!0);let u=s.get("autoGroupColumnDef"),d=Dr(s);return t.rowGroup&&u&&d&&wi(a,{sort:u.sort,initialSort:u.initialSort},!1,!0),r?.validateColDef(a),o?.validateColDef(a,n,i),a}function TY(e,t,n,i){let s=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,i),r=n.type??s??t.type;return t.type=r,r?Vv(r):void 0}function kY(e,t,n){if(!t.length)return;let i=Object.assign({},yY),s=e.gos.get("columnTypes")||{};for(let r of Object.keys(s)){let o=s[r];r in i?V(34,{key:r}):(o.type&&V(35),i[r]=o)}t.forEach(r=>{let o=i[r.trim()];o?wi(n,o,!1,!0):V(36,{t:r})})}function LY(e){return e.children!==void 0}function go(e,t,n){if(t)for(let i=0;i<t.length;i++){let s=t[i];Qn(s)&&go(s,s.getChildren(),n),n(s,e)}}function iN(e,t){let n=[],i=[],s=[];return e.forEach(o=>{let a=o.getColDef().lockPosition;a==="right"?s.push(o):a==="left"||a===!0?n.push(o):i.push(o)}),t.get("enableRtl")?[...s,...i,...n]:[...n,...i,...s]}function sN(e,t){let n=!0;return go(null,t,i=>{if(!Qn(i))return;let s=i,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;let a=[];s.getLeafColumns().forEach(h=>{let p=e.indexOf(h);a.push(p)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=s.getLeafColumns().length-1;u>d&&(n=!1)}),n}function rN(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}function oN(e,t,n){if(!t.length)return;let i=t.length===1?t[0]:null,s=rN(t,r=>r.getPinned());e.dispatchEvent({type:"columnPinned",pinned:s??null,columns:t,column:i,source:n})}function PY(e,t,n){if(!t.length)return;let i=t.length===1?t[0]:null,s=rN(t,r=>r.isVisible());e.dispatchEvent({type:"columnVisible",visible:s,columns:t,column:i,source:n})}function FY(e,t,n,i){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function Ru(e,t,n,i,s=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:n,source:i})}function hs(e,t,n){let{colModel:i,rowGroupColsSvc:s,pivotColsSvc:r,autoColSvc:o,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:u,environment:d,valueColsSvc:h,eventSvc:p,gos:g}=e,f=i.getColDefCols()||[];if(!f?.length)return!1;if(t?.state&&!t.state.forEach)return V(32),!1;let m=(x,D,M,E,A)=>{if(!x)return;let I=DY(D,t.defaultState),T=I("flex").value1;if(nN(e,x,I("hide").value1,I("sort").value1,I("sortIndex").value1,I("pinned").value1,T,n),T==null){let P=I("width").value1;if(P!=null){let O=x.getColDef().minWidth??d.getDefaultColumnMinWidth();O!=null&&P>=O&&x.setActualWidth(P,n)}}A||!x.isPrimary()||(h?.syncColumnWithState(x,n,I),s?.syncColumnWithState(x,n,I,M),r?.syncColumnWithState(x,n,I,E))},v=(x,D,M)=>{let E=aN(e,n),A=D.slice(),I={},T={},P=[],O=[],$=[],ae=0,ue=s?.columns.slice()??[],Q=r?.columns.slice()??[];x.forEach(J=>{let de=J.colId;if(de.startsWith(Qv)){P.push(J),$.push(J);return}if(mo(de)){O.push(J),$.push(J);return}let te=M(de);te?(m(te,J,I,T,!1),$s(A,te)):($.push(J),ae+=1)});let he=J=>m(J,null,I,T,!1);A.forEach(he),s?.sortColumns(kP.bind(s,I,ue)),r?.sortColumns(kP.bind(r,T,Q)),i.refreshCols(!1);let ge=(J,de,Y=[])=>{de.forEach(te=>{let ee=J(te.colId);$s(Y,ee),m(ee,te,null,null,!0)}),Y.forEach(he)};return ge(J=>o?.getColumn(J)??null,P,o?.getColumns()?.slice()),ge(J=>a?.getColumn(J)??null,O,a?.getColumns()?.slice()),OY(t,i,g),c.refresh(n),p.dispatchEvent({type:"columnEverythingChanged",source:n}),E(),{unmatchedAndAutoStates:$,unmatchedCount:ae}};l?.start();let{unmatchedAndAutoStates:y,unmatchedCount:w}=v(t.state||[],f,x=>i.getColDefCol(x));if(y.length>0||H(t.defaultState)){let x=u?.getPivotResultCols()?.list??[];w=v(y,x,D=>u?.getPivotResultCol(D)??null).unmatchedCount}return l?.finish(),w===0}function NY(e,t){let{colModel:n,autoColSvc:i}=e;if(!n.getColDefCols()?.length)return;let r=n.getColDefColTree(),o=JF(r),a=[],l=1e3,c=1e3,u=[],d=i?.getColumns();d&&(u=u.concat(d)),o&&(u=u.concat(o)),u.forEach(h=>{let p=lN(h);yt(p.rowGroupIndex)&&p.rowGroup&&(p.rowGroupIndex=l++),yt(p.pivotIndex)&&p.pivot&&(p.pivotIndex=c++),a.push(p)}),hs(e,{state:a,applyOrder:!0},t)}function aN(e,t){let{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:s,colModel:r,sortSvc:o,eventSvc:a}=e,l={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:s?.columns.slice()??[]},c=Qh(e),u={};return c.forEach(d=>{u[d.colId]=d}),()=>{let d=r.getAllCols(),h=(E,A,I,T)=>{let P=A.map(T),O=I.map(T);if(zl(P,O))return;let ae=new Set(A);I.forEach(Q=>{ae.delete(Q)||ae.add(Q)});let ue=[...ae];a.dispatchEvent({type:E,columns:ue,column:ue.length===1?ue[0]:null,source:t})},p=E=>{let A=[];return d.forEach(I=>{let T=u[I.getColId()];T&&E(T,I)&&A.push(I)}),A},g=E=>E.getColId();h("columnRowGroupChanged",l.rowGroupColumns,n?.columns??[],g),h("columnPivotChanged",l.pivotColumns,i?.columns??[],g);let m=p((E,A)=>{let I=E.aggFunc!=null,T=I!=A.isValueActive(),P=I&&E.aggFunc!=A.getAggFunc();return T||P});m.length>0&&FY(a,"columnValueChanged",m,t),Ru(a,p((E,A)=>E.width!=A.getActualWidth()),!0,t),oN(a,p((E,A)=>E.pinned!=A.getPinned()),t),PY(a,p((E,A)=>E.hide==A.isVisible()),t);let D=p((E,A)=>E.sort!=A.getSort()||E.sortIndex!=A.getSortIndex());D.length>0&&o?.dispatchSortChangedEvents(t,D);let M=Qh(e);BY(c,M,t,r,a)}}function Qh(e){let{colModel:t,rowGroupColsSvc:n,pivotColsSvc:i}=e,s=t.getColDefCols();if(yt(s)||!t.isAlive())return[];let r=t.getAllCols(),o=n?.columns,a=i?.columns,l=d=>{let h=d.isRowGroupActive()&&o?o.indexOf(d):null,p=d.isPivotActive()&&a?a.indexOf(d):null,g=d.isValueActive()?d.getAggFunc():null,f=d.getSort()!=null?d.getSort():null,m=d.getSortIndex()!=null?d.getSortIndex():null;return{colId:d.getColId(),width:d.getActualWidth(),hide:!d.isVisible(),pinned:d.getPinned(),sort:f,sortIndex:m,aggFunc:g,rowGroup:d.isRowGroupActive(),rowGroupIndex:h,pivot:d.isPivotActive(),pivotIndex:p,flex:d.getFlex()??null}},c=r.map(d=>l(d)),u=new Map(t.getCols().map((d,h)=>[d.getColId(),h]));return c.sort((d,h)=>{let p=u.has(d.colId)?u.get(d.colId):-1,g=u.has(h.colId)?u.get(h.colId):-1;return p-g}),c}function lN(e){let t=(g,f)=>g??f??null,n=e.getColDef(),i=t(n.sort,n.initialSort),s=t(n.sortIndex,n.initialSortIndex),r=t(n.hide,n.initialHide),o=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex),c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(n.pivotIndex,n.initialPivotIndex),h=t(n.pivot,n.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);let p=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:r,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}function OY(e,t,n){if(!e.applyOrder||!e.state)return;let i=[];e.state.forEach(s=>{s.colId!=null&&i.push(s.colId)}),_Y(t.cols,i,t,n)}function _Y(e,t,n,i){if(e==null)return;let s=[],r={};t.forEach(a=>{if(r[a])return;let l=e.map[a];l&&(s.push(l),r[a]=!0)});let o=0;if(e.list.forEach(a=>{let l=a.getColId();if(r[l]!=null)return;l.startsWith(Qv)?s.splice(o++,0,a):s.push(a)}),s=iN(s,i),!sN(s,n.getColTree())){V(39);return}e.list=s}function BY(e,t,n,i,s){let r={};t.forEach(u=>r[u.colId]=u);let o={};e.forEach(u=>{r[u.colId]&&(o[u.colId]=!0)});let a=e.filter(u=>o[u.colId]),l=t.filter(u=>o[u.colId]),c=[];l.forEach((u,d)=>{let h=a&&a[d];if(h&&h.colId!==u.colId){let p=i.getCol(h.colId);p&&c.push(p)}}),c.length&&s.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:n})}var kP=(e,t,n,i)=>{let s=e[n.getId()],r=e[i.getId()],o=s!=null,a=r!=null;if(o&&a)return s-r;if(o)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},VY=class extends F{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.refreshAll(Su(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Su(e.source)))}createColsFromColDefs(e){let{beans:t}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:s,pivotColsSvc:r,valueColsSvc:o,visibleCols:a,colViewport:l,eventSvc:c}=t,u=this.colDefs?aN(t,e):void 0;n?.expire();let d=this.colDefCols?.list,h=this.colDefCols?.tree,p=MY(t,this.colDefs,!0,h,e);Bv(t,this.colDefCols?.tree,p.columnTree);let g=p.columnTree,f=p.treeDept,m=JF(g),v={};m.forEach(y=>v[y.getId()]=y),this.colDefCols={tree:g,treeDepth:f,list:m,map:v},s?.extractCols(e,d),r?.extractCols(e,d),o?.extractCols(e,d),this.ready=!0,this.refreshCols(!0),a.refresh(e),l.checkViewportColumns(),c.dispatchEvent({type:"columnEverythingChanged",source:e}),u&&(this.changeEventsDispatching=!0,u(),this.changeEventsDispatching=!1),c.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder();let{autoColSvc:n,selectionColSvc:i,rowNumbersSvc:s,quickFilter:r,pivotResultCols:o,showRowGroupCols:a,rowAutoHeight:l,visibleCols:c,colViewport:u,eventSvc:d}=this.beans,h=this.selectCols(o,this.colDefCols);this.createColumnsForService([n,i,s],h);let p=Y$(this.gos,this.showingPivotResult);(!e||p)&&this.restoreColOrder(h),this.positionLockedCols(h),a?.refresh(),r?.refreshCols(),this.setColSpanActive(),l?.setAutoHeightActive(h),c.clear(),u.clear(),!zl(t,this.cols.tree)&&d.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(let n of e)n&&(n.createColumns(t,i=>{this.lastOrder=i(this.lastOrder),this.lastPivotOrder=i(this.lastPivotOrder)}),n.addColumns(t))}selectCols(e,t){let n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;let{map:i,list:s,tree:r,treeDepth:o}=n??t;return this.cols={list:s.slice(),map:S({},i),tree:r.slice(),treeDepth:o},n&&(n.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];let e=this.isPivotMode()&&!this.showingPivotResult,t=this.beans.valueColsSvc?.columns;return this.cols.list.filter(i=>{let s=yD(i);if(e){let r=t?.includes(i);return s||r}else return s||i.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){hs(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}restoreColOrder(e){let t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;let n=new Map(t.map((c,u)=>[c,u]));if(!e.list.some(c=>n.has(c)))return;let s=new Map(e.list.map(c=>[c,!0])),r=t.filter(c=>s.has(c)),o=new Map(r.map(c=>[c,!0])),a=e.list.filter(c=>!o.has(c)),l=r.slice();a.forEach(c=>{let u=c.getOriginalParent();if(!u){l.push(c);return}let d=[];for(;!d.length&&u;)u.getLeafColumns().forEach(f=>{let m=l.indexOf(f)>=0,v=d.indexOf(f)<0;m&&v&&d.push(f)}),u=u.getOriginalParent();if(!d.length){l.push(c);return}let h=d.map(g=>l.indexOf(g)),p=Math.max(...h);l.splice(p+1,0,c)}),e.list=l}positionLockedCols(e){e.list=iN(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);let{visibleCols:n,eventSvc:i}=this.beans;n.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){let e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);let t=Su(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){Bv(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}getAllCols(){let{pivotResultCols:e,autoColSvc:t,selectionColSvc:n}=this.beans,i=e?.getPivotResultCols()?.list;return[this.colDefCols?.list??[],t?.columns?.list??[],n?.columns?.list??[],i??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let s=0;s<i.length;s++)if(eN(i[s],e))return i[s];return this.beans.autoColSvc?.getColumn(e)??this.beans.selectionColSvc?.getColumn(e)??null}};var cN=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}};function rp(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var uN=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){this.addOrRemoveCssClass(e,!0)}removeCssClass(e){this.addOrRemoveCssClass(e,!1)}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){let i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}},GY=0,U=null,Ye=class extends F{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=GY++,this.cssClassManager=new uN(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());let e="component-"+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach(t=>this.beans.environment.addGlobalCSS(t,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,t,n,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){let s=this[t];if(s===U)this[t]=i??e;else{let r=n&&n[t];if(!this.suppressDataRefValidation&&!r)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(e,t){N$(e.childNodes).forEach(i=>{if(!(i instanceof HTMLElement))return;let s=this.createComponentFromElement(i,r=>{r.getGui()&&this.copyAttributesFromNode(i,r.getGui())},t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);let r=Array.prototype.slice.call(i.children);s.addItems(r)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)})}createComponentFromElement(e,t,n){let i=e.nodeName,s=this.getDataRefAttribute(e),r=i.indexOf("AG-")===0,o=r?this.componentSelectors.get(i):null,a=null;if(o){let l=n&&s?n[s]:void 0;a=new o.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(r)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,s,n,a),a}copyAttributesFromNode(e,t){O$(e.attributes,(n,i)=>t.setAttribute(n,i))}swapComponentForNode(e,t,n){let i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){let t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(n=>n.setAttribute("tabindex",t.toString()))}setTemplate(e,t,n){let i=Yh(e);this.setTemplateFromElement(i,t,n)}setTemplateFromElement(e,t,n,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let s=0;s<t.length;s++){let r=t[s];this.componentSelectors.set(r.selector,r)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),pD(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){let{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(e,t){let{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:n}=t;k$(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:n}=t;xt(this.eGui,e,{skipAriaHidden:n});let i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}};var ei=class Nh{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new Nh(n=>{let i=t.length,s=new Array(i);t.forEach((r,o)=>{r.then(a=>{s[o]=a,i--,i===0&&n(s)})})}):Nh.resolve()}static resolve(t=null){return new Nh(n=>n(t))}then(t){return new Nh(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}};function zY(e){return e?e.prototype&&"getGui"in e.prototype:!1}function dN(e,t,n,i){let{name:s}=n,r,o,a,l,c,u;if(t){let d=t,h=d[s+"Selector"],p=h?h(i):null,g=f=>{typeof f=="string"?r=f:f!=null&&f!==!0&&(e.isFrameworkComponent(f)?a=f:o=f)};p?(g(p.component),l=p.params,c=p.popup,u=p.popupPosition):g(d[s])}return{compName:r,jsComp:o,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:u}}var HY=class extends F{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,i=!1){return this.getCompDetails(this.gridOptions,e,t,n,i)}getCompDetails(e,t,n,i,s=!1){let{name:r,cellRenderer:o}=t,{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:h}=dN(this.beans.frameworkOverrides,e,t,i),p,g=y=>{let w=this.registry.getUserComponent(r,y);w&&(l=w.componentFromFramework?void 0:w.component,c=w.componentFromFramework?w.component:void 0,p=w.params)};if(a!=null&&g(a),l==null&&c==null&&n!=null&&g(n),l&&o&&!zY(l)&&(l=this.agCompUtils?.adaptFunction(t,l)),!l&&!c){let{validation:y}=this.beans;s&&(a!==n||!n)?a?y?.isProvidedUserComp(a)||Je(50,{compName:a}):n?y||Je(260,R(S({},this.gos.getModuleErrorParams()),{propName:r,compName:n})):Je(216,{name:r}):n&&!y&&Je(146,{comp:n});return}let f=this.mergeParams(e,t,i,u,p),m=l==null,v=l??c;return{componentFromFramework:m,componentClass:v,params:f,type:t,popupFromSelector:d,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(v,m,f,t)}}newAgStackInstance(e,t,n,i){let s=!t,r;s?r=new e:r=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(r);let o=r.init?.(n);return o==null?ei.resolve(r):o.then(()=>r)}mergeParams(e,t,n,i=null,s){let r=S(S({},n),s),o=e,a=o&&o[t.name+"Params"];if(typeof a=="function"){let l=a(n);wi(r,l)}else typeof a=="object"&&wi(r,a);return wi(r,i),r}},jY={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},WY={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},UY={name:"headerComponent",optionalMethods:["refresh"]},$Y={name:"innerHeaderComponent"},YY={name:"innerHeaderGroupComponent"},KY={name:"headerGroupComponent"};var qY={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0};var ZY={name:"loadingCellRenderer",cellRenderer:!0},XY={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},QY={name:"loadingOverlayComponent",optionalMethods:["refresh"]},JY={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},eK={name:"tooltipComponent"},CD={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},tK={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},nK={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},iK={name:"loadingCellRenderer",cellRenderer:!0},sK={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},rK={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function oK(e,t){return e.getCompDetailsFromGridOptions(WY,"agDragAndDropImage",t,!0)}function aK(e,t,n){return e.getCompDetails(t,UY,"agColumnHeader",n)}function lK(e,t,n){return e.getCompDetails(t,$Y,void 0,n)}function cK(e,t){let n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,KY,"agColumnGroupHeader",t)}function uK(e,t,n){return e.getCompDetails(t,YY,void 0,n)}function dK(e,t){return e.getCompDetailsFromGridOptions(nK,void 0,t,!0)}function hK(e,t){return e.getCompDetailsFromGridOptions(iK,"agLoadingCellRenderer",t,!0)}function pK(e,t){return e.getCompDetailsFromGridOptions(sK,"agGroupRowRenderer",t,!0)}function gK(e,t){return e.getCompDetailsFromGridOptions(rK,"agDetailCellRenderer",t,!0)}function fK(e,t,n){return e.getCompDetails(t,qY,void 0,n)}function mK(e,t,n){return e.getCompDetails(t,ZY,"agSkeletonCellRenderer",n,!0)}function LP(e,t,n){return e.getCompDetails(t,XY,"agCellEditor",n,!0)}function vK(e,t,n,i){return e.getCompDetails(t,CD,i,n,!0)}function yK(e,t){return e.getCompDetailsFromGridOptions(jY,"agDateInput",t,!0)}function CK(e,t){return e.getCompDetailsFromGridOptions(QY,"agLoadingOverlay",t,!0)}function wK(e,t){return e.getCompDetailsFromGridOptions(JY,"agNoRowsOverlay",t,!0)}function bK(e,t){return e.getCompDetails(t.colDef,eK,"agTooltipComponent",t,!0)}function SK(e,t,n,i){return e.getCompDetails(t,tK,i,n)}function xK(e,t){return dN(e,t,CD)}function DK(e,t,n){return e.mergeParams(t,CD,n)}function Jh(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var hN=new Set,Gv={},xu={},Mv,pN=!1,MK=!1;function EK(e){let[t,n]=e.version.split(".")||[],[i,s]=Mv.split(".")||[];return t===i&&n===s}function IK(e){Mv||(Mv=e.version);let t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(e.version?EK(e)||Cu(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${Mv}.`)):Cu(t(`'${e.moduleName}' is incompatible.`)),e.validate){let n=e.validate();n.isValid||Cu(`${n.message}`)}}function ep(e,t){IK(e);let n=e.rowModels??["all"];hN.add(e);let i;t!==void 0?(pN=!0,xu[t]===void 0&&(xu[t]={}),i=xu[t]):i=Gv,n.forEach(s=>{i[s]===void 0&&(i[s]={}),i[s][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(s=>ep(s,t))}function AK(e){delete xu[e]}function gN(e,t,n){let i=s=>!!Gv[s]?.[e]||!!xu[t]?.[s]?.[e];return i(n)||i("all")}function wD(){return pN}function RK(e,t){let n=xu[e]??{};return[...Object.values(Gv.all??{}),...Object.values(n.all??{}),...Object.values(Gv[t]??{}),...Object.values(n[t]??{})]}function TK(){return new Set(hN)}function kK(){return MK}var fN=class{static register(e){ep(e,void 0)}static registerModules(e){e.forEach(t=>ep(t,void 0))}},LK=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){for(let t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];e.beanClasses.forEach(t=>{let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("null bean");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},PK=class extends LK{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){super.destroy(),AK(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}},FK="ag-column-first",NK="ag-column-last";function mN(e,t,n,i){return yt(e)?[]:_K(e.headerClass,e,t,n,i)}function vN(e,t,n){e.addOrRemoveCssClass(FK,n.isColAtEdge(t,"first")),e.addOrRemoveCssClass(NK,n.isColAtEdge(t,"last"))}function OK(e,t,n,i){return fe(t,{colDef:e,column:n,columnGroup:i})}function _K(e,t,n,i,s){if(yt(e))return[];let r;if(typeof e=="function"){let o=OK(t,n,i,s);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}function Co(e,t){let n=BF(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var BK=class extends F{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){let{gos:t,pagination:n}=this.beans,i=t.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,i&&e===0){let s=n?.getCurrentPage()??0;s!==this.lastPage&&(this.lastPage=s,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame")}verifyAnimationFrameOn(e){this.active===!1&&V(92,{methodName:e})}createTask(e,t,n){this.verifyAnimationFrameOn(n);let i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,n=t.list,i=this.createTasksP2,s=i.list,r=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=e<=0,c=this.beans.ctrlsSvc.getScrollFeature();for(;l||a<e;){if(!c.scrollGridIfNeeded()){let d;if(n.length)this.sortTaskList(t),d=n.pop().task;else if(s.length)this.sortTaskList(i),d=s.pop().task;else if(r.length)d=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}n.length||s.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);Co(this.beans,e)}isQueueEmpty(){return!this.ticking}},L={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},$x=!1,zv=0;function VK(e){zv>0||(e.addEventListener("keydown",Hv),e.addEventListener("mousedown",Hv))}function GK(e){zv>0||(e.removeEventListener("keydown",Hv),e.removeEventListener("mousedown",Hv))}function Hv(e){let t=$x,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&($x=n)}function zK(e){let t=Vt(e);return VK(t),zv++,()=>{zv--,GK(t)}}function HK(){return $x}function jK(e,t,n){t.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===L.TAB){let s=i.shiftKey;Hl(e,n,!1,s)||Tu(e,s)&&i.preventDefault()}}})}function Du(e,t,n=!1){let i=T$,s=xF;t&&(s+=", "+t),n&&(s+=', [tabindex="-1"]');let r=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(l=>Us(l)),o=Array.prototype.slice.apply(e.querySelectorAll(s));return o.length?((l,c)=>l.filter(u=>c.indexOf(u)===-1))(r,o):r}function Vl(e,t=!1,n=!1,i=!1){let s=Du(e,i?".ag-tab-guard":null,n),r=t?st(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}function Hl(e,t,n,i){let s=Du(t,n?':not([tabindex="-1"])':null),r=Dt(e),o;n?o=s.findIndex(l=>l.contains(r)):o=s.indexOf(r);let a=o+(i?-1:1);return a<0||a>=s.length?null:s[a]}function yN(e,t=5){let n=0;for(;e&&_x(e)===null&&++n<=t;)e=e.parentElement;return _x(e)===null?null:e}function WK(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Nl(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()}function Jv(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()}function Tu(e,t,n=!1){let i=e.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(t)?!0:((n||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function UK(e,t=!1){return e===L.DELETE?!0:!t&&e===L.BACKSPACE?wF():!1}var $K=class extends F{constructor(e,t,n,i){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){let t=e.key;switch(t){case L.ENTER:this.onEnterKeyDown(e);break;case L.F2:this.onF2KeyDown(e);break;case L.ESCAPE:this.onEscapeKeyDown(e);break;case L.TAB:this.onTabKeyDown(e);break;case L.BACKSPACE:case L.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case L.DOWN:case L.UP:case L.RIGHT:case L.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){if(!this.cellCtrl.editing){if(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{let n=this.cellCtrl.getFocusedCellPosition();this.beans.navigation?.navigateToNextCell(e,t,n,!0)}e.preventDefault()}}onShiftRangeSelect(e){let{rangeSvc:t,navigation:n}=this.beans;if(!t)return;let i=t.extendLatestRangeInDirection(e);i&&n?.ensureCellVisible(i)}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:s}=this,{gos:r,rangeSvc:o,eventSvc:a}=i;if(!n.editing){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),UK(e,r.get("enableCellEditingOnBackspace"))){if(o&&fo(r))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let{column:l}=n,c=this.beans.valueSvc.getDeleteValue(l,s);s.setDataValue(l,c,"cellClear")}}else i.editSvc?.startRowOrCellEdit(n,e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){let{cellCtrl:t,beans:n}=this;if(t.editing||this.rowCtrl.editing)t.stopEditingAndFocus(!1,e.shiftKey);else if(n.gos.get("enterNavigatesVertically")){let i=e.shiftKey?L.UP:L.DOWN;n.navigation?.navigateToNextCell(null,i,t.cellPosition,!1)}else n.editSvc?.startRowOrCellEdit(t,L.ENTER,e),t.editing&&e.preventDefault()}onF2KeyDown(e){let{cellCtrl:t,beans:n}=this;t.editing||n.editSvc?.startRowOrCellEdit(t,L.F2,e)}onEscapeKeyDown(e){let{cellCtrl:t,beans:n}=this;t.editing&&(n.editSvc?.stopRowOrCellEdit(t,!0),t.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.editing)return;let i=e.key;i===L.SPACE?this.onSpaceKeyDown(e):this.beans.editSvc?.startRowOrCellEdit(this.cellCtrl,i,e)&&e.preventDefault()}onSpaceKeyDown(e){let{gos:t}=this.beans;!this.cellCtrl.editing&&Pl(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,"spaceKey"),e.preventDefault()}destroy(){super.destroy()}},YK=class extends F{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!ho(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;let{eventSvc:t,rangeSvc:n,gos:i,editSvc:s}=this.beans,r=e.ctrlKey||e.metaKey;n&&r&&n.getCellRangeCount(this.cellCtrl.cellPosition)>1&&n.intersectLastRange(!0);let o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);let a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(o)})},0),(i.get("singleClickEdit")||a.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&n?.getCellRanges().length!=0)&&s?.startRowOrCellEdit(this.cellCtrl,void 0,e)}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventSvc:s,frameworkOverrides:r,gos:o,editSvc:a}=n,l=t.getColDef(),c=i.createEvent(e,"cellDoubleClicked");s.dispatchEvent(c),typeof l.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{l.onCellDoubleClicked(c)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&a?.startRowOrCellEdit(i,null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:i}=e,s=e.target,{cellCtrl:r,beans:o}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:u,gos:d}=o;if(this.isRightClickInExistingRange(e))return;let h=l&&!l.isEmpty(),p=this.containsWidget(s),{cellPosition:g}=r,f=sp(g.column);if(c&&f&&!c.handleMouseDownOnCell(g,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!i||!h){let v=d.get("enableCellTextSelection")&&e.defaultPrevented,y=(Ea()||v)&&!r.editing&&!uD(s)&&!p;r.focusCell(y)}if(i&&h&&!u.isCellFocused(g)){e.preventDefault();let m=u.getFocusedCell();if(m){let{column:v,rowIndex:y,rowPinned:w}=m,D=o.rowRenderer.getRowByPosition({rowIndex:y,rowPinned:w})?.getCellCtrl(v);D?.editing&&D.stopEditing(),u.setFocusedCell({column:v,rowIndex:y,rowPinned:w,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!p){if(l)if(f&&e.preventDefault(),i)l.extendLatestRangeToCell(g);else{let m=t||n;l.setRangeToCell(g,m)}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeSvc:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(e){return kl(e,"ag-selection-checkbox",3)||kl(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.eGui,n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}destroy(){super.destroy()}},KK=class extends F{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;let e=this.cellCtrl.getCellSpan();e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e&&(this.refreshSpanHeight(e),this.addManagedListeners(this.beans.eventSvc,{modelUpdated:this.refreshSpanHeight.bind(this,e),recalculateRowBounds:this.refreshSpanHeight.bind(this,e)}))}refreshSpanHeight(e){let t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();zl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;let e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let{column:e,rowNode:t}=this,n=e.getColSpan(t),i=[];if(n===1)i.push(e);else{let s=e,r=e.getPinned();for(let o=0;s&&o<n&&(i.push(s),s=this.beans.visibleCols.getColAfter(s),!(!s||yt(s)||r!==s.getPinned()));o++);}return i}onLeftChanged(){if(!this.eSetLeft)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=st(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;let{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){let i=t.bodyWidth;return n+i+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=Fl(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},qK="ag-cell",ZK="ag-cell-auto-height",XK="ag-cell-normal-height",QK="ag-cell-focus",JK="ag-cell-first-right-pinned",eq="ag-cell-last-left-pinned",tq="ag-cell-not-inline-editing",nq="ag-cell-wrap-text",jv="cellCtrl";function CN(e,t){return KF(e,t,jv)}var iq=0,Vh=class extends F{constructor(e,t,n,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.beans=n;let{colId:s,colIdSanitised:r}=e;this.instanceId=s+"-"+iq++,this.colIdSanitised=r,this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusSvc.clearRestoreFocus()}addFeatures(){let{beans:e}=this;this.positionFeature=new KK(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.mouseListener=new YK(this,e,this.column),this.keyboardListener=new $K(this,e,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();let{rangeSvc:t}=e;t&&fo(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){let e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,n,i,s,r,o){this.comp=e,this.eGui=t,this.printLayout=s,o??(o=this),this.addDomData(o),this.addFeatures(),o.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),r&&this.isCellEditable()?this.beans.editSvc?.startEditing(this):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(a=>a()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e,t){let{beans:n,column:i,rowNode:s,rangeFeature:r}=this,{userCompFactory:o}=n,a=this.getValueToDisplay(),l;if(s.stub&&s.groupData?.[i.getId()]==null){let u=this.createCellRendererParams();l=mK(o,i.getColDef(),u)}else if(this.isCellRenderer()){let u=this.createCellRendererParams();l=fK(o,i.getColDef(),u)}this.comp.setRenderDetails(l,a,e),!t&&r&&Co(n,()=>r?.refreshHandle())}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}isCheckboxSelection(e){let{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||mo(this.column)&&t&&typeof t!="string"&&bu(t)}refreshShouldDestroy(){let e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||s}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(e=!1){return this.beans.editSvc?.stopEditing(this,e)??!1}createCellRendererParams(){let{value:e,valueFormatted:t,column:n,rowNode:i,comp:s,eGui:r,beans:{valueSvc:o,gos:a}}=this;return fe(a,{value:e,valueFormatted:t,getValue:()=>o.getValueForDisplay(n,i),setValue:c=>o.setValue(i,n,c),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:r,eParentOfValue:s.getParentOfValue(),registerRowDragger:(c,u,d,h)=>this.registerRowDragger(c,u,h),setTooltip:(c,u)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(c,u),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;let t=this.column.getColDef(),n=e!=null&&!!e.newData,i=e!=null&&!!e.suppressFlash,s=t.field==null&&t.valueGetter==null&&t.showRowGroup==null,r=e&&e.forceRefresh||s||n,o=!!this.comp,a=this.updateAndFormatValue(o),l=r||a;if(o){if(l){this.showValue(n,!1);let c=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!i&&!c&&t.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){this.beans.editSvc?.stopEditingAndFocus(this,e,t)}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let t=this.value,n=this.valueFormatted;return this.value=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){let n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){let t=this.eGui;Bl(this.beans.gos,t,jv,this),e.addDestroyFunc(()=>Bl(this.beans.gos,t,jv,null))}createEvent(e,t){let{rowNode:n,column:i,value:s,beans:r}=this;return fe(r.gos,{type:t,node:n,data:n.data,value:s,column:i,colDef:i.getColDef(),rowPinned:n.rowPinned,event:e,rowIndex:n.rowIndex})}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{comp:e,column:t,beans:n}=this;vN(e,t,n.visibleCols)}refreshAriaColIndex(){let e=this.beans.visibleCols.getAriaColIndex(this.column);vF(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){let{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1){this.beans.focusSvc.setFocusedCell(R(S({},this.getFocusedCellPosition()),{forceBrowserFocus:e}))}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.rangeFeature?.onCellSelectionChanged()}onSuppressCellFocusChanged(e){let t=this.eGui;t&&(sp(this.column)&&(e=!0),ds(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;let e=this.column.isFirstRightPinned();this.comp.addOrRemoveCssClass(JK,e)}onLastLeftPinnedChanged(){if(!this.comp)return;let e=this.column.isLastLeftPinned();this.comp.addOrRemoveCssClass(eq,e)}isCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}onCellFocused(e){let{beans:t}=this;if(Jv(t))return;let n=this.isCellFocused();if(!this.comp){n&&e?.forceBrowserFocus&&(this.focusEventToRestore=e);return}if(this.focusEventToRestore=void 0,this.comp.addOrRemoveCssClass(QK,n),n&&e&&e.forceBrowserFocus){let s=this.comp.getFocusableElement();if(this.editing){let r=Du(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}let i=t.gos.get("editType")==="fullRow";!n&&!i&&this.editing&&t.editSvc?.stopRowOrCellEdit(this),n&&this.rowCtrl.announceDescription()}createCellPosition(){let{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:uo(t),column:this.column}}setInlineEditingCss(){this.beans.editSvc?.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){let{comp:e}=this;e.addOrRemoveCssClass(qK,!0),e.addOrRemoveCssClass(tq,!0);let t=this.column.isAutoHeight()==!0;e.addOrRemoveCssClass(ZK,t),e.addOrRemoveCssClass(XK,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){let e=this.column.getColDef().wrapText==!0;this.comp.addOrRemoveCssClass(nq,e)}dispatchCellContextMenuEvent(e){let t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}let i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}))}createRowDragComp(e,t,n){let i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},wN="__ag_grid_instance";function bN(e,t){t[wN]=e.gridInstanceId}function Wv(e,t){return SN(e,t.target)}function SN(e,t){let n=t;for(;n;){let i=n[wN];if(H(i))return i===e.gridInstanceId;n=n.parentElement}return!1}function sq(e,t){return CN(e,t.target)?.getFocusedCellPosition()??null}function dx(e,t){let n=Rn(e.gos,"normal"),i=t,s,r;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),n){let o=e.ctrlsSvc.getScrollFeature(),a=o.getVScrollPosition(),l=o.getHScrollPosition();s+=l.left,r+=a.top}return{x:s,y:r}}var rq=class extends F{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){let n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragSvc.addDragSource(n)}getDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){let{dragSourceAndParamsList:t,dragSvc:n}=this,i=t.find(s=>s.dragSource===e);i&&(n.removeDragSource(i.params),$s(t,i))}destroy(){let{dragSourceAndParamsList:e,dragSvc:t,dropTargets:n}=this;e.forEach(i=>t.removeDragSource(i.params)),e.length=0,n.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),e.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){this.dragSource?.onDragStopped?.();let{lastDropTarget:t}=this;if(t?.onDragStop){let n=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){let{dragSource:e,lastDropTarget:t}=this;e?.onDragCancelled?.(),t?.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){let n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);let s=this.dropTargets.filter(u=>this.isMouseOnDropTarget(e,u)),r=this.findCurrentDropTarget(e,s),{lastDropTarget:o,dragSource:a,dragAndDropImageComp:l,dragItem:c}=this;if(r!==o){if(this.leaveLastTargetIfExists(e,n,i,t),o!==null&&r===null&&a?.onGridExit?.(c),o===null&&r!==null&&a?.onGridEnter?.(c),this.enterDragTargetIfExists(r,e,n,i,t),r&&l){let{comp:u,promise:d}=l;u?u.setIcon(r.getIconName?r.getIconName():null,!1):d.then(h=>{h&&h.setIcon(r.getIconName?r.getIconName():null,!1)})}this.lastDropTarget=r}else if(r&&r.onDragging){let u=this.createDropTargetEvent(r,e,n,i,t);r.onDragging(u)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1,s=(a,l)=>{for(let c of l){let{width:u,height:d,left:h,right:p,top:g,bottom:f}=c.getBoundingClientRect();if(u===0||d===0)return!1;let m=a.clientX>=h&&a.clientX<p,v=a.clientY>=g&&a.clientY<f;if(!m||!v)return!1}return!0};for(let a of n)if(s(e,a)){i=!0;break}let{eElement:r,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(r)?!1:i&&t.isInterestedIn(o,r)}findCurrentDropTarget(e,t){let n=t.length;if(n===0)return null;if(n===1)return t[0];let s=qh(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let r of s)for(let o of t)if(this.getAllContainersFromDropTarget(o).flatMap(l=>l).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,n,i,s){if(e&&e.onDragEnter){let r=this.createDropTargetEvent(e,t,n,i,s);e.onDragEnter(r)}}leaveLastTargetIfExists(e,t,n,i){let{lastDropTarget:s}=this;if(!s)return;if(s.onDragLeave){let o=this.createDropTargetEvent(s,e,t,n,i);s.onDragLeave(o)}let r=this.getDragAndDropImageComponent();r&&r.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){let n=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return n.contains(i)}getHorizontalDirection(e){let t=this.eventLastTime?.clientX,n=e.clientX;return t===n?null:t>n?"left":"right"}getVerticalDirection(e){let t=this.eventLastTime?.clientY,n=e.clientY;return t===n?null:t>n?"up":"down"}createDropTargetEvent(e,t,n,i,s){let r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:a,dragSource:l,gos:c}=this,u=t.clientX-o.left,d=t.clientY-o.top;return fe(c,{event:t,x:u,y:d,vDirection:i,hDirection:n,dragSource:l,fromNudge:s,dragItem:a,dropZoneTarget:r})}positionDragAndDropImageComp(e){let t=this.getDragAndDropImageComponent();t&&X$(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;if(e){let{comp:t}=e;if(t){let n=t.getGui();this.dragAndDropImageParent?.removeChild(n),this.destroyBean(t)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:e,gos:t,userCompFactory:n}=this;if(!e)return;let i=oK(n,fe(t,{dragSource:e}));if(!i)return;let s=i.newAgStackInstance();this.dragAndDropImageComp={promise:s},s.then(r=>{!r||!this.isAlive()||(this.processDragAndDropImageComponent(r),this.dragAndDropImageComp.comp=r)})}processDragAndDropImageComponent(e){let{dragSource:t,environment:n}=this;if(!t)return;let i=e.getGui();i.style.setProperty("position","absolute"),i.style.setProperty("z-index","9999"),bN(this.gos,i),n.applyThemeClasses(i),e.setIcon(null,!1);let{dragItemName:s}=t;typeof s=="function"&&(s=s()),e.setLabel(s||""),i.style.top="20px",i.style.left="20px";let r=fD(this.beans);this.dragAndDropImageParent=r,r?r.appendChild(i):V(54)}registerGridDropTarget(e,t){let n={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}},oq=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!n,this.tickDown=e.clientY>i.bottom-s&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};function aq(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}function Yx(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return n&&i&&s}function lq(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(H(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function cq(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function uq(e){let t=0,n,{pinnedRowModel:i,rowModel:s,pageBounds:r}=e;return i?.getPinnedTopRowCount()?n="top":s.getRowCount()?(n=null,t=r.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function dq(e){let t,n=null,{pinnedRowModel:i,pageBounds:s}=e,r=i?.getPinnedBottomRowCount(),o=i?.getPinnedTopRowCount();return r?(n="bottom",t=r-1):e.rowModel.getRowCount()?(n=null,t=s.getLastRow()):o&&(n="top",t=o-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function Uv(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function mu(e,t){let n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;let i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}var hq=class extends F{constructor(e){super(),this.eContainer=e}postConstruct(){let{rowModel:e,gos:t,ctrlsSvc:n}=this.beans;Jn(t,e)&&(this.clientSideRowModel=e),n.whenReady(this,i=>{let s=i.gridBodyCtrl;this.autoScrollService=new oq({scrollContainer:s.eBodyViewport,scrollAxis:"y",getVerticalPosition:()=>s.scrollFeature.getVScrollPosition().top,setVerticalPosition:r=>s.scrollFeature.setVerticalScrollPosition(r),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){let{rowGroupColsSvc:e,filterManager:t,sortSvc:n}=this.beans;return!!((e?.columns??[]).length||t?.isAnyFilterPresent()||n?.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.beans.selectionSvc?.getSelectedNodes()??[]].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=dx(this.beans,e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let{dragAndDrop:n,gos:i}=this.beans,s=this.isFromThisGrid(e),r=i.get("rowDragManaged"),o=e.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(i.get("suppressMoveWhenRowDragging")||!s?n.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(o[0],t):this.moveRows(o,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(st(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel,n=t.getLastHighlightedRowNode(),i=n&&n.highlighted==="Below",s=dx(this.beans,e).y,r=e.dragItem.rowNodes,o=i?1:0;if(this.isFromThisGrid(e))r.forEach(a=>{a.rowTop<s&&(o-=1)}),this.moveRows(r,s,o);else{let a=Iu(this.gos),l=t.getRowIndexAtPixel(s)+1;t.getHighlightPosition(s)==="Above"&&l--,t.updateRowData({add:r.filter(c=>!t.getRowNode(a?.({data:c.data,level:0,rowPinned:c.rowPinned})??c.data.id)).map(c=>c.data),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,n=0){let i=this.beans.focusSvc,s=i.getFocusedCell(),r=s&&mu(this.beans,s);this.clientSideRowModel.ensureRowsAtPixel(e,t,n)&&(r?r.focusCell():i.clearFocusedCell())}addRowDropZone(e){if(!e.getContainer()){V(55);return}let t=this.beans.dragAndDrop;if(t.findExternalZone(e)){V(56);return}let n={getContainer:e.getContainer};e.fromGrid?n=e:(e.onDragEnter&&(n.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",s))}),e.onDragLeave&&(n.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",s))}),e.onDragging&&(n.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",s))}),e.onDragStop&&(n.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",s))}),e.onDragCancel&&(n.onDragCancel=s=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",s))}));let i=S({isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0},n);t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){let t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),s=this.onDragging.bind(this),r=this.onDragStop.bind(this),o=this.onDragCancel.bind(this),a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{n(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:n,onDragLeave:e.onDragLeave?l=>{i(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:i,onDragging:e.onDragging?l=>{s(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:s,onDragStop:e.onDragStop?l=>{r(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:r,onDragCancel:e.onDragCancel?l=>{o(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:o,fromGrid:!0}:a={getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:s,onDragStop:r,onDragCancel:o,fromGrid:!0},a}draggingToRowDragEvent(e,t){let n=this.beans,{pageBounds:i,rowModel:s,gos:r}=n,o=dx(n,t).y,a=o>i.getCurrentPageHeight(),l=-1,c;return a||(l=s.getRowIndexAtPixel(o),c=s.getRow(l)),fe(r,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:l,overNode:c,y:o,vDirection:t.vDirection})}dispatchGridEvent(e,t){let n=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);let{dragAndDrop:t,gos:n}=this.beans;n.get("rowDragManaged")&&(n.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);let{dragAndDrop:t,gos:n}=this.beans;n.get("rowDragManaged")&&(n.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!1)})}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}};function xN(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(i,s)<=n}var pq=class extends F{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){let{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){let i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){let{dragSources:t}=this,n=t.find(i=>i.dragSource===e);n&&(this.removeListener(n),$s(t,n))}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:s}=e;n.addEventListener("mousedown",t);let r=null,o=this.gos.get("suppressTouch");i&&!o&&(r=a=>{uD(a.target)||(s&&a.stopPropagation(),this.onTouchStart(e,a))},n.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!i})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let n=t.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,e.eElement),s=l=>this.onTouchUp(l,e.eElement),r=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:qh(this.beans),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:i,options:{passive:!0}},{target:o,type:"touchend",listener:s,options:{passive:!0}},{target:o,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){let n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let i=c=>this.onMouseMove(c,e.eElement),s=c=>this.onMouseUp(c,e.eElement),r=c=>c.preventDefault(),o=c=>{c.key===L.ESCAPE&&this.cancelDrag(e.eElement)},a=qh(this.beans),l=[{target:a,type:"mousemove",listener:i},{target:a,type:"mouseup",listener:s},{target:a,type:"contextmenu",listener:r},{target:a,type:"keydown",listener:o}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.addEventListener(i,s,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.removeEventListener(i,s,r)})})}isEventNearStartEvent(e,t){let{dragStartPixels:n}=this.currentDragParams,i=H(n)?n:4;return xN(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:n}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){let n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){Ea()&&Vt(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let{gos:t}=this,n=t.get("enableCellTextSelection"),i=e.type==="mousemove",s=r=>!!r.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button");return n&&i&&e.cancelable&&Wv(t,e)&&!s(e)}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;let{dragEndFunctions:e}=this;e.forEach(t=>t()),e.length=0}};function DN(e,t){return e+"_"+t}function At(e){return e instanceof MN}var MN=class extends F{constructor(e,t,n,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return DN(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{At(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=st(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren?.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Ma(t)?e.push(t):At(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Ma(t)?e.push(t):At(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(At(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Kx="row-group-",EN="t-",IN="b-",gq=0,ku=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=gq++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){let{valueCache:n,selectionSvc:i,rowSpanSvc:s}=this.beans,r=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),i?.updateRowSelectable(this),this.resetQuickFilterAggregateText();let o=this.createDataChangedEvent(e,r,t);this.__localEventService?.dispatchEvent(o),s?.onRowDataUpdated(this)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(Je(13),null):this.rowPinned==="top"?EN+this.rowIndex:this.rowPinned==="bottom"?IN+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){let{selectionSvc:n}=this.beans,i=n?.createDaemonNode?.(this),s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));let r=this.createDataChangedEvent(e,s,!1);this.__localEventService?.dispatchEvent(r)}setId(e){let t=Iu(this.beans.gos);if(t)if(this.data){let n=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Kx)&&Je(14,{groupPrefix:Kx})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){let{colModel:i,valueSvc:s,gos:r,selectionSvc:o,rowSpanSvc:a}=this.beans,l=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!l)return!1;let c=s.getValueForDisplay(l,this);if(r.get("readOnlyEdit")){let{beans:{eventSvc:d},data:h,rowIndex:p,rowPinned:g}=this;return d.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:p,rowPinned:g,column:l,colDef:l.colDef,data:h,node:this,oldValue:c,newValue:t,value:t,source:n}),!1}let u=s.setValue(this,l,t,n);return this.dispatchCellChangedEvent(l,t,c),o?.updateRowSelectable(this),a?.onRowDataUpdated(this),u}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){let i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.__selected}depthFirstSearch(e){this.childrenAfterGroup?.forEach(t=>t.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new _l),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e),this.__localEventService||(this.__localEventService=new _l),this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);let n=this.frameworkEventListenerService?.wrap(t)??t;this.__localEventService.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){this.__localEventService?.removeEventListener(e,t),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(V(61),this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let e=[],t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}};function fq(e,t,n){return fe(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var mq=class extends Ye{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??ei.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n}=this;this.filterWrapper=this.beans.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let s=i.getGui();H(s)||V(69,{guiFromFilter:s}),this.appendChild(s),e&&this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(_n(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},AN="ag-resizer-wrapper",Ca=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,vq=`<div class="${AN}">
        ${Ca("eTopLeft","topLeft")}
        ${Ca("eTop","top")}
        ${Ca("eTopRight","topRight")}
        ${Ca("eRight","right")}
        ${Ca("eBottomRight","bottomRight")}
        ${Ca("eBottom","bottom")}
        ${Ca("eBottomLeft","bottomLeft")}
        ${Ca("eLeft","left")}
    </div>`,yq=class extends F{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:i,minHeight:s,height:r,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=Us(this.element);if(u){let d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){let p=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){let p=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=s||l,this.minWidth=n||c,i&&this.setWidth(i),r&&this.setHeight(r),(!i||!r)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){let p=parseFloat(d.style.top),g=parseFloat(d.style.left);h?this.offsetElement(isNaN(g)?0:g,isNaN(p)?0:p):this.setPosition(g,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)_h(n,e),e=DF(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?_h(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:i.top,o=e?0:s.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+o-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Mr(t,e),e=Rv(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:s}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+r>s&&(e=s-r)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Mr(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupSvc?.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?this.resizeObserverSubscriber=Ia(this.beans,this.popupSvc?.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:s,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!s,o)?0:o,c=this.shouldSkipY(t,!!i,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left,l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return l?!0:(t?l=i<0&&e.clientX>a+r.left||i>0&&e.clientX<a+r.left:n?l=i<0&&e.clientX>o.right||i>0&&e.clientX<a+r.left:l=i<0&&e.clientX>o.right||i>0&&e.clientX<o.right,l)}shouldSkipY(e,t,n=0,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top,l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return l?!0:(t?l=i<0&&e.clientY>a+r.top+n||i>0&&e.clientY<a+r.top:l=i<0&&e.clientY>o.bottom||i>0&&e.clientY<o.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let n=new DOMParser().parseFromString(vq,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${AN}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i=0;i<e.length;i++){let s=e[i],r=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(r){let l=window.getComputedStyle(s);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=s.offsetHeight,a=s.offsetWidth;t+=o,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let s=n[i];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:s,isBottom:r,isLeft:o}=this.currentResizer,a=s||o,l=r||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:i}),d=this.position.x,h=this.position.y,p=0,g=0;if(a&&c){let f=o?-1:1,m=this.getWidth(),v=m+c*f,y=!1;o&&(p=m-v,(d+p<=0||v<=this.minWidth)&&(y=!0,p=0)),y||this.setWidth(v)}if(l&&u){let f=i?-1:1,m=this.getHeight(),v=m+u*f,y=!1;i?(g=m-v,(h+g<=0||v<=this.minHeight)&&(y=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&m<v&&this.getMinSizeOfSiblings().height+v>this.element.parentElement.offsetHeight&&(y=!0),y||this.setHeight(v)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&p||g)&&this.offsetElement(d+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:s,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+s,n+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Cq="ag-focus-managed",Fu=class extends F{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks=S({shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;let i=Hl(this.beans,this.eFocusable,!1,n.shiftKey);i&&(i.focus(),n.preventDefault())}},t)}postConstruct(){let{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(Cq),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||ho(t))return;let{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){Au(t);return}t.key===L.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},RN={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function bD(e,t){let{debounceMs:n}=e;return $v(e)?(n!=null&&V(71),0):n??t}function $v(e){return(e.buttons?.indexOf("apply")??-1)>=0}var wq=class extends Ye{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=U,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new Fu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new yq(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),e),t=this.getGui(),t?.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.params=e,this.applyActive=$v(e),this.resetButtonsPanel(e)}updateParams(e){this.params=e,this.applyActive=$v(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){let{buttons:n,readOnly:i}=t??{},{buttons:s,readOnly:r}=e;if(i===r&&Kh(n,s))return;let o=s&&s.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(_n(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):o&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!o){this.eButtonsPanel&&cs(this.eButtonsPanel);return}let a=document.createDocumentFragment(),l=c=>{let u,d=c?this.translate(`${c}Filter`):void 0;switch(c){case"apply":u=g=>this.onBtApply(!1,!1,g);break;case"clear":u=()=>this.onBtClear();break;case"reset":u=()=>this.onBtReset();break;case"cancel":u=g=>{this.onBtCancel(g)};break;default:V(75);return}let p=Yh(`<button
                    type="${c==="apply"?"submit":"button"}"
                    data-ref="${c}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${d}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(p,{click:u})),a.append(p)};s.forEach(c=>l(c)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){let e=bD(this.params,this.defaultDebounceMs),t=An(this,this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel??null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let n=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let n=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(n,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,n){n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.params.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:i}=this.params;i&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,n=t&&t.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let n=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&Uh(i,!n)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){let{positionableFeature:t,gos:n}=this;if(!t||e==="toolPanel")return;e==="floatingFilter"||e==="columnFilter"?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}refresh(e){let t=this.params;return this.params=e,this.resetButtonsPanel(e,t),!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.getLocaleTextFunc()(e,RN[e])}getCellValue(e){return this.params.getValue(e)}getPositionableElement(){return this.eFilterBody}};function bq(e,t,n){if(t==null)return null;let i=null,{compName:s,jsComp:r,fwComp:o}=xK(e,t);return s?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:r==null&&o==null&&t.filter===!0&&(i=n()),i}var Hs={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},SD=class extends F{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?Hs.AUTO_HEIGHT:t.print?Hs.PRINT:Hs.NORMAL;this.view.updateLayoutClasses(n,t)}},wa="Viewport",PP="fakeVScrollComp",FP=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],NP=100,hx=150,Sq=class extends F{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.scrollTimer=0,this.needsRefreshedScrollPosition=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=An(this,()=>this.lastScrollSource[1]=null,hx),this.resetLastVScrollDebounced=An(this,()=>this.lastScrollSource[0]=null,hx)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");let e=this.requireUpdatedScrollPosition.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}requireUpdatedScrollPosition(){this.needsRefreshedScrollPosition=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,wa)});for(let e of FP){let t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?An(this,this.onVScroll.bind(this,wa),NP):this.onVScroll.bind(this,wa),i=t?An(this,this.onVScroll.bind(this,PP),NP):this.onVScroll.bind(this,PP);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...FP,wa]){if(this.lastScrollSource[1]===t)continue;let n=this.getViewportForSource(t);Lv(n,e,this.enableRtl)}}getViewportForSource(e){return e===wa?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i=kv(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===wa?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;let{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===wa?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,!n||this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded(!0):n.schedule(),this.resetLastVScrollDebounced()}doHorizontalScroll(e){let t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent(R(S({},t),{type:"bodyScrollEnd"}))},hx)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Tl()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=dD(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl&&Tv()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(wa)}scrollGridIfNeeded(e=!1){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.requireUpdatedScrollPosition(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&Tv()?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),Lv(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.requireUpdatedScrollPosition(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.needsRefreshedScrollPosition){let{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.needsRefreshedScrollPosition=!1;let{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let{rowModel:n}=this.beans,i=n.getRowCount(),s=-1;for(let r=0;r<i;r++){let o=n.getRow(r);if(typeof e=="function"){if(o&&e(o)){s=r;break}}else if(e===o||e===o.data){s=r;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(Rn(this.gos,"print"))return;let{rowModel:n}=this.beans,i=n.getRowCount();if(typeof e!="number"||e<0||e>=i){V(88,{index:e});return}let r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel"),{frameworkOverrides:o,pagination:a,pageBounds:l,rowContainerHeight:c,rowRenderer:u}=this.beans;o.wrapIncoming(()=>{r||a?.goToPageWithIndex(e);let d=this.ctrlsSvc.getGridBodyCtrl(),h=d.stickyTopHeight,p=d.stickyBottomHeight,g=n.getRow(e),f;do{let m=g.rowTop,v=g.rowHeight,y=l.getPixelOffset(),w=g.rowTop-y,x=w+g.rowHeight,D=this.getVScrollPosition(),M=c.divStretchOffset,E=D.top+M,A=D.bottom+M,I=A-E,T=c.getScrollPositionForPixel(w),P=c.getScrollPositionForPixel(x-I),O=Math.min((T+P)/2,w),$=E+h>w,ae=A-p<x,ue=null;t==="top"?ue=T:t==="bottom"?ue=P:t==="middle"?ue=O:$?ue=T-h:ae&&(ue=P+p),ue!==null&&(this.setVerticalScrollPosition(ue),u.redraw({afterScroll:!0})),f=m!==g.rowTop||v!==g.rowHeight}while(f);this.animationFrameSvc?.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let{colModel:n,frameworkOverrides:i}=this.beans,s=n.getCol(e);if(!s||s.isPinned()||!this.visibleCols.isColDisplayed(s))return;let r=this.getPositionedHorizontalScroll(s,t);i.wrapIncoming(()=>{r!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?n:i)||s,l=o?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(e);return c?d-r/2:a?o?h:u:o?u-r:h-r}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:s}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>s:n<s,a=r?n<i:t>i;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleCols.bodyWidth,i=e.getActualWidth(),s=e.getLeft(),r=t?-1:1,o=t?n-s:s,a=o+i*r,l=o+i/2*r;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},xD=class extends F{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=Rn(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,i=t.bodyWidth,s=t.getColsLeftWidth(),r=t.getDisplayedColumnsRightWidth(),o;e?o=i+s+r:(o=i,this.addSpacer&&(this.gos.get("enableRtl")?s:r)===0&&n.verticalScrollShowing&&(o+=n.getScrollbarWidth())),this.callback(o)}},xq=class extends F{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,i=()=>{Co(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){let{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.eBodyViewport,t=dD(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function DD(e,t,n,i,s,r){if(n==null&&t==null)return;let o={},a={},l=(c,u)=>{c.split(" ").forEach(d=>{d.trim()!=""&&u(d)})};if(n){let c=Object.keys(n);for(let u=0;u<c.length;u++){let d=c[u],h=n[d],p;typeof h=="string"?p=e?e.evaluate(h,i):!0:typeof h=="function"&&(p=h(i)),l(d,g=>{p?o[g]=!0:a[g]=!0})}}t&&r&&Object.keys(t).forEach(c=>l(c,u=>{o[u]||(a[u]=!0)})),r&&Object.keys(a).forEach(r),Object.keys(o).forEach(s)}function OP(e){if(e.group)return e.level;let t=e.parent;return t?t.level+1:0}var Dq=class extends F{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){let n=this.gos,i=o=>{typeof o=="string"?e.push(o):Array.isArray(o)&&o.forEach(a=>e.push(a))},s=n.get("rowClass");s&&i(s);let r=n.getCallback("getRowClass");if(r){let o={data:t.data,node:t,rowIndex:t.rowIndex},a=r(o);i(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){let{gos:i,expressionSvc:s}=this.beans,r=fe(i,{data:e.data,node:e,rowIndex:e.rowIndex});DD(s,void 0,i.get("rowClassRules"),r,t,n)}processStylesFromGridOptions(e){let t=this.gos,n=t.get("rowStyle"),i=t.getCallback("getRowStyle"),s;if(i){let r={data:e.data,node:e,rowIndex:e.rowIndex};s=i(r)}if(s||n)return Object.assign({},n,s)}},Mq=0,tp="renderedRow",Yv=class extends F{constructor(e,t,n,i,s){super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=s,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Mq++,this.rowId=po(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=OP(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=po(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,i){i=rp(this,this.beans.context,i);let s={rowComp:e,element:t,containerType:n,compBean:i};this.allRowGuis.push(s),this.updateGui(n,s),this.initialiseRowComp(s),!(this.rowType==="FullWidthLoading"||this.rowNode.stub)&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){let t=e?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=t)}initialiseRowComp(e){let t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),Pl(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(s=>n.addOrRemoveCssClass(s,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Px(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),Bl(t,e.element,tp,this),e.compBean.addDestroyFunc(()=>Bl(t,e.element,tp,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){let t=po(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){let{containerType:t}=e;this.slideInAnimation[t]&&(xP(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(xP(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){let t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;let n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){let t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;let t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){let{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:i}}=this,s=!!e||!i.isPinningLeft(),r=!!t,o=!!n||!i.isPinningRight();return s&&r&&o}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){let e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&mD(this.gos,i);e?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":r?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;let{animationFrameSvc:n}=this.beans;if(!n||e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new Vh(e,this.rowNode,this.beans,this)}shouldRecreateCellCtrl(e){return!!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){let i={list:[],map:{}},s=(o,a,l)=>{l!=null?i.list.splice(l,0,a):i.list.push(a),i.map[o]=a},r=[];for(let o of t){let a=o.getInstanceId(),l=e.map[a];l&&this.shouldRecreateCellCtrl(l)&&(l.destroy(),l=void 0),l||(l=this.getNewCellCtrl(o)),l&&s(a,l)}for(let o of e.list){let a=o.column.getInstanceId();if(i.map[a]!=null)continue;!this.isCellEligibleToBeRemoved(o,n)?r.push([a,o]):o.destroy()}if(r.length)for(let[o,a]of r){let l=i.list.findIndex(u=>u.column.getLeft()>a.column.getLeft()),c=l===-1?void 0:Math.max(l-1,0);s(o,a,c)}return i}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{let n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);let i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");let s=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(e,t){let{column:s}=e;if(s.getPinned()!=t)return!0;let{editing:r,cellPosition:o}=e,{focusSvc:a,visibleCols:l}=this.beans,c=a.isCellFocused(o);return r||c?!(l.allCols.indexOf(s)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Rn(this.gos,"print")}listenOnDomOrder(e){let t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;let t=H(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),s=n.isPinningRight();if(t){let{slideInAnimation:r}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){r.fullWidth=!0;return}r.center=!0,r.left=i,r.right=s}else{let{fadeInAnimation:r}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){r.fullWidth=!0;return}r.center=!0,r.left=i,r.right=s}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let e=(o,a)=>o?o.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(o.element,a).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),s=e(this.rightGui,"right");return t&&n&&i&&s}addListeners(){this.addManagedListeners(this.rowNode,S({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},this.beans.expansionSvc?.getRowExpandedListeners(this)??{})),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.beans.rowSpanSvc&&this.addManagedListeners(this.beans.rowSpanSvc,{spannedCellsUpdated:({pinned:e})=>{e&&!this.rowNode.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(t=>{this.addRowDraggerToRow(t)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())},cellChanged:e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{let n=e==="Above",i=e==="Below";t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",i)})}postProcessRowDragging(){let e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}verifyCells(){this.onDisplayedColumnsChanged()}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:uo(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let t=this.findFullWidthInfoForEvent(e);if(!t)return;let{rowGui:n,column:i}=t;if(!(n.element===e.target))return;let o=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),u={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:c?.column??i};l?.navigateToNextCell(e,e.key,u,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||ho(e))return;let t=this.allRowGuis.find(a=>a.element.contains(e.target)),n=t?t.element:null,i=n===e.target,s=Dt(this.beans),r=!1;n&&s&&(r=n.contains(s)&&s.classList.contains("ag-cell"));let o=null;!i&&!r&&(o=Hl(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&i||!o)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let e=this.allRowGuis.find(t=>Us(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){let t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(n=>{ds(n.element,"tabindex",t)})}onFullWidthRowFocused(e){let t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1,i=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;i&&(i.classList.toggle("ag-full-width-focus",n),n&&e?.forceBrowserFocus&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){let n={list:[],map:{}};return e.list.forEach(i=>{i!==t&&(n.list.push(i),n.map[i.column.getInstanceId()]=i)}),n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){let{rowNode:n}=this;return fe(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){let n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){ho(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;let t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){let{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=kl(e.target,"ag-row-drag",3),!this.isFullWidth())return;let t=this.rowNode,{rangeSvc:n,focusSvc:i}=this.beans;n?.removeAllCellRanges();let s=this.findFullWidthInfoForEvent(e);if(!s)return;let{rowGui:r,column:o}=s,a=r.element,l=e.target,c=e.defaultPrevented||Ea();a&&a.contains(l)&&uD(l)&&(c=!1),i.setFocusedCell({rowIndex:t.rowIndex,column:o,rowPinned:t.rowPinned,forceBrowserFocus:c})}onRowClick(e){if(ho(e)||this.lastMouseDownOnDragger)return;let{eventSvc:n,selectionSvc:i}=this.beans;n.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),i?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){let{gos:n,rowNode:i}=this,s=fe(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(o,a,l,c)=>this.addFullWidthRowDragging(o,a,l,c),setTooltip:(o,a)=>{n.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(o,a)}}),r=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return gK(r,s);case"FullWidthGroup":return pK(r,s);case"FullWidthLoading":return hK(r,s);default:return dK(r,s)}}refreshRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.refreshRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",i){let{rowDragSvc:s,context:r}=this.beans;if(!s||!this.isFullWidth())return;let o=s.createRowDragComp(()=>n,this.rowNode,void 0,e,t,i);this.createBean(o,r),this.addDestroyFunc(()=>{this.destroyBean(o,r)})}onUiLevelChanged(){let e=OP(this.rowNode);if(this.rowLevel!=e){let t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass(t,!0),i.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!0))})}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){let t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:i,beans:s}=this,r=[];r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&r.push("ag-row-pinned"),i.isSelected()&&r.push("ag-row-selected"),i.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),i.stub&&r.push("ag-row-loading"),n&&r.push("ag-full-width-row"),s.expansionSvc?.addExpandedCss(r,i),i.dragging&&r.push("ag-row-dragging");let{rowStyleSvc:o}=s;return o&&(o.processClassesFromGridOptions(r,i),o.preProcessRowClassRules(r,i)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),n&&(t==="left"&&r.push("ag-cell-last-left-pinned"),t==="right"&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;let{element:t,compBean:n}=e,{rowNode:i,beans:s,gos:r}=this;n.addManagedListeners(t,{mouseenter:()=>i.dispatchRowEvent("mouseEnter"),mouseleave:()=>i.dispatchRowEvent("mouseLeave")}),n.addManagedListeners(i,{mouseEnter:()=>{!s.dragSvc?.dragging&&!r.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){let t=e?[e]:this.allRowGuis.map(n=>n.element);for(let n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){let t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),s=_F(this.gos)?Eu(this.beans,this.rowNode).height:void 0,r=s?`${Math.min(n,s)-2}px`:void 0;this.forEachGui(e,o=>{o.element.style.height=`${t}px`,r&&o.element.style.setProperty("--ag-line-height",r)})}destroyFirstPass(e=!1){this.active=!1;let{rowNode:t}=this;if(!e&&wu(this.gos)&&!t.sticky)if(t.rowTop!=null){let s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));t.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.beans.editSvc?.stopRowEditing(this);let e=t=>(t.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let{focusSvc:e,editSvc:t}=this.beans,n=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);n!==this.rowFocused&&(this.rowFocused=n,this.setFocusedClasses()),!n&&this.editing&&t?.stopRowEditing(this,!1)}onPaginationChanged(){let e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;let n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&H(e)){let t=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let t=this.rowNode,n;if(t.sticky)n=t.stickyRowTop;else{let i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,s=this.applyPaginationOffset(i);n=t.isRowPinned()?s:this.beans.rowContainerHeight.getRealPixelPosition(s)}return n+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let n=null;return this.getAllCellCtrls().forEach(i=>{i.column==e&&(n=i)}),n!=null||t||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(e)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){let t=this.rowNode.getRowIndexString();if(t===null)return;let n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,s=n+this.rowNode.rowIndex+1;this.forEachGui(e,r=>{r.rowComp.setRowIndex(t),r.rowComp.addOrRemoveCssClass("ag-row-even",i),r.rowComp.addOrRemoveCssClass("ag-row-odd",!i),lD(r.element,s)})}};function TN(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function qx(e,t,n,i,s){let r=i?i.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;let o=fe(e,{event:t,editing:s,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(r&&r(o))}function Eq(e){let{pinnedRowModel:t,rowModel:n}=e,[i,s]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],r=i?null:"top",o,a;s?(o=null,a=n.getRowCount()-1):(o="bottom",a=t?.getPinnedBottomRowCount()??-1);let{visibleCols:l,rangeSvc:c}=e,u=l.allCols;!c||!u?.length||c.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:a,rowEndPinned:o})}var Iq=65,Aq=67,Rq=86,Tq=68,kq=90,Lq=89;function Pq(e){let{keyCode:t}=e,n;switch(t){case Iq:n=L.A;break;case Aq:n=L.C;break;case Rq:n=L.V;break;case Tq:n=L.D;break;case kq:n=L.Z;break;case Lq:n=L.Y;break;default:n=e.code}return n}var Fq=class extends F{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this)}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",YF("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!Wv(this.gos,t)||ho(t))return;let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,i,n)):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){let{gos:t}=this;return{cellCtrl:CN(t,e),rowCtrl:KF(t,e,tp)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let{rowNode:i,column:s,editing:r}=e;!qx(this.gos,n,i,s,r)&&t==="keydown"&&(!r&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.editing),TN(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){let{rowNode:i}=e,{focusSvc:s,navigation:r}=this.beans,o=s.getFocusedCell(),a=o&&o.column;if(!qx(this.gos,n,i,a,!1)){let c=n.key;if(t==="keydown")switch(c){case L.PAGE_HOME:case L.PAGE_END:case L.PAGE_UP:case L.PAGE_DOWN:r?.handlePageScrollingKey(n,!0);break;case L.UP:case L.DOWN:e.onKeyboardNavigate(n);break;case L.TAB:e.onTabKeyDown(n);break;default:}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Wv(this.gos,e))return;let n=Pq(e),{clipboardSvc:i,undoRedo:s}=this.beans;if(n===L.A)return this.onCtrlAndA(e);if(n===L.C)return this.onCtrlAndC(i,e);if(n===L.D)return this.onCtrlAndD(i,e);if(n===L.V)return this.onCtrlAndV(i,e);if(n===L.X)return this.onCtrlAndX(i,e);if(n===L.Y)return this.onCtrlAndY(s);if(n===L.Z)return this.onCtrlAndZ(s,e)}onCtrlAndA(e){let{beans:{rowModel:t,rangeSvc:n,selectionSvc:i},gos:s}=this;n&&fo(s)&&t.isRowsToRender()?Eq(this.beans):i&&i?.selectAllRowNodes({source:"keyboardSelectAll",selectAll:HF(s)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);n?.editing||i?.editing||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);n?.editing||i?.editing||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);n?.editing||i?.editing||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},kN=class extends F{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){let t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},gv=e=>e.topRowCtrls,fv=e=>e.getStickyTopRowCtrls(),mv=e=>e.getStickyBottomRowCtrls(),vv=e=>e.bottomRowCtrls,yv=e=>e.allRowCtrls,px=e=>e.getCtrls("top"),gx=e=>e.getCtrls("center"),fx=e=>e.getCtrls("bottom"),Nq={center:{type:"center",name:"center-cols",getRowCtrls:yv,getSpannedRowCtrls:gx},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:yv,getSpannedRowCtrls:gx},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:yv,getSpannedRowCtrls:gx},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:yv},topCenter:{type:"center",name:"floating-top",getRowCtrls:gv,getSpannedRowCtrls:px},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:gv,getSpannedRowCtrls:px},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:gv,getSpannedRowCtrls:px},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:gv},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:fv},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:fv},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:fv},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:fv},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:mv},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:mv},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:mv},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:mv},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:vv,getSpannedRowCtrls:fx},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:vv,getSpannedRowCtrls:fx},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:vv,getSpannedRowCtrls:fx},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:vv}};function LN(e){return`ag-${op(e).name}-viewport`}function Ev(e){let t=op(e);return t.container??`ag-${t.name}-container`}function Oq(e){return`ag-${op(e).name}-spanned-cells-container`}function op(e){return Nq[e]}var _q=["topCenter","topLeft","topRight"],Bq=["bottomCenter","bottomLeft","bottomRight"],Vq=["center","left","right"],Gq=["center","left","right","fullWidth"],zq=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Hq=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],jq=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],PN=["stickyTopCenter","stickyTopLeft","stickyTopRight"],FN=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Wq=[...PN,"stickyTopFullWidth",...FN,"stickyBottomFullWidth"],Uq=[..._q,...Bq,...Vq,...PN,...FN],$q=class extends F{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=op(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new xq(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new Fq(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let{pinnedCols:s,rangeSvc:r}=this.beans,o=()=>this.onPinnedWidthChanged();this.forContainers(Hq,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:o})}),this.forContainers(jq,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:o})}),this.forContainers(Gq,()=>this.createManagedBean(new kN(this.eContainer,this.name==="center"?i:void 0))),r&&this.forContainers(Uq,()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer))),this.forContainers(zq,()=>this.createManagedBean(new xD(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){let{spannedRowRenderer:e,gos:t}=this.beans;this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsChanged.bind(this),displayedRowsChanged:n=>this.onDisplayedRowsChanged(n.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{let n=this.options.getSpannedRowCtrls(e);n&&this.comp.setSpannedRowCtrls(n,!1)}})}listenOnDomOrder(){if(Wq.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=Rn(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let{dragSvc:e}=this.beans;if(!e)return;let t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return $h(this.eViewport)}getCenterViewportScrollLeft(){return kv(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=Ia(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return EF(this.eViewport)}getViewportScrollLeft(){return kv(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||P$(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Lv(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=Rn(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||n,r=t.filter(o=>{let a=o.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},NN="ag-force-vertical-scroll",Yq="ag-selectable",Kq="ag-column-moving",qq=class extends F{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,i,s,r,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=r,this.eStickyBottom=o,this.eCenterColsViewport=n.querySelector(`.${LN("center")}`),this.eFullWidthContainer=n.querySelector(`.${Ev("fullWidth")}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${Ev("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=o.querySelector(`.${Ev("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new SD(this.comp)),this.scrollFeature=this.createManagedBean(new Sq(this.eBodyViewport)),this.beans.rowDragSvc?.setupRowDrag(this.eBodyViewport,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,r,o]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){let e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t}),this.addManagedPropertyListener("treeData",t)}onGridColumnsChanged(){let e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){let{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let n=t&&e.getScrollbarWidth()||0,i=SF()?16:0,s=`calc(100% + ${n+i}px)`;Co(this.beans,()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}setGridRootRole(){let{rowGroupColsSvc:e,colModel:t}=this,n=this.gos.get("treeData");if(!n){let i=t.isPivotMode();n=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,s=kl(i,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:n=>{let{target:i,relatedTarget:s}=n,r=t.contains(s),o=kl(s,"ag-root",t);kl(i,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(Kq,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(Yq,e)}updateScrollingClasses(){let{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){let e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?NN:null,n=Rn(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&F$(this.eBodyViewport)}setupRowAnimationCssClass(){let{rowContainerHeight:e,environment:t}=this.beans,n=t.sizesMeasured,i=()=>{let s=n&&wu(this.gos)&&!e.stretching,r=s?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(r,s)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){let{popupSvc:e,touchSvc:t}=this.beans,n=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:n}),t?.mockBodyContextMenu(this,n),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this,e)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&Wv(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e,s=i||Math.abs(t)>Math.abs(n),r=e.target;s?(this.eStickyTopFullWidthContainer.contains(r)||this.eStickyBottomFullWidthContainer.contains(r))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(n))}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e?.getPinnedTopTotalHeight()??0,n=e?.getPinnedBottomTotalHeight()??0;this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){let t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0,i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,i=e?.getPinnedBottomTotalHeight()??0,r=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,o=i+r;n.setStickyBottomBottom(`${o}px`)}},ON=class extends Ye{constructor(e,t){super(),this.direction=t,this.eViewport=U,this.eContainer=U,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",wF()||Tl())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=SF(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Co(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){let t=this.eViewport;B$(()=>Us(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Zq=class extends ON{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=U,this.eRightSpacer=U,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new xD(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleSvc.verticalScrollShowing,t=this.visibleCols.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=i),Mr(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let s=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(s+=i),Mr(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){let e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,r=n?0:i===0&&t?16:i,o=()=>{this.setScrollVisibleDebounce=0,this.addOrRemoveCssClass("ag-scrollbar-invisible",t),_h(this.getGui(),r),_h(this.eViewport,r),_h(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(o,100):o()}getScrollPosition(){return kv(this.eViewport,this.enableRtl)}setScrollPosition(e){Us(this.eViewport)||this.attemptSettingScrollPosition(e),Lv(this.eViewport,e,this.enableRtl)}},Xq={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Zq},Qq=class extends ON{constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new kN(this.eContainer));let{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){let{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,s=i===0&&n?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),Mr(this.getGui(),s),Mr(this.eViewport,s),Mr(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){let n=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Us(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},Jq={selector:"AG-FAKE-VERTICAL-SCROLL",component:Qq};function eZ(e){return e.cols?e.cols.treeDepth+1:-1}function co(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function MD(e){let t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(let i of n){if(!i)continue;let s=i.getGroupRowCount()||0;for(let r=0;r<s;r++){let o=i.getGroupRowCtrlAtIndex(r),a=t[r];if(o){let l=tZ(e,o);(a==null||l>a)&&(t[r]=l)}}}return t}function tZ(e,t){let n=e.colModel.isPivotMode()?iZ(e):BN(e),i=0,s=t.getHeaderCtrls();for(let r of s){let{column:o}=r;if(o.isAutoHeaderHeight()){let a=o.getAutoHeaderHeight();a!=null&&a>i&&(i=a)}}return Math.max(n,i)}function ED(e){let t=e.colModel.isPivotMode()?nZ(e):ap(e),i=e.visibleCols.allCols.filter(s=>s.isAutoHeaderHeight()).map(s=>s.getAutoHeaderHeight()||0);return Math.max(t,...i)}function ap(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function _N(e){return e.gos.get("floatingFiltersHeight")??ap(e)}function BN(e){return e.gos.get("groupHeaderHeight")??ap(e)}function nZ(e){return e.gos.get("pivotHeaderHeight")??ap(e)}function iZ(e){return e.gos.get("pivotGroupHeaderHeight")??BN(e)}var sZ=class extends F{setComp(e,t,n){this.comp=e,this.eGui=t;let{beans:i}=this,{headerNavigation:s,touchSvc:r,ctrlsSvc:o}=i;s&&this.createManagedBean(new Fu(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();let a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),r?.mockHeaderContextMenu(this,a),o.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Co(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){let{beans:e}=this,t=0,n=MD(e).reduce((r,o)=>r+o,0),i=ED(e);if(e.filterManager?.hasFloatingFilters()&&(t+=_N(e)),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;let s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){let t=e.colModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){let n=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",n)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?"LEFT":"RIGHT",{beans:s}=this,{headerNavigation:r,focusSvc:o}=s;(r.navigateHorizontally(i,!0,e)||!n&&o.focusOverlay(!1)||Tu(s,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null,{headerNavigation:n}=this.beans;switch(e.key){case L.LEFT:t="LEFT";case L.RIGHT:{H(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case L.UP:t="UP";case L.DOWN:{H(t)||(t="DOWN"),n.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e,{eGui:n,beans:i}=this;!t&&n.contains(Dt(i))||n.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){let{menuSvc:i,ctrlsSvc:s}=this.beans;if(!e&&!n||!i?.isHeaderContextMenuEnabled())return;let{target:r}=e??t;(r===this.eGui||r===s.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,e,n)}},ID=class extends Ye{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},rZ=class extends ID{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=U,this.eHeaderCompWrapper=U,this.headerCompVersion=0}postConstruct(){let e=this.getGui();((s,r)=>{r!=null&&r!=""?e.setAttribute(s,r):e.removeAttribute(s)})("col-id",this.ctrl.column.getColId());let n={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),setUserStyles:s=>ip(e,s),setAriaSort:s=>s?M$(e,s):E$(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);let i=this.ctrl.getSelectAllGui();i&&this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},oZ=class extends ID{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=U,this.eHeaderCompWrapper=U}postConstruct(){let e=this.getGui(),t=(i,s)=>s!=null?e.setAttribute(i,s):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.column.getUniqueId());let n={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setUserStyles:i=>ip(e,i),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>xt(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}addOrRemoveHeaderWrapperStyle(e,t){let{eHeaderCompWrapper:n}=this;t?n.style.setProperty(e,t):n.style.removeProperty(e)}},aZ=class extends ID{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=U,this.eButtonWrapper=U,this.eButtonShowMainFilter=U}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),setUserStyles:n=>ip(e,n),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>xt(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},lZ=class extends Ye{constructor(e){super(),this.ctrl=e,this.headerComps={},this.setTemplate(`<div class="${this.ctrl.headerRowClass}" role="row"></div>`)}postConstruct(){lD(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,n)=>this.setHeaderCtrls(t,n),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},e.forEach(i=>{let s=i.instanceId,r=n[s];delete n[s],r==null&&(r=this.createHeaderComp(i),this.getGui().appendChild(r.getGui())),this.headerComps[s]=r}),Object.values(n).forEach(i=>{this.getGui().removeChild(i.getGui()),this.destroyBean(i)}),t){let i=Object.values(this.headerComps);i.sort((r,o)=>{let a=r.getCtrl().column.getLeft(),l=o.getCtrl().column.getLeft();return a-l});let s=i.map(r=>r.getGui());AF(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new oZ(e);break;case"filter":t=new aZ(e);break;default:t=new rZ(e);break}return this.createBean(t),t.setParentComponent(this),t}},AD=class extends F{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){let{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?st(t):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),i=H(this.columnOrGroup.getOldLeft());t?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){let{gos:n,visibleCols:i}=this.beans;if(!Rn(n,"print")||e.getPinned()==="left")return t;let r=i.getColsLeftWidth();if(e.getPinned()==="right"){let o=i.bodyWidth;return r+o+t}return r+t}setLeft(e){if(H(e)&&(this.eCell.style.left=`${e}px`),At(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&D$(this.ariaEl,t.length)}}},cZ=0,VN="headerCtrl",RD=class extends F{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+cZ++}postConstruct(){let e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){let{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),s=i&&i.suppressHeaderKeyboardEvent;if(!H(s))return!1;let r=fe(this.gos,{colDef:i,column:n,headerRowIndex:t,event:e});return!!s(r)}getWrapperHasFocus(){return Dt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){let e=this.column.getDefinition();if(!e)return;let{headerStyle:t}=e,n;if(typeof t=="function"){let i=this.getHeaderClassParams();n=t(i)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){let{wrapperElement:t,checkMeasuringCallback:n,compBean:i}=e,{beans:s}=this,r=d=>{if(!this.isAlive()||!i.isAlive())return;let{paddingTop:h,paddingBottom:p,borderBottomWidth:g,borderTopWidth:f}=Gl(this.eGui),m=h+p+g+f,y=t.offsetHeight+m;if(d<5){let w=Vt(s),x=!w||!w.contains(t),D=y==0;if(x||D){Co(s,()=>r(d+1));return}}this.setColHeaderHeight(this.column,y)},o=!1,a,l=()=>{let d=this.column.isAutoHeaderHeight();d&&!o&&c(),!d&&o&&u()},c=()=>{o=!0,r(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),a=Ia(this.beans,t,()=>r(0))},u=()=>{o=!1,a&&a(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),a=void 0};l(),i.addDestroyFunc(()=>u()),i.addManagedListeners(this.column,{widthChanged:()=>o&&r(0)}),i.addManagedEventListeners({sortChanged:()=>{o&&window.setTimeout(()=>r(0))}}),n&&n(l)}onDisplayedColumnsChanged(){let{comp:e,column:t,beans:n,eGui:i}=this;!e||!t||!i||(vN(e,t,n.visibleCols),vF(i,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let e=Nl(this.beans);this.eGui&&ds(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){let t=Dt(this.beans),n=e.key===L.LEFT||e.key===L.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),!n))return;let s=e.key===L.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let r=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(r,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){let{gos:t,column:n}=this,i=e.key===L.LEFT!==t.get("enableRtl"),s=n.getPinned(),r=t.get("enableRtl");return s&&r!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){let t=this.getWrapperHasFocus();switch(e.key){case L.PAGE_DOWN:case L.PAGE_UP:case L.PAGE_HOME:case L.PAGE_END:t&&e.preventDefault()}}addDomData(e){let t=VN,{eGui:n,gos:i}=this;Bl(i,n,t,this),e.addDestroyFunc(()=>Bl(i,n,t,null))}focus(e){let{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){let i=e??t,{menuSvc:s,gos:r}=this.beans;r.get("preventDefaultOnContextMenu")&&i.preventDefault(),s?.isHeaderContextMenuEnabled(n)&&s.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;let{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},uZ=class extends RD{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,n,i,s){this.comp=e;let{rowCtrl:r,column:o,beans:a}=this,{colResize:l,context:c,colHover:u,rangeSvc:d}=a,h=rp(this,c,s);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:g=>this.setRefreshFunction("measuring",g),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(r.pinned,o,n,e,this)):xt(n,!1),u?.createHoverFeature(h,[o],t),d?.createRangeHighlightFeature(h,o,e),h.createManagedBean(new AD(o,t,a)),h.createManagedBean(new Fu(t,{shouldStopEventPropagation:g=>this.shouldStopEventPropagation(g),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(o,{colDefChanged:()=>this.refresh()}),h.addManagedListeners(o,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return fe(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){let e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return aK(this.beans.userCompFactory,t,e)}createParams(){let{menuSvc:e,sortSvc:t,colFilter:n,gos:i}=this.beans;return fe(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||ji(this.gos)),showColumnMenu:(r,o)=>{e?.showColumnMenu({column:this.column,buttonElement:r,positionBy:"button",onClosedCallback:o})},showColumnMenuAfterMouseClick:(r,o)=>{e?.showColumnMenu({column:this.column,mouseEvent:r,positionBy:"mouse",onClosedCallback:o})},showFilter:r=>{e?.showFilterMenu({column:this.column,buttonElement:r,containerType:"columnFilter",positionBy:"button"})},progressSort:r=>{t?.progressSort(this.column,!!r,"uiColumnSorted")},setSort:(r,o)=>{t?.setSortForColumn(this.column,r,!!o,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(r,o)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(r,o)}})}setupSelectAll(e){let{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===L.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===L.ENTER&&this.onEnterKeyDown(e),e.key===L.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();_P(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),HK()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=mN(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(s=>{i.has(s)?i.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),i.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){let{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){let e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp?.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let n=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this,s=MD(this.beans),r=s.reduce((u,d)=>u+=d,0)===0;if(n.addOrRemoveCssClass("ag-header-parent-hidden",r),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:o,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",o>0);let l=ED(i);if(o===0){n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}n.addOrRemoveCssClass("ag-header-span-total",a);let c=0;for(let u=0;u<o;u++)c+=s[s.length-1-u];e.style.setProperty("top",`${-c}px`),e.style.setProperty("height",`${l+c}px`)}refreshAriaSort(){if(this.sortable){let e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(p$(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!ji(this.gos)){let e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Dt(this.beans)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){let t=s=>this.handleMouseOverChange(s.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return _P(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function _P(e){return typeof e.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var dZ=0,mx=class extends F{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=dZ++;let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}postConstruct(){this.isPrintLayout=Rn(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=rp(this,this.beans.context,t),n&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls){for(let t of this.headerCellCtrls.values())if(t.column===e)return t}}onDisplayedColumnsChanged(){this.isPrintLayout=Rn(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{filterManager:e}=this.beans,t=[],n=MD(this.beans),i=ED(this.beans);t.push(...n),t.push(i),e?.hasFloatingFilters()&&t.push(_N(this.beans));let s=0;for(let o=0;o<this.rowIndex;o++)s+=t[o];let r=t[this.rowIndex];return{topOffset:s,rowHeight:r}}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,e);let n=i=>{let{focusSvc:s,visibleCols:r}=this.beans;return s.isHeaderWrapperFocused(i)?r.isVisible(i.column):!1};if(e)for(let[i,s]of e)n(s)?this.headerCellCtrls.set(i,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let n=e.getUniqueId(),i;if(t&&(i=t.get(n),t.delete(n)),i&&i.column!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":i=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:i=this.createBean(new uZ(e,this));break}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{colViewport:n}=this.beans;return["left",null,"right"].forEach(i=>{let s=n.getHeadersToRender(i,t);e=e.concat(s)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;let t=this.getHeaderCellCtrls(),n;return typeof e=="function"?n=t.find(e):n=t.find(i=>i.column==e),n}focusHeader(e,t){let n=this.findHeaderCellCtrl(e);return n?n.focus(t):!1}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},hZ=class extends F{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;let{pinnedCols:n,ctrlsSvc:i,colModel:s,colMoves:r,filterManager:o}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(r,this.eViewport);let a=this.onDisplayedColumnsChanged.bind(this,o);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:a,advancedFilterEnabledChanged:a});let l=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(l,this),s.ready&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let{focusSvc:t,colModel:n,filterManager:i}=this.beans,s=0,r=t.getFocusHeaderToUseAfterRefresh(),o=()=>{let u=eZ(n)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let d=0;d<u;d++){let h=this.createBean(new mx(s++,this.pinned,"group"));this.groupsRowCtrls.push(h)}},a=()=>{let u=s++,d=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.rowIndex!==u);(d||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),d&&(this.columnsRowCtrl=this.createBean(new mx(u,this.pinned,"column")))},l=()=>{this.includeFloatingFilter=!!i?.hasFloatingFilters()&&!this.hidden;let u=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){u();return}let d=s++;if(this.filtersRowCtrl){let h=this.filtersRowCtrl.rowIndex!==d;(!e||h)&&u()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new mx(d,this.pinned,"filter")))};o(),a(),l();let c=this.getAllCtrls();this.comp.setCtrls(c),this.restoreFocusOnHeader(t,r)}getHeaderCtrlForColumn(e){if(Ma(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let n=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){let s=this.getAllCtrls()[e];return s?s.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){let n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;let{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(e){let t=!!e?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new xD(e=>this.comp.setCenterWidth(`${e}px`),!0))}},pZ=class extends F{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){let{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let{enterpriseMenuFactory:t,filterMenuFactory:n}=this.beans,i=t&&ji(this.gos)?t:n;this.showColumnMenuCommon(i,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){let{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(ji(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Ma(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Tl()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!ji(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!ji(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos,t=e.get("suppressMenuHide");return ji(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,i){let{positionBy:s,onClosedCallback:r}=t,o=t.column;if(s==="button"){let{buttonElement:a}=t;e?.showMenuAfterButtonClick(o,a,n,r,i)}else if(s==="mouse"){let{mouseEvent:a}=t;e?.showMenuAfterMouseEvent(o,a,n,r,i)}else if(o){let a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(o,"auto"),Co(a,()=>{let c=l.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);c&&e?.showMenuAfterButtonClick(o,c.getAnchorElementForMenu(i),n,r,!0)})}}};function BP(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}var GN=class extends Ye{constructor(){super()}},gZ=class extends GN{init(){let e=uo(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},fZ=class extends GN{init(){let e=uo(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}};function mZ(e,t,n){let i=us(e,t,n);if(i){let{className:r}=i;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return i}let s=document.createElement("span");return s.appendChild(i),s}function us(e,t,n){let i=null;e==="smallDown"?V(262):e==="smallLeft"?V(263):e==="smallRight"&&V(264);let s=n&&n.getColDef().icons;if(s&&(i=s[e]),t.gos&&!i){let r=t.gos.get("icons");r&&(i=r[e])}if(i){let r;if(typeof i=="function")r=i();else if(typeof i=="string")r=i;else{V(38,{iconName:e});return}if(typeof r=="string")return Yh(r);if(pD(r))return r;V(133,{iconName:e});return}else{let r=document.createElement("span"),o=t.registry.getIcon(e);o||t.validation?.validateIcon(e);let a=o??e;return r.setAttribute("class",`ag-icon ag-icon-${a}`),r.setAttribute("unselectable","on"),ti(r,"presentation"),r}}var vZ=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",yZ=class extends Ye{constructor(){super(),this.dragSource=null,this.eIcon=U,this.eLabel=U,this.registerCSS(vZ)}postConstruct(){let e=t=>mZ(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){let{eIcon:n,dragSource:i,dropIconMap:s,gos:r}=this;_n(n);let o=null;e||(e=i?.getDefaultIconName?i.getDefaultIconName():"notAllowed"),o=s[e],n.classList.toggle("ag-shake-left-to-right",t),!(o===s.hide&&r.get("suppressDragLeaveHidesColumns"))&&o&&n.appendChild(o)}setLabel(e){this.eLabel.textContent=e}},CZ=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",wZ=class extends Ye{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(CZ)}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){let{label:e,eLabel:t}=this;_n(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(xt(t,!1),ti(t,"presentation")):(xt(t,!0),ti(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){let e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Pv(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return Uh(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},zN=class extends wZ{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||g$(e)!==null?Lx(e,""):Lx(e,t??"")}setAriaLabel(e){return Xv(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Mr(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},Rl=class extends zN{constructor(e,t,n="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=U,this.eWrapper=U,this.eInput=U}postConstruct(){super.postConstruct(),this.setInputType();let{eLabel:e,eWrapper:t,eInput:n,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCssClass("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;let{inputName:s,inputWidth:r}=this.config;s!=null&&this.setInputName(s),r!=null&&this.setInputWidth(r),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Pv(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return ds(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Xv(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Uh(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)ds(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";ds(this.eInput,"autocomplete",t)}return this}},TD=class extends Rl{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;let n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){let t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},kD={selector:"AG-CHECKBOX",component:TD},bZ=".ag-checkbox-cell{height:100%}",SZ=class extends Ye{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[kD]),this.eCheckbox=U,this.registerCSS(bZ)}init(e){this.refresh(e);let{eCheckbox:t,beans:n}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),fF(i,"polite"),this.addManagedListeners(i,{click:s=>{if(Au(s),t.isDisabled())return;let r=t.getValue();this.onCheckboxChanged(r)},dblclick:s=>{Au(s)}}),this.addManagedElementListeners(e.eGridCell,{keydown:s=>{if(s.key===L.SPACE&&!t.isDisabled()){e.eGridCell===Dt(n)&&t.toggle();let r=t.getValue();this.onCheckboxChanged(r),s.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0,{value:i,column:s,node:r}=e;if(r.group&&s)if(typeof i=="boolean")t=i;else{let d=s.getColId();d.startsWith(Qv)?t=i==null||i===""?void 0:i==="true":r.aggData&&r.aggData[d]!==void 0?t=i??void 0:n=!1}else t=i??void 0;let{eCheckbox:o}=this;if(!n){o.setDisplayed(!1);return}o.setValue(t);let a=e.disabled??!s?.isCellEditable(r);o.setDisabled(a);let l=this.getLocaleTextFunc(),c=cD(l,t),u=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;o.setInputAriaLabel(u)}onCheckboxChanged(e){let{eventSvc:t,params:n}=this,{column:i,node:s,value:r}=n,o={column:i,colDef:i.getColDef(),data:s.data,node:s,rowIndex:s.rowIndex,rowPinned:s.rowPinned,value:r};t.dispatchEvent(S({type:"cellEditingStarted"},o));let a=s.setDataValue(i,e,"edit");t.dispatchEvent(R(S({type:"cellEditingStopped"},o),{oldValue:r,newValue:e,valueChanged:a})),a||this.updateCheckbox(n)}},xZ="ROOT_NODE_ID",DZ=class extends F{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(e){return this.allNodesMap[e]}extractRowData(){return this.rootNode?.allLeafChildren?.map(e=>e.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=xZ,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){let t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){let t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=e?.map((t,n)=>this.createRowNode(t,n))??[]}setImmutableRowData(e,t){let n=Iu(this.gos),i=!this.gos.get("suppressMaintainUnsortedOrder"),s=e.changedRowNodes,r=new Set,o=this.rootNode,a=o.allLeafChildren,l=a.length,c=!1,u=!1,d=!1,h=!1;for(let g=0,f=-1,m=t.length;g<m;g++){let v=t[g],y=this.getRowNode(n({data:v,level:0}));if(!y)c=!0,y=this.createRowNode(v,-1),s.add(y);else{if(i){let w=y.sourceRowIndex;h||(h=w<=f||c),f=w}y.data!==v&&(d=!0,y.updateData(v),s.update(y))}r.add(y)}let p=[];for(let g=0;g<l;g++){let f=a[g];r.has(f)||(u=!0,f.isSelected()&&p.push(f),this.rowNodeDeleted(f),s.remove(f))}if(c||u||h){let g=new Array(r.size),f=0;if(!i)for(let v=0;v<l;++v){let y=a[v];r.delete(y)&&(y.sourceRowIndex=f,g[f++]=y)}for(let v of r)v.sourceRowIndex=f,g[f++]=v;o.allLeafChildren=g;let m=o.sibling;m&&(m.allLeafChildren=g),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=h)}(c||u||h||d)&&(this.deselectNodes(p),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();let t=e.id,n=this.allNodesMap;n[t]===e&&delete n[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);let n={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[],s=Iu(this.gos);return this.executeRemove(s,e,n,i),this.executeUpdate(s,e,n,i),this.executeAdd(e,n),this.deselectNodes(i),n}executeAdd(e,t){let n=e.add;if(!n?.length)return;let i=this.rootNode.allLeafChildren,s=i.length;if(typeof e.addIndex=="number"&&(s=this.sanitizeAddIndex(e.addIndex),s>0&&this.gos.get("treeData")&&this.gos.get("getDataPath"))){for(let d=0;d<i.length;d++)if(i[d]?.rowIndex==s-1){s=d+1;break}}let r=n.length,o=t.changedRowNodes,a=new Array(r);for(let u=0;u<r;u++){let d=this.createRowNode(n[u],s+u);o.add(d),a[u]=d}let l=this.rootNode;if(s<i.length){let u=i.slice(0,s),d=i.slice(s,i.length),h=u.length+a.length;for(let p=0,g=d.length;p<g;++p)d[p].sourceRowIndex=h+p;i=[...u,...a,...d],t.rowsInserted=!0}else i=i.concat(a);l.allLeafChildren=i;let c=l.sibling;c&&(c.allLeafChildren=i),t.rowNodeTransaction.add=a}executeRemove(e,t,{changedRowNodes:n,rowNodeTransaction:i},s){let{remove:r}=t;if(!r?.length)return;let o={};r.forEach(c=>{let u=this.lookupRowNode(e,c);u&&(u.isSelected()&&s.push(u),u.clearRowTopAndRowIndex(),o[u.id]=!0,delete this.allNodesMap[u.id],i.remove.push(u),n.remove(u))});let a=this.rootNode;a.allLeafChildren=a.allLeafChildren?.filter(c=>!o[c.id])??null,a.allLeafChildren?.forEach((c,u)=>{c.sourceRowIndex=u});let l=a.sibling;l&&(l.allLeafChildren=a.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:n,rowNodeTransaction:i},s){let{update:r}=t;r?.length&&r.forEach(o=>{let a=this.lookupRowNode(e,o);a&&(a.updateData(o),!a.selectable&&a.isSelected()&&s.push(a),i.update.push(a),n.update(a))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselectNodes(e){let t="rowDataChanged",n=this.beans.selectionSvc,i=e.length>0;i&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),i&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t})}sanitizeAddIndex(e){let t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){let n=new ku(this.beans);return n.parent=this.rootNode,n.level=0,n.group=!1,n.expanded=!1,n.sourceRowIndex=t,n.setDataAndId(e,String(this.nextId)),this.allNodesMap[n.id]&&V(2,{nodeId:n.id}),this.allNodesMap[n.id]=n,this.nextId++,n}lookupRowNode(e,t){let n;if(e){let i=e({data:t,level:0});if(n=this.allNodesMap[i],!n)return Je(4,{id:i}),null}else if(n=this.rootNode?.allLeafChildren?.find(i=>i.data===t),!n)return Je(5,{data:t}),null;return n||null}};var MZ=class extends Ye{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[kD]),this.eCheckbox=U}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,i=t.isSelected(),s=cD(e,i),[r,o]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(r,o);n.setValue(i,!0),n.setInputAriaLabel(`${a} (${s})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:Au,click:i=>{Au(i),this.beans.selectionSvc?.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:s})=>{let r=typeof i=="object"?lx(i):void 0,o=typeof s=="object"?lx(s):void 0;r!==o&&this.onSelectableChanged()}),Wx(this.gos)||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){let{column:e,rowNode:t,overrides:n,gos:i}=this,s=t.selectable,r=this.getIsVisible();if(s)if(typeof r=="function"){let l=n?.callbackParams;if(!e)s=r(R(S({},l),{node:t,data:t.data}));else{let c=e.createColumnFunctionCallbackParams(t);s=r(S(S({},l),c))}}else s=r??!1;let o=i.get("rowSelection");if(o&&typeof o!="string"?!lx(o):e?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if(n?.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){let e=this.overrides;if(e)return e.isVisible;let t=this.gos.get("rowSelection");return t&&typeof t!="string"?bu(t):this.column?.getColDef()?.checkboxSelection}},EZ=class{constructor(e){this.rowModel=e,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){return this.rootId?this.rowModel.getRowNode(this.rootId)??null:e?(this.setRoot(e),e):null}getEnd(){return this.endId?this.rowModel.getRowNode(this.endId)??null:null}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.rootId,i=t.findIndex(s=>s.id===e.id);if(i>-1){let s=t.slice(0,i),r=t.slice(i+1);return this.setEndRange(e),n?{keep:s,discard:r}:{keep:r,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let s=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&s.push(r)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}let i=this.rowModel.getNodesInRangeForSelection(n,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(s=>s.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}},IZ=class extends F{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Dt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;let t=this.createManagedBean(new TD);this.cbSelectAll=t,t.addCssClass("ag-header-select-all"),ti(t.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:i})=>{let s=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;s(n)!==s(i)&&this.showOrHideSelectAll()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){let t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,i=t.getSelectAllState(e);n.setValue(i);let s=t.hasNodesToSelect(e);n.setDisabled(!s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){let t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:s}=this,o=i.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",s?`${a} (${o})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return Zh(this.gos)?!0:(V(128,{feature:e}),!1)}checkRightRowModelType(e){let{gos:t,rowModel:n}=this.beans;return Jn(t)||Pu(t)?!0:(V(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.getSelectAllMode(),n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");let i={source:n,selectAll:t},s=this.beans.selectionSvc;e?s.selectAllRowNodes(i):s.deselectAllRowNodes(i)}isCheckboxSelection(){let{column:e,gos:t,beans:n}=this,i=t.get("rowSelection"),s=e.getColDef(),{headerCheckboxSelection:r}=s,o=!1,a=typeof i=="object";if(a){let c=mo(e),u=yD(e);(jx(i)==="autoGroupColumn"&&u||c&&n.selectionColSvc?.isSelectionColumnEnabled())&&(o=xv(i))}else typeof r=="function"?o=r(fe(t,{column:e,colDef:s})):o=!!r;let l=a?"headerCheckbox":"headerCheckboxSelection";return o&&this.checkRightRowModelType(l)&&this.checkSelectionType(l)}getSelectAllMode(){let e=HF(this.gos,!1);if(e)return e;let{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}},AZ=class extends F{postConstruct(){let{gos:e,beans:t}=this;this.selectionCtx=new EZ(t.rowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{let n=Wx(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=Wx(e)}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new MZ}createSelectAllFeature(e){return new IZ(e)}isMultiSelect(){return Zh(this.gos)}onRowCtrlSelected(e,t,n){let i=!!e.rowNode.isSelected();e.forEachGui(n,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i);let r=s.element;Fx(r,i),r.contains(Dt(this.beans))&&t(s)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;let t=e.isSelected();if(!e.selectable)return;let i=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(i,"rowSelection")}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e})}isRowSelectionBlocked(e){return!e.selectable||!!e.rowPinned||!Pl(this.gos)}updateRowSelectable(e,t){let n=this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(Xh(this.gos)){let s=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:s??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let i=0;i<e.childrenAfterGroup.length;i++){let s=e.childrenAfterGroup[i],r=s.isSelected();if(!s.selectable){let o=this.calculateSelectedFromChildren(s);if(o===null)continue;r=o}switch(r){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,i="api"){let s=!e.selectable&&t,r=e.__selected===t;if(s||r)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");let o=e.sibling;return o&&o.footer&&o.__localEventService&&o.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent(R(S({},fq(e,this.gos,"rowSelected")),{event:n||null,source:i})),!0}isCellCheckboxSelection(e,t){let n=this.gos.get("rowSelection");if(n&&typeof n!="string"){let i=mo(e)&&bu(n);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,i){let{gos:s,selectionCtx:r}=this,o=e.isSelected(),a=Xh(s),l=nY(s),c=iY(s),u=this.isMultiSelect(),d=i==="rowClicked";if(d&&a&&e.group||d&&!(l||c))return null;if(t&&n&&u){let h=r.getRoot();if(h)if(h.isSelected()){let p=r.isInRange(e)?r.truncate(e):r.extend(e,a);return{deselect:p.discard,select:p.keep,reset:!1}}else{let p=r.extend(e,a);return{select:[],deselect:p.keep,reset:!1}}else return null}else if(t&&u){let h=r.selectAll?this.beans.rowModel.getRow(0):void 0,p=r.getRoot(h),g=r.isInRange(e)?r.truncate(e):r.extend(e,a);return{select:g.keep,deselect:g.discard,reset:r.selectAll||!!(p&&!p.isSelected())}}else{if(n)return r.setRoot(e),d&&o&&!c?null:{node:e,newValue:!o,clearSelection:!u};{r.setRoot(e);let h=sY(s),p=_v(s)==="filteredDescendants",g=d&&(!h||!l);if(p&&o===void 0&&Jn(s))return{node:e,newValue:!1,clearSelection:!u||g};if(d){let f=o?!h:l;return f===o&&!g||f&&!l||!f&&!c?null:{node:e,newValue:f,clearSelection:!u||g}}return{node:e,newValue:!o,clearSelection:!u||g}}}}},RZ=class extends TD{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){let t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}};var jl=class extends Rl{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){let n=this.eInput;return n.value!==e&&(n.value=H(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{TN(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(s=>!e.test(s))&&n.preventDefault()}})}},ey={selector:"AG-INPUT-TEXT-FIELD",component:jl},TZ=class extends Rl{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},kZ={selector:"AG-INPUT-TEXT-AREA",component:TZ},LD=class extends jl{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();let e=this.eInput;this.addManagedListeners(e,{blur:()=>{let r=parseFloat(e.value),o=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==o&&this.setValue(o)},wheel:this.onWheel.bind(this)}),e.step="any";let{precision:t,min:n,max:i,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){Dt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e),{min:n,max:i}=this;return n!=null&&t<n?e=n.toString():i!=null&&t>i&&(e=i.toString()),e}adjustPrecision(e,t){let n=this.precision;if(n==null)return e;if(t){let s=parseFloat(e).toFixed(n);return parseFloat(s).toString()}let i=String(e).split(".");if(i.length>1){if(i[1].length<=n)return e;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,ds(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,ds(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,ds(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(H(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let s=this.normalizeValue(n);i=n!=s}if(i)return t(n)}return e(n)}getValue(){let e=this.eInput;if(!e.validity.valid)return;let t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},LZ={selector:"AG-INPUT-NUMBER-FIELD",component:LD};function Gh(e,t){return e.toString().padStart(t,"0")}function ps(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>Gh(s,2)).join(n);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>Gh(s,2)).join(":")),i}var vx=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function zh(e,t="YYYY-MM-DD"){let n=Gh(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>Gh(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${vx(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${vx(e.getDate())}`,DD:()=>Gh(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${vx(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,a=>a in r?r[a]():a)}function Ci(e){if(!e)return null;let[t,n]=e.split(" ");if(!t)return null;let i=t.split("-").map(d=>parseInt(d,10));if(i.filter(d=>!isNaN(d)).length!==3)return null;let[s,r,o]=i,a=new Date(s,r-1,o);if(a.getFullYear()!==s||a.getMonth()!==r-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;let[l,c,u]=n.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var PZ=class extends jl{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=Ea();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Dt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?ps(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,ds(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?ps(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,ds(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,ds(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Ci(this.getValue())??void 0}setDate(e,t){this.setValue(ps(e??null,!1),t)}},HN={selector:"AG-INPUT-DATE-FIELD",component:PZ},FZ=1e3,NZ=1e3,VP=100,GP,Cv=!1,OZ=class extends F{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){let t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Tl()&&(Cv?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},VP):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){let t=e.relatedTarget,n=this.tooltipCtrl.getGui(),i=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&i?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Cv)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return new Date().getTime()-GP<FZ}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=this.getTooltipValue(),t=this.tooltipCtrl;if(!H(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}let n=t.getRowNode?.(),i=fe(this.gos,S({location:t.getLocation?.()??"UNKNOWN",colDef:t.getColDef?.(),column:t.getColumn?.(),rowIndex:t.getRowIndex?.(),node:n,data:n?.data,value:e,valueFormatted:t.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0)},t.getAdditionalParams?.()??{}));this.state=2,this.tooltipInstanceCount++;let s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);bK(this.userCompFactory,i)?.newAgStackInstance().then(s)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),GP=new Date().getTime()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}let i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");let s=this.getLocaleTextFunc(),r=this.popupSvc?.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let o=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:o,columnMoved:o})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Vt(this.beans),{keydown:o=>{i.contains(o?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let e=this.tooltipComp?.getGui(),t=Dt(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){let t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent(R(S({},e),{mouseEvent:this.lastMouseEvent})):this.popupSvc?.positionPopupByComponent(R(S({},e),{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?NZ:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Cv=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},VP)}unlockService(){Cv=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function yx(e){return e.get("tooltipShowMode")==="whenTruncated"}function Iv(e){return()=>{let t=e();return t?t.scrollWidth>t.clientWidth:!0}}var _Z=class extends F{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e){let t="title",n=this.ctrl.getGui();n&&(e!=null&&e!=""?n.setAttribute(t,e):n.removeAttribute(t))}updateTooltipText(){let{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){this.tooltipManager==null&&(this.tooltipManager=this.createBean(new OZ(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},BZ=class extends Ye{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case L.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case L.DOWN:case L.UP:e.preventDefault(),this.navigate(t);break;case L.PAGE_DOWN:case L.PAGE_UP:case L.PAGE_HOME:case L.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===L.DOWN,n,{itemEls:i,highlightedEl:s}=this;if(!s)n=i[t?0:i.length-1];else{let o=i.indexOf(s)+(t?1:-1);o=Math.min(Math.max(o,0),i.length-1),n=i[o]}this.highlightItem(n)}navigateToPage(e){let{itemEls:t,highlightedEl:n}=this;if(!n||t.length===0)return;let i=t.indexOf(n),s=this.options.length-1,r=t[0].clientHeight,o=Math.floor(this.getGui().clientHeight/r),a=-1;e===L.PAGE_HOME?a=0:e===L.PAGE_END?a=s:e===L.PAGE_DOWN?a=Math.min(i+o,s):e===L.PAGE_UP&&(a=Math.max(i-o,0)),a!==-1&&this.highlightItem(t[a])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:n}=e,i=n||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{cs(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,n)=>{C$(t,n+1),y$(t,e.length)})}renderOption(e,t){let n=Vt(this.beans),i=n.createElement("div");ti(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let s=n.createElement("span");i.appendChild(s),s.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Us(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),Fx(e,!0);let t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:s,offsetHeight:r}=e;(s+r>n+i||s<n)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){let e=this.highlightedEl;!e||!Us(e)||(e.classList.remove(this.activeClass),Fx(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},VZ=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}}",GZ=class extends zN{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=U,this.eWrapper=U,this.eDisplayField=U,this.eIcon=U,this.registerCSS(VZ),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:s,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),s!=null&&this.setPickerMinWidth(s),r!=null&&this.setPickerMaxWidth(r)}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let s=us(n,this.beans);s&&this.eIcon.appendChild(s)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Px(e,!1),this.ariaRole&&ti(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case L.UP:case L.DOWN:case L.ENTER:case L.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case L.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:s=!0},maxPickerHeight:r,minPickerWidth:o,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:u}=this,d={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{let f=VF(c);this.beforeHidePicker(),f&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:u};e.style.position="absolute";let h=c.popupSvc,p=h.addPopup(d);l?(o&&(e.style.minWidth=o),e.style.width=hD(Rv(u)),a&&(e.style.maxWidth=a)):Pv(e,a??Rv(u));let g=r??`${dD(h.getPopupParent())}px`;return e.style.setProperty("max-height",g),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:i},eWrapper:s,pickerComponent:r}=this,o=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:s,ePopup:r.getGui(),position:"under",alignSide:o,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();Px(t,e);let n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker?.()}setInputWidth(e){return Pv(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},zZ=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",PD=class extends GZ{constructor(e){super(S({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},e)),this.registerCSS(zZ)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:Iv(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){let e=this.createBean(new BZ("select",!0));this.listComponent=e,e.setParentComponent(this);let t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),I$(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===L.TAB&&this.hidePicker(),t){case L.ENTER:case L.UP:case L.DOWN:case L.PAGE_UP:case L.PAGE_DOWN:case L.PAGE_HOME:case L.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case L.ESCAPE:super.onKeyDown(e);break;case L.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){let e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,n){let{listComponent:i,config:{placeholder:s},eDisplayField:r,tooltipFeature:o}=this;if(this.value===e||!i)return this;if(n||i.setValue(e,!0),i.getValue()===this.getValue())return this;let l=i.getDisplayValue();return l==null&&s&&(l=s),r.textContent=l,o?.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},HZ={selector:"AG-SELECT",component:PD},Cx={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},jZ=class extends F{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,isEmpty:p,eFocusableElement:g}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=g,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h,this.providedIsEmpty=p}postConstruct(){this.createManagedBean(new Fu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Du(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){let t=Vt(this.beans),n=Du(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let s,r;e?(s=0,r=i):(s=i+1,r=n.length);let o=n.slice(s,r),a=this.gos.get("tabIndex");o.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),o[e?o.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=Du(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return Hl(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},WZ=class extends F{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,s=[t,n],r={setTabIndex:m=>{s.forEach(v=>m!=null?v.setAttribute("tabindex",m):v.removeAttribute("tabindex"))}};this.addTabGuards(t,n);let{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:f}=e;this.tabGuardCtrl=this.createManagedBean(new jZ({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:f}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=Vt(this.beans).createElement("div"),n=e==="top"?Cx.TAB_GUARD_TOP:Cx.TAB_GUARD_BOTTOM;return t.classList.add(Cx.TAB_GUARD,n),ti(t,"presentation"),t}addTabGuards(e,t){let n=this.eFocusableElement;n.insertAdjacentElement("afterbegin",e),n.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];_n(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){pD(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}destroy(){let{eFocusableElement:e,eTopGuard:t,eBottomGuard:n}=this;e.removeChild(t),e.removeChild(n),super.destroy()}},jN=class extends Ye{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new WZ(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Nu=class extends Ye{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},fu=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new _l,this.preventMouseClick=t;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchmove",i,{passive:!0}),e.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",n,{passive:!0}),e.removeEventListener("touchmove",i,{passive:!0}),e.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!xN(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};var FD=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${TF}/${this.frameworkName}-data-grid`,z$(this.baseDocLink)}setInterval(e,t){return new ei(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let s={};if(typeof i=="object"?s=i:typeof i=="boolean"&&(s={capture:i}),s.passive==null){let r=qF(t);r!=null&&(s.passive=r)}e.addEventListener(t,n,s)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}};function UZ(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var $Z=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","rowSpanSvc","pageBoundsListener","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],zP=Object.fromEntries($Z.map((e,t)=>[e,t]));function YZ(e,t){let n=(e.beanName?zP[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?zP[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function KZ(e,t){return e?.beanName==="gridDestroySvc"?-1:0}var qZ='<div class="ag-pinned-left-header" role="rowgroup"></div>',ZZ='<div class="ag-pinned-right-header" role="rowgroup"></div>',XZ=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,wx=class extends Ye{constructor(e){super(),this.eCenterContainer=U,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new hZ(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?qZ:t?ZZ:XZ;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==U?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=s=>{let r=s.getGui();r.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(r),n&&IF(this.eRowContainer,r,n),n=r};e.forEach(s=>{let r=s.instanceId,o=t[r];delete t[r];let a=o||this.createBean(new lZ(s));this.headerRowComps[r]=a,this.rowCompsList.push(a),i(a)}),Object.values(t).forEach(s=>this.destroyRowComp(s))}},QZ=class extends Ye{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new sZ).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new wx("left")),n(new wx(null)),n(new wx("right"))}},JZ={selector:"AG-HEADER-ROOT",component:QZ},eX=class extends Ye{constructor(e,t,n,i,s){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.column,this.rowNode=t.rowNode,this.eRow=i;let r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),this.eCell=r;let o;t.isCellSpanning()?(o=document.createElement("div"),o.className="ag-spanned-cell-wrapper",o.appendChild(r),ti(o,"presentation"),this.setTemplateFromElement(o)):this.setTemplateFromElement(r),this.cellCssClassManager=new uN(()=>r),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),ti(r,t.getCellAriaRole()),r.setAttribute("col-id",t.colIdSanitised);let a={addOrRemoveCssClass:(l,c)=>this.cellCssClassManager.addOrRemoveCssClass(l,c),setUserStyles:l=>ip(r,l),getFocusableElement:()=>r,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,u)=>this.setRenderDetails(l,c,u),setEditDetails:(l,c,u)=>this.setEditDetails(l,c,u),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(a,r,o,this.eCellWrapper,n,s,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.eCell}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.eCell.appendChild(this.eCellWrapper)}let s=!n&&this.eCellWrapper!=null;s&&(cs(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssClassManager.addOrRemoveCssClass("ag-cell-value",!n);let r=!e&&n,o=r&&this.eCellValue==null;if(o){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!r&&this.eCellValue!=null;a&&(cs(this.eCellValue),this.eCellValue=void 0);let l=i||s||o||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.dndSourceComp&&this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.checkboxSelectionComp&&this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,n){let i=this.editorVersion,s=e.newAgStackInstance(),{params:r}=e;s.then(a=>this.afterCellEditorCreated(i,a,r,t,n)),yt(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();_n(t);let n=e!=null?po(e,!0):null;n!=null&&(t.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),cs(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),cs(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let n=!this.beans.gos.get("suppressAnimationFrame")&&this.beans.animationFrameSvc,i=this.rendererVersion,{componentClass:s}=e,r=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,s);a&&a.then(l)};n&&this.firstRender?this.beans.animationFrameSvc.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let s=this.getParentOfValue();_n(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,n,i,s){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){V(97,{colId:this.column.getId()}),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=i||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){let{cellCssClassManager:n}=this;n.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),n.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),n.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.cellCtrl.setInlineEditingCss()}addInCellEditor(){let{eCell:e}=this;e.contains(Dt(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&V(98);let n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editSvc.createPopupEditorWrapper(e));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let s=this.beans.popupSvc,r=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=t??n.getPopupPosition?.()??"over",a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.eCell,position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,l),u=hF(this.beans.localeSvc),d=s.addPopup({modal:r,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.eCell,positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let{eCell:e}=this;e.contains(Dt(this.beans))&&e.focus({preventScroll:!0}),_n(this.getParentOfValue())}},tX=class extends Ye{constructor(e,t,n){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);let s=this.getGui(),r=s.style;this.domOrder=this.rowCtrl.getDomOrder(),ti(s,"row");let o={setDomOrder:a=>this.domOrder=a,setCellCtrls:a=>this.setCellCtrls(a),showFullWidth:a=>this.showFullWidth(a),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(a,l)=>this.addOrRemoveCssClass(a,l),setUserStyles:a=>ip(s,a),setTop:a=>r.top=a,setTransform:a=>r.transform=a,setRowIndex:a=>s.setAttribute("row-index",a),setRowId:a=>s.setAttribute("row-id",a),setRowBusinessKey:a=>s.setAttribute("row-business-key",a),refreshFullWidth:a=>this.fullWidthCellRenderer?.refresh?.(a())??!1};e.setComp(o,this.getGui(),n,void 0),this.addDestroyFunc(()=>{e.unsetComp(n)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=i=>{if(this.isAlive()){let s=i.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)};e.newAgStackInstance().then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(n=>{let i=n.instanceId;this.cellComps[i]==null?this.newCellComp(n):t[i]=null}),this.destroyCells(Object.values(t)),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(n=>{let i=this.cellComps[n.instanceId];i&&t.push(i.getGui())}),AF(this.getGui(),t)}newCellComp(e){let t=new eX(this.beans,e,this.rowCtrl.printLayout,this.getGui(),this.rowCtrl.editing);this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyCells(Object.values(this.cellComps))}setFullWidthRowComp(e){this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;let n=t.cellCtrl.instanceId;this.cellComps[n]===t&&(t.detach(),t.destroy(),this.cellComps[n]=null)})}};function nX(e,t,n){let i=!!n.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,r=`<div class="${Ev(e)}" data-ref="eContainer" role="rowgroup"></div>`;if(t.type==="center"||i){let o=Oq(e),a=LN(e),l=`<div class="ag-spanning-container ${o}" data-ref="eSpannedContainer" role="rowgroup"></div>`;return`<div class="ag-viewport ${a}" data-ref="eViewport" role="presentation">
                ${r}
                ${i?l:""}
            </div>`}return r}var iX=class extends Ye{constructor(e){super(),this.eViewport=U,this.eContainer=U,this.eSpannedContainer=U,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e?.name,this.options=op(this.name)}postConstruct(){this.setTemplate(nX(this.name,this.options,this.beans));let e={setHorizontalScroll:n=>this.eViewport.scrollLeft=n,setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setSpannedRowCtrls:n=>this.setRowCtrls(n,!0),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>{this.eContainer.style.width=n,this.eSpannedContainer&&(this.eSpannedContainer.style.width=n)},setOffsetTop:n=>{let i=`translateY(${n})`;this.eContainer.style.transform=i,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=i)}};this.createManagedBean(new $q(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){let{beans:n,options:i}=this,s=t?this.eSpannedContainer:this.eContainer,r=t?S({},this.rowCompsWithSpan):S({},this.rowCompsNoSpan),o={};t?this.rowCompsWithSpan=o:this.rowCompsNoSpan=o,this.lastPlacedElement=null;let a=[];for(let l of e){let c=l.instanceId,u=r[c],d;if(u)d=u,delete r[c];else{if(!l.rowNode.displayed)continue;d=new tX(l,n,i.type)}o[c]=d,a.push([d,!u])}this.removeOldRows(Object.values(r),s),this.addRowNodes(a,s)}addRowNodes(e,t){let{domOrder:n}=this;for(let[i,s]of e){let r=i.getGui();n?this.ensureDomOrder(r,t):s&&t.appendChild(r)}}removeOldRows(e,t){for(let n of e)t.removeChild(n.getGui()),n.destroy()}ensureDomOrder(e,t){IF(t,e,this.lastPlacedElement),this.lastPlacedElement=e}},sX={selector:"AG-ROW-CONTAINER",component:iX};function kh(e,t){return t.map(n=>{let i=`e${n[0].toUpperCase()+n.substring(1)}RowContainer`;return e[i]={name:n},`<ag-row-container name="${n}" data-ref="${i}"></ag-row-container>`}).join("")}function rX(e){let t={},n=`<div class="ag-root ag-unselectable" data-ref="eGridRoot">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${kh(t,["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${kh(t,["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${kh(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${kh(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${kh(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        ${e?"<ag-overlay-wrapper></ag-overlay-wrapper>":""}
    </div>`;return{paramsMap:t,template:n}}var oX=class extends Ye{constructor(){super(...arguments),this.eGridRoot=U,this.eBodyViewport=U,this.eStickyTop=U,this.eStickyBottom=U,this.eTop=U,this.eBottom=U,this.eBody=U}postConstruct(){let{overlays:e,rangeSvc:t}=this.beans,n=e?.getOverlayWrapperSelector(),{paramsMap:i,template:s}=rX(!!n);this.setTemplate(s,[...n?[n]:[],Xq,Jq,JZ,sX],i);let r=(a,l)=>{let c=`${a}px`;l.style.minHeight=c,l.style.height=c},o={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>x$(this.getGui(),a),setRowCount:a=>b$(this.getGui(),a),setTopHeight:a=>r(a,this.eTop),setBottomHeight:a=>r(a,this.eBottom),setTopDisplay:a=>this.eTop.style.display=a,setBottomDisplay:a=>this.eBottom.style.display=a,setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.addOrRemoveCssClass(a,l),updateLayoutClasses:(a,l)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(u=>{u.toggle(Hs.AUTO_HEIGHT,l.autoHeight),u.toggle(Hs.NORMAL,l.normal),u.toggle(Hs.PRINT,l.print)}),this.addOrRemoveCssClass(Hs.AUTO_HEIGHT,l.autoHeight),this.addOrRemoveCssClass(Hs.NORMAL,l.normal),this.addOrRemoveCssClass(Hs.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(NN,l),registerBodyViewportResizeListener:a=>{let l=Ia(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(c=>c.classList.toggle(a,l))},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>ti(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new qq),this.ctrl.setComp(o,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&fo(this.gos)||Zh(this.gos))&&w$(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}},aX={selector:"AG-GRID-BODY",component:oX},lX=class extends F{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());let{dragAndDrop:i,ctrlsSvc:s}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),bN(this.gos,t),this.createManagedBean(new SD(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");let r=Ia(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),s.register("gridCtrl",this)}isDetailGrid(){return yN(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){let{visibleCols:s,focusSvc:r}=this.beans,o=s.allCols,a=st(o);if(r.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){let t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;let n=this.getFocusableContainers(),{focusSvc:i,visibleCols:s}=this.beans,r=s.allCols;if(e){if(n.length>1)return this.focusContainer(st(n),e);let o=st(r);if(i.focusGridView({column:o,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||Nl(this.beans)){if(i.focusGridView({column:r[0],backwards:e}))return!0;for(let o=1;o<n.length;o++)if(Vl(n[o].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||n<0||n>=t.length)return;let s=t[n];s.setAllowFocus?.(!0),setTimeout(()=>{s.setAllowFocus?.(!1)})}isFocusable(){let e=this.beans;return!Jv(e)||!Nl(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){let n=Dt(this.beans),i=e.findIndex(r=>r.getGui().contains(n)),s=i+(t?-1:1);return{indexWithFocus:i,nextIndex:s}}focusContainer(e,t){e.setAllowFocus?.(!0);let n=Vl(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},cX=class extends jN{constructor(e){super(),this.gridBody=U,this.sideBar=U,this.pagination=U,this.rootWrapperBody=U,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCssClass(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}},t=this.createManagedBean(new lX),n=t.getOptionalSelectors(),i=this.createTemplate(n),s=[aX,...Object.values(n).filter(r=>!!r)];this.setTemplate(i,s),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>t.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),Da(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList,{AUTO_HEIGHT:i,NORMAL:s,PRINT:r}=Hs,{autoHeight:o,normal:a,print:l}=t;n.toggle(i,o),n.toggle(s,a),n.toggle(r,l),this.addOrRemoveCssClass(i,o),this.addOrRemoveCssClass(s,a),this.addOrRemoveCssClass(r,l)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",s=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",r=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                ${r}
                ${s}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>Us(t.getGui()))}},xe=(e,t)=>{for(let n of Object.keys(t))t[n]=e;return t},HP=S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S({dispatchEvent:"CommunityCore"},xe("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0})),xe("GridState",{getState:0})),xe("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),xe("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),xe("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),xe("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),xe("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),xe("ValueCache",{expireValueCache:0})),xe("CellApi",{getCellValue:0})),xe("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),xe("Sort",{onSortChanged:0})),xe("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0})),xe("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),xe("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),xe("HighlightChanges",{flashCells:0})),xe("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0})),xe("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),xe("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),xe("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),xe("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),xe("ColumnResize",{setColumnWidths:0})),xe("ColumnHover",{isColumnHovered:0})),xe("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0})),xe("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),xe("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),xe("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0})),xe("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),xe("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),xe("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0})),xe("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),xe("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),xe("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),xe("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),xe("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),xe("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),xe("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),xe("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),xe("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),xe("ContextMenu",{showContextMenu:0})),xe("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),xe("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),xe("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),xe("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),xe("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),xe("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),xe("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),xe("StatusBar",{getStatusPanel:0})),bx={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},uX=(e,t)=>e.eventSvc.dispatchEvent(t),WN=class{};Reflect.defineProperty(WN,"name",{value:"GridApi"});var dX=class extends F{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new WN,this.fns=R(S({},bx),{dispatchEvent:uX}),this.preDestroyLink="";let{api:e}=this;for(let t of Object.keys(HP))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:n,beans:i}=this;n!==bx&&(n[e]=i?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:n,preDestroyLink:i}=this;if(!t)V(26,{fnName:e,preDestroyLink:i});else{let s=HP[e];n.assertModuleRegistered(s,`api.${e}`)&&V(27,{fnName:e,module:s})}}destroy(){super.destroy(),this.fns=bx,this.beans=null}};function hX(e){return e.context.getGridId()}function pX(e){e.gridDestroySvc.destroy()}function gX(e){return e.gridDestroySvc.destroyCalled}function fX(e,t){return e.gos.get(t)}function mX(e,t,n){UN(e,{[t]:n})}function UN(e,t){e.gos.updateGridOptions({options:t})}var vX=class extends Ye{constructor(e,t,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(us("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let{rowNode:t,column:n,eCell:i,gos:s}=this,r=n.getColDef().dndSourceOnRowDrag,o=e.dataTransfer;if(o.setDragImage(i,0,0),r){let a=fe(s,{rowNode:t,dragEvent:e});r(a)}else try{let a=JSON.stringify(t.data);o.setData("application/json",a),o.setData("text/plain",a)}catch{}}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function yX(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function CX(e,t){let n=e.dragAndDrop?.findExternalZone(t);n&&e.dragAndDrop?.removeDropTarget(n)}function wX(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}var bX=class extends F{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},SX=class extends Ye{constructor(e,t,n,i,s,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=s,this.suppressVisibilityChange=r,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){let{beans:e,rowNode:t,column:n,gos:i}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(us("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){let s=i.get("rowDragManaged")?new DX(this,t,n):new xX(this,t,n);this.createManagedBean(s,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){let e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];let n=this.beans.selectionSvc?.getSelectedNodes()??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){let{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let i=this.getDragItem(),s=i.rowNodes?.length||1,r=this.getRowDragText(this.column);return r?r(i,s):s===1?this.cellValueFn():`${s} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},$N=class extends F{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let n=!0,i=!1,{column:s,rowNode:r,parent:o}=this;s&&(n=s.isRowDrag(r)||o.isCustomGui(),i=typeof s.getColDef().rowDrag=="function"),i?(o.setDisplayed(!0,t),o.setVisible(n,t)):(o.setDisplayed(n,t),o.setVisible(!0,t))}}},xX=class extends $N{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},DX=class extends $N{postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let{rowDragSvc:e,dragAndDrop:t,gos:n}=this.beans,i=e.rowDragFeature,s=i&&i.shouldPreventRowMove(),r=n.get("suppressRowDrag"),o=t.hasExternalDropZones(),a=s&&!o||r;this.setDisplayedOrVisible(a)}},MX=class extends F{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){let n=t.createManagedBean(new hq(e)),i=this.beans.dragAndDrop;i.addDropTarget(n),t.addDestroyFunc(()=>i.removeDropTarget(n)),this.rowDragFeature=n}createRowDragComp(e,t,n,i,s,r){return new SX(e,t,n,i,s,r)}createRowDragCompForRow(e,t){if(fo(this.gos))return;let n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,i,s,r){let o=this.gos;return o.get("rowDragManaged")&&(!Jn(o)||o.get("pagination"))?void 0:this.createRowDragComp(n,e,t,i,s,r)}},YN={moduleName:"Drag",version:W,beans:[pq]},EX={moduleName:"DragAndDrop",version:W,dynamicBeans:{dndSourceComp:vX},icons:{rowDrag:"grip"}},KN={moduleName:"SharedDragAndDrop",version:W,beans:[rq],dependsOn:[YN],userComponents:{agDragAndDropImage:yZ},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},IX={moduleName:"RowDrag",version:W,beans:[MX],apiFunctions:{addRowDropZone:yX,removeRowDropZone:CX,getRowDropZoneParams:wX},dependsOn:[KN]},AX={moduleName:"HorizontalResize",version:W,beans:[bX],dependsOn:[YN]},RX=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",TX=class extends F{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;let{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){let{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){e(),t();return}let s=r=>{for(;r.length;){let o=r.pop();o&&o()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),s(n)},0),window.setTimeout(()=>{t(),s(i)},200)})}};function kX(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function LX(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var PX=class extends F{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){let{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function FX(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,s)=>{let r=e.indexOf(i),o=e.indexOf(s);return r-o})}function qN(e){let{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:s,fakeEvent:r,pinned:o,gos:a,colModel:l,colMoves:c,visibleCols:u}=e,{allMovingColumns:d}=e;if(t){let D=[];d.forEach(M=>{let E=null,A=M.getParent();for(;A!=null&&A.getDisplayedLeafColumns().length===1;)E=A,A=A.getParent();E!=null?(!!E.getColGroupDef()?.marryChildren?E.getProvidedColumnGroup().getLeafColumns():E.getLeafColumns()).forEach(P=>{D.includes(P)||D.push(P)}):D.includes(M)||D.push(M)}),d=D}let h=d.slice();FX(l.getCols(),h);let p=BX({movingCols:h,draggingRight:n,xPosition:i,pinned:o,gos:a,colModel:l,visibleCols:u}),g=NX(h,l);if(p.length===0)return;let f=p[0],m=g!==null&&!s;if(t&&(m=g!==null),m&&!r&&(!n&&f>=g||n&&f<=g))return;let v=u.allCols,y=[],w=null;for(let D=0;D<p.length;D++){let M=p[D],E=c.getProposedColumnOrder(h,M);if(!c.doesOrderPassRules(E))continue;let A=E.filter(T=>v.includes(T));if(w===null)w=A;else if(!zl(A,w))break;let I=OX(E);y.push({move:M,fragCount:I})}if(y.length===0)return;y.sort((D,M)=>D.fragCount-M.fragCount);let x=y[0].move;if(!(x>l.getCols().length-d.length))return{columns:d,toIndex:x}}function ZN(e){let{columns:t,toIndex:n}=qN(e)||{},{finished:i,colMoves:s}=e;return!t||n==null?null:(s.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function NX(e,t){let n=t.getCols(),i=wY(e.map(l=>n.indexOf(l))),s=i[0];return st(i)-s!==i.length-1?null:s}function OX(e){function t(i){let s=[],r=i.getOriginalParent();for(;r!=null;)s.push(r),r=r.getOriginalParent();return s}let n=0;for(let i=0;i<e.length-1;i++){let s=t(e[i]),r=t(e[i+1]);[s,r]=s.length>r.length?[s,r]:[r,s],s.forEach(o=>{r.indexOf(o)===-1&&n++})}return n}function _X(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function BX(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:s,gos:r,colModel:o,visibleCols:a}=e;if(r.get("suppressMovableColumns")||t.some(w=>w.getColDef().suppressMovable))return[];let c=_X(a,s),u=o.getCols(),d=c.filter(w=>t.includes(w)),h=c.filter(w=>!t.includes(w)),p=u.filter(w=>!t.includes(w)),g=0,f=i;if(n){let w=0;d.forEach(x=>w+=x.getActualWidth()),f-=w}if(f>0){for(let w=0;w<h.length;w++){let x=h[w];if(f-=x.getActualWidth(),f<0)break;g++}n&&g++}let m;if(g>0){let w=h[g-1];m=p.indexOf(w)+1}else m=p.indexOf(h[0]),m===-1&&(m=0);let v=[m],y=(w,x)=>w-x;if(n){let w=m+1,x=u.length-1;for(;w<=x;)v.push(w),w++;v.sort(y)}else{let w=m,x=u.length-1,D=u[w];for(;w<=x&&c.indexOf(D)<0;)w++,v.push(w),D=u[w];w=m-1;let M=0;for(;w>=M;)v.push(w),w--;v.sort(y).reverse()}return v}function Zx(e){let{pinned:t,fromKeyboard:n,gos:i,ctrlsSvc:s,useHeaderRow:r,skipScrollPadding:o}=e,a=s.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(n&&(l-=a.getBoundingClientRect().left),i.get("enableRtl")&&(r&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!o&&(l+=s.get("center").getCenterViewportScrollLeft()),l):0}function Sx(e,t){for(let n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var jP=7,Xx=100,wv=Xx/2,VX=5,GX=100,zX=class extends F{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!H(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let{pinned:e,lastDraggingEvent:t}=this,n=t?.dragItem.columns??[];for(let i of n){let s=i.getPinned();if(i.getColDef().lockPinned){if(s==e)return"move";continue}if(s===e||!e)return"move";if(!s&&e)return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{let s=t.visibleState,r=(n||[]).filter(o=>s[o.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){let{gos:s,ctrlsSvc:r}=this.beans,o=s.get("suppressMoveWhenColumnDragging");if(i&&!o){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&yt(e.hDirection))return;let a=Zx({x:e.x,pinned:this.pinned,gos:s,ctrlsSvc:r});t||this.checkCenterForScrolling(a),o?this.handleColumnDragWhileSuppressingMovement(e,t,n,a,i):this.handleColumnDragWhileAllowingMovement(e,t,n,a,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e)return;let i=e.filter(s=>!s.getColDef().lockVisible);this.beans.colModel.setColsVisible(i,t,n)}finishColumnMoving(){this.clearHighlighted();let e=this.lastMovedInfo;if(!e)return;let{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,n,i,s){let r=this.getAllMovingColumns(e,!0);if(s){let o=this.isAttemptingToPin(r);o&&this.attemptToPinColumns(r,void 0,!0);let{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(r,o)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:l,fromEnter:t,fakeEvent:n,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,s){let r=this.getAllMovingColumns(e),o=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:a,xPosition:i,fromLeft:o,fromEnter:t,fakeEvent:n}),c=ZN(R(S({},l),{finished:s}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let n=e.dragSource.getDragItem(),i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;let s=r=>r.getColDef().lockPinned?r.getPinned()==this.pinned:!0;return i?i.filter(s):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:s,fromEnter:r,fakeEvent:o}=e,{gos:a,colModel:l,colMoves:c,visibleCols:u}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:s,xPosition:i,pinned:this.pinned,fromEnter:r,fakeEvent:o,gos:a,colModel:l,colMoves:c,visibleCols:u}}highlightHoveredColumn(e,t){let{gos:n,colModel:i}=this.beans,s=n.get("enableRtl"),r=i.getCols().filter(u=>u.isVisible()&&u.getPinned()===this.pinned),o=null,a=null,l=null;for(let u of r){if(a=u.getActualWidth(),o=this.getNormalisedColumnLeft(u,0,s),o!=null){let d=o+a;if(o<=t&&d>=t){l=u;break}}o=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let u=r.length-1;u>=0;u--){let d=r[u],h=r[u].getParent();if(!h){l=d;break}let p=h?.getDisplayedLeafColumns();if(p.length){l=st(p);break}}if(!l)return;o=this.getNormalisedColumnLeft(l,0,s),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||o==null||a==null)return;let c;t-o<a/2!==s?c=0:c=1,WP(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){let{gos:n,visibleCols:i}=this.beans,s=n.get("enableRtl"),{firstMovingCol:r,column:o,position:a}=this.getColumnMoveAndTargetInfo(e,t,s);if(!r||!o||a==null)return;let l=i.allCols,c=l.indexOf(r),u=l.indexOf(o),d=a===0!==s,h=c<u||c===u&&!d,p=0;if(d?h&&(p-=1):h||(p+=1),u+p===c)return;let g=l[u+p];if(!g)return;let f=this.getNormalisedColumnLeft(g,20,s);return{fromLeft:h,xPosition:f}}getColumnMoveAndTargetInfo(e,t,n){let i=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:r}=HX(e);if(!s||!r||i.column||!t)return S({firstMovingCol:s},i);let a=this.getPinDirection()==="left";return{firstMovingCol:s,position:a?1:0,column:a!==n?s:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){let{gos:i,ctrlsSvc:s}=this.beans,r=e.getLeft();if(r==null)return null;let o=e.getActualWidth();return Zx({x:n?r+o-t:r+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:s})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>jP;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:s,fromLeft:r}=e,o=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:r,fromEnter:i,fakeEvent:s}),{columns:a,toIndex:l}=qN(o)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){let{lastHighlightedColumn:e}=this;e&&(WP(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth(),s,r;this.gos.get("enableRtl")?(s=e<n+wv,r=e>i-wv):(r=e<n+wv,s=e>i-wv),this.needToMoveRight=s,this.needToMoveLeft=r,r||s?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),GX),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*VX,e>Xx&&(e=Xx);let t=null,n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let{pinnedCols:i,dragAndDrop:s,gos:r}=this.beans;if(this.failedMoveAttempts<=jP+1||!i)return;if(s.getDragAndDropImageComponent()?.setIcon("pinned",!1),!r.get("suppressMoveWhenColumnDragging")){let o=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(o,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){let i=(e||[]).filter(o=>!o.getColDef().lockPinned);if(!i.length)return 0;n&&(t=this.getPinDirection());let{pinnedCols:s,dragAndDrop:r}=this.beans;return s?.setColsPinned(i,t,"uiColumnDragged"),n&&r.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function WP(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function HX(e){let t=e.length,n,i;for(let s=0;s<t;s++){if(!n){let r=e[s];r.getLeft()!=null&&(n=r)}if(!i){let r=e[t-1-s];r.getLeft()!=null&&(i=r)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var jX=class extends F{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){let{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,i=>{let s,r=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":s=[[r,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":s=[[r,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:s=[[r,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=s}),this.moveColumnFeature=this.createManagedBean(new zX(n)),this.bodyDropPivotTarget=this.createManagedBean(new PX(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},WX=class extends F{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){let i=this.beans.colModel.getCols();if(!i)return;let s=i[e];this.moveColumns([s],t,n)}moveColumns(e,t,n,i=!0){let{colModel:s,colAnimation:r,visibleCols:o,eventSvc:a}=this.beans,l=s.getCols();if(!l)return;if(t>l.length-e.length){V(30,{toIndex:t});return}r?.start();let c=s.getColsForKeys(e);this.doesMovePassRules(c,t)&&(TP(s.getCols(),c,t),o.refresh(n),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:i,source:n})),r?.finish()}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){let{colModel:t,gos:n}=this.beans;return!(!sN(e,t.getColTree())||!(s=>{let r=c=>c?c==="left"||c===!0?-1:1:0,o=n.get("enableRtl"),a=o?1:-1,l=!0;return s.forEach(c=>{let u=r(c.getColDef().lockPosition);o?u>a&&(l=!1):u<a&&(l=!1),a=u}),l})(e))}getProposedColumnOrder(e,t){let i=this.beans.colModel.getCols().slice();return TP(i,e,t),i}createBodyDropTarget(e,t){return new jX(e,t)}moveHeader(e,t,n,i,s){let{ctrlsSvc:r,gos:o,colModel:a,visibleCols:l,focusSvc:c}=this.beans,u=t.getBoundingClientRect(),d=u.left,h=At(n),p=h?u.width:n.getActualWidth(),g=e==="left"!==o.get("enableRtl"),f=Zx({x:g?d-20:d+p+20,pinned:i,fromKeyboard:!0,gos:o,ctrlsSvc:r}),m=c.focusedHeader;ZN({allMovingColumns:h?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:f,pinned:i,fromEnter:!1,fakeEvent:!1,gos:o,colModel:a,colMoves:this,visibleCols:l,finished:!0});let v;if(h){let y=n.getDisplayedLeafColumns();v=g?y[0]:st(y)}else v=n;if(r.getScrollFeature().ensureColumnVisible(v,"auto"),(!s.isAlive()||o.get("ensureDomOrder"))&&m){let y;if(h){let w=n.getGroupId(),x=n.getLeafColumns();if(!x.length)return;let D=x[0].getParent();if(!D)return;y=UX(D,w)}else y=n;y&&c.focusHeaderPosition({headerPosition:R(S({},m),{column:y})})}}setDragSourceForHeader(e,t,n){let{gos:i,colModel:s,dragAndDrop:r,visibleCols:o}=this.beans,a=!i.get("suppressDragLeaveHidesColumns"),l=At(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],d={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>YX(t,o.allCols):()=>$X(t),dragItemName:n,onDragStarted:()=>{a=!i.get("suppressDragLeaveHidesColumns"),Sx(c,!0)},onDragStopped:()=>Sx(c,!1),onDragCancelled:()=>Sx(c,!1),onGridEnter:h=>{if(a){let{columns:p=[],visibleState:g}=h??{},f=l?v=>!g||g[v.getColId()]:()=>!0,m=p.filter(v=>!v.getColDef().lockVisible&&f(v));s.setColsVisible(m,!0,"uiColumnMoved")}},onGridExit:h=>{if(a){let p=h?.columns?.filter(g=>!g.getColDef().lockVisible)||[];s.setColsVisible(p,!1,"uiColumnMoved")}}};return r.addDragSource(d,!0),d}};function UX(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function $X(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}function YX(e,t){let n=e.getProvidedColumnGroup().getLeafColumns(),i={};n.forEach(a=>i[a.getId()]=a.isVisible());let s=[];t.forEach(a=>{n.indexOf(a)>=0&&(s.push(a),$s(n,a))}),n.forEach(a=>s.push(a));let r=[],o=e.getLeafColumns();for(let a of s)o.indexOf(a)!==-1&&r.push(a);return{columns:s,columnsInSplit:r,visibleState:i}}var KX={moduleName:"ColumnMove",version:W,beans:[WX,TX],apiFunctions:{moveColumnByIndex:kX,moveColumns:LX},dependsOn:[KN],css:[RX]},qX=class extends F{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){let n=document.createElement("form");n.style.position="fixed";let i=this.centerRowContainerCtrl.eContainer;e.forEach(r=>this.cloneItemIntoDummy(r,n)),i.appendChild(n);let s=n.offsetWidth;return i.removeChild(n),t=t??this.gos.get("autoSizePadding"),s+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),s=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let c=o.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}o=o.parentElement}i.appendChild(n),t.appendChild(i)}},XN={moduleName:"AutoWidth",version:W,beans:[qX]};function ZX(e,t,n=!0,i="api"){e.colResize?.setColumnWidths(t,!1,n,i)}var XX=class extends F{constructor(e,t,n,i){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:s,groupAfterStartWidth:r,groupAfterRatios:o}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)}getInitialValues(e){let t=l=>l.reduce((c,u)=>c+u.getActualWidth(),0),n=(l,c)=>l.map(u=>u.getActualWidth()/c),i=this.getColumnsToResize(),s=t(i),r=n(i,s),o={columnsToResize:i,resizeStartWidth:s,resizeRatios:r},a=null;if(e&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){let l=a.getDisplayedLeafColumns(),c=o.groupAfterColumns=l.filter(d=>d.isResizable()),u=o.groupAfterStartWidth=t(c);o.groupAfterRatios=n(c,u)}else o.groupAfterColumns=void 0,o.groupAfterStartWidth=void 0,o.groupAfterRatios=void 0;return o}resizeLeafColumnsToFit(e){let t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:s,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:o,width:t}),a){let d=t-r;u.push({columns:a,ratios:c,width:l-d})}this.beans.colResize?.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},QX=class extends F{constructor(e,t,n,i,s){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=s}postConstruct(){let e=[],t,n,i=()=>{if(xt(this.eResize,t),!t)return;let{horizontalResizeSvc:o,colAutosize:a}=this.beans,l=o.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),n&&a&&e.push(a.addColumnAutosize(this.eResize,this.column))},s=()=>{e.forEach(o=>o()),e.length=0},r=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==n)&&(t=o,n=a,s(),i())};r(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",r)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:s,beans:r}=this,o=this.normaliseResizeAmount(t),a=s+o,l=[{key:n,newWidth:a}],{pinnedCols:c,ctrlsSvc:u,colResize:d}=r;if(this.column.getPinned()){let h=c?.leftWidth??0,p=c?.rightWidth??0,g=$h(u.getGridBodyCtrl().eBodyViewport)-50;if(h+p+(o-i)>g)return}this.lastResizeAmount=o,d?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},JX=class extends F{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,i){let s=[],{colModel:r,gos:o,visibleCols:a}=this.beans;e.forEach(l=>{let c=r.getColDefCol(l.key)||r.getCol(l.key);if(!c)return;if(s.push({width:l.newWidth,ratios:[1],columns:[c]}),o.get("colResizeDefault")==="shift"&&(t=!t),t){let d=a.getColAfter(c);if(!d)return;let h=c.getActualWidth()-l.newWidth,p=d.getActualWidth()+h;s.push({width:p,ratios:[1],columns:[d]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(u=>eQ(u)))){if(n){let u=t&&t.length>0?t[0].columns:null;Ru(this.eventSvc,u,n,i)}return}let r=[],o=[];t.forEach(u=>{let{width:d,columns:h,ratios:p}=u,g={},f={};h.forEach(y=>o.push(y));let m=!0,v=0;for(;m;){if(v++,v>1e3){Je(31);break}m=!1;let y=[],w=0,x=d;h.forEach((M,E)=>{if(f[M.getId()])x-=g[M.getId()];else{y.push(M);let I=p[E];w+=I}});let D=1/w;y.forEach((M,E)=>{let A=E===y.length-1,I;A?I=x:(I=Math.round(p[E]*d*D),x-=I);let T=M.getMinWidth(),P=M.getMaxWidth();I<T?(I=T,f[M.getId()]=!0,m=!0):P>0&&I>P&&(I=P,f[M.getId()]=!0,m=!0),g[M.getId()]=I})}h.forEach(y=>{let w=g[y.getId()];y.getActualWidth()!==w&&(y.setActualWidth(w,i),r.push(y))})});let a=r.length>0,l=[];if(a){let{colFlex:u,visibleCols:d,colViewport:h}=this.beans;l=u?.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0})??[],d.setLeftValues(i),d.updateBodyWidths(),h.checkViewportColumns()}let c=o.concat(l);(a||n)&&Ru(this.eventSvc,c,n,i,l)}resizeHeader(e,t,n){if(!e.isResizable())return;let i=e.getActualWidth(),s=e.getMinWidth(),r=e.getMaxWidth(),o=Math.min(Math.max(i+t,s),r);this.setColumnWidths([{key:e,newWidth:o}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,i,s){return new QX(e,t,n,i,s)}createGroupResizeFeature(e,t,n,i){return new XX(e,t,n,i)}};function eQ(e){let{columns:t,width:n}=e,i=0,s=0,r=!0;t.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?s+=u:r=!1});let o=n>=i,a=!r||n<=s;return o&&a}var tQ={moduleName:"ColumnResize",version:W,beans:[JX],apiFunctions:{setColumnWidths:ZX},dependsOn:[AX,XN]},nQ=class extends F{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},iQ=class extends RD{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,n,i,s){let{column:r,beans:o}=this,{context:a,colNames:l,colHover:c,rangeSvc:u,colResize:d}=o;this.comp=e,s=rp(this,a,s),this.setGui(t,s),this.displayName=l.getDisplayNameForColumnGroup(r,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:s}),this.setupUserComp(),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let h=this.rowCtrl.pinned,p=r.getProvidedColumnGroup().getLeafColumns();c?.createHoverFeature(s,p,t),u?.createRangeHighlightFeature(s,r,e),s.createManagedBean(new AD(r,t,o)),s.createManagedBean(new nQ(e,r)),d?this.resizeFeature=s.createManagedBean(d.createGroupResizeFeature(e,n,h,r)):e.setResizableDisplayed(!1),s.createManagedBean(new Fu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,p),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.getDefinition();return fe(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=st(t)===e;if(!n&&!i)return;let s=e.getHighlighted(),r=!!this.rowCtrl.findHeaderCellCtrl(l=>l.column.isMoving()),o=!1,a=!1;if(r){let l=this.beans.gos.get("enableRtl"),c=s===1,u=s===0;n&&(l?a=c:o=u),i&&(l?o=u:a=c)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}resizeHeader(e,t){let{resizeFeature:n}=this;if(!n)return;let i=n.getInitialValues(t);n.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){let{colGroupSvc:e,userCompFactory:t,gos:n}=this.beans,i=fe(n,{displayName:this.displayName,columnGroup:this.column,setExpanded:r=>{e.setColumnGroupOpened(this.column.getProvidedColumnGroup(),r,"gridInitializing")},setTooltip:(r,o)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(r,o)}}),s=cK(t,i);s&&this.comp.setUserCompDetails(s)}addHeaderMouseListeners(e){let t=s=>this.handleMouseOverChange(s.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){let{column:e}=this,t=e.getColGroupDef(),n=mN(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text")),n.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){let{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",t.isMoving());i.forEach(r=>{e.addManagedListeners(r,{movingChanged:s})}),s()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===L.ENTER){let n=this.column,i=!n.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function sQ(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function rQ(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function oQ(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function aQ(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function lQ(e){return e.colGroupSvc?.getColumnGroupState()??[]}function cQ(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function uQ(e){e.colGroupSvc?.resetColumnGroupState("api")}function dQ(e){return e.visibleCols.treeLeft}function hQ(e){return e.visibleCols.treeCenter}function pQ(e){return e.visibleCols.treeRight}function gQ(e){return e.visibleCols.getAllTrees()}function fQ(e,t){for(let n=0;n<t.length;n++){let i=e.indexOf(t[n]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var mQ=class extends F{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){let{colModel:n,colGroupSvc:i,colViewport:s}=this.beans;t||this.buildTrees(n,i),i?.updateOpenClosedVisibility();let r=xx(this.treeLeft);this.leftCols=r,this.centerCols=xx(this.treeCenter);let o=xx(this.treeRight);this.rightCols=o,this.joinColsAriaOrder(n),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),this.beans.colFlex?.refreshFlexedColumns(),this.updateBodyWidths(),s.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(n,r,o,e),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}updateBodyWidths(){let e=lo(this.centerCols),t=lo(this.leftCols),n=lo(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,i){let s,r;this.gos.get("enableRtl")?(s=t?t[0]:null,r=n?st(n):null):(s=t?st(t):null,r=n?n[0]:null),e.getCols().forEach(o=>{o.setLastLeftPinned(o===s,i),o.setFirstRightPinned(o===r,i)})}buildTrees(e,t){let n=e.getColsToShow(),i=n.filter(l=>l.getPinned()=="left"),s=n.filter(l=>l.getPinned()=="right"),r=n.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),o=new cN,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:i,idCreator:o,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:s,idCreator:o,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:r,idCreator:o,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){let t=e.getCols(),n=[],i=[],s=[];for(let r of t){let o=r.getPinned();o?o===!0||o==="left"?n.push(r):s.push(r):i.push(r)}this.ariaOrderColumns=n.concat(i).concat(s)}getAriaColIndex(e){let t;return At(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{At(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){let{colModel:t}=this.beans;if(!t.getColDefCols())return;let i=t.getCols().slice(0),s=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(r=>{if(s){let o=lo(r);r.forEach(a=>{o-=a.getActualWidth(),a.setLeft(o,e)})}else{let o=0;r.forEach(a=>{a.setLeft(o,e),o+=a.getActualWidth()})}fQ(i,r)}),i.forEach(r=>{r.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){let{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){let{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,i){let s=[],r=null;for(let o=0;o<t.length;o++){let a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let h=c-1;for(let p=1;p<=h;p++)u.push(t[o+p]);o+=h}let d;n?(d=!1,u.forEach(h=>{n(h)&&(d=!0)})):d=!0,d&&(s.length===0&&r&&(i&&i(a))&&s.push(r),s.push(a)),r=a}return s}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){let t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Ol(this.treeCenter,!1,e),Ol(this.treeLeft,!1,e),Ol(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]];if(i.length)return e?st(i):i[0]}return null}getColAfter(e){let t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return lo(this.leftCols)}getDisplayedColumnsRightWidth(){return lo(this.rightCols)}isColAtEdge(e,t){let n=this.allCols;if(!n.length)return!1;let i=t==="first",s;if(At(e)){let r=e.getDisplayedLeafColumns();if(!r.length)return!1;s=i?r[0]:st(r)}else s=e;return(i?n[0]:st(n))===s}};function Ol(e,t,n){if(e)for(let i=0;i<e.length;i++){let s=e[i];if(At(s)){let r=t?s.getDisplayedChildren():s.getChildren();Ol(r,t,n)}n(s)}}function xx(e){let t=[];return Ol(e,!0,n=>{Ma(n)&&t.push(n)}),t}var vQ=class extends F{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){let e=[],t=this.beans.colModel.getColTree();return go(null,t,n=>{Qn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.beans.colModel.getColDefColTree();if(!t)return;let n=[];go(null,t,i=>{if(Qn(i)){let s=i.getColGroupDef(),r={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){let{colModel:n,colAnimation:i,visibleCols:s,eventSvc:r}=this.beans;if(!n.getColTree().length)return;i?.start();let a=[];e.forEach(l=>{let c=l.groupId,u=l.open,d=this.getProvidedColGroup(c);d&&d.isExpanded()!==u&&(d.setExpanded(u),a.push(d))}),s.refresh(t,!0),a.length&&r.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),i?.finish()}setColumnGroupOpened(e,t,n){let i;Qn(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return go(null,this.beans.colModel.getColTree(),n=>{Qn(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=t==="After"?st(i):i[0],r=`getCol${t}`;for(;;){let o=this.beans.visibleCols[r](s);if(!o)return null;let a=this.getColGroupAtLevel(o,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,s;for(;i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),!(i+s<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){let e=this.beans.visibleCols.getAllTrees();Ol(e,!1,t=>{At(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(At(e))return e;let n=this.beans.visibleCols.getAllTrees(),i=typeof t=="number",s=null;return Ol(n,!1,r=>{if(At(r)){let o=r,a;i?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(s=o)}}),s}createColumnGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:s,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(s),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,d=h=>{let p=u;u=h;let g=c[p],m=(At(g)?g.getProvidedColumnGroup():g).getOriginalParent();if(m==null){for(let y=p;y<h;y++)a.push(c[y]);return}let v=this.createColumnGroup(m,n,o,i,r);for(let y=p;y<h;y++)v.addChild(c[y]);l.push(v)};for(let h=1;h<c.length;h++){let p=c[h],f=(At(p)?p.getProvidedColumnGroup():p).getOriginalParent(),m=c[u],y=(At(m)?m.getProvidedColumnGroup():m).getOriginalParent();f!==y&&d(h)}u<c.length&&d(c.length)}return r||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,n,i,s,r,o){let a=s.getUniqueKey(t.groupId||null,null),l=this.createMergedColGroupDef(t,a),c=new Dv(l,a,!1,n);this.createBean(c);let u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let d=u?.group;d&&c.setExpanded(d.isExpanded());let h=tN(this.beans,l.children,n+1,e,i,s,r,o);return c.setChildren(h),c}balanceColumnTree(e,t,n,i){let s=[];for(let r=0;r<e.length;r++){let o=e[r];if(Qn(o)){let a=o,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),s.push(a)}else{let a,l;for(let c=n-1;c>=t;c--){let u=i.getUniqueKey(null,null),d=this.createMergedColGroupDef(null,u),h=new Dv(d,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(s.push(a),e.some(u=>Qn(u))){l.setChildren([o]);continue}else{l.setChildren(e);break}s.push(o)}}return s}findDepth(e){let t=0,n=e;for(;n&&n[0]&&Qn(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let i=0;i<e.length;i++){let s=e[i];if(Qn(s)){let r=s,o=this.findMaxDepth(r.getChildren(),t+1);n<o&&(n=o)}}return n}balanceTreeForAutoCols(e,t){let n=[];return e.forEach(i=>{let s=i;for(let r=t-1;r>=0;r--){let o=new Dv(null,`FAKE_PATH_${i.getId()}}_${r}`,!0,r);this.createBean(o),o.setChildren([s]),s.originalParent=o,s=o}t===0&&(i.originalParent=null),n.push(s)}),n}createMergedColGroupDef(e,t){let n={},{gos:i,validation:s}=this.beans;return Object.assign(n,i.get("defaultColGroupDef")),Object.assign(n,e),s?.validateColDef(n,t),n}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}createColumnGroup(e,t,n,i,s){let r=e.getGroupId(),o=t.getInstanceIdForKey(r),a=DN(r,o),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),H(l)?l.reset():(l=new MN(e,r,o,i),s||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{i.forEach(s=>{if(At(s)){let r=s;t[s.getUniqueId()]=r,n(r.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.parent=t,At(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}},yQ={moduleName:"ColumnGroup",version:W,dynamicBeans:{headerGroupCellCtrl:iQ},beans:[vQ],apiFunctions:{getAllDisplayedColumnGroups:gQ,getCenterDisplayedColumnGroups:hQ,getColumnGroup:rQ,getColumnGroupState:lQ,getDisplayNameForColumnGroup:aQ,getLeftDisplayedColumnGroups:dQ,getProvidedColumnGroup:oQ,getRightDisplayedColumnGroups:pQ,resetColumnGroupState:uQ,setColumnGroupOpened:sQ,setColumnGroupState:cQ}},CQ={moduleName:"CheckboxCellRenderer",version:W,userComponents:{agCheckboxCellRenderer:SZ}};function wQ(e,t){let n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function bQ(e){return e.colModel.getColumnDefs()}function SQ(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function xQ(e,t){return e.colModel.getColDefCol(t)}function DQ(e){return e.colModel.getColDefCols()}function MQ(e,t){return hs(e,t,"api")}function EQ(e){return Qh(e)}function IQ(e){NY(e,"api")}function AQ(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function RQ(e){return e.visibleCols.isPinningLeft()}function TQ(e){return e.visibleCols.isPinningRight()}function kQ(e,t){return e.visibleCols.getColAfter(t)}function LQ(e,t){return e.visibleCols.getColBefore(t)}function PQ(e,t,n){e.colModel.setColsVisible(t,n,"api")}function FQ(e,t,n){e.pinnedCols?.setColsPinned(t,n,"api")}function NQ(e){return e.colModel.getCols()}function OQ(e){return e.visibleCols.leftCols}function _Q(e){return e.visibleCols.centerCols}function BQ(e){return e.visibleCols.rightCols}function VQ(e){return e.visibleCols.allCols}function GQ(e){return e.colViewport.getViewportColumns()}function Qx(e,t){if(!e)return;let n=e,i={};return Object.keys(n).forEach(s=>{if(t&&t.indexOf(s)>=0||ZF.has(s))return;let r=n[s];typeof r=="object"&&r!==null&&r.constructor===Object?i[s]=Qx(r):i[s]=r}),i}var zQ=class extends F{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,i){let s=e.slice();t?s.sort((a,l)=>n.indexOf(a)-n.indexOf(l)):n&&s.sort((a,l)=>i.indexOf(a)-i.indexOf(l));let r=this.rowGroupColsSvc?.columns,o=this.pivotColsSvc?.columns;return this.buildColumnDefs(s,r,o)}buildColumnDefs(e,t=[],n=[]){let i=[],s={};return e.forEach(r=>{let o=this.createDefFromColumn(r,t,n),a=!0,l=o,c=r.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}let h=s[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],s[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}),i}createDefFromGroup(e){let t=Qx(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=Qx(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},HQ=class extends F{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){let t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);let n=this.flexViewportWidth;if(!n)return[];let{visibleCols:i}=this.beans,s=i.centerCols,r=-1;if(e.resizingCols){let g=new Set(e.resizingCols);for(let f=s.length-1;f>=0;f--)if(g.has(s[f])){r=f;break}}let o=!1,a=s.map((g,f)=>{let m=g.getFlex(),v=m!=null&&m>0&&f>r;return o||(o=v),{col:g,isFlex:v,flex:Math.max(0,m??0),initialSize:g.getActualWidth(),min:g.getMinWidth(),max:g.getMaxWidth(),targetSize:0}});if(!o)return[];let l=a.length,c=a.reduce((g,f)=>g+f.flex,0),u=n,d=(g,f)=>{g.frozenSize=f,g.col.setActualWidth(f,t),u-=f,c-=g.flex,l-=1},h=g=>g.frozenSize!=null;for(let g of a)g.isFlex||d(g,g.initialSize);for(;l>0;){let g=Math.round(c<1?u*c:u),f,m=0,v=0;for(let x of a){if(h(x))continue;f=x,v+=g*(x.flex/c);let D=v-m,M=Math.round(D);x.targetSize=M,m+=M}f&&(f.targetSize+=g-m);let y=0;for(let x of a){if(h(x))continue;let D=x.targetSize,M=Math.min(Math.max(D,x.min),x.max);y+=M-D,x.violationType=M===D?void 0:M<D?"max":"min",x.targetSize=M}let w=y===0?"all":y>0?"min":"max";for(let x of a)h(x)||(w==="all"||x.violationType===w)&&d(x,x.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();let p=a.filter(g=>g.isFlex&&!g.violationType).map(g=>g.col);if(e.fireResizedEvent){let g=a.filter(m=>m.initialSize!==m.frozenSize).map(m=>m.col),f=a.filter(m=>m.flex).map(m=>m.col);Ru(this.eventSvc,g,!0,t,f)}return p}initCol(e){let{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},jQ=class extends F{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes(),t={};this.dataTypeDefinitions=t;let n={};this.formatValueFuncs=n;let i=o=>a=>{let{column:l,node:c,value:u}=a,d=l.getColDef().valueFormatter;return d===o.groupSafeValueFormatter&&(d=o.valueFormatter),this.beans.valueSvc.formatValue(l,c,u,d)};for(let o of Object.keys(e)){let a=e[o],l=R(S({},a),{groupSafeValueFormatter:YP(a,this.gos)});t[o]=l,n[o]=i(l)}let s=this.gos.get("dataTypeDefinitions")??{},r={};this.dataTypeMatchers=r;for(let o of Object.keys(s)){let a=s[o],l=this.processDataTypeDefinition(a,s,[o],e);l&&(t[o]=l,a.dataTypeMatcher&&(r[o]=a.dataTypeMatcher),n[o]=i(l))}this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(o=>{let a=r[o];a&&delete r[o],r[o]=a??e[o].dataTypeMatcher})}processDataTypeDefinition(e,t,n,i){let s,r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=i[r],a=t[r];if(o&&a&&(o=a),!$P(e,o,r))return;s=UP(o,e)}else{if(n.includes(r)){V(44);return}let o=t[r];if(!$P(e,o,r))return;let a=this.processDataTypeDefinition(o,t,[...n,r],i);if(!a)return;s=UP(a,e)}return R(S({},s),{groupSafeValueFormatter:YP(s,this.gos)})}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:s}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}let r=this.dataTypeDefinitions[i];if(!r){V(47,{cellDataType:i});return}return e.cellDataType=i,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,r,n),r.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){let{gos:n}=this;if(!Jn(n))return!1;let i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(Dx(t,i))return!1;let s=t.type===null?e.type:t.type;if(s){let r=n.get("columnTypes")??{};if(Vv(s).some(a=>{let l=r[a.trim()];return l&&Dx(l,i)}))return!1}return!Dx(e,i)}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let s=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=Bh(i,e,s)}else this.initWaitForRowData(t);if(n!=null)return Object.keys(this.dataTypeMatchers).find(s=>this.dataTypeMatchers[s](n))??"object"}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.beans.rowModel.rootNode?.allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);let[s]=this.addManagedEventListeners({rowDataUpdateStarted:r=>{let{firstRowData:o}=r;o&&(s?.(),this.isPendingInference=!1,this.processColumnsPendingInference(o,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},s={};for(let r of Object.keys(this.columnStateUpdatesPendingInference)){let o=this.columnStateUpdatesPendingInference[r],a=this.colModel.getCol(r);if(!a)return;let l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=UQ(a,o);u.rowGroup&&u.rowGroupIndex==null&&(i[r]=u),u.pivot&&u.pivotIndex==null&&(s[r]=u),n.push(u)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,s)),n.length&&hs(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},{rowGroupColsSvc:i,pivotColsSvc:s}=this.beans;return i?.restoreColumnOrder(n,e),s?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=Ux(this.beans,n,e.getColId());return e.setColDef(i,n,t),!0}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(e){let{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){let t=n=>V(48,{property:n});if(e.cellDataType==="object"){let{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let s=this.formatValueFuncs[t];switch(n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=r=>!!r.colDef.editable&&r.event.key===L.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=s;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=s;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(r,o)=>{let a=this.colModel.getColDefCol(i),l=a?.getColDef();if(!a||!l)return 0;let c=r==null?"":s({column:a,node:null,value:r}),u=o==null?"":s({column:a,node:null,value:o});return c===u?0:c>u?1:-1},e.keyCreator=s;break}}this.beans.filterManager?.setColDefPropertiesForDataType(e,n,s)}getDefaultDataTypes(){let e=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>n.newValue?.trim?.()===""?null:Number(n.newValue),valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?t("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:Bx(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>n.newValue==null?n.newValue:n.newValue?.trim?.()===""?null:String(n.newValue).toLowerCase()==="true",valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>Ci(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):ps(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>Ci(n)??void 0,dateFormatter:n=>ps(n??null,!1)??void 0,valueParser:n=>e(String(n.newValue))?n.newValue:null,valueFormatter:n=>e(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&e(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>Bx(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function UP(e,t){let n=S(S({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...Vv(e.columnTypes),...Vv(t.columnTypes)]),n}function $P(e,t,n){return t?t.baseDataType!==e.baseDataType?(V(46),!1):!0:(V(45,{parentCellDataType:n}),!1)}function YP(e,t){if(e.valueFormatter)return n=>{if(n.node?.group){let i=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&i!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter(R(S({},n),{value:n.value.toNumber()}));if("value"in n.value)return e.valueFormatter(R(S({},n),{value:n.value.value}))}}return}if(t.get("groupDisplayType")==="groupRows"&&!t.get("treeData"))return}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function WQ(e,t,n,i){if(!t[n])return!1;let s=e[n];return s===null?(t[n]=!1,!1):i===void 0?!!s:s===i}function Dx(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>WQ(e,t,n,i))}function UQ(e,t){let n=lN(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}var $Q={moduleName:"DataType",version:W,beans:[jQ],dependsOn:[CQ]},YQ={moduleName:"ColumnFlex",version:W,beans:[HQ]},KQ={moduleName:"ColumnApi",version:W,beans:[zQ],apiFunctions:{getColumnDef:wQ,getDisplayNameForColumn:SQ,getColumn:xQ,getColumns:DQ,applyColumnState:MQ,getColumnState:EQ,resetColumnState:IQ,isPinning:AQ,isPinningLeft:RQ,isPinningRight:TQ,getDisplayedColAfter:kQ,getDisplayedColBefore:LQ,setColumnsVisible:PQ,setColumnsPinned:FQ,getAllGridColumns:NQ,getDisplayedLeftColumns:OQ,getDisplayedCenterColumns:_Q,getDisplayedRightColumns:BQ,getAllDisplayedColumns:VQ,getAllDisplayedVirtualColumns:GQ,getColumnDefs:bQ}};function qQ(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}var ZQ=class extends F{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:s}=this.beans;return n&&s?s.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?.getColGroupDef();return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,s){let r=e.headerValueGetter;if(r){let o=fe(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:s});return typeof r=="function"?r(o):typeof r=="string"?this.beans.expressionSvc?.evaluate(r,o)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return qQ(e.field)}return""}},XQ=class extends F{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let{visibleCols:i}=this,s=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){let o=i.bodyWidth;this.viewportLeft=o-t-e,this.viewportRight=o-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n||[]}extractViewportColumns(){let e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(e){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},e||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||QQ(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,r=t<i&&n<i,o=t>s&&n>s;return!r&&!o}getViewportColumns(){let{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;let t=r=>{let o=r.getLeft();return H(o)&&o>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,s=i.centerCols;return i.getColsForRow(e,s,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){this.clear(!0);let e={},{leftCols:t,rightCols:n,treeLeft:i,treeRight:s,treeCenter:r}=this.visibleCols;this.headerColsWithinViewport.concat(t).concat(n).forEach(l=>e[l.getId()]=!0);let a=(l,c,u)=>{let d=!1;for(let h=0;h<l.length;h++){let p=l[h],g=!1;if(Ma(p))g=e[p.getId()]===!0;else{let m=p.getDisplayedChildren();m&&(g=a(m,c,u+1))}g&&(d=!0,c[u]||(c[u]=[]),c[u].push(p))}return d};a(i,this.rowsOfHeadersToRenderLeft,0),a(s,this.rowsOfHeadersToRenderRight,0),a(r,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function QQ(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var JQ=class extends F{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(s){let r=t(s),o=typeof r;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Yh("<span>"+r+"</span>");return}if(r==null){this.eGui=Yh("<span></span>");return}this.eGui=r}}return n}},eJ={moduleName:"CellRendererFunction",version:W,beans:[JQ]},tJ=class extends F{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){let e=this.gos.get("components");if(e!=null)for(let t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){let{icons:t,userComponents:n,dynamicBeans:i,selectors:s}=e;if(n){let r=(o,a,l)=>{this.agGridDefaults[o]=a,l&&(this.agGridDefaultParams[o]=l)};for(let o of Object.keys(n)){let a=n[o];typeof a=="object"?r(o,a.classImp,a.params):r(o,a)}}if(i)for(let r of Object.keys(i))this.dynamicBeans[r]=i[r];if(s?.forEach(r=>{this.selectors[r.selector]=r}),t)for(let r of Object.keys(t))this.icons[r]=t[r]}getUserComponent(e,t){let n=(a,l,c)=>({componentFromFramework:l,component:a,params:c}),{frameworkOverrides:i}=this.beans,s=i.frameworkComponent(t,this.gos.get("components"));if(s!=null)return n(s,!0);let r=this.jsComps[t];if(r){let a=i.isFrameworkComponent(r);return n(r,a)}let o=this.agGridDefaults[t];return o?n(o,!1,this.agGridDefaultParams[t]):(this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null)}createDynamicBean(e,t,...n){let i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(xa(256));return}return new i(...n)}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},nJ=23,iJ=class extends F{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){let e=Object.values(this.params);this.ready=e.length===nJ&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},sJ=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom,.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-floating-bottom{border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row-hover.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',ND=typeof window!="object"||!window?.document?.fonts?.forEach,Jx=new WeakMap,Lu=(e,t,n,i,s)=>{if(ND||tD)return;i&&(e=`@layer ${CSS.escape(i)} { ${e} }`);let r=Jx.get(t);if(r||(r=[],Jx.set(t,r)),r.find(c=>c.css===e))return;let o=document.createElement("style");o.dataset.agGlobalCss=n,o.textContent=e;let a={css:e,el:o,priority:s},l;for(let c of r){if(c.priority>s)break;l=c}if(l){l.el.insertAdjacentElement("afterend",o);let c=r.indexOf(l);r.splice(c+1,0,a)}else t.insertBefore(o,t.querySelector(":not(title, meta)")),r.push(a)},QN=(e,t)=>{Lu(sJ,e,"core",t,0),Array.from(TK()).sort((n,i)=>n.moduleName.localeCompare(i.moduleName)).forEach(n=>n.css?.forEach(i=>Lu(i,e,`module-${n.moduleName}`,t,0)))},eD=new Set,rJ=e=>{eD.add(e)},oJ=e=>{if(eD.delete(e),eD.size===0){Jx=new WeakMap;for(let t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},vo=e=>new JN(e),ba="$default",aJ=0,JN=class{constructor({feature:e,params:t,modeParams:n={},css:i,cssImports:s}){this.feature=e,this.css=i,this.cssImports=s,this.modeParams=S({[ba]:S(S({},n[ba]??{}),t??{})},n)}use(e,t){let n=this._inject;if(n==null){let{css:i}=this;if(i){let s=`ag-theme-${this.feature??"part"}-${++aJ}`;typeof i=="function"&&(i=i()),i=`:where(.${s}) {
${i}
}
`;for(let r of this.cssImports??[])i=`@import url(${JSON.stringify(r)});
${i}`;n={css:i,class:s}}else n=!1;this._inject=n}return n&&e&&Lu(n.css,e,n.class,t,1),n?n.class:!1}},lJ=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),eO=e=>`--ag-${lJ(e)}`,Er=e=>`var(${eO(e)})`,cJ=(e,t,n)=>Math.max(t,Math.min(n,e)),uJ=e=>{let t=new Map;return n=>{let i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},xr=e=>({ref:"accentColor",mix:e}),ls=e=>({ref:"foregroundColor",mix:e}),Ws=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),dJ=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),js={ref:"backgroundColor"},Mx={ref:"foregroundColor"},Sa={ref:"accentColor"},Kv={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:ls(.15),chromeBackgroundColor:Ws(.02),browserColorScheme:"light"},hJ=R(S({},Kv),{textColor:Mx,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:js,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Sa,rangeSelectionBackgroundColor:xr(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:xr(.5),rangeHeaderHighlightColor:dJ(.08),rowNumbersSelectedColor:xr(.5),rowHoverColor:xr(.08),columnHoverColor:xr(.05),selectedRowBackgroundColor:xr(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:js,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:js,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:ls(.7),focusShadow:{spread:3,color:xr(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:ls(.1),iconButtonActiveColor:Sa,iconButtonActiveBackgroundColor:xr(.28),iconButtonActiveIndicatorColor:Sa,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Sa,toggleButtonOffBackgroundColor:Ws(.3),toggleButtonSwitchBackgroundColor:js,toggleButtonSwitchInset:2,menuBorder:{color:ls(.2)},menuBackgroundColor:Ws(.03),menuTextColor:Ws(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:ls(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Sa},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:ls(.2)},panelBackgroundColor:js,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:ls(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:ls(.13)},selectCellBackgroundColor:ls(.07),selectCellBorder:{color:ls(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:ls(.15),statusBarLabelColor:Mx,statusBarLabelFontWeight:500,statusBarValueColor:Mx,statusBarValueFontWeight:500}),pJ=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",gJ={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}};var fJ=()=>vo({feature:"buttonStyle",params:R(S({},gJ),{buttonBackgroundColor:js,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Sa}}),css:pJ}),mJ=fJ();var vJ=".ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}";var yJ=()=>vo({feature:"columnDropStyle",css:vJ}),tO=yJ();var CJ=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],wJ=uJ(e=>(e=e.toLowerCase(),CJ.find(t=>e.endsWith(t.toLowerCase()))??"length")),ty=e=>typeof e=="object"&&e?.ref?Er(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,OD=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){let t=Er(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Er(e.onto):"transparent"}, ${t} ${cJ(e.mix*100,0,100)}%)`}return!1},bJ=ty,vu=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:` ${Er(n)} `)})`:e&&"ref"in e?Er(e.ref):!1,SJ=ty,xJ=(e,t)=>typeof e=="string"?e:e===!0?"solid 1px var(--ag-border-color)":e===!1?t==="columnBorder"?"solid 1px transparent":"none":e&&"ref"in e?Er(e.ref):nO(e.style??"solid")+" "+vu(e.width??1)+" "+OD(e.color??{ref:"borderColor"}),DJ=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Er(e.ref):[vu(e.offsetX??0),vu(e.offsetY??0),vu(e.radius??0),vu(e.spread??0),OD(e.color??{ref:"foregroundColor"})].join(" "),nO=ty,iO=e=>typeof e=="string"?e:e&&"googleFont"in e?iO(e.googleFont):e&&"ref"in e?Er(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),MJ(t))).join(", "):!1,MJ=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),EJ=ty,sO=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?sO({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Er(e.ref):!1,IJ=(e,t)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&Je(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Er(e.ref):!1,AJ={color:OD,colorScheme:bJ,length:vu,scale:SJ,border:xJ,borderStyle:nO,shadow:DJ,image:sO,fontFamily:iO,fontWeight:EJ,duration:IJ},RJ=(e,t)=>{let n=wJ(e);return AJ[n](t,e)},tD=!1;var TJ=()=>new rO().withPart(mJ).withPart(tO),rO=class oO{constructor(t=[]){this.parts=t}withPart(t){return typeof t=="function"&&(t=t()),t instanceof JN?new oO([...this.parts,t]):(Gx(259,{part:t},"Invalid part"),this)}withoutPart(t){return this.withPart(vo({feature:t}))}withParams(t,n=ba){return this.withPart(vo({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,loadThemeGoogleFonts:i}){if(ND||tD)return;LJ(),QN(t,n);let s=kJ(this);if(s.length>0)for(let r of s)i&&FJ(r);for(let r of this.parts)r.use(t,n)}_getCssClass(){return tD?"ag-theme-quartz":this._cssClassCache??(this._cssClassCache=KP(this.parts).map(t=>t.use(void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){let n={[ba]:S({},hJ)};for(let i of KP(this.parts))for(let s of Object.keys(i.modeParams)){let r=i.modeParams[s];if(r){let o=n[s]??(n[s]={}),a=new Set;for(let l of Object.keys(r)){let c=r[l];c!==void 0&&(o[l]=c,a.add(l))}if(s===ba)for(let l of Object.keys(n)){let c=n[l];if(l!==ba)for(let u of a)delete c[u]}}}this._paramsCache=t=n}return t}_getPerGridCss(t){let n="##SELECTOR##",i=this._paramsCssCache;if(!i){let s="",r="",o=this._getModeParams();for(let l of Object.keys(o)){let c=o[l];if(l!==ba){let d=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;s+=d,r+=d}for(let u of Object.keys(c).sort()){let d=c[u],h=RJ(u,d);if(h===!1)Je(107,{key:u,value:d});else{let p=eO(u),g=p.replace("--ag-","--ag-inherited-");s+=`	${p}: var(${g}, ${h});
`,r+=`	${g}: var(${p});
`}}l!==ba&&(s+=`}
`,r+=`}
`)}let a=`${n} {
${s}}
`;a+=`:has(> ${n}):not(${n}) {
${r}}
`,this._paramsCssCache=i=a}return i.replaceAll(n,`:where(.${t})`)}},KP=e=>{let t=new Map;for(let i of e)t.set(i.feature,i);let n=[];for(let i of e)(!i.feature||t.get(i.feature)===i)&&n.push(i);return n},kJ=e=>{let t=new Set,n=r=>{if(Array.isArray(r))r.forEach(n);else{let o=r?.googleFont;typeof o=="string"&&t.add(o)}};return Object.values(e._getModeParams()).flatMap(r=>Object.values(r)).forEach(n),Array.from(t).sort()},qP=!1,LJ=()=>{if(!qP){qP=!0;for(let e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},PJ=new Set,FJ=async e=>{PJ.add(e);let t=`@import url('https://${NJ}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;Lu(t,document.head,`googleFont:${e}`,void 0,0)},NJ="fonts.googleapis.com",OJ='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',_J=()=>vo({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:js,checkboxUncheckedBorderColor:Ws(.3),checkboxCheckedBackgroundColor:Sa,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:js,checkboxIndeterminateBackgroundColor:Ws(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:js,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:OJ}),BJ=_J();var aO=()=>R(S({},Kv),{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Ws(.05),rowHoverColor:xr(.15),selectedRowBackgroundColor:xr(.2),menuBackgroundColor:Ws(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",checkboxUncheckedBorderColor:Ws(.4),toggleButtonOffBackgroundColor:Ws(.4)});var VJ=()=>R(S({},aO()),{backgroundColor:"#1f2836"});var GJ=()=>vo({feature:"colorScheme",params:Kv,modeParams:{light:Kv,dark:aO(),"dark-blue":VJ()}}),zJ=GJ();var lO={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},cO={"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>'},HJ=(e={})=>{let t="";for(let n of[...Object.keys(lO),...Object.keys(cO)]){let i=jJ(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},jJ=(e,t=1.5)=>{let n=cO[e];if(n)return n;let i=lO[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},WJ=(e={})=>vo({feature:"iconSet",css:()=>HJ(e)});var UJ=WJ();var $J=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}:where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',YJ=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){&:focus{box-shadow:var(--ag-focus-shadow)}}";var KJ={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}};var qJ=()=>vo({feature:"inputStyle",params:R(S({},KJ),{inputBackgroundColor:js,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Sa},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Ws(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>$J+YJ}),ZJ=qJ();var XJ='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}';var QJ={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1};var JJ=()=>vo({feature:"tabStyle",params:R(S({},QJ),{tabBarBorder:!0,tabBarBackgroundColor:ls(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:js}),css:XJ}),eee=JJ();var tee=()=>TJ().withPart(BJ).withPart(zJ).withPart(UJ).withPart(eee).withPart(ZJ).withPart(tO).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),_D=tee();var ZP={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},XP={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},QP={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Ex={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},nee=0,iee=class extends F{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++nee}`,this.globalCSS=[]}wireBeans(e){let{eGridDiv:t,gridOptions:n}=e;this.eGridDiv=t,this.eStyleContainer=n.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=n.themeCssLayer}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(ZP),this.getSizeEl(XP),this.getSizeEl(QP),this.getSizeEl(Ex),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>oJ(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ZP)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(XP)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(QP)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Ex)}applyThemeClasses(e){let{gridTheme:t}=this,n="";if(t)n=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let i=this.eGridDiv;for(;i;){let s=!1;for(let r of Array.from(i.classList))r.startsWith("ag-theme-")&&(s=!0,n=n?`${n} ${r}`:r);s&&this.mutationObserver.observe(i,{attributes:!0,attributeFilter:["class"]}),i=i.parentElement}}for(let i of Array.from(e.classList))i.startsWith("ag-theme-")&&e.classList.remove(i);if(n){let i=e.className;e.className=i+(i?" ":"")+n}}refreshRowHeightVariable(){let{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;let i=`${n}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),n):t!=""?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?Lu(e,this.eStyleContainer,t,this.cssLayer,0):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===Ix?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=document.createElement("div"),e.className="ag-measurement-container",this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.getMeasurementContainer();t=document.createElement("div");let{border:i}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${Ix}px`)):t.style.width=`var(${e.cssName}, ${Ix}px)`,n.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&V(9,{variable:e});let r=Ia(this.beans,t,()=>{let o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==s&&(s=o,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){let e=this.getCSSVariablePixelValue(Ex);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){let{gos:e,eGridDiv:t,globalCSS:n,gridTheme:i}=this,s=e.get("theme"),r;if(s==="legacy")r=void 0;else{let o=s??_D;o instanceof rO?r=o:Je(240,{theme:o})}if(r!==i){if(r){rJ(this),QN(this.eStyleContainer,this.cssLayer);for(let[a,l]of n)Lu(a,this.eStyleContainer,l,this.cssLayer,0);n.length=0}this.gridTheme=r,r?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer});let o=this.eParamsStyle;o||(o=this.eParamsStyle=document.createElement("style"),t.appendChild(o)),ND||(o.textContent=r?._getPerGridCss(this.paramsClass)||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}r&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Je(s?106:239)}},Ix=15538,see=class extends F{constructor(){super(...arguments),this.beanName="eventSvc",this.globalEventService=new _l}postConstruct(){let{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,n){this.globalEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalEventService.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(fe(this.gos,e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(fe(this.gos,e))}};function uO(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}function nD(e,t){let n;if(At(e)&&uO(e)&&e.isPadding()){let i=e;n=i.getLeafColumns()[0];let s=n;for(;s!==i;)t++,s=s.getParent()}return{column:n||e,headerRowIndex:t}}var ree=class extends F{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});let t=Vt(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n,{colModel:i,colGroupSvc:s,ctrlsSvc:r}=this.beans;if(typeof e=="string"?(n=i.getCol(e),n||(n=s?.getColumnGroup(e)??null)):n=e,!n)return null;let a=r.getHeaderRowContainerCtrl()?.getAllCtrls(),l=st(a||[]).type==="filter",c=co(this.beans)-1,u=-1,d=n;for(;d;)u++,d=d.getParent();let h=u;return t&&l&&h===c-1&&h++,h===-1?null:{headerRowIndex:h,column:n}}navigateVertically(e,t,n){let i=this.beans.focusSvc;if(t||(t=i.focusedHeader),!t)return!1;let{headerRowIndex:s}=t,r=t.column,o=co(this.beans),a=e==="UP",l=this.getHeaderRowType(s),{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:d}=a?oee(l,r,s):aee(l,r,s),h=!1;return c<0&&(c=0,u=r,h=!0),c>=o?(c=-1,this.currentHeaderRowWithoutSpan=-1):d!==void 0&&(this.currentHeaderRowWithoutSpan=d),!h&&!u?!1:i.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:n})}navigateHorizontally(e,t=!1,n){let{focusSvc:i,gos:s}=this.beans,r=i.focusedHeader,o,a;if(this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,e==="LEFT"!==s.get("enableRtl")?(a="Before",o=this.findHeader(r,a)):(a="After",o=this.findHeader(r,a)),o||!t)return i.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:n});if(t){let l=s.getCallback("tabToNextHeader");if(l)return i.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(r,a,n)}focusNextHeaderRow(e,t,n){let i=e.headerRowIndex,s=null,r,o=this.beans;if(t==="Before"?i>0&&(r=i-1,this.currentHeaderRowWithoutSpan-=1,s=this.findColAtEdgeForHeaderRow(r,"end")):(r=i+1,this.currentHeaderRowWithoutSpan<co(o)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,s=this.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;let{column:a,headerRowIndex:l}=nD(s.column,s?.headerRowIndex);return o.focusSvc.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:l},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(At(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?st(i):i[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){let n,i,{colGroupSvc:s,visibleCols:r}=this.beans;if(At(e.column)?n=s?.getGroupAtDirection(e.column,t)??void 0:(i=`getCol${t}`,n=r[i](e.column)),!n)return;let{headerRowIndex:o}=e;if(this.getHeaderRowType(o)!=="filter"){let c=[n];for(;n.getParent();)n=n.getParent(),c.push(n);n=c[Math.max(0,c.length-1-o)]}let{column:a,headerRowIndex:l}=nD(n,o);return{column:a,headerRowIndex:l}}getHeaderRowType(e){let t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let{visibleCols:n,ctrlsSvc:i,colGroupSvc:s}=this.beans,r=n.allCols,o=r[t==="start"?0:r.length-1];if(!o)return;let l=i.getHeaderRowContainerCtrl(o.getPinned())?.getRowType(e);if(l=="group"){let c=s?.getColGroupAtLevel(o,e);return{headerRowIndex:e,column:c}}return{headerRowIndex:l==null?-1:e,column:o}}};function oee(e,t,n){let i=e==="filter",s=e==="column",r=i?t:t.getParent(),o=n-1,a=o;if(s&&uO(t.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;a=o,o<0&&(r=t,o=n,a=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:a}}function aee(e,t,n,i="After"){let s=t,r=n+1,o=r;if(e==="group"){let a=t.getDisplayedLeafColumns(),l=i==="After"?a[0]:st(a),c=[],u=l;for(;u.getParent()!==t;)u=u.getParent(),c.push(u);if(s=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){let h=c[d];if(!h.isPadding()){s=h;break}r++}else s=st(c),s||(s=l)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:o}}var lee=class extends F{constructor(){super(...arguments),this.beanName="focusSvc"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){let e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(zK(this.beans))}onColumnEverythingChanged(){if(!this.focusedCell)return;let e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCell||this.isDomDataMissingInHierarchy(Dt(this.beans),tp)?null:this.focusedCell}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||this.isDomDataMissingInHierarchy(Dt(this.beans),VN)?null:this.focusedHeader}isDomDataMissingInHierarchy(e,t){let n=e;for(;n;){if(Nv(this.gos,n,t))return!1;n=n.parentNode}return!0}getFocusedCell(){return this.focusedCell}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCell=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCell=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())})}isCellRestoreFocused(e){return this.restoredFocusedCell==null?!1:"cellSpan"in e?e.doesSpanContain(this.restoredFocusedCell):Yx(e,this.restoredFocusedCell)}setRestoreFocusedCell(e){this.beans.frameworkOverrides.renderingEngine==="react"&&(this.restoredFocusedCell=e)}getFocusEventParams(e){let{rowIndex:t,rowPinned:n,column:i}=e,s={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCell=null,this.focusedCell==null)return;let e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(S({type:"cellFocusCleared"},e))}setFocusedCell(e){let{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:r=!1}=e,o=this.colModel.getCol(t);if(!o){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:uo(i),column:o},this.eventSvc.dispatchEvent(R(S({type:"cellFocused"},this.getFocusEventParams(this.focusedCell)),{forceBrowserFocus:s,preventScrollOnBrowserFocus:r}))}isCellFocused(e){return this.focusedCell==null?!1:Yx(e,this.focusedCell)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;let{column:t,rowCtrl:{rowIndex:n,pinned:i}}=e,{column:s,headerRowIndex:r}=this.focusedHeader;return t===s&&n===r&&i==s.getPinned()}focusHeaderPosition(e){if(Nl(this.beans))return!1;let{direction:t,fromTab:n,allowUserOverride:i,event:s,fromCell:r,rowWithoutSpanValue:o}=e,{headerPosition:a}=e;if(r&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(a);if(i){let l=this.focusedHeader,c=co(this.beans);if(n){let u=this.gos.getCallback("tabToNextHeader");u&&(a=this.getHeaderPositionFromUserFunc({userFunc:u,direction:t,currentPosition:l,headerPosition:a,headerRowCount:c}))}else{let u=this.gos.getCallback("navigateToNextHeader");if(u&&s){let d={key:s.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:c,event:s};a=u(d)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:s,fromCell:r,rowWithoutSpanValue:o}):!1}focusHeaderPositionFromUserFunc(e){if(Nl(this.beans))return!1;let{userFunc:t,headerPosition:n,direction:i,event:s}=e,r=this.focusedHeader,o=co(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:r,headerPosition:n,headerRowCount:o});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:s})}getHeaderPositionFromUserFunc(e){let{userFunc:t,direction:n,currentPosition:i,headerPosition:s,headerRowCount:r}=e,a=t({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:s,headerRowCount:r});return a===!0?i:a===!1?null:a}focusProvidedHeaderPosition(e){let{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:s,event:r}=e,{column:o,headerRowIndex:a}=t,{filterManager:l,ctrlsSvc:c,headerNavigation:u}=this.beans;if(a===-1)return l?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:o,event:r});u?.scrollToColumn(o,n);let h=c.getHeaderRowContainerCtrl(o.getPinned())?.focusHeader(t.headerRowIndex,o,r)||!1;return u&&h&&(s!=null||i)&&(u.currentHeaderRowWithoutSpan=s??-1),h}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;let{colGroupSvc:t}=this.beans;t&&e.getParent()&&(e=t.getColGroupAtLevel(e,0));let n=nD(e,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;let t=co(this.beans)-1,n=st(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===uo(t)}focusOverlay(e){let t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&Vl(t,e)}focusGridView(e){let{backwards:t=!1,canFocusOverlay:n=!0,event:i}=e;if(this.overlays?.isExclusive())return n&&this.focusOverlay(t);if(Jv(this.beans))return t&&!Nl(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:Tu(this.beans,t);let s=t?dq(this.beans):uq(this.beans);if(s){let r=e.column??this.focusedHeader?.column,{rowIndex:o,rowPinned:a}=s,l=Uv(this.beans,s);if(!r||!l||o==null)return!1;if(r.isSuppressNavigable(l)){let c=this.gos.get("enableRtl"),u;return!i||i.key===L.TAB?u=c?L.LEFT:L.RIGHT:u=i.key,this.beans.navigation?.navigateToNextCell(null,u,{rowIndex:o,column:r,rowPinned:a||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:o,column:r,rowPinned:a}),t&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t)||(this.setFocusedCell({rowIndex:o,column:r,rowPinned:uo(a),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:o,rowPinned:a,column:r})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){let n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:co(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},cee=class extends F{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){let{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:R$();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},uee=class extends F{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;let{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},Av=new Set(["gridPreDestroyed","fillStart","pasteStart"]),dee={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1},hee=0,pee=0,gee=class extends F{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=pee++,this.propEventSvc=new _l,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;let i=Av.has(t);if(i&&!e||!i&&e)return;let s=jF(t),r=this.gridOptions[s];typeof r=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{r(n)})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??dee[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return H(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addGridCommonParams(n)))}updateGridOptions({options:e,force:t,source:n="api"}){let i={id:hee++,properties:[]},s=[],{gridOptions:r,validation:o}=this;for(let a of Object.keys(e)){let l=e[a];o?.warnOnInitialPropertyUpdate(n,a);let c=t||typeof l=="object"&&n==="api",u=r[a];if(c||u!==l){r[a]=l;let d={type:a,currentValue:l,previousValue:u,changeSet:i,source:n};s.push(d)}}o?.processGridOptions(this.gridOptions),i.properties=s.map(a=>a.type),s.forEach(a=>{Da(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}assertModuleRegistered(e,t){let n=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return n||Je(200,R(S({},this.getModuleErrorParams()),{moduleName:e,reasonOrId:t})),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:wD(),rowModelType:this.get("rowModelType"),isUmd:kK()}}isModuleRegistered(e){return gN(e,this.gridId,this.get("rowModelType"))}};function fee(e){return`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            ${e?'<ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>':""}
        </div>
    </div>`}var mee=class extends Ye{constructor(){super(...arguments),this.eFilter=U,this.eFilterButton=U,this.eSortIndicator=U,this.eMenu=U,this.eLabel=U,this.eText=U,this.eSortOrder=U,this.eSortAsc=U,this.eSortDesc=U,this.eSortMixed=U,this.eSortNone=U,this.isLoadingInnerComponent=!1}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.innerHeaderComponent?this.innerHeaderComponent.refresh?.(e):this.setDisplayName(e),!0)}workOutTemplate(){let{params:e,beans:t}=this,n=e.template??fee(!!t.sortSvc);return n?.trim?n.trim():n}init(e){this.params=e;let{sortSvc:t,touchSvc:n,rowNumbersSvc:i,userCompFactory:s}=this.beans;this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,t?[t.getSortIndicatorSelector()]:void 0),n?.setupForHeader(this),this.setMenu(),this.setupSort(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(s,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){let n=lK(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){let{displayName:t}=e,n=this.currentDisplayName;if(this.currentDisplayName=t,n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)return;let i=po(t,!0);this.eText.textContent=i}addInIcon(e,t,n){if(t==null)return;let i=us(e,this.beans,n);i&&t.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){cs(this.eMenu),this.eMenu=void 0;return}let{gos:e,eMenu:t,params:n}=this,i=ji(e);this.addInIcon(i?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!i);let s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){let{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){let{params:t,gos:n,beans:i,eMenu:s,eFilterButton:r}=this,o=t.column,a=ji(n);if(e&&!a){if(i.menuSvc?.isFilterMenuInHeaderEnabled(o))return t.showFilter(r??s??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(s??r??this.getGui()),!0;return!1}setupSort(){let{sortSvc:e}=this.beans;if(!e)return;let{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));let{eSortIndicator:i,eSortOrder:s,eSortAsc:r,eSortDesc:o,eSortMixed:a,eSortNone:l}=this;i.attachCustomElements(s,r,o,a,l)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){let{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,this.onFilterChangedIcon.bind(this),"filterActive")}setupFilterButton(){let{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,i){if(!e)return cs(t),!1;let s=this.params.column;return this.addInIcon(i,t,s),this.addManagedListeners(s,{filterChanged:n}),n(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();xt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){let{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},vee=class extends Ye{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=U,this.agClosed=U,this.agLabel=U,this.isLoadingInnerComponent=!1}init(e){let{userCompFactory:t}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons()}checkWarnings(){this.params.template&&V(89)}workOutInnerHeaderGroupComponent(e,t){let n=uK(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){let{agOpened:e,agClosed:t,params:{columnGroup:n},beans:i}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);let s=l=>{if(ho(l))return;let c=!n.isExpanded();i.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(i,t,s),this.addTouchAndClickListeners(i,e,s);let r=l=>{Au(l)};this.addManagedElementListeners(t,{dblclick:r}),this.addManagedElementListeners(e,{dblclick:r}),this.addManagedElementListeners(this.getGui(),{dblclick:s}),this.updateIconVisibility();let o=n.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(o,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,n){e.touchSvc?.setupForHeaderGroup(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){let{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){let i=n.isExpanded();xt(e,i),xt(t,!i)}else xt(e,!1),xt(t,!1)}addInIcon(e,t){let n=us(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){let{agOpened:t,agClosed:n}=this;xt(t,!1),xt(n,!1);return}}setupLabel(e){let{displayName:t,columnGroup:n}=e,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if(H(t)&&!i){let s=po(t,!0);this.agLabel.textContent=s}this.addOrRemoveCssClass("ag-sticky-label",!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},yee={moduleName:"ColumnHeaderComp",version:W,userComponents:{agColumnHeader:mee},icons:{menu:"menu",menuAlt:"menu-alt"}},Cee={moduleName:"ColumnGroupHeaderComp",version:W,userComponents:{agColumnGroupHeader:vee},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},wee={moduleName:"AnimationFrame",version:W,beans:[BK]},bee=class extends F{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Tl())return;let t=(n,i,s)=>{let{rowCtrl:r,cellCtrl:o}=e.getControlsForEventTarget(s?.target??null);o?.column&&o.dispatchCellContextMenuEvent(s??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,s,r,o)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Tl()||YF("dblclick"))return!1;let i=new Date().getTime(),s=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,s})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){let{gos:t,sortSvc:n}=this.beans;if(t.get("suppressTouch"))return;let{params:i,eMenu:s,eFilterButton:r}=e,o=new fu(e.getGui(),!0),a=e.shouldSuppressMenuHide(),l=a&&H(s),c=l?new fu(s,!0):o;if(i.enableMenu){let u=l?"tap":"longTap",d=h=>i.showColumnMenuAfterMouseClick(h.touchStart);e.addManagedListeners(c,{[u]:d})}if(i.enableSorting){let u=d=>{let h=d.touchStart.target;a&&(s?.contains(h)||r?.contains(h))||n?.progressSort(i.column,!1,"uiColumnSorted")};e.addManagedListeners(o,{tap:u})}if(i.enableFilterButton&&r){let u=new fu(r,!0);e.addManagedListeners(u,{tap:()=>i.showFilter(r)}),e.addDestroyFunc(()=>u.destroy())}e.addDestroyFunc(()=>o.destroy()),l&&e.addDestroyFunc(()=>c.destroy())}setupForHeaderGroup(e,t,n){let i=new fu(t,!0);e.addManagedListeners(i,{tap:n}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,n){if(!Tl())return;let i=new fu(t),s=r=>{n(void 0,r.touchStart,r.touchEvent)};e.addManagedListeners(i,{longTap:s}),e.addDestroyFunc(()=>i.destroy())}},See={moduleName:"Touch",version:W,beans:[bee]},xee=class extends F{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===L.UP,i=e===L.DOWN,s=e===L.LEFT,r,o,{pageBounds:a,gos:l,visibleCols:c}=this.beans;if(n||i)o=n?a.getFirstRow():a.getLastRow(),r=t.column;else{let u=l.get("enableRtl");o=t.rowIndex,r=(s!==u?c.allCols:[...c.allCols].reverse()).find(h=>this.isCellGoodToFocusOn({rowIndex:o,rowPinned:null,column:h}))}return r?{rowIndex:o,rowPinned:null,column:r}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case L.UP:n=this.getCellAbove(n);break;case L.DOWN:n=this.getCellBelow(n);break;case L.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case L.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,V(8,{key:e});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n,{pinnedRowModel:i,rowModel:s}=this.beans;switch(e.rowPinned){case"top":n=i?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(e.rowIndex);break;default:n=s.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;let t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,n=e.rowPinned,i=!1,{pageBounds:s,pinnedRowModel:r,rowModel:o}=this.beans;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return o.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else n&&(i=!0);let a=o.getRow(e.rowIndex),l=i?void 0:this.getNextStickyPosition(a);return l||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){let{gos:n,rowRenderer:i}=this.beans;if(!GF(n)||!e||!e.sticky)return;let s=i.getStickyTopRowCtrls().some(c=>c.rowNode.rowIndex===e.rowIndex),r=[];s?r=[...i.getStickyTopRowCtrls()].sort((c,u)=>c.rowNode.rowIndex-u.rowNode.rowIndex):r=[...i.getStickyBottomRowCtrls()].sort((c,u)=>u.rowNode.rowIndex-c.rowNode.rowIndex);let o=t?-1:1,a=r.findIndex(c=>c.rowNode.rowIndex===e.rowIndex),l=r[a+o];if(l)return{rowIndex:l.rowNode.rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.rowSpanSvc?.getCellEnd(e)??e,n=this.getRowBelow(t);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,n=e.rowIndex,{pinnedRowModel:i,pageBounds:s}=this.beans;return t==="top"?(i?.getPinnedTopRowCount()??-1)<=n:t==="bottom"?(i?.getPinnedBottomRowCount()??-1)<=n:s.getLastRow()<=n}getRowAbove(e){let t=e.rowIndex,n=e.rowPinned,{pageBounds:i,pinnedRowModel:s,rowModel:r}=this.beans,o=n?t===0:t===i.getFirstRow(),a=!1,l=()=>({rowIndex:s?.getPinnedTopRowCount()??-1,rowPinned:"top"});if(o)return n==="top"?null:n&&r.isRowsToRender()?{rowIndex:i.getLastRow(),rowPinned:null}:s?.isRowsToRender("top")?l():null;n&&(a=!0);let c=r.getRow(e.rowIndex),u=a?void 0:this.getNextStickyPosition(c,!0);return u||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){if(!e)return null;let t=this.rowSpanSvc?.getCellStart(e)??e,n=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let{visibleCols:t,pagination:n}=this.beans,i=t.allCols,s=e.rowIndex,r=e.rowPinned,o=t.getColAfter(e.column);if(!o){o=i[0];let a=this.getRowBelow(e);if(yt(a)||!a.rowPinned&&!(n?.isRowInPage(a)??!0))return null;s=a?a.rowIndex:null,r=a?a.rowPinned:null}return{rowIndex:s,column:o,rowPinned:r}}getNextTabbedCellBackwards(e){let{visibleCols:t,pagination:n}=this.beans,i=t.allCols,s=e.rowIndex,r=e.rowPinned,o=t.getColBefore(e.column);if(!o){o=st(i);let a=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(yt(a)||!a.rowPinned&&!(n?.isRowInPage(a)??!0))return null;s=a?a.rowIndex:null,r=a?a.rowPinned:null}return{rowIndex:s,column:o,rowPinned:r}}isSuppressNavigable(e,t){let{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){let i=e.createColumnFunctionCallbackParams(t);return n(i)}return!1}};function Dee(e){return e.focusSvc.getFocusedCell()}function Mee(e){return e.focusSvc.clearFocusedCell()}function Eee(e,t,n,i){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function Iee(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function Aee(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function Ree(e,t,n=!1){let i=e.headerNavigation?.getHeaderPositionForColumn(t,n);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var Tee=class extends F{constructor(){super(),this.beanName="navigation",this.onPageDown=DP(this.onPageDown,100),this.onPageUp=DP(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,r=!!this.beans.rangeSvc&&e.shiftKey,o=sq(this.gos,e),a=!1;switch(n){case L.PAGE_HOME:case L.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case L.LEFT:case L.RIGHT:case L.UP:case L.DOWN:if(!o)return!1;s&&!i&&!r&&(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case L.PAGE_DOWN:case L.PAGE_UP:!s&&!i&&(a=this.handlePageUpDown(n,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===L.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:n,scrollColumn:i,focusIndex:s,focusColumn:r}=e,{scrollFeature:o}=this.gridBodyCon;H(i)&&!i.isPinned()&&o.ensureColumnVisible(i),H(t)&&o.ensureIndexVisible(t,n),e.isAsync||o.ensureIndexVisible(s);let{focusSvc:a,rangeSvc:l}=this.beans;a.setFocusedCell({rowIndex:s,column:r,rowPinned:null,forceBrowserFocus:!0}),l?.setRangeToCell({rowIndex:s,rowPinned:null,column:r})}onPageDown(e){let t=this.beans,n=Ax(t),i=this.getViewportHeight(),{pageBounds:s,rowModel:r,rowAutoHeight:o}=t,a=s.getPixelOffset(),l=n.top+i,c=r.getRowIndexAtPixel(l+a);o?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){let t=this.beans,n=Ax(t),{pageBounds:i,rowModel:s,rowAutoHeight:r}=t,o=i.getPixelOffset(),a=n.top,l=s.getRowIndexAtPixel(a+o);r?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,n=!1){let{pageBounds:i,rowModel:s}=this.beans,r=this.getViewportHeight(),o=i.getFirstRow(),a=i.getLastRow(),l=i.getPixelOffset(),c=s.getRow(e.rowIndex),u=n?c?.rowHeight-r-l:r-l,d=c?.rowTop+u,h=s.getRowIndexAtPixel(d+l);if(h===e.rowIndex){let g=n?-1:1;t=h=e.rowIndex+g}let p;n?(p="bottom",h<o&&(h=o),t<o&&(t=o)):(p="top",h>a&&(h=a),t>a&&(t=a)),this.isRowTallerThanView(s.getRow(h))&&(t=h,p="top"),this.navigateTo({scrollIndex:t,scrollType:p,scrollColumn:null,focusIndex:h,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),{pageBounds:s,rowModel:r}=this.beans,o=s.getLastRow(),a=0,l=e.rowIndex;for(;l>=0&&l<=o;){let c=r.getRow(l);if(c){let u=c.rowHeight??0;if(a+u>i)break;a+=u}l+=n}return Math.max(0,Math.min(l,o))}getViewportHeight(){let e=this.beans,t=Ax(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth(),i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){if(!e)return!1;let t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:i}=n,s=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:s,focusIndex:i,focusColumn:s})}onHomeOrEndKey(e){let t=e===L.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:s}=this.beans,r=n.allCols,o=t?i.getFirstRow():i.getLastRow(),a=s.getRow(o);if(!a)return;let l=(t?r:[...r].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:l,focusIndex:o,focusColumn:l})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t),s=this.beans,{ctrlsSvc:r,pageBounds:o,focusSvc:a,gos:l}=s;if(i!==!1){i?t.preventDefault():i===null&&r.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){let{rowIndex:c,rowPinned:u}=e.getRowPosition();(u?c===0:c===o.getFirstRow())&&(l.get("headerHeight")===0||Nl(s)?Tu(s,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Vh&&e.focusCell(!0),(!n&&a.focusOverlay(!1)||Tu(s,n))&&t.preventDefault()}tabToNextCell(e,t){let n=this.beans,{focusSvc:i,rowRenderer:s}=n,r=i.getFocusedCell();if(!r)return!1;let o=mu(n,r);return!o&&(o=s.getRowByPosition(r),!o||!o.isFullWidth())?!1:!!this.tabToNextCellCommon(o,e,t)}tabToNextCellCommon(e,t,n){let i=e.editing;if(!i&&e instanceof Vh){let o=e.rowCtrl;o&&(i=o.editing)}let s;return i?this.gos.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,n):s=this.moveToNextEditingCell(e,t,n):s=this.moveToNextCellNotEditing(e,t),s===null?s:s||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(e,t,n=null){let i=e.cellPosition;e.eGui.focus(),e.stopEditing();let s=this.findNextCellToFocusOn(i,t,!0);return s===!1?null:s==null?!1:(this.beans.editSvc?.startEditing(s,null,!0,n),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,n=null){let i=e.cellPosition,s=this.findNextCellToFocusOn(i,t,!0);if(s===!1)return null;if(s==null)return!1;let r=s.cellPosition,o=this.isCellEditable(i),a=this.isCellEditable(r),l=r&&i.rowIndex===r.rowIndex&&i.rowPinned===r.rowPinned,{editSvc:c,rowEditSvc:u}=this.beans;if(o&&c?.setFocusOutOnEditor(e),!l){let d=e.rowCtrl;c?.stopRowEditing(d);let h=s.rowCtrl;u?.startEditing(h,void 0,void 0,n)}return a?(c?.setFocusInOnEditor(s),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let n=this.beans.visibleCols.allCols,i;e instanceof Yv?i=R(S({},e.getRowPosition()),{column:t?n[0]:st(n)}):i=e.getFocusedCellPosition();let s=this.findNextCellToFocusOn(i,t,!1);if(s===!1)return null;if(s instanceof Vh)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return H(s)}findNextCellToFocusOn(e,t,n){let i=e,s=this.beans,{cellNavigation:r,gos:o,focusSvc:a,rowRenderer:l,rangeSvc:c}=s;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=r.getNextTabbedCell(i,t);let u=o.getCallback("tabToNextCell");if(H(u)){let g=u({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:i||null});if(g===!0)i=e;else{if(g===!1)return!1;i={rowIndex:g.rowIndex,column:g.column,rowPinned:g.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let p=co(s);return a.focusHeaderPosition({headerPosition:{headerRowIndex:p+i.rowIndex,column:i.column},fromCell:!0}),null}let d=o.get("editType")==="fullRow";if(n&&!d&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let h=mu(s,i);if(!h){let p=l.getRowByPosition(i);if(!p||!p.isFullWidth()||n)continue;return p}if(!r.isSuppressNavigable(h.column,h.rowNode))return h.setFocusedCellPosition(i),c?.setRangeToCell(i),h}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){let{pinnedRowModel:n,rowModel:i}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,n,i){let s=n,r=!1,o=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=o;for(;s&&(s===n||!this.isValidNavigateCell(s));)c.get("enableRtl")?t===L.LEFT&&(s=this.getLastCellOfColSpan(s)):t===L.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=a.getNextCellToFocus(t,s),r=yt(s);if(r&&e&&e.key===L.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){let d=c.getCallback("navigateToNextCell");if(H(d)){let p=d({key:t,previousCellPosition:n,nextCellPosition:s||null,event:e});H(p)?s={rowPinned:p.rowPinned,rowIndex:p.rowIndex,column:p.column}:s=null}}if(!s)return;if(s.rowIndex<0){let d=co(o);l.focusHeaderPosition({headerPosition:{headerRowIndex:d+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let u=this.getNormalisedPosition(s);u?this.focusPosition(u):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);let n=mu(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let{visibleCols:n,rowRenderer:i,focusSvc:s,eventSvc:r}=this.beans,o=n.allCols,a=i.getRowByPosition(e);if(!a||!a.isFullWidth())return!1;let l=s.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?st(o):o[0])};this.focusPosition(c);let u=t??(l!=null&&lq(c,l));return r.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){let{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!Uv(this.beans,e)}getLastCellOfColSpan(e){let t=mu(this.beans,e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:st(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=GF(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),i=t&&n?.sticky,{scrollFeature:s}=this.gridBodyCon;!i&&yt(e.rowPinned)&&s.ensureIndexVisible(e.rowIndex),e.column.isPinned()||s.ensureColumnVisible(e.column)}};function Ax(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var kee={moduleName:"KeyboardNavigation",version:W,beans:[Tee,xee,ree],apiFunctions:{getFocusedCell:Dee,clearFocusedCell:Mee,setFocusedCell:Eee,setFocusedHeader:Ree,tabToNextCell:Iee,tabToPreviousCell:Aee}},Lee=class extends F{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){let{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},Pee=class extends F{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){let{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){let{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(e,t){let{rowModel:n}=this.beans,i=n.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;let s=n.getRowBounds(t);s&&(s.rowIndex=t),this.bottomRowBounds=s,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Fee=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",Nee=class extends F{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){let e=this.getWidth(),t=e>0;for(let n of this.elements)n&&(xt(n,t),Mr(n,e))}},Oee=class extends F{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let{gos:e,visibleCols:t,eventSvc:n}=this.beans,i=Rn(e,"print"),s=i?0:t.getColsLeftWidth(),r=i?0:t.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,n.dispatchEvent({type:"leftPinnedWidthChanged"})),r!=this.rightWidth&&(this.rightWidth=r,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.eBodyViewport,t=$h(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:s,hasLockedPinned:r}=n,o=s;!o.length&&!r||(i&&(o=i({columns:o,viewportWidth:t})),!(!o||!o.length)&&(o=o.filter(a=>!sp(a)),this.setColsPinned(o,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new Nee(e,t)}setColsPinned(e,t,n){let{colModel:i,colAnimation:s,visibleCols:r,gos:o}=this.beans;if(!i.cols||!e?.length)return;if(Rn(o,"print")){V(37);return}s?.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;let l=[];e.forEach(c=>{if(!c)return;let u=i.getCol(c);u&&u.getPinned()!==a&&(this.setColPinned(u,a),l.push(u))}),l.length&&(r.refresh(n),oN(this.eventSvc,l,n)),s?.finish()}initCol(e){let{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){let{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;let n=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;let s=()=>{let r=n?this.leftWidth:this.rightWidth;if(r==null)return;let o=r==0,a=e.hidden!==o,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(l&&n||!l&&i)?r+c:r;e.comp.setPinnedContainerWidth(`${d}px`),e.comp.setDisplayed(!o),a&&(e.hidden=o,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:s,rightPinnedWidthChanged:s,scrollVisibilityChanged:s,scrollbarWidthChanged:s})}getHeaderResizeDiff(e,t){if(t.getPinned()){let{leftWidth:i,rightWidth:s}=this,r=$h(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+s+e>r)if(r>i+s)e=r-i-s;else return 0}return e}getPinnedColumnsOverflowingViewport(e){let t=this.rightWidth??0,n=this.leftWidth??0,i=t+n,s=!1;if(i<e)return{columns:[],hasLockedPinned:s};let{visibleCols:r}=this.beans,o=[...r.leftCols],a=[...r.rightCols],l=0,c=0,u=0,d=[],h=i-u-e;for(;(c<o.length||l<a.length)&&h>0;){if(l<a.length){let p=a[l++];if(p.colDef.lockPinned){s=!0;continue}h-=p.getActualWidth(),d.push(p)}if(c<o.length&&h>0){let p=o[c++];if(p.colDef.lockPinned){s=!0;continue}h-=p.getActualWidth(),d.push(p)}}return{columns:d,hasLockedPinned:s}}},_ee={moduleName:"PinnedColumn",version:W,beans:[Oee],css:[Fee]},Bee=class extends F{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=An(this,this.updateAnnouncement.bind(this),200)}postConstruct(){let e=this.beans,t=Vt(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),fF(n,"polite"),m$(n,"additions text"),f$(n,!0),e.eGridDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{if(this.isAlive()&&this.descriptionContainer){let t=e;this.lastAnnouncement===t&&(t=`${t}.`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}},50)}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(_n(e),e.parentElement?.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},Vee={moduleName:"Aria",version:W,beans:[Bee]};function Gee(e){e.overlays?.showLoadingOverlay()}function zee(e){e.overlays?.showNoRowsOverlay()}function Hee(e){e.overlays?.hideOverlay()}var jee=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",dO=class extends Ye{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=U,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(jee)}handleKeyDown(e){if(e.key!==L.TAB||e.defaultPrevented||ho(e))return;let t=this.beans;if(Hl(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=t.focusSvc.focusGridView({column:st(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=Tu(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:s,PRINT:r}=Hs;n.toggle(i,t.autoHeight),n.toggle(s,t.normal),n.toggle(r,t.print)}postConstruct(){this.createManagedBean(new SD(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){let s=Dt(this.beans);s&&!VF(this.beans)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!!s){if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,i)){let r=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:o})=>{r.refresh?.(fe(this.gos,S({},o??{})))})}n&&this.isGridFocused()&&Vl(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);let n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),_n(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){let e=Dt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},Wee={selector:"AG-OVERLAY-WRAPPER",component:dO},Uee=class extends F{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=Jn(this.gos),this.isServerSide=!this.isClientSide&&Pu(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;let e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){V(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return Wee}getOverlayWrapperCompClass(){return dO}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}let{state:e,isClientSide:t,isServerSide:n,beans:{gos:i,colModel:s,rowModel:r}}=this,o=this.gos.get("loading");o!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&o===void 0&&!i.get("suppressLoadingOverlay")&&(o=!i.get("columnDefs")||!s.ready||!i.get("rowData")&&t),o?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&r.isEmpty()&&!i.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!n&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(CK(this.beans.userCompFactory,fe(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(wK(this.beans.userCompFactory,fe(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){let i=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(i,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){let e=this.eWrapper;if(!e)return;let t=0;this.state===2?t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0:this.wrapperPadding!==0&&(t=0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},$ee={moduleName:"Overlay",version:W,userComponents:{agLoadingOverlay:gZ,agNoRowsOverlay:fZ},apiFunctions:{showLoadingOverlay:Gee,showNoRowsOverlay:zee,hideOverlay:Hee},beans:[Uee]},Yee=class extends F{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=A$(),Da(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;Da(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},Kee=400,qee=class extends F{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(r=>r.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},n=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},i=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{fo(this.gos)?n():i()}),fo(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",n=>this.onSuppressCellFocusChanged(n.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:n,previousValue:i})=>{(!i&&n||i&&!n)&&this.redrawRows()});let{stickyRowSvc:e,gos:t}=this.beans;if(e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{let n=this.gridBodyCtrl;n.setStickyTopHeight(0),n.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Rn(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new Zee(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){let e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{let{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(n=>t.onFlashCells(n,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(t=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.column===t&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},s=()=>{n(l=>l.onWidthChanged())},r=()=>{n(l=>l.onFirstRightPinnedChanged())},o=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",s),t.__addEventListener("firstRightPinnedChanged",r),t.__addEventListener("lastLeftPinnedChanged",o),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",s),t.__removeEventListener("firstRightPinnedChanged",r),t.__removeEventListener("lastLeftPinnedChanged",o),t.__removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let e=Rn(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){let t=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellCtrl(e,!0)?.eGui;i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}refreshFloatingRows(e,t){let{pinnedRowModel:n,beans:i,printLayout:s}=this,r=Object.fromEntries(e.map(a=>[a.rowNode.id,a]));n?.forEachPinnedRow(t,(a,l)=>{let c=e[l];c&&n.getPinnedRowById(c.rowNode.id,t)===void 0&&(c.destroyFirstPass(),c.destroySecondPass()),a.id in r?(e[l]=r[a.id],delete r[a.id]):e[l]=new Yv(a,i,!1,!1,s)});let o=(t==="top"?n?.getPinnedTopRowCount():n?.getPinnedBottomRowCount())??0;e.length=o}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let s=i[e.rowIndex];s&&s.rowNode===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusSvc.getFocusCellToUseAfterRefresh();if(t==null)return null;let n=Dt(this.beans),i=Nv(this.gos,n,jv),s=Nv(this.gos,n,tp);return i||s?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&wu(this.gos),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();let{stickyRowFeature:r}=this;if(r){r.checkStickyRows();let o=r.extraTopHeight+r.extraBottomHeight;o&&this.updateContainerHeights(o)}this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){let{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(xa(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusSvc.restoreFocusedCell(e,()=>{this.onCellFocusChanged(fe(this.gos,{rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let s=t[i].getAllCellCtrls(),r=s.length;for(let o=0;o<r;o++)e.push(s[o])}return e}getAllRowCtrls(){let{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let n of this.getCellCtrls(e.rowNodes,e.columns))n.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.rowNode,!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getRowCtrls(e){let t=iD(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let s=i.rowNode;return sD(s,t)})}getCellCtrls(e,t){let n;H(t)&&(n={},t.forEach(s=>{let r=this.colModel.getCol(s);H(r)&&(n[r.getId()]=!0)}));let i=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(r=>{let o=r.column.getId();n&&!n[o]||i.push(r)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){let e=[];for(let n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);let t={};for(let n of Object.values(this.rowCtrlsByRowIndex)){let i=n.rowNode;t[i.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,n,i=this.stickyRowFeature;i&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);let s=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(i){o=i.checkStickyRows();let l=i.extraTopHeight+i.extraBottomHeight;l&&this.updateContainerHeights(l)}let a=this.firstRenderedRow!==s||this.lastRenderedRow!==r;if(!(t&&!o&&!a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),n!=null)){let l=this.getCellToRestoreFocusToAfterRefresh();n!=null&&l==null&&(this.beans.animationFrameSvc?.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){let n={};e.forEach(r=>n[r]=!0);let s=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!n[r]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){let t=[];for(let s=this.firstRenderedRow;s<=this.lastRenderedRow;s++)t.push(s);let n=s=>{let r=s.rowNode.rowIndex;r!=null&&(r<this.firstRenderedRow||r>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&t.push(r)};for(let s of Object.values(this.rowCtrlsByRowIndex))n(s);if(e)for(let s of Object.values(e))n(s);t.sort((s,r)=>s-r);let i=[];for(let s=0;s<t.length;s++){let r=t[s],o=this.rowModel.getRow(r);o&&!o.sticky&&i.push(r)}return i}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);let s=[];if(i.forEach(r=>{let o=this.createOrUpdateRowCtrl(r,e,t,n);H(o)&&s.push(o)}),e){let{animationFrameSvc:r}=this.beans;r&&n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let n=t.rowNode.rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=iD(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.rowNode;return!(t!=null&&!sD(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let s,r=this.rowCtrlsByRowIndex[e];if(r||(s=this.rowModel.getRow(e),H(s)&&H(t)&&t[s.id]&&s.alreadyRendered&&(r=t[s.id],t[s.id]=null)),!r)if(s||(s=this.rowModel.getRow(e)),H(s))r=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){let n=[];if(e){for(let i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){let s=i.instanceId;this.zombieRowCtrls[s]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[s]})}else i.destroySecondPass()}}t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>n.forEach(i=>i()),Kee))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=Fl(this.beans);return e*t}workOutFirstAndLastRowsToRender(){let{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let i,s;if(!n.isRowsToRender())i=0,s=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),s=t.getLastRow();else{let u=this.getRowBufferInPixels(),d=this.ctrlsSvc.getScrollFeature(),h=this.gos.get("suppressRowVirtualisation"),p=!1,g,f;do{let x=t.getPixelOffset(),{pageFirstPixel:D,pageLastPixel:M}=t.getCurrentPagePixelRange(),E=e.divStretchOffset,A=d.getVScrollPosition(),I=A.top,T=A.bottom;h?(g=D+E,f=M+E):(g=Math.max(I+x-u,D)+E,f=Math.min(T+x+u,M)+E),this.firstVisibleVPixel=Math.max(I+x,D)+E,this.lastVisibleVPixel=Math.min(T+x,M)+E,p=this.ensureAllRowsInRangeHaveHeightsCalculated(g,f)}while(p);let m=n.getRowIndexAtPixel(g),v=n.getRowIndexAtPixel(f),y=t.getFirstRow(),w=t.getLastRow();m<y&&(m=y),v>w&&(v=w),i=m,s=v}let r=Rn(this.gos,"normal"),o=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);r&&!o&&s-i>a&&(s=i+a);let l=i!==this.firstRenderedRow,c=s!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=i,this.lastRenderedRow=s,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:s}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Co(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:s,rowModel:r}=this,o=r.ensureRowHeightsValid(e,t,s.getFirstRow(),s.getLastRow());return(o||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||o||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){let i=e.rowNode,s=this.focusSvc.isRowNodeFocused(i),r=e.editing,o=i.detail;return s||r||o?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowPresent(e)??!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?.getRow(e)??null;if(i)return i;let s=this.gos.get("suppressAnimationFrame"),r=n&&!s&&!this.printLayout&&!!this.beans.animationFrameSvc;return new Yv(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){let e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},Zee=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],$s(this.entriesList,n)}removeFromCache(e){let t=e.rowNode.id;delete this.entriesMap[t],$s(this.entriesList,e)}getEntries(){return this.entriesList}};function iD(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}function sD(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var Xee=class extends F{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){let{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Dr(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Dr(e))}doFullSort(e,t){let n=e.map((i,s)=>({currentPos:s,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,s=n.rowNode;for(let r=0,o=e.length;r<o;r++){let a=e[r],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(s,a.column),d,h=this.getComparator(a,i);if(h?d=h(c,u,i,s,l):d=_$(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let s=!t.group&&n.getColDef().field;if(!s)return;let r=this.beans.colModel.getColDefCol(s);if(r)return r.getColDef().comparator}getValue(e,t){let{valueSvc:n,colModel:i,showRowGroupCols:s,gos:r}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(t,e,!1);if(e.rowGroupColumn===t){if(mD(r,i.isPivotActive())){let c=e.allLeafChildren?.[0];return c?n.getValue(t,c,!1):void 0}let l=s?.getShowRowGroupCol(t.getId());return l?e.groupData?.[l.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return n.getValue(t,e,!1)}};function Qee(e){e.sortSvc?.onSortChanged("api")}function Lh(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var Jee=`<span class="ag-sort-indicator-container">
        ${Lh("Order","order")}
        ${Lh("Asc","ascending-icon")}
        ${Lh("Desc","descending-icon")}
        ${Lh("Mixed","mixed-icon")}
        ${Lh("None","none-icon")}
    </span>`,BD=class extends Ye{constructor(e){super(),this.eSortOrder=U,this.eSortAsc=U,this.eSortDesc=U,this.eSortMixed=U,this.eSortNone=U,e||this.setTemplate(Jee)}attachCustomElements(e,t,n,i,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);let n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;let i=us(e,this.beans,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let{eSortAsc:e,eSortDesc:t,eSortNone:n,column:i,gos:s,beans:r}=this,o=r.sortSvc.getDisplaySortForColumn(i);if(e&&xt(e,o==="asc",{skipAriaHidden:!0}),t&&xt(t,o==="desc",{skipAriaHidden:!0}),n){let a=!i.getColDef().unSortIcon&&!s.get("unSortIcon"),l=o==null;xt(n,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){let{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);let i=t.getColDef().showRowGroup;Dr(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){let{eSortMixed:e,beans:t,column:n}=this;if(e){let i=t.sortSvc.getDisplaySortForColumn(n)==="mixed";xt(e,i,{skipAriaHidden:!0})}}updateSortOrder(){let{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;let i=n.getColumnsWithSortingOrdered(),s=n.getDisplaySortIndexForColumn(t)??-1,r=i.some(a=>n.getDisplaySortIndexForColumn(a)??!1),o=s>=0&&r;xt(e,o,{skipAriaHidden:!0}),s>=0?e.textContent=(s+1).toString():_n(e)}},ete={selector:"AG-SORT-INDICATOR",component:BD},np=["asc","desc",null],tte=class extends F{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}progressSortFromEvent(e,t){let i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);let{gos:s,showRowGroupCols:r}=this.beans,o=Dr(s),a=[e];if(o&&e.getColDef().showRowGroup){let d=r?.getSourceColumnsForGroupColumn?.(e)?.filter(h=>h.isSortable());d&&(a=[e,...d])}a.forEach(u=>this.setColSort(u,t,i));let l=(n||s.get("alwaysMultiSort"))&&!s.get("suppressMultiSort"),c=[];if(!l){let u=this.clearSortBarTheseColumns(a,i);c.push(...u)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(i,c)}updateSortIndex(e){let{gos:t,colModel:n,showRowGroupCols:i}=this.beans,s=Dr(t),r=i?.getShowRowGroupCol(e.getId()),o=s&&r||e,a=this.getColumnsWithSortingOrdered();n.getAllCols().forEach(u=>this.setColSortIndex(u,null));let l=a.filter(u=>s&&u.getColDef().showRowGroup?!1:u!==o);(o.getSort()?[...l,o]:l).forEach((u,d)=>this.setColSortIndex(u,d))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.beans.colModel.getAllCols().filter(n=>!!n.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.beans.colModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&n.push(i),this.setColSort(i,void 0,t))}),n}getNextSortDirection(e){let t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??np,n=t.indexOf(e.getSort()),i=n<0,s=n==t.length-1;return i||s?t[0]:t[n+1]}getIndexedSortMap(){let{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans,s=t.getAllCols().filter(c=>!!c.getSort());if(t.isPivotMode()){let c=Dr(e);s=s.filter(u=>{let d=!!u.getAggFunc(),h=!u.isPrimary(),p=c?n?.getShowRowGroupCol(u.getId()):u.getColDef().showRowGroup;return d||h||p})}let r=i?.columns.filter(c=>!!c.getSort())??[],o={};s.forEach((c,u)=>o[c.getId()]=u),s.sort((c,u)=>{let d=c.getSortIndex(),h=u.getSortIndex();if(d!=null&&h!=null)return d-h;if(d==null&&h==null){let p=o[c.getId()],g=o[u.getId()];return p>g?1:-1}else return h==null?-1:1});let a=Dr(e)&&!!r.length;a&&(s=[...new Set(s.map(c=>n?.getShowRowGroupCol(c.getId())??c))]);let l=new Map;return s.forEach((c,u)=>l.set(c,u)),a&&r.forEach(c=>{let u=n.getShowRowGroupCol(c.getId());l.set(c,l.get(u))}),l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[n,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=Dr(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every(o=>o.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let i=0;e.addManagedListeners(t,{movingChanged:()=>{i=new Date().getTime()}}),n&&e.addManagedElementListeners(n,{click:r=>{let o=t.isMoving(),l=new Date().getTime()-i<50;o||l||this.progressSortFromEvent(t,r)}});let s=()=>{let r=t.getSort();if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",r==="asc"),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",r==="desc"),e.addOrRemoveCssClass("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){let l=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(c=>t.getSort()==c.getSort());e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",l)}};e.addManagedEventListeners({sortChanged:s,columnRowGroupChanged:s})}initCol(e){let{sort:t,initialSort:n,sortIndex:i,initialSortIndex:s}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(n==="asc"||n==="desc")&&(e.sort=n),i!==void 0?i!==null&&(e.sortIndex=i):s!==null&&(e.sortIndex=s)}updateColSort(e,t,n){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new BD(e)}getSortIndicatorSelector(){return ete}},hO={moduleName:"Sort",version:W,beans:[tte,Xee],apiFunctions:{onSortChanged:Qee},userComponents:{agSortIndicator:BD},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},nte=class extends F{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){let{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){let{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),Da(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Su(e.source))}}};function ite(e){e.valueCache?.expire()}function ste(e,t){let{colKey:n,rowNode:i,useFormatter:s}=t,r=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(yt(r))return null;let o=e.valueSvc.getValueForDisplay(r,i);return s?e.valueSvc.formatValue(r,i,o)??po(o,!0):o}var qv=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){let{rowNode:n,children:i}=e;if(i)for(let s=0;s<i.length;++s)this.depthFirstSearchChangedPath(i[s],t);t(n)}depthFirstSearchEverything(e,t,n){let i=e.childrenAfterGroup;if(i)for(let s=0,r=i.length;s<r;++s){let o=i[s];o.childrenAfterGroup?this.depthFirstSearchEverything(o,t,n):n&&t(o)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let s=this.mapToItems[n.id],r=this.mapToItems[n.parent.id];r.children||(r.children=[]),r.children.push(s),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>n[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>!n[s.getId()])}},rte="paste",ote=class extends F{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){let{gos:e,rowModel:t}=this.beans;Jn(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){let{gos:t,rowRenderer:n}=this.beans;if(e.source===rte||t.get("suppressChangeDetection"))return;let i=e.node,s=[i],r=this.clientSideRowModel,o=r?.rootNode;if(o&&!i.isRowPinned()){let a=t.get("aggregateOnlyChangedColumns"),l=new qv(a,o);l.addParentNode(i.parent,[e.column]),r.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{s.push(c)})}n.refreshCells({rowNodes:s})}},ate=class extends F{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Je(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return Je(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){let t=this.cache;if(t[e])return t[e];let n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},lte=class extends F{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){let e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){let i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},cte={moduleName:"ValueCache",version:W,beans:[lte],apiFunctions:{expireValueCache:ite}},ute={moduleName:"Expression",version:W,beans:[ate]},dte={moduleName:"ChangeDetection",version:W,beans:[ote]},hte={moduleName:"CellApi",version:W,apiFunctions:{getCellValue:ste}},pte=class extends F{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Pu(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t){let n=t.leafGroup&&this.colModel.isPivotMode(),i=t.group&&t.expanded&&!t.footer&&!n,s=this.gos.get("groupSuppressBlankHeader");if(!i||s)return this.getValue(e,t);let r=!1,o=this.gos.get("groupTotalRow");typeof o!="function"?r=!!o:r=!!this.gos.getCallback("groupTotalRow")({node:this});let a=i&&r;return this.getValue(e,t,a)}getValue(e,t,n=!1){if(this.initialised||this.init(),!t)return;let i=e.getColDef(),s=i.field,r=e.getColId(),o=t.data,a,l=t.groupData&&t.groupData[r]!==void 0,c=!n&&t.aggData&&t.aggData[r]!==void 0,u=this.isSsrm&&n&&!!e.getColDef().aggFunc,d=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(this.isTreeData&&c?a=t.aggData[r]:this.isTreeData&&i.valueGetter?a=this.executeValueGetter(i.valueGetter,o,e,t):this.isTreeData&&s&&o?a=Bh(o,s,e.isFieldContainsDots()):l?a=t.groupData[r]:c?a=t.aggData[r]:i.valueGetter?a=this.executeValueGetter(i.valueGetter,o,e,t):d?a=Bh(o,t.field,e.isFieldContainsDots()):s&&o&&!u&&(a=Bh(o,s,e.isFieldContainsDots())),this.cellExpressions&&typeof a=="string"&&a.indexOf("=")===0){let h=a.substring(1);a=this.executeValueGetter(h,o,e,t)}if(a==null){let h=this.getOpenedGroup(t,e);if(h!=null)return h}return a}parseValue(e,t,n,i){let s=e.getColDef(),r=s.valueParser;if(H(r)){let o=fe(this.gos,{node:t,data:t?.data,oldValue:i,newValue:n,colDef:s,column:e});return typeof r=="function"?r(o):this.expressionSvc?.evaluate(r,o)}return n}getDeleteValue(e,t){return H(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,n,i,s=!0){let r=null,o,a=e.getColDef();if(i?o=i:s&&(o=a.valueFormatter),o){let l=fe(this.gos,{value:n,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?r=o(l):r=this.expressionSvc?this.expressionSvc.evaluate(o,l):null}else if(a.refData)return a.refData[n]||"";return r==null&&Array.isArray(n)&&(r=n.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let i=t.getColDef().showRowGroup,s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(i===!0||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,n,i){let s=this.colModel.getColDefCol(t);if(!e||!s)return!1;yt(e.data)&&(e.data={});let{field:r,valueSetter:o}=s.getColDef();if(yt(r)&&yt(o))return V(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,n))return V(135),!1;let a=fe(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s});a.newValue=n;let l;if(H(o)?typeof o=="function"?l=o(a):l=this.expressionSvc?.evaluate(o,a):l=this.setValueUsingField(e.data,r,n,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();let c=this.getValue(s,e);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:i}),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let s=!1;if(!i)s=e[t]===n,s||(e[t]=n);else{let r=t.split("."),o=e;for(;r.length>0&&o;){let a=r.shift();r.length===0?(s=o[a]===n,s||(o[a]=n)):o=o[a]}}return!s}executeValueGetterWithValueCache(e,t,n,i){let s=n.getColId(),r=this.valueCache.getValue(i,s);if(r!==void 0)return r;let o=this.executeValueGetterWithoutValueCache(e,t,n,i);return this.valueCache.setValue(i,s,o),o}executeValueGetterWithoutValueCache(e,t,n,i){let s=fe(this.gos,{data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),r;return typeof e=="function"?r=e(s):r=this.expressionSvc?.evaluate(e,s),r}getValueCallback(e,t){let n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,s=n;if(i){let r=fe(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});s=i(r)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&V(121)),s}},gte={moduleName:"CommunityCore",version:W,beans:[uee,dX,tJ,HY,Yee,mQ,see,gee,VY,Pee,Lee,qee,pte,lee,iee,cee,iJ,nte,ZQ,XQ],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:hX,destroy:pX,isDestroyed:gX,getGridOption:fX,setGridOption:mX,updateGridOptions:UN},dependsOn:[$Q,KX,tQ,hO,yee,yQ,Cee,$ee,dte,wee,kee,_ee,Vee,See,eJ,YQ,ute]},fte=(()=>{let e=class Al{static applyGlobalGridOptions(n){if(!Al.gridOptions)return S({},n);let i={};return wi(i,Al.gridOptions,!0,!0),Al.mergeStrategy==="deep"?wi(i,n,!0,!0):i=S(S({},i),n),Al.gridOptions.context&&(i.context=Al.gridOptions.context),n.context&&(Al.mergeStrategy==="deep"&&i.context&&wi(n.context,i.context,!0,!0),i.context=n.context),i}};return e.gridOptions=void 0,e.mergeStrategy="shallow",e})(),mte=fte;function pO(e,t,n){if(!t)return Je(11),{};let i=n,s;if(!i?.setThemeOnGridDiv){let o=document.createElement("div");o.style.height="100%",e.appendChild(o),e=o,s=()=>e.remove()}return new yte().create(e,t,o=>{let a=new cX(e);o.createBean(a)},void 0,n,s)}var vte=1,yte=class{create(e,t,n,i,s,r){let o=mte.applyGlobalGridOptions(t),a=o.gridId??String(vte++),l=o.rowModelType??"clientSide",c=this.getRegisteredModules(s,a,l),u=this.createBeansList(l,c,a),d=this.createProvidedBeans(e,o,s);if(!u)return;let h={providedBeanInstances:d,beanClasses:u,gridId:a,beanInitComparator:YZ,beanDestroyComparator:KZ,derivedBeans:[UZ],destroyCallback:r},p=new PK(h);return this.registerModuleFeatures(p,c),n(p),p.getBean("syncSvc").start(),i&&i(p),p.getBean("gridApi")}getRegisteredModules(e,t,n){return ep(gte,void 0),e?.modules?.forEach(i=>ep(i,t)),RK(t,n)}registerModuleFeatures(e,t){let n=e.getBean("registry"),i=e.getBean("apiFunctionSvc");t.forEach(s=>{n.registerModule(s);let r=s.apiFunctions;r&&Object.keys(r).forEach(a=>{i?.addFunction(a,r[a])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;yt(i)&&(i=new FD);let s={gridOptions:t,eGridDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(s,n.providedBeanInstances),s}createBeansList(e,t,n){let s={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"}[e];if(!s){Gx(201,{rowModelType:e},`Unknown rowModelType ${e}.`);return}if(!gN(s,n,e)){Gx(200,{reasonOrId:`rowModelType = '${e}'`,moduleName:s,gridScoped:wD(),gridId:n,rowModelType:e},`Missing module ${s}Module for rowModelType ${e}. 
If upgrading from before v33, see ${Ll}/upgrading-to-ag-grid-33/#changes-to-modules/`);return}let r=new Set;return t.forEach(o=>o.beans?.forEach(a=>r.add(a))),Array.from(r)}};function Ir(e){let t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function ny(e){let t=e.rowModel;return t.getType()==="infinite"?t:void 0}function gO(e){let t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var Cte=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],wte=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel"],bte=[...Cte,...wte],Ste=class extends F{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){let e=this.gos,t=e.getCallback("getLocaleText");if(t)return(i,s,r)=>t({key:i,defaultValue:s,variableValues:r});let n=e.get("localeText");return(i,s,r)=>{let o=n&&n[i];if(o&&r&&r.length){let a=0;for(;!(a>=r.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",r[a++])}return o??s}}},xte=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow","themeCssLayer"],Dte=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef"],Mte=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],fO=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],Ete=["theme","rowSelection"],VD=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild"],mO=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],Ite=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter"],Ate=[...Mte,...Dte,...xte,...fO,...Ite,...mO,...VD,...Ete],vO=class{wrap(e,t,n,i){let s=this.createWrapper(e,i);return t?.forEach(r=>{this.createMethod(s,r,!0)}),n?.forEach(r=>{this.createMethod(s,r,!1)}),s}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&V(49,{methodName:t}),null)}}},Rte=class extends Nu{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=po(t,!0)}};function yO(e){let{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:s,addSequentialWeight:r}=e,o=n.map((c,u)=>({value:c,relevance:kte(t.toLowerCase(),c.toLocaleLowerCase(),r),idx:u}));if(o.sort((c,u)=>u.relevance-c.relevance),i&&(o=o.filter(c=>c.relevance!==0)),o.length>0&&s&&s>0){let u=o[0].relevance*s;o=o.filter(d=>u-d.relevance<0)}let a=[],l=[];for(let c of o)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function Tte(e){let t=[],n=e.length;for(let i=1;i<=n;i++)for(let s=0;s<=n-i;s++){let r=s+i-1;t.push(e.slice(s,r+1))}return t}function kte(e,t,n=!1){let i=e.replace(/\s/g,""),s=t.replace(/\s/g,""),r=i.length,o=s.length,a=new Array(r+1).fill(null).map(()=>new Array(o+1).fill(0));for(let d=0;d<=r;d+=1)a[d][0]=d;for(let d=0;d<=o;d+=1)a[0][d]=d;for(let d=1;d<=r;d++)for(let h=1;h<=o;h++)i[d-1]===s[h-1]?a[d][h]=a[d-1][h-1]:a[d][h]=1+Math.min(a[d][h-1],Math.min(a[d-1][h],a[d-1][h-1]));let l=a[r][o],u=Math.max(r,o)-l;if(n){let d=Tte(i);for(let h=0;h<d.length;h++){let p=d[h];s.indexOf(p)!==-1&&(u+=1,u*=p.length)}}return u}function Lte(e,t){if(typeof e!="number")return"";let n=t(),i=n("thousandSeparator",","),s=n("decimalSeparator",".");return e.toString().replace(".",s).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var Pte=class extends F{getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},Fte=class{constructor(e){this.groupColumns=[];let{colModel:t,rowGroupColsSvc:n,colNames:i,valueSvc:s,gos:r,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=i,this.valueSvc=s,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,s){let o=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueSvc.getValue(e,s);return this.processCell({accumulatedRowIndex:n,rowNode:s,column:e,value:o,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,n){if(!(e.group&&!this.gos.get("treeData")))return!1;if(this.groupColumns.indexOf(t)!==-1){if(e.groupData?.[t.getId()]!==void 0||Pu(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){let o=t.getColDef();return o==null||o.showRowGroup===!0||o.showRowGroup===this.rowGroupColsSvc?.columns[0].getId()}}let r=mD(this.gos,this.colModel.isPivotMode());return n===0&&r}getHeaderName(e,t){return e?e(fe(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(fe(this.gos,{column:e,node:t}));let n=this.gos.get("treeData"),i=a=>{if(n)return a.key;let l=a.groupData?.[e.getId()];return!l||!a.rowGroupColumn||a.rowGroupColumn.getColDef().useValueFormatterForExport===!1?l:this.valueSvc.formatValue(a.rowGroupColumn,a,l)??l},s=t.footer,r=[i(t)];if(!Q$(this.gos))for(;t.parent;)t=t.parent,r.push(i(t));let o=r.reverse().join(" -> ");return s?`Total ${o}`:o}processCell(e){let{accumulatedRowIndex:t,rowNode:n,column:i,value:s,processCellCallback:r,type:o}=e;return r?{value:r(fe(this.gos,{accumulatedRowIndex:t,column:i,node:n,value:s,type:o,parseValue:a=>this.valueSvc.parseValue(i,n,a,this.valueSvc.getValue(i,n)),formatValue:a=>this.valueSvc.formatValue(i,n,a)??a}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueSvc.formatValue(i,n,s)}:{value:s??""}}};function Nte(e,t){let n=document.defaultView||window;if(!n){V(52);return}let i=document.createElement("a"),s=n.URL.createObjectURL(t);i.setAttribute("href",s),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(s)},0)}var Ote={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0},yi="clientSide",Xn="serverSide",gu="infinite",_te={onGroupExpandedOrCollapsed:[yi],refreshClientSideRowModel:[yi],isRowDataEmpty:[yi],forEachLeafNode:[yi],forEachNodeAfterFilter:[yi],forEachNodeAfterFilterAndSort:[yi],resetRowHeights:[yi],applyTransaction:[yi],applyTransactionAsync:[yi],flushAsyncTransactions:[yi],getBestCostNodeSelection:[yi],getServerSideSelectionState:[Xn],setServerSideSelectionState:[Xn],applyServerSideTransaction:[Xn],applyServerSideTransactionAsync:[Xn],applyServerSideRowData:[Xn],retryServerSideLoads:[Xn],flushServerSideAsyncTransactions:[Xn],refreshServerSide:[Xn],getServerSideGroupLevelState:[Xn],refreshInfiniteCache:[gu],purgeInfiniteCache:[gu],getInfiniteRowCount:[gu],isLastRowIndexKnown:[gu,Xn],expandAll:[yi,Xn],collapseAll:[yi,Xn],onRowHeightChanged:[yi,Xn],setRowCount:[gu,Xn],getCacheBlockState:[gu,Xn]},Bte={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function Vte(e,t,n){let i=Bte[e];if(i){let{version:r,new:o,old:a,message:l}=i,c=a??e;return(...u)=>{let d=o?`Please use ${o} instead. `:"";return yu(`Since ${r} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}let s=_te[e];return s?(...r)=>{let o=n.rowModel.getType();if(!s.includes(o)){Cu(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,r)}:t}var CO={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},Rx=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],Gte={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:Rx,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...Rx,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...Rx,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},zte={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function Hte(e,t){let n=[];return(Array.isArray(e)?e:[e]).forEach(i=>{let s=Gte[i];s?s.forEach(r=>{let o=zte[r];(!o||o===t)&&n.push(r)}):n.push(i)}),n}var Mu={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar"},jte=e=>{let t=e.map(i=>`import { ${Hh(i)} } from '${CO[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>Hh(i,!0)).join(", ")} ]); 

For more info see: ${Ll}/modules/`};function Hh(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function Wte(e,t){let n=t.filter(r=>r==="IntegratedCharts"||r==="Sparklines"),i="";return!globalThis?.agCharts&&n.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(r=>CO[r])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}var JP=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:i,rowModelType:s,additionalText:r,isUmd:o})=>{let a=Hte(t,s),l=typeof e=="string"?e:Kte[e];if(o)return Wte(l,a);let c=a.filter(h=>h==="IntegratedCharts"||h==="Sparklines"),u=c.length>0?`${c.map(h=>Hh(h)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(h=>Hh(h)).join(", "):Hh(a[0])} is not registered${n?" for gridId: "+i:""}. ${u} Check if you have registered the module:
`}
${jte(a)}`+(r?` 

${r}`:"")},eF=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,Ute=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,$te={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${Ute(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:({methodName:e})=>`AnimationFrameService.${e} called but animation frames are off`,93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${i?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:({rowModelType:e})=>`selectAll only available when rowModelType='clientSide', ie not ${e}`,101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})=>{let s=[],r=[...Object.keys(n??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(i??[])],o=yO({inputValue:t,allSuggestions:r,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),o.length>0&&s.push(`         Did you mean: [${o.slice(0,3)}]?
`),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Ll}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({aggFuncOrString:e})=>`unrecognised aggregation function ${e}`,110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:JP,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Ll}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>eF("IntegratedChartsModule"),258:()=>eF("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:i,rowModelType:s})=>JP({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Mu[t],gridId:i,gridScoped:n,rowModelType:s}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Ll}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection"};function Yte(e,t){let n=$te[e];if(!n)return[`Missing error text for error id ${e}!`];let i=n(t),r=`
See ${NF(e,t)}`;return Array.isArray(i)?i.concat(r):[i,r]}var Kte={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},qte=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),Zte=()=>({aggFunc:{module:"SharedAggregation"},autoHeight:{supportedRowModels:["clientSide","serverSide"],module:"RowAutoHeight"},cellClass:{module:"CellStyle"},cellClassRules:{module:"CellStyle"},cellEditor:({cellEditor:e,editable:t})=>{if(!t)return null;if(typeof e=="string"){let n=Mu[e];if(n)return{module:n}}return{module:"CustomEditor"}},cellRenderer:({cellRenderer:e})=>{if(typeof e!="string")return null;let t=Mu[e];return t?{module:t}:null},cellRendererParams:{validate:e=>(e.rowGroup!=null||e.rowGroupIndex!=null||e.cellRenderer==="agGroupCellRenderer")&&"checkbox"in e.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},cellStyle:{module:"CellStyle"},children:()=>wO(),columnChooserParams:{module:"ColumnMenu"},contextMenuItems:{module:"ContextMenu"},dndSource:{module:"DragAndDrop"},dndSourceOnRowDrag:{module:"DragAndDrop"},editable:({editable:e,cellEditor:t})=>e&&!t?{module:"TextEditor"}:null,enableCellChangeFlash:{module:"HighlightChanges"},enablePivot:{module:"SharedPivot"},enableRowGroup:{module:"SharedRowGrouping"},enableValue:{module:"SharedAggregation"},filter:({filter:e})=>{if(e&&typeof e!="string"&&typeof e!="boolean")return{module:"CustomFilter"};if(typeof e=="string"){let t=Mu[e];if(t)return{module:t}}return{module:"ColumnFilter"}},floatingFilter:{module:"ColumnFilter"},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerTooltip:{module:"Tooltip"},headerValueGetter:{validate:e=>{let t=e.headerValueGetter;return typeof t=="function"||typeof t=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return xa(262);if(e.smallLeft)return xa(263);if(e.smallRight)return xa(264)}return null}},mainMenuItems:{module:"ColumnMenu"},menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?{module:"ColumnMenu"}:null},pivot:{module:"SharedPivot"},pivotIndex:{module:"SharedPivot"},rowDrag:{module:"RowDrag"},rowGroup:{module:"SharedRowGrouping"},rowGroupIndex:{module:"SharedRowGrouping"},sortingOrder:{validate:e=>{let t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){let n=t.filter(i=>!np.includes(i));if(n.length>0)return`sortingOrder must be an array with elements from [${np.map(Fv).join()}], currently it includes [${n.map(Fv).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},tooltipField:{module:"Tooltip"},tooltipValueGetter:{module:"Tooltip"},type:{validate:e=>{let t=e.type;return t instanceof Array?t.some(i=>typeof i!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof t=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,{suppressRowTransform:t})=>t?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{module:"CellSpan",dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[!1,void 0]},rowSpan:{required:[!1,void 0]}},validate:(e,{rowSelection:t,cellSelection:n,suppressRowTransform:i,enableCellSpan:s,pagination:r,rowDragEntireRow:o,enableCellTextSelection:a})=>typeof t=="object"&&t?.mode==="singleRow"&&t?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":n?"colDef.spanRows is not supported with cellSelection.":i?"colDef.spanRows is not supported with suppressRowTransform.":s?r?"colDef.spanRows is not supported with pagination.":o?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}),Xte={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},Qte=()=>Object.keys(Xte),wO=()=>({objectName:"colDef",allProperties:Qte(),docsUrl:"column-properties/",deprecations:qte(),validations:Zte()}),Jte=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}});function Sr(e,t,n,i=Number.MAX_VALUE){return typeof t=="number"||t==null?t==null||t>=n&&t<=i?null:i===Number.MAX_VALUE?`${e}: value should be greater than or equal to ${n}`:`${e}: value should be between ${n} and ${i}`:`${e}: value should be a number`}var ene=()=>{let e={alignedGrids:{module:"AlignedGrids"},allowContextMenuWithControlKey:{module:"ContextMenu"},autoSizePadding:{validate({autoSizePadding:n}){return Sr("autoSizePadding",n,0)}},autoSizeStrategy:{module:"ColumnAutoSize"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return Sr("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return Sr("cacheOverflowSize",n,1)}},cellSelection:{module:"CellSelection"},columnHoverHighlight:{module:"ColumnHover"},datasource:{supportedRowModels:["infinite"],module:"InfiniteRowModel"},doesExternalFilterPass:{module:"ExternalFilter"},domLayout:{validate:n=>{let i=n.domLayout,s=["autoHeight","normal","print"];return i&&!s.includes(i)?`domLayout must be one of [${s.join()}], currently it's ${i}`:null}},editType:{module:"EditCore"},enableAdvancedFilter:{module:"AdvancedFilter"},enableCharts:{module:"IntegratedCharts"},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{module:"CellSelection",dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},rowNumbers:{module:"RowNumbers"},getContextMenuItems:{module:"ContextMenu"},getLocaleText:{module:"Locale"},getMainMenuItems:{module:"ColumnMenu"},getRowClass:{module:"RowStyle"},getRowStyle:{module:"RowStyle"},grandTotalRow:{module:"SharedRowGrouping"},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return xa(262);if(n.smallLeft)return xa(263);if(n.smallRight)return xa(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return Sr("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},initialState:{module:"GridState"},isExternalFilterPresent:{module:"ExternalFilter"},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return Sr("keepDetailRowsCount",n,1)}},localeText:{module:"Locale"},masterDetail:{module:"SharedMasterDetail"},pagination:{module:"Pagination"},paginationPageSize:{validate({paginationPageSize:n}){return Sr("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{let i=n.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pinnedTopRowData:{module:"PinnedRow"},pinnedBottomRowData:{module:"PinnedRow"},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}},module:"SharedPivot"},pivotPanelShow:{module:"RowGroupingPanel"},quickFilterText:{supportedRowModels:["clientSide"],module:"QuickFilter"},rowBuffer:{validate({rowBuffer:n}){return Sr("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null,module:"RowStyle"},rowClassRules:{module:"RowStyle"},rowData:{supportedRowModels:["clientSide"],module:"ClientSideRowModel"},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}},module:"RowDrag"},rowGroupPanelShow:{module:"RowGroupingPanel"},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null},module:"SharedRowSelection"},rowStyle:{validate:n=>{let i=n.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null},module:"RowStyle"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"ServerSideRowModel"},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return Sr("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sideBar:{module:"SideBar"},sortingOrder:{validate:n=>{let i=n.sortingOrder;if(Array.isArray(i)&&i.length>0){let s=i.filter(r=>!np.includes(r));if(s.length>0)return`sortingOrder must be an array with elements from [${np.map(Fv).join()}], currently it includes [${s.map(Fv).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},statusBar:{module:"StatusBar"},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],module:"SharedTreeData",validate:n=>{let i=n.rowModelType??"clientSide";switch(i){case"clientSide":{let{treeDataChildrenField:s,getDataPath:r}=n;return!s&&!r?"treeData requires either 'treeDataChildrenField' or 'getDataPath' in the clientSide row model.":s&&r?"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.":null}case"serverSide":{let s=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:s}}return null}},treeDataChildrenField:{module:"SharedTreeData"},undoRedoCellEditing:{module:"UndoRedoEdit"},valueCache:{module:"ValueCache"},viewportDatasource:{supportedRowModels:["viewport"],module:"ViewportRowModel"},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return Sr("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return Sr("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},enableCellSpan:{module:"CellSpan"}},t={};return mO.forEach(n=>{t[n]={expectedType:"boolean"}}),fO.forEach(n=>{t[n]={expectedType:"number"}}),wi(t,e),t},tne=()=>({objectName:"gridOptions",allProperties:[...Ate,...bte.map(e=>jF(e))],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:Jte(),validations:ene()}),nne={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1},ine={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore"},sne=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),rne={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"},one=class extends F{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,G$(this)}postConstruct(){this.processGridOptions(this.gridOptions)}warnOnInitialPropertyUpdate(e,t){e==="api"&&Ote[t]&&V(22,{key:t})}processGridOptions(e){this.processOptions(e,tne())}validateApiFunction(e,t){return Vte(e,t,this.beans)}missingUserComponent(e,t,n,i){let s=Mu[t];s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):V(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})}checkRowEvents(e){lne.has(e)&&V(10,{eventType:e})}validateIcon(e){if(sne.has(e)&&V(43,{iconName:e}),nne[e])return;let t=ine[e];if(t){Je(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:wD(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}V(134,{iconName:e})}validateMenuItem(e){let t=rne[e];t&&this.gos.assertModuleRegistered(t,`menu item '${e}'`)}isProvidedUserComp(e){return!!Mu[e]}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&this.processOptions(e,wO())}processOptions(e,t){let{validations:n,deprecations:i,allProperties:s,propertyExceptions:r,objectName:o,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(i)],s,o,a);let l=new Set,c=d=>{let h=n[d];if(h)if(typeof h=="function"){let p=h(e,this.gridOptions,this.beans);if(!p)return;if("objectName"in p){let g=e[d];if(Array.isArray(g)){g.forEach(f=>{this.processOptions(f,p)});return}this.processOptions(e[d],p);return}return p}else return h;else return};Object.keys(e).forEach(d=>{let h=i[d];if(h){let{message:x,version:D}=h;l.add(`As of v${D}, ${String(d)} is deprecated. ${x??""}`)}let p=e[d];if(p==null||p===!1)return;let g=c(d);if(!g)return;let{module:f,dependencies:m,validate:v,supportedRowModels:y,expectedType:w}=g;if(w){let x=typeof p;if(x!==w){l.add(`${String(d)} should be of type '${w}' but received '${x}' (${p}).`);return}}if(y){let x=this.gridOptions.rowModelType??"clientSide";if(!y.includes(x)){l.add(`${String(d)} is not supported with the '${x}' row model. It is only valid with: ${y.join(", ")}.`);return}}if(f){let x=Array.isArray(f)?f:[f],D=!0;if(x.forEach(M=>{this.gos.assertModuleRegistered(M,String(d))||(D=!1)}),!D)return}if(m){let x=this.checkForRequiredDependencies(d,m,e);if(x){l.add(x);return}}if(v){let x=v(e,this.gridOptions,this.beans);if(x){l.add(x);return}}}),l.size>0&&l.forEach(d=>{yu(d)})}checkForRequiredDependencies(e,t,n){let s=Object.entries(t).filter(([r,o])=>{let a=n[r];return!o.required.includes(a)});return s.length===0?null:s.map(([r,o])=>`'${String(e)}' requires '${r}' to be one of [${o.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${o.reason??""}`).join(`
           `)}checkProperties(e,t,n,i,s){let r=["__ob__","__v_skip","__metadata__"],o=ane(Object.getOwnPropertyNames(e),[...r,...t,...n],n),a=Object.keys(o);for(let l of a){let c=o[l],u=`invalid ${i} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;n.includes("context")&&(u+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),yu(u)}if(a.length>0&&s){let l=this.beans.frameworkOverrides.getDocLink(s);yu(`to see all the valid ${i} properties please check: ${l}`)}}getConsoleMessage(e,t){return Yte(e,t)}};function ane(e,t,n){let i={},s=e.filter(r=>!t.some(o=>o===r));return s.length>0&&s.forEach(r=>i[r]=yO({inputValue:r,allSuggestions:n}).values),i}var lne=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),cne={moduleName:"Validation",version:W,beans:[one]};function bO(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var une=class extends F{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(i,s)=>{i.hasChildren()&&e&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(r=>{let o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||a}):i.childrenAfterFilter=i.childrenAfterGroup,bO(i)};if(this.doingTreeDataFiltering()){let i=(r,o)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){let l=r.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(r.childrenAfterGroup[a],c):n(l,c)}n(r,o)},s=r=>i(r,!1);t.executeFromRootNode(s)}else{let i=s=>n(s,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},dne=class extends RD{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,n,i,s){this.comp=e;let r=rp(this,this.beans.context,s);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,r),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r),r.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(r)}),r.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return fe(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=us("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Fu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.getLocaleTextFunc();Xv(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){let{beans:t}=this;if(Dt(t)===this.eGui)return;let s=Hl(t,this.eGui,null,e.shiftKey);if(s){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),s.focus();return}let r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleCols,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case L.UP:case L.DOWN:t||e.preventDefault();case L.LEFT:case L.RIGHT:if(t)return;e.stopPropagation();case L.ENTER:t&&Vl(this.eGui)&&e.preventDefault();break;case L.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&kl(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let s=this.lastFocusEvent,r=!!(s&&s.key===L.TAB);if(s&&r){let o=s.shiftKey;Vl(this.eGui,o)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){let t=new AD(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!ji(this.gos)}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{filterManager:t}=this.beans,n=i=>{if(i?.source==="filterDestroyed"&&!this.isAlive())return;let s=this.comp.getFloatingFilterComp();s&&s.then(r=>{if(r){let o=t?.getCurrentFloatingFilterParentModel(this.column),a=i?R(S({},i),{columns:i.columns??[],source:i.source==="api"?"api":"columnFilter"}):null;r.onParentModelChanged(o,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:n}),t?.isFilterActive(this.column)&&n(null)}setupWidth(e){let t=()=>{let n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let i=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!i?this.updateCompDetails(e,i,n):s.then(r=>{!r||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,i)?this.updateCompDetails(e,i,n):this.updateFloatingFilterParams(i)})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(n=>{n?.refresh&&typeof n.refresh=="function"&&n.refresh(t)})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function hne(e,t){let n=e.colModel.getCol(t);if(!n){Je(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function pne(e){e.menuSvc?.hidePopupMenu()}var gne={moduleName:"SharedMenu",version:W,beans:[pZ],apiFunctions:{showColumnMenu:hne,hidePopupMenu:pne}},fne=0,mne=200,vne=class extends F{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n,column:i,node:s,event:r}=e,o=t.getBoundingClientRect(),a=this.getParentRect();this.setAlignedTo(t,n);let l=!1,c=()=>{let u=this.keepXYWithinBounds(n,o.top-a.top,0),d=n.clientWidth>0?n.clientWidth:200;l||(n.style.minWidth=`${d}px`,l=!0);let p=a.right-a.left-d,g;return this.gos.get("enableRtl")?(g=m(),g<0&&(g=f(),this.setAlignedStyles(n,"left")),g>p&&(g=0,this.setAlignedStyles(n,"right"))):(g=f(),g>p&&(g=m(),this.setAlignedStyles(n,"right")),g<0&&(g=0,this.setAlignedStyles(n,"left"))),{x:g,y:u};function f(){return o.right-a.left-2}function m(){return o.left-a.left-d}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:c,postProcessCallback:()=>this.callPostProcessPopup("subMenu",n,t,r instanceof MouseEvent?r:void 0,i,s)})}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,eventSource:r,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,d=r.getBoundingClientRect(),h=this.getParentRect();this.setAlignedTo(r,t);let p=()=>{let g=d.left-h.left;o==="right"&&(g-=t.offsetWidth-d.width);let f;return a==="over"?(f=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?f=d.top-h.top+d.height:f=d.top-t.offsetHeight-(i||0)*2-h.top),{x:g,y:f}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,updatePosition:p,postProcessCallback:()=>this.callPostProcessPopup(u,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,n,i){let s=n.bottom-t.bottom,r=t.top-n.top,o=e.offsetHeight+i;return s>o?"under":r>o||r>s?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:s}=i;!s||(["right","left","over","above","under"].forEach(o=>{s.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){let n=this.getPopupIndex(t);if(n!==-1){let i=this.popupList[n];i.alignedToElement=e}}callPostProcessPopup(e,t,n,i,s,r){let o=this.gos.getCallback("postProcessPopup");o&&o({column:s,rowNode:r,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:s,skipObserver:r,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(u+=i),s&&(d+=s),n&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){let c=Ia(this.beans,t,()=>l(!0));setTimeout(()=>c(),mne)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){let e=Vt(this.beans),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),MF(t)}keepXYWithinBounds(e,t,n){let i=n===0,s=i?"clientHeight":"clientWidth",r=i?"top":"left",o=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=Vt(this.beans),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),h=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=u===l.body,f=Math.ceil(d[o]),v=g?(i?DF:Rv)(c)+c[a]:u[s];g&&(v-=Math.abs(p[r]-h[r]));let y=v-f;return Math.min(Math.max(t,0),Math.abs(y))}addPopup(e){let t=Vt(this.beans),{eChild:n,ariaLabel:i,alwaysOnTop:s,positionCallback:r,anchorToElement:o}=e;if(!t)return V(122),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!s),c=this.addEventListenersToPopup(R(S({},e),{wrapperEl:l}));return r&&r(),this.addPopupToPopupList(n,l,c,o),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();H(e.style.top)||(e.style.top=`${n.top*-1}px`),H(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n){let i=this.getPopupParent(),s=document.createElement("div"),{environment:r,gos:o}=this.beans;return r.applyThemeClasses(s),s.classList.add("ag-popup"),e.classList.add(o.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||ti(e,"dialog"),Xv(e,t),s.appendChild(e),i.appendChild(s),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged){let t=this.beans.environment;for(let n of this.popupList)t.applyThemeClasses(n.wrapper)}}addEventListenersToPopup(e){let t=this.beans,n=Vt(t),i=this.getPopupParent(),{wrapperEl:s,eChild:r,closedCallback:o,afterGuiAttached:a,closeOnEsc:l,modal:c}=e,u=!1,d=f=>{if(!s.contains(Dt(t)))return;f.key===L.ESCAPE&&!ho(f)&&g({keyboardEvent:f})},h=f=>g({mouseEvent:f}),p=f=>g({touchEvent:f}),g=(f={})=>{let{mouseEvent:m,touchEvent:v,keyboardEvent:y,forceHide:w}=f;!w&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:v},r)||u)||(u=!0,i.removeChild(s),n.removeEventListener("keydown",d),n.removeEventListener("mousedown",h),n.removeEventListener("touchstart",p),n.removeEventListener("contextmenu",h),this.eventSvc.removeEventListener("dragStarted",h),o&&o(m||v||y),this.removePopupFromPopupList(r))};return a&&a({hidePopup:g}),window.setTimeout(()=>{l&&n.addEventListener("keydown",d),c&&(n.addEventListener("mousedown",h),this.eventSvc.addEventListener("dragStarted",h),n.addEventListener("touchstart",p),n.addEventListener("contextmenu",h))},0),g}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:fne++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(r=>r&&r()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,i.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:s}=e,r=i.getBoundingClientRect(),o=d=>parseInt(d.substring(0,d.length-1),10),a=(d,h)=>{let p=n[d]-r[d],g=o(s.style[d]);return{initialDiff:p,lastDiff:p,initial:g,last:g,direction:h}},l=a("top",0),c=a("left",1),u=this.beans.frameworkOverrides;return new ei(d=>{u.wrapIncoming(()=>{u.setInterval(()=>{let h=t.getBoundingClientRect(),p=i.getBoundingClientRect();if(p.top==0&&p.left==0&&p.height==0&&p.width==0){e.hidePopup();return}let f=(m,v)=>{let y=o(s.style[v]);m.last!==y&&(m.initial=y,m.last=y);let w=h[v]-p[v];if(w!=m.lastDiff){let x=this.keepXYWithinBounds(s,m.initial+m.initialDiff-w,m.direction);s.style[v]=`${x}px`,m.last=x}m.lastDiff=w};f(l,"top"),f(c,"left")},200).then(h=>{d(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,s=n||i;if(!s)return!1;let r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){let a=this.popupList[o];if(lY(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){let t=Vt(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,s=this.getWrapper(e);if(!s||i<=1||!t.contains(e))return;let r=[],o=[];for(let h of n)h!==s&&(h.classList.contains("ag-always-on-top")?o.push(h):r.push(h));let a=[],l=o.length,d=s.classList.contains("ag-always-on-top")||!l?[...r,...o,s]:[...r,s,...o];for(let h=0;h<=i;h++){let p=d[h];if(n[h]===d[h]||p===s)continue;p.querySelectorAll("div").forEach(f=>{f.scrollTop!==0&&a.push([f,f.scrollTop])}),h===0?t.insertAdjacentElement("afterbegin",p):d[h-1].insertAdjacentElement("afterend",p)}for(;a.length;){let h=a.pop();h[0].scrollTop=h[1]}}},iy={moduleName:"Popup",version:W,beans:[vne]},yne=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-set-floating-filter-input [disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function Cne(e){let t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function wne(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function bne(e,t){let n=e.colModel.getColDefCol(t);if(n)return e.filterManager?.destroyFilter(n,"api")}function Sne(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function xne(e){return e.filterManager?.getFilterModel()??{}}function Dne(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function Mne(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function Ene(e,t){let n=e.colModel.getCol(t);if(!n){Je(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}var tF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},nF=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ine(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}var Ane=class extends F{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:({params:e})=>{(e.rowDataUpdated||e.changedProps?.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=S({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){let{colModel:n,dataTypeSvc:i,filterManager:s}=this.beans;if(i?.isPendingInference){this.filterModelUpdateQueue.push({model:e,source:t});return}let r=[],o=this.getFilterModel(!0);if(e){let a=new Set(Object.keys(e));this.allColumnFilters.forEach((l,c)=>{let u=e[c];r.push(bv(l.filterPromise,u)),a.delete(c)}),a.forEach(l=>{let c=n.getColDefCol(l)||n.getCol(l);if(!c){V(62,{colId:l});return}if(!c.isFilterAllowed()){V(63,{colId:l});return}let u=this.getOrCreateFilterWrapper(c);if(!u){V(64,{colId:l});return}r.push(bv(u.filterPromise,e[l]))})}else this.allColumnFilters.forEach(a=>{r.push(bv(a.filterPromise,null))});ei.all(r).then(()=>{let a=this.getFilterModel(!0),l=[];this.allColumnFilters.forEach((c,u)=>{let d=o?o[u]:null,h=a?a[u]:null;Kh(d,h)||l.push(c.column)}),l.length>0&&s?.onFilterChanged({columns:l,source:t})})}getFilterModel(e){let t={},{allColumnFilters:n,initialFilterModel:i,beans:{colModel:s}}=this;if(n.forEach((r,o)=>{let a=this.getModelFromFilterWrapper(r);H(a)&&(t[o]=a)}),!e)for(let r of Object.keys(i)){let o=i[r];H(o)&&!n.has(r)&&s.getCol(r)?.isFilterAllowed()&&(t[r]=o)}return t}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(V(66),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){let{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=a=>a?a.isFilterActive?a.isFilterActive():(V(67),!1):!1,{colModel:t,gos:n}=this.beans,i=!!Hx(n),s=a=>{if(!a.isPrimary())return!0;let c=!t.isPivotActive();return!a.isValueActive()||!c?!1:t.isPivotMode()?!0:i},r=[],o=[];return this.forEachColumnFilter((a,l)=>{e(a)&&(s(l.column)?r.push(a):o.push(a))}).then(()=>{this.activeAggregateFilters=r,this.activeColumnFilters=o})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((n,i)=>this.setColFilterActive(i.column,n.isFilterActive(),e,t))}forEachColumnFilter(e){let t=[];return this.allColumnFilters.forEach(n=>{let i=n.filterPromise;i&&t.push(i.then(s=>e(s,n)))}),ei.all(t)}doColumnFiltersPass(e,t,n){let{data:i,aggData:s}=e,r=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?s:i;for(let a=0;a<r.length;a++){let l=r[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function"){Je(91);continue}if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let{rowRenderer:t,filterManager:n}=this.beans,i=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:n}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(s=>{s&&s!==t&&s.onAnyFilterChanged&&s.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded?.()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e){let{filterValueSvc:t,colModel:n}=this.beans;return(i,s)=>{let r=s?n.getCol(s):e;return r?t.getValue(r,i):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t,{gos:n,dataTypeSvc:i}=this.beans;if(cx(n))t="agSetColumnFilter";else{let s=i?.getBaseDataType(e);s==="number"?t="agNumberColumnFilter":s==="date"||s==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t,{gos:n,dataTypeSvc:i}=this.beans;if(cx(n))t="agSetColumnFloatingFilter";else{let s=i?.getBaseDataType(e);s==="number"?t="agNumberColumnFloatingFilter":s==="date"||s==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let n=this.getDefaultFilter(e),i=e.getColDef(),s,r=R(S({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(s,e)(a),doesRowPassOtherFilter:a=>this.beans.filterManager?.doesRowPassOtherFilters(s,a)??!0}),o=vK(this.beans.userCompFactory,i,r,n);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a.then(l=>{s=l,t&&(t.filter=l??void 0)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return fe(this.gos,{column:e,colDef:t,rowModel:this.beans.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compDetails:null},{filterPromise:n,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=n?.()??null,t.compDetails=i,t}onColumnsChanged(){let e=[],{colModel:t,filterManager:n}=this.beans;this.allColumnFilters.forEach((s,r)=>{let o;s.column.isPrimary()?o=t.getColDefCol(r):o=t.getCol(r),!(o&&o===s.column)&&(e.push(s.column),this.disposeFilterWrapper(s,"columnChanged"),this.disposeColumnListener(r))});let i=e.every(iF);e.length>0&&!i?n?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.beans.autoColSvc?.getColumns()?.forEach(e=>{iF(e)&&this.getOrCreateFilterWrapper(e)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:n}=this.allColumnFilters.get(e.getColId())??{};return n&&typeof n?.isFilterAllowed=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let n=u=>{let d=this.getOrCreateFilterWrapper(e)?.filterPromise;d?.then(h=>{u(Jh(h))})},i=e.getColDef(),s=R(S({},this.createFilterParams(e,i)),{filterChangedCallback:()=>n(u=>this.filterChangedCallbackFactory(u,e)())}),{userCompFactory:r,frameworkOverrides:o}=this.beans,a=DK(r,i,s),l=bq(o,i,()=>this.getDefaultFloatingFilter(e));l==null&&(l="agReadOnlyFloatingFilter");let c=fe(this.gos,{column:e,filterParams:a,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t});return SK(r,i,c,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&this.disposeFilterWrapper(i,t).then(s=>{s&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){return e.filterPromise?.then(n=>{let i=!!n?.isFilterActive();return this.destroyBean(n),this.setColFilterActive(e.column,!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:e.column}),i})??ei.resolve(!1)}filterModifiedCallbackFactory(e,t){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return n=>{let i=n?.source??"columnFilter",s={filter:e,additionalEventAttributes:n,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let n=t.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(n,"paramsUpdated");return}let s=n.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(n,"paramsUpdated");return}t.filterPromise.then(r=>{(r?.refresh?r.refresh(S(R(S({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(r,n),filterChangedCallback:this.filterChangedCallbackFactory(r,n),doesRowPassOtherFilter:a=>this.beans.filterManager?.doesRowPassOtherFilters(r,a)??!0}),s)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(n=>{t(Jh(n))})})}getFilterInstanceImpl(e){let t=this.beans.colModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??ei.resolve(null):ei.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:n})=>{this.setColumnFilterModel(e,t).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){let{colModel:n,dataTypeSvc:i}=this.beans;if(i?.isPendingInference){let a=()=>{},l=new Promise(c=>{a=c});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:a}),l}let s=n.getColDefCol(e),r=s?this.getOrCreateFilterWrapper(s):null;return r?(a=>new Promise(l=>{a.then(c=>l(c))}))(bv(r.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.beans.colModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,n){let i=cx(this.gos),s=this.getLocaleTextFunc(),r=o=>{let{filterParams:a}=e;e.filterParams=typeof a=="object"?S(S({},a),o):o};switch(t.baseDataType){case"number":{i&&r({comparator:Ine});break}case"boolean":{r(i?{valueFormatter:o=>H(o.value)?s(String(o.value),o.value?"True":"False"):s("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(o,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(o,a)=>a===!1,numberOfInputs:0}]});break}case"date":{r(i?{valueFormatter:o=>{let a=n(o);return H(a)?a:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:(o,a)=>{if(o==="NaN")return s("invalidDate","Invalid Date");if(a===1&&o!=null){let l=nF[Number(o)-1];return s(l,tF[l])}return o??s("blanks","(Blanks)")}}:{isValidDate:sF});break}case"dateString":{let o=t.dateParser;r(i?{valueFormatter:a=>{let l=n(a);return H(l)?l:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{let l=o(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){let c=nF[Number(a)-1];return s(c,tF[c])}return a??s("blanks","(Blanks)")}}:{comparator:(a,l)=>{let c=o(l);return l==null||c<a?-1:c>a?1:0},isValidDate:a=>typeof a=="string"&&sF(o(a))});break}case"object":{i?r({valueFormatter:o=>{let a=n(o);return H(a)?a:s("blanks","(Blanks)")}}):e.filterValueGetter=o=>n({column:o.column,node:o.node,value:this.beans.valueSvc.getValue(o.column,o.node)});break}}}setColFilterActive(e,t,n,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,i)}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function bv(e,t){return e?new ei(n=>{e.then(i=>{typeof i.setModel!="function"&&(V(65),n()),(i.setModel(t)||ei.resolve()).then(()=>n())})}):ei.resolve()}function iF(e){return e.getColDef().filter==="agGroupColumnFilter"}function sF(e){return e instanceof Date&&!isNaN(e.getTime())}function Rne(e){return!!e.filterManager?.isAnyFilterPresent()}function Tne(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var kne=class extends F{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});let{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){this.warnAdvFilters();return}this.colFilter?.setFilterModel(e,t)}getFilterModel(){return this.colFilter?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.colFilter?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggregateFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){Hx(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):ei.resolve()).then(()=>{let s={source:t,type:"filterChanged",columns:i};n&&wi(s,n),this.eventSvc.dispatchEvent(s),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Hx(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(t,e.filterInstanceToSkip))}doesRowPassFilter(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(t,e.filterInstanceToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterActive(e){return!!this.colFilter?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.colFilter?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.colFilter.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.colFilter.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.colFilter?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.colFilter?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.colFilter?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.colFilter?.areFilterCompsDifferent(e,t)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){V(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.colFilter?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,n){this.colFilter?.setColDefPropertiesForDataType(e,t,n)}},Lne=class extends F{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,i){this.showPopup(e,s=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:s})},n,t.target,ji(this.gos),i)}showMenuAfterButtonClick(e,t,n,i){let s=-1,r="left",o=ji(this.gos);!o&&this.gos.get("enableRtl")&&(s=1,r="right");let a=o?void 0:4*s,l=o?void 0:4;this.showPopup(e,c=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:r,keepWithinBounds:!0,position:"under",column:e})},n,t,o,i)}showPopup(e,t,n,i,s,r){let o=e?this.createBean(new mq(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e){Je(57);return}let a=document.createElement("div");ti(a,"presentation"),a.classList.add("ag-menu"),s||a.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(a,{keydown:f=>this.trapFocusWithin(f,a)}),a.appendChild(o?.getGui());let l,c=()=>o?.afterGuiDetached(),u=rY(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,d=f=>{BP(e,!1,"contextMenu");let m=f instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),m&&i&&Us(i)&&yN(i)?.focus({preventScroll:!0}),c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),r?.()},h=this.getLocaleTextFunc(),p=s&&n!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),g=this.popupSvc?.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(a),anchorToElement:u,ariaLabel:p});g&&(this.hidePopup=l=g.hideFunc),o.afterInit().then(()=>{t(a),o.afterGuiAttached({container:n,hidePopup:l})}),BP(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==L.TAB||e.defaultPrevented||Hl(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),Vl(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Pne=class extends F{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t){if(!t)return;let n=e.getColDef(),{filterValueGetter:i}=n;return i?this.executeFilterValueGetter(i,t.data,e,t,n):this.beans.valueSvc.getValue(e,t)}executeFilterValueGetter(e,t,n,i,s){let{expressionSvc:r,valueSvc:o}=this.beans,a=fe(this.gos,{data:t,node:i,column:n,colDef:s,getValue:o.getValueCallback.bind(o,i)});return typeof e=="function"?e(a):r?.evaluate(e,a)}},Fne=class extends Ye{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[ey]),this.eFloatingFilterText=U}init(e){this.params=e;let t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},SO=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}mapCustomOptions(){let{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t=="string")return;let n=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(r=>t[r]!=null)?!0:(V(72,{keys:s}),!1);if(!n.every(i)){this.filterOptions=e.filter(s=>s===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(e){let{filterOptions:t}=this;if(e.defaultOption)this.defaultOption=e.defaultOption;else if(t.length>=1){let n=t[0];typeof n=="string"?this.defaultOption=n:n.displayKey?this.defaultOption=n.displayKey:V(73)}else V(74)}getCustomOption(e){return this.customFilterOptions[e]}};function jh(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function Zv(e){return e==null||typeof e=="string"&&e.trim().length===0}function Nne(e){return e==="AND"||e==="OR"?e:"AND"}function One(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(s=>s==null))return i(t,n)}function _ne(e,t){let n=e.length;return n>t&&(e.splice(t),V(78),n=t),n}var xO=class extends wq{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{let i=n===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){let{eJoinOperatorsOr:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let r;if(n){let o=e,a=t;r=this.areSimpleModelsEqual(o,a)}else{let o=e,a=t;r=o.operator===a.operator&&zl(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}shouldRefresh(e){let t=this.getModel(),n=t?t.conditions??[t]:null,i=e.filterOptions?.map(r=>typeof r=="string"?r:r.displayKey)??this.getDefaultFilterOptions();return!(!(!n||n.every(r=>i.find(o=>o===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let n=e,i=n.conditions;i==null&&(i=[],V(77));let s=_ne(i,this.maxNumConditions),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let a=r;a<s;a++)this.createJoinOperatorPanel(),this.createOption();let o=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),ei.resolve()}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:n}=t,i=[];if(n){let r=t;i.push(...r.conditions??[])}else i.push(t);return i[n&&n==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=Nne(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new SO,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(V(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(V(80),n=1),n>t&&(V(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){let e=this.createManagedBean(new PD);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(e,n)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new RZ);e.push(i);let s="ag-filter-condition-operator";return i.addCssClass(s),i.addCssClass(`${s}-${n}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){let{filterListOptions:t}=this;t.forEach(n=>{e.addOption(n)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,s=n-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,s)=>{let r=this.isConditionDisabled(s,e);i.setDisabled(r||this.filterListOptions.length<=1),s===1&&(Uh(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((i,s)=>{xt(i,this.isConditionBodyVisible(s))});let n=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,s,r,o)=>{this.setElementDisplayed(i,s<o),this.setElementDisabled(i,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;let{eTypes:n,eConditionBodies:i,eJoinOperatorPanels:s,eJoinOperatorsAnd:r,eJoinOperatorsOr:o}=this;this.removeComponents(n,e,t),this.removeElements(i,e,t),this.removeValueElements(e,t);let a=Math.max(e-1,0);this.removeElements(s,a,t),this.removeComponents(r,a,t),this.removeComponents(o,a,t)}removeElements(e,t,n){jh(e,t,n).forEach(s=>cs(s))}removeComponents(e,t,n){jh(e,t,n).forEach(s=>{cs(s.getGui()),this.destroyBean(s)})}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let{eFilterBody:t,eTypes:n}=this,i;if(!this.isReadOnly()){let s=this.getInputs(0)[0];s instanceof Rl&&this.isConditionBodyVisible(0)?i=s.getInputElement():i=n[0]?.getFocusableElement()}(i??t).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,i=!1,s=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,n=o);else{let a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<t;(a||l)&&(this.removeConditionsAndOperators(o,1),i=!0,l&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(typeof this.filterPlaceholder=="function"){let i=this.eTypes[t].getValue(),s=this.translate(i);n=this.filterPlaceholder({filterOptionKey:i,filterOption:s,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.getLocaleTextFunc();this.forEachInput((t,n,i,s)=>{if(!(t instanceof Rl))return;let r=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",o=n===0&&s>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,i)),t.setInputAriaLabel(o)})}setElementValue(e,t,n){e instanceof Rl&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Ye&&xt(e.getGui(),t)}setElementDisabled(e,t){e instanceof Ye&&Uh(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Rl&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=this.getNumberOfInputs(t),s=this.getInputs(e);for(let r=0;r<s.length;r++){let o=s[r];o!=null&&n(o,r,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),ei.resolve()}resetType(e){let n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),t)}updateJoinOperatorsDisabled(){let e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinOperatorsAnd.forEach(e),this.eJoinOperatorsOr.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e);this.forEachInput((i,s,r)=>{r===t&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(e,t){let n=this.getCellValue(e.node),i=this.mapValuesFromModel(t),s=this.optionsFactory.getCustomOption(t.type),r=One(s,i,n);return r??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e))}hasInvalidInputs(){return!1}},DO=class extends xO{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){let{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:s,includeBlanksInRange:r}=this.scalarFilterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(s)return!0;break;case"inRange":if(r)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=n.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";let s=this.comparator(),r=e[0]!=null?s(e[0],t):0;switch(i){case"equals":return r===0;case"notEqual":return r!==0;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{let o=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?r>=0&&o<=0:r>0&&o<0}case"blank":return Zv(t);case"notBlank":return!Zv(t);default:return V(76,{filterModelType:i}),!0}}},MO=class{constructor(e,t,n,i,s){this.alive=!0,this.context=e,this.eParent=i;let r=yK(t,n);r&&r.newAgStackInstance().then(o=>{if(!this.alive){e.destroyBean(o);return}if(this.dateComp=o,!o)return;i.appendChild(o.getGui()),o?.afterGuiAttached?.();let{tempValue:a,disabled:l}=this;a&&o.setDate(a),l!=null&&o.setDisabled?.(l),s?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){let t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){let t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){xt(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},EO=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],GD=class{constructor(e,t,n){this.getLocaleTextFunc=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;let t=e.operator!=null,n=this.getLocaleTextFunc();if(t){let i=e,r=(i.conditions??[]).map(a=>this.getModelAsString(a)),o=i.operator==="AND"?"andCondition":"orCondition";return r.join(` ${n(o,RN[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return n(e.type,e.type);{let i=e,s=this.optionsFactory.getCustomOption(i.type),{displayKey:r,displayName:o,numberOfInputs:a}=s||{};return r&&o&&a===0?(n(r,o),o):this.conditionToString(i,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){let t=this.valueFormatter;return t?t(e??null)??"":String(e)}},IO=class extends GD{constructor(e,t,n){super(t,n),this.dateFilterParams=e}conditionToString(e,t){let{type:n}=e,{numberOfInputs:i}=t||{},s=n=="inRange"||i===2,r=Ci(e.dateFrom),o=Ci(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){let l=r!==null?zh(r,a):"null",c=o!==null?zh(o,a):"null";return`${l}-${c}`}return r!=null?zh(r,a):`${n}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},rF=1e3,oF=1/0,Bne=class extends DO{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=rF,this.maxValidYear=oF,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:n,type:i}=e||{};return[t&&Ci(t)||null,n&&Ci(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator??Vne}isValid(e){let t=this.dateFilterParams.isValidDate;return!t||t(e)}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(n,i)=>{if(e[n]!=null)if(isNaN(e[n]))V(82,{param:n});else return e[n]==null?i:Number(e[n]);return i};this.minValidYear=t("minValidYear",rF),this.maxValidYear=t("maxValidYear",oF),this.minValidYear>this.maxValidYear&&V(83),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:Ci(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:Ci(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&V(84),this.filterModelFormatter=new IO(this.dateFilterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory)}createDateCompWrapper(e){let{userCompFactory:t,context:n,gos:i}=this.beans,s=new MO(n,t,fe(i,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams,location:"filter"}),e);return this.addDestroyFunc(()=>s.destroy()),s}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return EO}createValueElement(){let t=Vt(this.beans).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,n,i){let r=Vt(this.beans).createElement("div");r.classList.add(`ag-filter-${i}`),r.classList.add(`ag-filter-date-${i}`),t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),jh(this.eConditionPanelsFrom,e,t),jh(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){jh(e,t,n).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;let{minValidDate:t,maxValidDate:n,minValidYear:i,maxValidYear:s}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>s)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,s,r)=>{s!==e||!t||i>=r||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=ps(i[0])),i.length>1&&(n.dateTo=ps(i[1])),S({dateFrom:null,dateTo:null,filterType:this.filterType,type:t},n)}resetPlaceholder(){let e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){let{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function Vne(e,t){let n=t;return n<e?-1:n>e?1:0}var AO=class extends Ye{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){let n=new SO;this.optionsFactory=n,n.init(e.filterParams,this.getDefaultOptions());let i=n.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;let s=this.isTypeEditable(i);this.setEditable(s)}refresh(e){this.setSimpleParams(e)}hasSingleInput(e){let t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Gne=class extends AO{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[ey]),this.eReadOnlyText=U,this.eDateWrapper=U}getDefaultOptions(){return EO}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new IO(this.filterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory);let t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.dateComp.updateParams(this.getDateComponentParams()),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){let n=e?Ci(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){xt(this.eDateWrapper,e),xt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=ps(e);this.params.parentFilterInstance(n=>{if(n){let i=Ci(t);n.onFloatingFilterChanged(this.lastType||null,i)}})}getDateComponentParams(){let{filterParams:e,column:t}=this.params,n=bD(e,this.defaultDebounceMs);return fe(this.gos,{onDateChanged:An(this,this.onDateChanged.bind(this),n),filterParams:t.getColDef().filterParams,location:"floatingFilter"})}createDateComponent(){let{beans:{context:e,userCompFactory:t},eDateWrapper:n}=this;this.dateComp=new MO(e,t,this.getDateComponentParams(),n,i=>{i.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},zne=class extends Ye{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[ey]),this.eDateInput=U,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e,t){if(t.target===Dt(this.beans)&&!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Ea(),t.type=n?"date":"text";let{minValidYear:i,maxValidYear:s,minValidDate:r,maxValidDate:o,buttons:a}=e.filterParams||{};if(r&&i&&V(85),o&&s&&V(86),r&&o){let[l,c]=[r,o].map(u=>u instanceof Date?u:Ci(u));l&&c&&l.getTime()>c.getTime()&&V(87)}r?r instanceof Date?t.min=zh(r):t.min=r:i&&(t.min=`${i}-01-01`),o?o instanceof Date?t.max=zh(o):t.max=o:s&&(t.max=`${s}-12-31`),this.isApply=e.location==="floatingFilter"&&!!a?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return Ci(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(ps(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},RO=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],TO=class extends GD{conditionToString(e,t){let{numberOfInputs:n}=t||{},{filter:i,filterTo:s,type:r}=e,o=r=="inRange"||n===2,a=this.formatValue.bind(this);return o?`${a(i)}-${a(s)}`:i!=null?a(i):`${r}`}};function rD(e){let{allowedCharPattern:t}=e??{};return t??null}var Hne=class extends DO{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[this.processValue(t),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new TO(this.getLocaleTextFunc.bind(this),this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return RO}setElementValue(e,t,n){let{numberFormatter:i}=this.numberFilterParams,s=!n&&i?i(t??null):t;super.setElementValue(e,s)}createValueElement(){let e=rD(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),ti(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){let s=this.createManagedBean(i?new jl({allowedCharPattern:i}):new LD);s.addCssClass(`ag-filter-${n}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){let n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(this.processValue(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=uo(e);t!=null&&t.trim()===""&&(t=null);let n=this.numberFilterParams.numberParser;return n?n(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},kO=class extends F{constructor(e){super(),this.params=e,this.eInput=U,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new jl(this.params?.config));let t=this.eInput.getGui();e.appendChild(t);let n=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){let{eInput:n}=this;n.setInputAriaLabel(e),t!==void 0&&n.setAutoComplete(t)}};function LO(e){let t=e?.trim();return t===""?e:t}var PO=class extends AO{constructor(){super(...arguments),this.eFloatingFilterInputContainer=U,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:i,readOnly:s}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=$v(e.filterParams),!s){let r=bD(e.filterParams,i),o=An(this,this.syncUpWithParentFilter.bind(this),r);n.setValueChangedListener(o)}}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let{inputSvc:t}=this,n=t.getValue();_n(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){let t=e.key===L.ENTER;if(this.applyActive&&!t)return;let{inputSvc:n,params:i}=this,s=n.getValue();i.filterParams.trimInput&&(s=LO(s),n.setValue(s,!0)),i.parentFilterInstance(r=>{r?.onFloatingFilterChanged(this.lastType||null,s||null)})}setEditable(e){this.inputSvc.setEditable(e)}},jne=class extends F{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new LD),this.eTextInput=this.createManagedBean(new jl),this.eTextInput.setDisabled(!0);let t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},Wne=class extends PO{init(e){super.init(e),this.filterModelFormatter=new TO(this.getLocaleTextFunc.bind(this),this.optionsFactory,e.filterParams?.numberFormatter)}refresh(e){rD(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return RO}createFloatingFilterInputService(e){return this.allowedCharPattern=rD(e.filterParams),this.allowedCharPattern?this.createManagedBean(new kO({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new jne)}},FO=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],NO=class extends GD{conditionToString(e,t){let{numberOfInputs:n}=t||{},{filter:i,filterTo:s,type:r}=e;return r=="inRange"||n===2?`${i}-${s}`:i!=null?`${i}`:`${r}`}},Une=class extends xO{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=e.textMatcher||this.defaultMatcher,this.formatter=e.textFormatter||(e.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new NO(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let n=[];return this.forEachPositionInput(e,(i,s,r,o)=>{if(s<o){let a=uo(i.getValue());t&&this.textFilterParams.trimInput&&(a=LO(a)??null,i.setValue(a,!0)),n.push(a)}}),n}getDefaultFilterOptions(){return FO}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),ti(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new jl);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){let n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let s=e.map(h=>this.formatter(h))||[],r=this.formatter(t),{api:o,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(n.type==="blank")return Zv(t);if(n.type==="notBlank")return!Zv(t);let d={api:o,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:r,textFormatter:u};return s.some(h=>this.matcher(R(S({},d),{filterText:h})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},$ne=class extends PO{init(e){super.init(e),this.filterModelFormatter=new NO(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return FO}createFloatingFilterInputService(){return this.createManagedBean(new kO)}};function Yne(e){return!!e.quickFilter?.isFilterPresent()}function Kne(e){return e.quickFilter?.getText()}function qne(e){e.quickFilter?.resetCache()}var Zne=class extends F{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){let e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){let{autoColSvc:e,colModel:t,gos:n,pivotResultCols:i}=this.beans,s=t.isPivotMode(),r=e?.getColumns(),o=t.getColDefCols(),a=(s&&!n.get("applyQuickFilterBeforePivotOrAgg")?i?.getPivotResultCols()?.list:o)??[];r&&(a=a.concat(r)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?a:a.filter(l=>l.isVisible()||l.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return H(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){V(70,{newFilter:e});return}let t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{let i=this.getTextForColumn(n,e);return H(i)&&i.indexOf(t)>=0})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);let{quickFilterParts:i,matcher:s}=this;return s(i,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t),i=e.getColDef();if(i.getQuickFilterText){let s=fe(this.gos,{value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(s)}return H(n)?n.toString().toUpperCase():null}getAggText(e){let t=[];return this.colsToUse.forEach(n=>{let i=this.getTextForColumn(n,e);H(i)&&t.push(i)}),t.join(`
`)}},Xne={moduleName:"ClientSideRowModelFilter",version:W,rowModels:["clientSide"],beans:[une]},zD={moduleName:"FilterCore",version:W,beans:[kne],apiFunctions:{isAnyFilterPresent:Rne,onFilterChanged:Tne},css:[yne],dependsOn:[Xne]},OO={moduleName:"FilterValue",version:W,beans:[Pne]},sy={moduleName:"ColumnFilter",version:W,beans:[Ane,Lne],dynamicBeans:{headerFilterCellCtrl:dne},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:Cne,getColumnFilterInstance:wne,destroyFilter:bne,setFilterModel:Sne,getFilterModel:xne,getColumnFilterModel:Dne,setColumnFilterModel:Mne,showColumnFilter:Ene},dependsOn:[zD,iy,OO,gne]},Qne={moduleName:"CustomFilter",version:W,userComponents:{agReadOnlyFloatingFilter:Fne},dependsOn:[sy]},Jne={moduleName:"TextFilter",version:W,dependsOn:[sy],userComponents:{agTextColumnFilter:Une,agTextColumnFloatingFilter:$ne}},eie={moduleName:"NumberFilter",version:W,dependsOn:[sy],userComponents:{agNumberColumnFilter:Hne,agNumberColumnFloatingFilter:Wne}},tie={moduleName:"DateFilter",version:W,dependsOn:[sy],userComponents:{agDateColumnFilter:Bne,agDateInput:zne,agDateColumnFloatingFilter:Gne}},nie={moduleName:"QuickFilterCore",version:W,rowModels:["clientSide"],beans:[Zne],dependsOn:[zD,OO]},iie={moduleName:"QuickFilter",version:W,apiFunctions:{isQuickFilterPresent:Yne,getQuickFilter:Kne,resetQuickFilter:qne},dependsOn:[nie]},sie={moduleName:"ExternalFilter",version:W,dependsOn:[zD]},Oh=class{constructor(e){this.cellValueChanges=e}},Tx=class extends Oh{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},rie=10,aF=class{constructor(e){this.actionStack=[],this.maxStackSize=e||rie,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},oie=class extends F{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&Yx(this.activeCellEdit,t),i=this.activeRowEdit!==null&&cq(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:r,rowIndex:o,column:a,oldValue:l,value:c}=e,u={rowPinned:r,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){let{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;let n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new aF(n),this.redoStack=new aF(n),this.addListeners();let i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:s=>{s.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,s=>{this.gridBodyCtrl=s.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){let{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});let s=this.undoRedo(n,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:s})}redo(e){let{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});let s=this.undoRedo(i,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:s})}undoRedo(e,t,n,i,s){if(!e)return!1;let r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[i],s),r instanceof Tx?this.processRange(r.ranges||[r[n]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{let{rowIndex:s,rowPinned:r,columnId:o}=i,a={rowIndex:s,rowPinned:r},l=Uv(this.beans,a);l.displayed&&l.setDataValue(o,t(i),n)})}processRange(e){let t,n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((i,s)=>{if(!i)return;let r=i.startRow,o=i.endRow;s===e.length-1&&(t={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));let a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};n.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,s={rowIndex:n,rowPinned:i},r=Uv(this.beans,s),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o)}setLastFocusedCell(e){let{rowIndex:t,columnId:n,rowPinned:i}=e,{colModel:s,focusSvc:r,rangeSvc:o}=this.beans,a=s.getCol(n);if(!a)return;let{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);let c={rowIndex:t,column:a,rowPinned:i};r.setFocusedCell(R(S({},c),{forceBrowserFocus:!0})),o?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new Oh(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new Oh(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new Oh(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new Tx(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e,{rangeSvc:t,gos:n}=this.beans;t&&fo(n)?e=new Tx(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Oh(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},aie=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;width:100%}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}",lie=class extends Nu{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[kD]),this.eCheckbox=U}init(e){this.params=e;let t=e.value??void 0,n=this.eCheckbox;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.getLocaleTextFunc(),n=cD(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}},ry=class extends Nu{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=U}init(e){this.params=e;let{cellStartedEdit:t,eventKey:n,suppressPreventDefault:i}=e,s=this.eInput;this.cellEditorInput.init(s,e);let r,o=!0;t?(this.focusAfterAttached=!0,n===L.BACKSPACE||n===L.DELETE?r="":n&&n.length===1?i?o=!1:r=n:(r=this.cellEditorInput.getStartValue(),n!==L.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=this.cellEditorInput.getStartValue()),o&&r!=null&&s.setStartValue(r),this.addManagedElementListeners(s.getGui(),{keydown:a=>{let{key:l}=a;(l===L.PAGE_UP||l===L.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){let e=this.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ea()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},cie=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[HN]}init(e,t){this.eInput=e,this.params=t;let{min:n,max:i,step:s}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),s!=null&&e.setStep(s)}getValue(){let{eInput:e,params:t}=this,n=e.getDate();return!H(n)&&!H(t.value)?t.value:n??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return ps(e,!1)}},uie=class extends ry{constructor(){super(new cie)}},die=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[HN]}init(e,t){this.eInput=e,this.params=t;let{min:n,max:i,step:s}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),s!=null&&e.setStep(s)}getValue(){let{params:e,eInput:t}=this,n=this.formatDate(t.getDate());return!H(n)&&!H(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return ps(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Ci(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):ps(e??null,!1)??void 0}},hie=class extends ry{constructor(){super(new die(()=>this.beans.dataTypeSvc))}},pie=class extends Nu{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[kZ]),this.eTextArea=U}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),e.value!=null&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===L.LEFT||t===L.UP||t===L.RIGHT||t===L.DOWN||e.shiftKey&&t===L.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue(),t=this.params;return!H(e)&&!H(t.value)?t.value:t.parseValue(e)}},gie=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[LZ]}init(e,t){this.eInput=e,this.params=t;let{max:n,min:i,precision:s,step:r}=t;n!=null&&e.setMax(n),i!=null&&e.setMin(i),s!=null&&e.setPrecision(s),r!=null&&e.setStep(r);let o=e.getInputElement();t.preventStepping?e.addManagedElementListeners(o,{keydown:this.preventStepping}):t.showStepperButtons&&o.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===L.UP||e.key===L.DOWN)&&e.preventDefault()}getValue(){let{eInput:e,params:t}=this,n=e.getValue();if(!H(n)&&!H(t.value))return t.value;let i=t.parseValue(n);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){Ea()&&this.eInput.getInputElement().focus({preventScroll:!0})}},fie=class extends ry{constructor(){super(new gie)}},mie=class extends Nu{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[HZ]),this.eSelect=U,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueSvc:n,gos:i}=this,{values:s,value:r,eventKey:o}=e;if(yt(s)){V(58);return}this.startedByEnter=o!=null?o===L.ENTER:!1;let a=!1;s.forEach(d=>{let h={value:d},p=n.formatValue(e.column,null,d),g=p!=null;h.text=g?p:d,t.addOption(h),a=a||r===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},vie=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[ey]}init(e,t){this.eInput=e,this.params=t;let n=t.maxLength;n!=null&&e.setMaxLength(n)}getValue(){let{eInput:e,params:t}=this,n=e.getValue();return!H(n)&&!H(t.value)?t.value:t.parseValue(n)}getStartValue(){let e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){let e=this.eInput,t=e.getValue(),n=H(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},lF=class extends ry{constructor(){super(new vie)}};function yie(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function Cie(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function _O(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function BO(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function wie(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function bie(e){e.undoRedo?.undo("api")}function Sie(e){e.undoRedo?.redo("api")}function xie(e,t={}){let n=[];return e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(i=>{let s=i.comp?.getCellEditor();s&&n.push(Jh(s))}),n}function Die(e){let t=[];return e.rowRenderer.getAllCellCtrls().forEach(n=>{if(n.editing){let{cellPosition:i}=n;t.push(i)}}),t}function Mie(e,t=!1){e.editSvc?.stopAllEditing(t)}function Eie(e,t){let n=e.colModel.getCol(t.colKey);if(!n){V(12,{colKey:t.colKey});return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:n};t.rowPinned==null&&BO(e,t.rowIndex),_O(e,t.colKey);let r=mu(e,i);if(!r)return;let{focusSvc:o,gos:a,editSvc:l}=e,c=()=>{let d=Dt(e),h=r.eGui;return d!==h&&!!h?.contains(d)},u=a.get("stopEditingWhenCellsLoseFocus")&&c();(u||!o.isCellFocused(i))&&o.setFocusedCell(R(S({},i),{forceBrowserFocus:u,preventScrollOnBrowserFocus:!0})),l?.startRowOrCellEdit(r,t.key)}function Iie(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function Aie(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var Rie=class extends Nu{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Bl(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{qx(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},Tie=class extends F{constructor(){super(...arguments),this.beanName="editSvc"}startEditing(e,t=null,n=!1,i=null){if(!e.isCellEditable()||e.editing)return!0;if(!e.comp)return e.onCompAttachedFuncs.push(()=>{this.startEditing(e,t,n,i)}),!0;let s=this.createCellEditorParams(e,t,n),r=e.column.getColDef(),o=LP(this.beans.userCompFactory,r,s),a=o?.popupFromSelector!=null?o.popupFromSelector:!!r.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;return cF(e,!0,o),e.comp.setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents")),this.eventSvc.dispatchEvent(e.createEvent(i,"cellEditingStarted")),!o?.params?.suppressPreventDefault}stopEditing(e,t=!1){if(e.onEditorAttachedFuncs=[],!e.editing)return!1;let{comp:n,column:i,rowNode:s}=e,{newValue:r,newValueExists:o}=kie(t,n),a=this.beans.valueSvc.getValueForDisplay(i,s),l=!1;return o&&(l=Lie(e,a,r,s,i)),cF(e,!1,void 0),n.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventSvc.dispatchEvent(R(S({},e.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:r,valueChanged:l})),l}handleColDefChanged(e){let t=e.comp?.getCellEditor();if(t?.refresh){let{eventKey:n,cellStartedEdit:i}=e.editCompDetails.params,s=this.createCellEditorParams(e,n,i),r=e.column.getColDef(),o=LP(this.beans.userCompFactory,r,s);t.refresh(o.params)}}setFocusOutOnEditor(e){if(!e.editing)return;let t=e.comp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){if(!e.editing)return;let t=e.comp,n=t.getCellEditor();n?.focusIn?n.focusIn():(e.focusCell(!0),e.onEditorAttachedFuncs.push(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,n=!1){this.stopRowOrCellEdit(e),e.focusCell(!0),t||this.navigateAfterEdit(n,e.cellPosition)}createPopupEditorWrapper(e){return new Rie(e)}stopAllEditing(e=!1){this.beans.rowRenderer.getAllRowCtrls().forEach(t=>this.stopRowEditing(t,e))}stopRowEditing(e,t=!1){if(e.stoppingRowEdit)return;let n=e.getAllCellCtrls(),i=e.editing;e.stoppingRowEdit=!0;let s=!1;for(let r of n){let o=r.stopEditing(t);i&&!t&&!s&&o&&(s=!0)}s&&this.eventSvc.dispatchEvent(e.createRowEvent("rowValueChanged")),i&&this.beans.rowEditSvc?.setEditing(e,!1),e.stoppingRowEdit=!1}addStopEditingWhenGridLosesFocus(e){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let t=n=>{let i=n.relatedTarget;if(_x(i)===null){this.stopAllEditing();return}let s=e.some(r=>r.contains(i))&&SN(this.gos,i);if(!s){let r=this.beans.popupSvc;s=!!r&&(r.getActivePopups().some(o=>o.contains(i))||r.isElementWithinCustomPopup(i))}s||this.stopAllEditing()};e.forEach(n=>this.addManagedElementListeners(n,{focusout:t}))}setInlineEditingCss(e){let t=e.editing||e.getAllCellCtrls().some(n=>n.editing);e.forEachGui(void 0,n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}isCellEditable(e,t){if(t.group){if(this.gos.get("treeData")){if(!t.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return e.isColumnFunc(t,e.colDef.editable)}startRowOrCellEdit(e,t,n=null){return e.comp?this.gos.get("editType")==="fullRow"?this.beans.rowEditSvc?.startEditing(e.rowCtrl,t,e)??!0:this.startEditing(e,t,!0,n):(e.onCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,t,n)}),!0)}stopRowOrCellEdit(e,t=!1){this.gos.get("editType")==="fullRow"?this.stopRowEditing(e.rowCtrl,t):this.stopEditing(e,t)}createCellEditorParams(e,t,n){let{column:i,rowNode:s,cellPosition:{rowIndex:r}}=e,{valueSvc:o,gos:a}=this.beans;return fe(a,{value:o.getValueForDisplay(i,s),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:r,node:s,data:s.data,cellStartedEdit:n,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.eGui,parseValue:l=>o.parseValue(i,s,l,e.value),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=e?L.UP:L.DOWN;this.beans.navigation?.navigateToNextCell(null,i,t,!1)}}};function cF(e,t,n){e.editCompDetails=n,e.editing!==t&&(e.editing=t)}function kie(e,t){let n={newValueExists:!1};if(e)return n;let i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}function Lie(e,t,n,i,s){if(n===t)return!1;e.suppressRefreshCell=!0;let r=i.setDataValue(s,n,"edit");return e.suppressRefreshCell=!1,r}var Pie=class extends F{constructor(){super(...arguments),this.beanName="rowEditSvc"}startEditing(e,t=null,n=null,i=null){if(e.editing)return!0;let s=!0,r=!1,{editSvc:o}=this.beans;return e.getAllCellCtrls().forEach(a=>{let l=a===n;l?s=o?.startEditing(a,t,l,i)??!0:o?.startEditing(a,null,l,i),r||(r=a.editing)}),r&&this.setEditing(e,!0),s}setEditing(e,t){e.editing=t,e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));let n=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventSvc.dispatchEvent(n)}},Aa={moduleName:"EditCore",version:W,beans:[Tie,Pie],apiFunctions:{getCellEditorInstances:xie,getEditingCells:Die,stopEditing:Mie,startEditingCell:Eie},dependsOn:[iy],css:[aie]},Fie={moduleName:"UndoRedoEdit",version:W,beans:[oie],apiFunctions:{undoCellEditing:bie,redoCellEditing:Sie,getCurrentUndoSize:Iie,getCurrentRedoSize:Aie},dependsOn:[Aa]},Nie={moduleName:"TextEditor",version:W,userComponents:{agCellEditor:lF,agTextCellEditor:lF},dependsOn:[Aa]},Oie={moduleName:"NumberEditor",version:W,userComponents:{agNumberCellEditor:{classImp:fie,params:{suppressPreventDefault:!0}}},dependsOn:[Aa]},_ie={moduleName:"DateEditor",version:W,userComponents:{agDateCellEditor:uie,agDateStringCellEditor:hie},dependsOn:[Aa]},Bie={moduleName:"CheckboxEditor",version:W,userComponents:{agCheckboxCellEditor:lie},dependsOn:[Aa]},Vie={moduleName:"SelectEditor",version:W,userComponents:{agSelectCellEditor:mie},dependsOn:[Aa]},Gie={moduleName:"LargeTextEditor",version:W,userComponents:{agLargeTextCellEditor:pie},dependsOn:[Aa]},zie={moduleName:"CustomEditor",version:W,dependsOn:[Aa]},Hie=class extends F{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Su(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){let t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),xY(e))}createColumns(e,t){let n=()=>{Bv(this.beans,this.columns?.tree),this.columns=null},i=e.treeDepth,r=(this.columns?.treeDepth??-1)==i,o=this.generateSelectionCols();if(SY(o,this.columns?.list??[])&&r)return;n();let{colGroupSvc:l}=this.beans,c=l?.findDepth(e.tree)??0,u=l?.balanceTreeForAutoCols(o,c)??[];this.columns={list:o,tree:u,treeDepth:c,map:{}},t(h=>{if(!h)return null;let p=h.filter(g=>!mo(g));return[...o,...p]})}updateColumns(e){let t=Su(e.source),n=e.currentValue;this.columns?.list.forEach(i=>{let s=this.createSelectionColDef(n);i.setColDef(s,null,t),hs(this.beans,{state:[S({colId:i.getColId()},s)]},t)})}getColumn(e){return this.columns?.list.find(t=>eN(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){let{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!Pl(e))return!1;let i=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;let s=!!bu(n),r=xv(n);return s||r}createSelectionColDef(e){let{gos:t}=this.beans,n=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),a=n??{},{rowSpan:s,spanRows:r}=a,o=He(a,["rowSpan","spanRows"]);return R(S({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(l,c,u,d){let h=u.isSelected(),p=d.isSelected();return h===p?0:h?1:-1},editable:!1,suppressFillHandle:!0,pinned:null},o),{colId:QF})}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];let e=this.createSelectionColDef(),t=e.colId;this.beans.validation?.validateColDef(e,t,!0);let n=new vD(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){let i=t&&typeof t!="string"?bu(t):void 0,s=e&&typeof e!="string"?bu(e):void 0,r=i!==s,o=t&&typeof t!="string"?xv(t):void 0,a=e&&typeof e!="string"?xv(e):void 0,l=o!==a,c=jx(e),u=jx(t);(r||l||c!==u)&&this.beans.colModel.refreshAll(n)}destroy(){Bv(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e){if(!this.isSelectionColumnEnabled())return;let t=this.beans,n=t.visibleCols.getAllTrees()??[];if(n.length!==0){if(!n.some(VO)){let i=Qh(t).find(s=>mo(s.colId));i&&hs(t,{state:[{colId:i.colId,hide:!i.hide}]},e)}if(n.length===1){let i=n[0],s=GO(i);if(!s)return;hs(t,{state:[{colId:s.getColId(),hide:!0}]},e)}}}},VO=e=>e.isColumn?mo(e):e.getChildren()?.some(VO)??!1;function GO(e){if(e.isColumn)return mo(e)?e:null;let t=e.getChildren()??[];for(let n of t){let i=GO(n);if(i)return i}return null}function jie(e,t){if(!t.nodes.every(o=>o.rowPinned?(V(59),!1):o.id===void 0?(V(60),!1):!0))return;let{nodes:i,source:s,newValue:r}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:s??"api",newValue:r})}function Wie(e,t,n="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function Uie(e,t,n="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function $ie(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function Yie(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function Kie(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function qie(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function Zie(e){return e.selectionSvc?.getSelectedNodes()??[]}function Xie(e){return e.selectionSvc?.getSelectedRows()??[]}var Qie=class extends AZ{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();let{gos:e}=this;this.mode=Ov(e),this.groupSelectsDescendants=Xh(e),this.groupSelectsFiltered=_v(e)==="filteredDescendants",this.masterSelectsDetail=IP(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{let t=Xh(e),n=Ov(e),i=_v(e)==="filteredDescendants";this.masterSelectsDetail=IP(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;let i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);return i==null?0:(this.selectionCtx.selectAll=!1,"select"in i?(i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n)):this.setNodesSelected({nodes:[i.node],newValue:i.newValue,clearSelection:i.clearSelection,event:e,source:n}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:i,event:s,source:r}){if(!Pl(this.gos)&&e)return V(132),0;if(i.length===0)return 0;if(i.length>1&&!this.isMultiSelect())return V(130),0;let o=0;for(let a=0;a<i.length;a++){let l=i[a],c=Sv(l),u=this.groupSelectsFiltered&&c.group;if(c.rowPinned){V(59);continue}if(c.id===void 0){V(60);continue}u||this.selectRowNode(c,e,s,r)&&(this.detailSelection.delete(c.id),o++),this.groupSelectsDescendants&&c.childrenAfterGroup?.length&&(o+=this.selectChildren(c,e,r))}return n||(e&&(t||!this.isMultiSelect())&&(o+=this.clearOtherNodes(Sv(i[0]),r)),o>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r))),o}selectRange(e,t,n){let i=0;return e.forEach(s=>{if(s.group&&this.groupSelectsDescendants)return;this.selectRowNode(s,t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n){let i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;let{gos:n,rowModel:i}=this.beans;if(!Jn(n,i))return!1;let s=i.rootNode;if(!s)return!1;t||(t=new qv(!0,s),t.active=!1);let r=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==s){let a=this.calculateSelectedFromChildren(o);r=this.selectRowNode(o,a===null?!1:a,void 0,e)||r}}),r}clearOtherNodes(e,t){let n=new Map,i=0;return this.selectedNodes.forEach(s=>{if(s&&s.id!==e.id){let r=this.selectedNodes.get(s.id);i+=this.setNodesSelected({nodes:[r],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsDescendants&&s.parent&&n.set(s.parent.id,s.parent)}}),n.forEach(s=>{let r=this.calculateSelectedFromChildren(s);this.selectRowNode(s,r===null?!1:r,void 0,t)}),i}onRowSelected(e){let t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;let t=new ku(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){let{gos:e,rowModel:t}=this.beans;if(!Jn(e,t))return;let n=t.getTopLevelNodes();if(n===null)return;let i=[];function s(r){for(let o=0,a=r.length;o<a;o++){let l=r[o];l.isSelected()?i.push(l):l.group&&l.childrenAfterGroup&&s(l.childrenAfterGroup)}}return s(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){let n=Jn(this.gos),i=!1,s=r=>{let o=this.selectRowNode(Sv(r),!1,void 0,e);i||(i=o)};if(t==="currentPage"||t==="filtered"){if(!n){Je(102);return}this.getNodesToSelect(t).forEach(s)}else this.selectedNodes.forEach(s),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){let r=this.updateGroupsFromChildrenSelections(e);i||(i=r)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){let{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return zO(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];let t=[];if(e==="currentPage")return this.forEachNodeOnPage(i=>{if(!i.group){t.push(i);return}if(!i.expanded&&!i.footer){let s=r=>{t.push(r),r.childrenAfterFilter?.length&&r.childrenAfterFilter.forEach(s)};s(i);return}this.groupSelectsDescendants||t.push(i)}),t;let n=this.beans.rowModel;return e==="filtered"?(n.forEachNodeAfterFilter(i=>{t.push(i)}),t):(n.forEachNode(i=>{t.push(i)}),t)}forEachNodeOnPage(e){let{pageBounds:t,rowModel:n}=this.beans,i=t.getFirstRow(),s=t.getLastRow();for(let r=i;r<=s;r++){let o=n.getRow(r);o&&e(o)}}selectAllRowNodes(e){let{gos:t,selectionCtx:n}=this;if(!Pl(t)){V(132);return}if(tY(t)&&!Zh(t)){V(130);return}if(!this.canSelectAll())return;let{source:i,selectAll:s}=e,r=!1;if(this.getNodesToSelect(s).forEach(o=>{let a=this.selectRowNode(Sv(o),!0,void 0,i);r||(r=a)}),n.selectAll=!0,Jn(t)&&this.groupSelectsDescendants){let o=this.updateGroupsFromChildrenSelections(i);r||(r=o)}r&&this.dispatchSelectionChanged(i)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e)){Je(103);return}let n=new Set(e),i=[];this.beans.rowModel.forEachNode(s=>{n.has(s.id)&&i.push(s)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}canSelectAll(){let{gos:e,rowModel:t}=this.beans;return Jn(e)?!0:(Je(100,{rowModelType:t.getType()}),!1)}updateSelectable(e){let{gos:t,rowModel:n}=this.beans;if(!Pl(t))return;let i="selectableChanged",s=e!==void 0,r=Jn(t)&&this.groupSelectsDescendants,o=[],a=l=>{if(s&&!l.group)return;if(r&&l.group){let u=l.childrenAfterGroup?.some(d=>d.selectable)??!1;this.setRowSelectable(l,u,!0);return}!this.updateRowSelectable(l,!0)&&l.isSelected()&&o.push(l)};if(r){if(e===void 0){let l=n.rootNode;e=l?new qv(!1,l):void 0}e?.forEachChangedNodeDepthFirst(a,!s,!s)}else n.forEachNode(a);o.length&&this.setNodesSelected({nodes:o,newValue:!1,source:i}),!s&&r&&this.updateGroupsFromChildrenSelections?.(i)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;let n=e.detailNode?.detailGridInfo?.api;if(!n)return;let i=Jie(n);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){let r=this.detailSelection.get(e.id)??new Set;for(let o of n.getSelectedNodes())r.add(o.id);this.detailSelection.set(e.id,r)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!Zh(t)){V(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{let i=this.detailSelection.get(e.id);if(i){let s=[];for(let r of i){let o=n.getRowNode(r);o&&s.push(o)}n.setNodesSelected({nodes:s,newValue:!0,source:"masterDetail"})}break}default:break}}}};function Sv(e){return e.footer?e.sibling:e}function Jie(e){let t=0,n=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&n++}),zO(t,n)}function zO(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}var ese={moduleName:"SharedRowSelection",version:W,beans:[Hie],apiFunctions:{setNodesSelected:jie,selectAll:Wie,deselectAll:Uie,selectAllFiltered:$ie,deselectAllFiltered:Yie,selectAllOnCurrentPage:Kie,deselectAllOnCurrentPage:qie,getSelectedNodes:Zie,getSelectedRows:Xie}},tse={moduleName:"RowSelection",version:W,rowModels:["clientSide","infinite","viewport"],beans:[Qie],dependsOn:[ese]};function nse(e){e.expansionSvc?.expandAll(!0)}function ise(e){e.expansionSvc?.expandAll(!1)}function sse(e){let t=Ir(e),n=gO(e);t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function rse(e,t,n){let i=gO(e);if(i){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){Je(238);return}i.setRowCount(t,n);return}Je(28);return}let s=ny(e);if(s){s.setRowCount(t,n);return}}function ose(e){return Pu(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function ase(e){return e.rowModel.isLastRowIndexKnown()}var lse={moduleName:"CsrmSsrmSharedApi",version:W,apiFunctions:{expandAll:nse,collapseAll:ise,onRowHeightChanged:sse}},cse={moduleName:"SsrmInfiniteSharedApi",version:W,apiFunctions:{setRowCount:rse,getCacheBlockState:ose,isLastRowIndexKnown:ase}},use=class extends F{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{if(!i){Je(18),t||Je(20);return}if(this.isGridApi(i))return i;let s=i;return"current"in s?s.current?.api:(s.api||Je(19),s.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":V(21);break}})}processGroupOpenedEvent(e){let{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach(n=>{let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,n=null,i=this.beans,{colResize:s,ctrlsSvc:r,colModel:o}=i;if(t&&(n=o.getColDefCol(t.getColId())),t&&!n)return;let a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{let d=e.api.getColumnState().map(h=>({colId:h.colId}));hs(i,{state:d,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let d=e.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));hs(i,{state:d},"alignedGridChanged")}break;case"columnPinned":{let d=e.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));hs(i,{state:d},"alignedGridChanged")}break;case"columnResized":{let u=e,d={};a.forEach(h=>{d[h.getId()]={key:h.getColId(),newWidth:h.getActualWidth()}}),u.flexColumns?.forEach(h=>{d[h.getId()]&&delete d[h.getId()]}),s?.setColumnWidths(Object.values(d),!1,u.finished,"alignedGridChanged");break}}let c=r.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(u=>{u.setGridOption("alwaysShowVerticalScroll",c)})}},dse={moduleName:"AlignedGrids",version:W,beans:[use]},hse=class extends DZ{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},kx=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function pse(e){if(yt(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let n=0;n<t.length;n++){let i=t[n],s=n===0,r=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.lastChild!==r&&(i.lastChild=r,i.dispatchRowEvent("lastChildChanged")),i.childIndex!==n&&(i.childIndex=n,i.dispatchRowEvent("childIndexChanged"))}}function HO(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),pse(e)}var gse=class extends F{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){let t=this.beans,n=t.sortSvc.getSortOptions(),i=H(n)&&n.length>0,s=i&&!!e.changedRowNodes&&this.gos.get("deltaSort"),r=n.some(({column:o})=>Dr(t.gos)?o.isPrimary()&&o.isRowGroupActive():!!o.getColDef().showRowGroup);this.sort(t,n,i,s,e.changedRowNodes,e.changedPath,r)}sort(e,t,n,i,s,r,o){let{gos:a,colModel:l,rowGroupColsSvc:c,groupHideOpenParentsSvc:u,rowNodeSorter:d}=e,h=a.get("groupMaintainOrder"),p=l.getCols().some(v=>v.isRowGroupActive()),g=l.isPivotMode(),f=a.getCallback("postSortRows"),m=v=>{u?.pullDownGroupDataForHideOpenParents(v.childrenAfterAggFilter,!0);let y=g&&v.leafGroup,w=h&&p&&!v.leafGroup&&!o,x;if(w){let M=c?.columns?.[v.level+1]?.getSort()===null,E=v.childrenAfterAggFilter.slice(0);if(v.childrenAfterSort&&!M){let A={};v.childrenAfterSort.forEach((I,T)=>{A[I.id]=T}),E.sort((I,T)=>(A[I.id]??0)-(A[T.id]??0))}x=E}else!n||y?x=v.childrenAfterAggFilter.slice(0):i&&s?x=fse(d,v,s,r,t):x=d.doFullSort(v.childrenAfterAggFilter,t);if(v.childrenAfterSort=x,HO(v),f){let D={nodes:v.childrenAfterSort};f(D)}};r?.forEachChangedNodeDepthFirst(m)}};function fse(e,t,n,i,s){let r=t.childrenAfterAggFilter,o=t.childrenAfterSort;if(!o)return e.doFullSort(r,s);let a=new Set,l=[],{updates:c,adds:u}=n;for(let h=0,p=r.length;h<p;++h){let g=r[h];c.has(g)||u.has(g)||i&&!i.canSkip(g)?l.push({currentPos:l.length,rowNode:g}):a.add(g.id)}let d=o.filter(h=>a.has(h.id)).map((h,p)=>({currentPos:p,rowNode:h}));return l.sort((h,p)=>e.compareRowNodes(s,h,p)),mse(e,s,l,d)}function mse(e,t,n,i){let s=[],r=0,o=0,a=n.length,l=i.length;for(;r<a&&o<l;){let c=n[r],u=i[o],d=e.compareRowNodes(t,c,u),h;d<0?(h=c,++r):(h=u,++o),s.push(h.rowNode)}for(;r<a;)s.push(n[r++].rowNode);for(;o<l;)s.push(i[o++].rowNode);return s}var vse=class extends F{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=An(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(i=>!!i);let e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new ku(this.beans);let n=this.getNewNodeManager();this.nodeManager=n,n.activate(this.rootNode)}getNewNodeManager(){let{gos:e,beans:t}=this,n;return e.get("treeData")&&(e.get("treeDataChildrenField")?n=t.csrmChildrenTreeNodeSvc:n=t.csrmPathTreeNodeSvc),n??t.csrmNodeSvc}addPropertyListeners(){let e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:t})=>[...t])];this.addManagedPropertyListeners(e,t=>{let n=t.changeSet?.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,i){let s,r=!1;do{s=!1;let o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let d=this.getRow(u);if(d.rowHeightEstimated){let h=Eu(this.beans,d);d.setRowHeight(h.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}onPropChange(e){if(!this.rootNode)return;let t=this.gos,n=new Set(e),i={step:"nothing",changedProps:n},s=n.has("rowData"),r=n.has("treeData"),o=this.nodeManager,a=this.getNewNodeManager(),l=o!==a||n.has("treeDataChildrenField")&&t.get("treeData"),c;if(r&&(i.step="group"),(l||s)&&(c=t.get("rowData"),c!=null&&!Array.isArray(c)&&(c=null,V(1))),l&&(s||(c=o?.extractRowData()??c),o!==a&&(o?.deactivate(),this.nodeManager=a),a.activate(this.rootNode)),c&&(!l&&!this.isEmpty()&&c.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate")?(i.keepRenderedRows=!0,i.animate=!this.gos.get("suppressAnimationFrame"),i.changedRowNodes=new kx,a.setImmutableRowData(i,c)):(i.rowDataUpdated=!0,i.newData=!0,this.beans.selectionSvc?.reset("rowDataChanged"),this.rowNodesCountReady=!0,a.setNewRowData(c))),i.rowDataUpdated)i.step="group";else if(i.step==="nothing"){for(let{refreshProps:u,step:d}of this.orderedStages)if(e.some(h=>u.has(h))){i.step=d;break}}i.step!=="nothing"&&this.refreshModel(i)}setRowTopAndRowIndex(){let{beans:e}=this,t=e.environment.getDefaultRowHeight(),n=0,i=new Set,s=Rn(this.gos,"normal"),r=this.rowsToDisplay;for(let o=0,a=r.length;o<a;++o){let l=r[o];if(l.id!=null&&i.add(l.id),l.rowHeight==null){let c=Eu(e,l,s,t);l.setRowHeight(c.height,c.estimated)}l.setRowTop(n),l.setRowIndex(o),n+=l.rowHeight}return i}clearRowTopAndRowIndex(e,t){let n=e.active,i=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(r!==null&&(i(r),i(r.detailNode),i(r.sibling),r.hasChildren()&&r.childrenAfterGroup)){let o=r.level==-1;n&&!o&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,n=0){let i=this.getRowIndexAtPixel(t),s=this.getRow(i),r=!this.gos.get("suppressAnimationFrame");if(s===e[0])return!1;let o=this.rootNode?.allLeafChildren;return o?(e.forEach(a=>{$s(o,a)}),e.forEach((a,l)=>{o.splice(Math.max(i+n,0)+l,0,a)}),e.forEach((a,l)=>{a.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,animate:r,rowNodesOrderChanged:!0}),!0):!1}highlightRowAtPixel(e,t){let n=t!=null?this.getRowIndexAtPixel(t):null,i=n!=null?this.getRow(n):null;if(!i||!e||t==null){this.clearHighlightedRow();return}let s=this.getHighlightPosition(t,i),r=this.isHighlightingCurrentPosition(e,i,s),o=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==i;(r||o)&&(this.clearHighlightedRow(),r)||(this.setRowNodeHighlighted(i,s),this.lastHighlightedRow=i)}setRowNodeHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchRowEvent("rowHighlightChanged"))}getHighlightPosition(e,t){if(!t){let s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return"Below"}let{rowTop:n,rowHeight:i}=t;return e-n<i/2?"Above":"Below"}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,n){if(e===t)return!0;let i=n==="Above"?-1:1;return this.getRow(t.rowIndex+i)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.setRowNodeHighlighted(this.lastHighlightedRow,null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){let e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;let n=e.childrenAfterAggFilter,i=e.sibling?1:0;return(n?n.length:0)+i}getTopLevelRowDisplayedIndex(e){let{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let{childrenAfterSort:s}=t,r=a=>{let l=s[a];if(this.gos.get("groupHideOpenParents"))for(;l.expanded&&l.childrenAfterSort&&l.childrenAfterSort.length>0;)l=l.childrenAfterSort[0];return l.rowIndex},{footerSvc:o}=this.beans;return o?o.getTopDisplayIndex(n,e,s,r):r(e)}getRowBounds(e){let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=wu(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=wu(this.gos),i=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=wu(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){let t=new qv(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;let{changedRowNodes:t,newData:n,rowDataUpdated:i}=e;return!(!t||n||!i||t.removals.size||t.adds.size)}refreshModel(e){if(!this.rootNode)return;let t=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&!!e.rowDataUpdated));if(this.nodeManager.refreshModel?.(e,this.started),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:e}),!this.started||(e.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)))return;switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.changedRowNodes,t,!!e.rowNodesOrderChanged,!!e.afterColumnsChanged);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(e.changedRowNodes,t);case"map":this.doRowsToDisplay()}let n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,n),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1,s=[],r=Xh(this.gos);return this.forEachNodeAfterFilterAndSort(o=>{if(i)return;if(n&&(o===t||o===e)&&(i=!0,o.group&&r)){s.push(...o.allLeafChildren);return}if(!n){if(o!==t&&o!==e)return;n=!0}if(!o.group||!r){s.push(o);return}}),s}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){let t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let n=0,i=t.length-1;if(e<=0)return 0;if(st(t).rowTop<=e)return t.length-1;let r=-1,o=-1;for(;;){let a=Math.floor((n+i)/2),l=t[a];if(this.isRowInPixel(l,e)||(l.rowTop<e?n=a+1:l.rowTop>e&&(i=a-1),r===n&&o===i))return a;r=n,o=i}}isRowInPixel(e,t){let n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode?.allLeafChildren?.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t=!1,n=!1){let i=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,s=>s.leafGroup?null:s[i])}depthFirstSearchRowNodes(e,t=!1,n=r=>r.childrenAfterGroup,i=this.rootNode,s=0){let r=s;if(!i)return r;let o=i===this.rootNode;o||e(i,r++);let{footerSvc:a}=this.beans;if(i.hasChildren()&&!i.footer){let l=n(i);if(l){r=a?.addTotalRows(r,i,e,t,o,"top")??r;for(let c of l)r=this.depthFirstSearchRowNodes(e,t,n,c,r);return a?.addTotalRows(r,i,e,t,o,"bottom")??r}}return r}doAggregate(e){let t=this.rootNode;t&&this.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){let t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){let{groupHideOpenParentsSvc:n}=this.beans;this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(i=>{n?.pullDownGroupDataForHideOpenParents(i.childrenAfterAggFilter,!0),i.childrenAfterSort=i.childrenAfterAggFilter.slice(0),HO(i)}),n?.updateGroupDataForHideOpenParents(t)}doRowGrouping(e,t,n,i){let s=this.nodeManager.treeData,r=this.rootNode;if(!s){let o=this.groupStage;if(o)o.execute({rowNode:r,changedPath:t,changedRowNodes:e,rowNodesOrderChanged:n,afterColumnsChanged:i});else{let a=r.sibling;r.childrenAfterGroup=r.allLeafChildren,a&&(a.childrenAfterGroup=r.childrenAfterGroup),r.updateHasChildren()}}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(t=>{t.childrenAfterFilter=t.childrenAfterGroup,bO(t)},!0)}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){if(typeof e=="string"&&e.indexOf(Kx)==0){let n;return this.forEachNode(i=>{i.id===e&&(n=i)}),n}return this.nodeManager.getRowNode(e)}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();let e=[],t=[],n=new kx,i=!1;this.rowDataTransactionBatch?.forEach(s=>{this.rowNodesCountReady=!0;let{rowNodeTransaction:r,rowsInserted:o}=this.nodeManager.updateRowData(s.rowDataTransaction,n);o&&(i=!0),t.push(r),s.callback&&e.push(s.callback.bind(null,r))}),this.commitTransactions(i,n),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;let t=new kx,{rowNodeTransaction:n,rowsInserted:i}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(i,t),n}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){let{flattenStage:e,rootNode:t}=this,n;if(e)n=e.execute({rowNode:t});else{n=t?.childrenAfterSort??[];for(let i of n)i.setUiLevel(0)}this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){let e=this.rootNode;if(!e)return;let t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.lastHighlightedRow=null,this.orderedStages=RP,this.rowsToDisplay=RP}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function yse(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function Cse(e,t){let n=Ir(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function wse(e){return Ir(e)?.isEmpty()??!0}function bse(e,t){Ir(e)?.forEachLeafNode(t)}function Sse(e,t){Ir(e)?.forEachNodeAfterFilter(t)}function xse(e,t){Ir(e)?.forEachNodeAfterFilterAndSort(t)}function Dse(e){if(e.rowAutoHeight?.active){V(3);return}Ir(e)?.resetRowHeights()}function Mse(e,t){return e.frameworkOverrides.wrapIncoming(()=>Ir(e)?.updateRowData(t))}function Ese(e,t,n){e.frameworkOverrides.wrapIncoming(()=>Ir(e)?.batchUpdateRowData(t,n))}function Ise(e){e.frameworkOverrides.wrapIncoming(()=>Ir(e)?.flushAsyncTransactions())}function Ase(e){return e.selectionSvc?.getBestCostNodeSelection()}var Rse={moduleName:"ClientSideRowModel",version:W,rowModels:["clientSide"],beans:[hse,vse,gse],dependsOn:[hO]},Tse={moduleName:"ClientSideRowModelApi",version:W,apiFunctions:{onGroupExpandedOrCollapsed:yse,refreshClientSideRowModel:Cse,isRowDataEmpty:wse,forEachLeafNode:bse,forEachNodeAfterFilter:Sse,forEachNodeAfterFilterAndSort:xse,resetRowHeights:Dse,applyTransaction:Mse,applyTransactionAsync:Ese,flushAsyncTransactions:Ise,getBestCostNodeSelection:Ase},dependsOn:[lse]},kse=class extends F{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:s,exportRowNumbers:r}=t,o=this.getColumnsToExport({allColumns:n,skipRowGroups:s,columnKeys:i,exportRowNumbers:r});return[this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,n,i){let s=t.shouldRowBeSkipped||(()=>!1),o=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!o,l=this.colModel.isPivotMode()?i.leafGroup:!i.group,c=!!i.footer,u=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&J$(this.gos,i);if(!l&&!c&&(t.skipRowGroups||u||a)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!l&&!c||s(fe(this.gos,{node:i})))return;let p=e.onNewBodyRow(i);if(n.forEach((g,f)=>{p.onColumn(g,f,i)}),t.getCustomContentBelowRow){let g=t.getCustomContentBelowRow(fe(this.gos,{node:i}));g&&e.addCustomContent(g)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new cN,{colGroupSvc:s}=this.beans,r=s?s.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(r,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((s,r)=>{i.onColumn(s,r,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel?.getPinnedTopRow(s.rowIndex)).forEach(i):this.pinnedRowModel?.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{let i=this.rowModel,s=Jn(this.gos,i),r=Pu(this.gos,i),o=!s&&e.onlySelected,a=this.processRow.bind(this,n,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>i.getRow(c.rowIndex)).forEach(a),n;if(this.colModel.isPivotMode())return s?i.forEachPivotNode(a,!0,l==="filteredAndSorted"):r?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a),n;if(e.onlySelectedAllPages||o){let c=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?i.forEachNode(a):s||r?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);return n}}replicateSortedOrder(e){let{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;let i=t.getSortOptions(),s=(r,o)=>r.rowIndex!=null&&o.rowIndex!=null?r.rowIndex-o.rowIndex:r.level===o.level?r.parent?.id===o.parent?.id?n.compareRowNodes(i,{rowNode:r,currentPos:r.rowIndex??-1},{rowNode:o,currentPos:o.rowIndex??-1}):s(r.parent,o.parent):r.level>o.level?s(r.parent,o):s(r,o.parent);e.sort(s)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel?.getPinnedBottomRow(s.rowIndex)).forEach(i):this.pinnedRowModel?.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e){let{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:i=!1,columnKeys:s}=e,{colModel:r,gos:o,visibleCols:a}=this,l=r.isPivotMode(),c=h=>mo(h)?!1:!sp(h)||i;if(s&&s.length)return r.getColsForKeys(s).filter(c);let u=o.get("treeData"),d=[];return t&&!l?d=r.getCols():d=a.allCols,d=d.filter(h=>c(h)&&(n&&!u?!yD(h):!0)),d}recursivelyAddHeaderGroups(e,t,n){let i=[];e.forEach(s=>{let r=s;r.getChildren&&r.getChildren().forEach(o=>i.push(o))}),e.length>0&&At(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),s=0;t.forEach(r=>{let o=r,a;n?a=n(fe(this.gos,{columnGroup:o})):a=this.beans.colNames.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((c,u,d,h)=>{let p=st(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],c.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),c},[]);i.onColumn(o,a||"",s++,o.getLeafColumns().length-1,l)})}},Lse={moduleName:"SharedExport",version:W,beans:[kse]},uF=`\r
`,Pse=class extends Fte{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,uF),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(V(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=uF),this.isFirstLine=!1}},Fse=class extends Pte{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){V(51);return}let t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(fe(this.gos,{})):t.fileName;Nte(this.getFileName(s),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:s,gos:r}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new Pse({colModel:t,colNames:n,valueSvc:s,gos:r,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Nse(e,t){return e.csvCreator?.getDataAsCsv(t)}function Ose(e,t){e.csvCreator?.exportDataAsCsv(t)}var _se={moduleName:"CsvExport",version:W,beans:[Fse],apiFunctions:{getDataAsCsv:Nse,exportDataAsCsv:Ose},dependsOn:[Lse]},Bse=class extends F{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];let{params:{blockSize:e,rowHeight:t},startRow:n,beans:i,rowNodes:s}=this;for(let r=0;r<e;r++){let o=n+r,a=new ku(i);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(o),a.setRowTop(t*o),s.push(a)}}getBlockStateJson(){let{id:e,startRow:t,endRow:n,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:i}}}setDataAndId(e,t,n){H(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(yt(this.params.datasource.getRows)){V(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){let{startRow:e,endRow:t,version:n,params:{sortModel:i,filterModel:s},gos:r}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:i,filterModel:s,context:fe(r,{}).context}}forEachNode(e,t,n){this.rowNodes.forEach((i,s)=>{this.startRow+s<n&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);let n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){let{rowNodes:t,beans:n}=this;t.forEach((s,r)=>{let o=e.rowData?e.rowData[r]:void 0;!s.id&&s.alreadyRendered&&o&&(t[r]=new ku(n),t[r].setRowIndex(s.rowIndex),t[r].setRowTop(s.rowTop),t[r].setRowHeight(s.rowHeight),s.clearRowTopAndRowIndex()),this.setDataAndId(t[r],o,this.startRow+r)});let i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},Vse=2,Gse=class extends F{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.params,n=this.createBean(new Bse(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(Da(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(o=>o!=e),n=(o,a)=>a.lastAccessed-o.lastAccessed;t.sort(n);let i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,r=Vse-1;t.forEach((o,a)=>{let l=o.state==="needsLoading"&&a>=r,c=i?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){let t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let{startRow:n,endRow:i}=e;return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let{blockSize:n,overflowSize:i}=this.params,r=(e.id+1)*n+i;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,t){this.rowCount=e,H(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t={value:0};this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(n,i)=>n.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,s=!1,r={value:0},o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(s&&i+1!==l.id){o=!0;return}i=l.id,l.forEachNode(c=>{let u=c===e||c===t;(s||u)&&n.push(c),u&&(s=!s)},r,this.rowCount)}}),o||s?[]:n}},zse=class extends F{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Fl(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Fl(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!Kh(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;Iu(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();let e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:i,eventSvc:s,gos:r}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:n?.getSortModel()??[],rowNodeBlockLoader:i,initialRowCount:r.get("infiniteInitialRowCount"),maxBlocksInCache:r.get("maxBlocksInCache"),rowHeight:Fl(e),overflowSize:r.get("cacheOverflowSize"),blockSize:r.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new Gse(this.cacheParams)),s.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){let t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}};function Hse(e){ny(e)?.refreshCache()}function jse(e){ny(e)?.purgeCache()}function Wse(e){return ny(e)?.getRowCount()}var Use=class extends F{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=eY(this.gos);let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=An(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){$s(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){Da(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){Da(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},$se={moduleName:"InfiniteRowModelCore",version:W,rowModels:["infinite"],beans:[zse,Use]},Yse={moduleName:"InfiniteRowModel",version:W,apiFunctions:{refreshInfiniteCache:Hse,purgeInfiniteCache:jse,getInfiniteRowCount:Wse},dependsOn:[$se,cse]},Kse="\u2191",qse="\u2193",Zse=class extends Ye{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(n),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),s=H(i)?i:n,r=t>=0,o=this.eDelta;r?o.textContent=Kse+s:o.textContent=qse+s,o.classList.toggle("ag-value-change-delta-up",r),o.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),_n(this.eDelta)}refresh(e,t=!1){let{value:n,valueFormatted:i}=e,{eValue:s,lastValue:r,beans:o}=this;if(n===r||(H(i)?s.textContent=i:H(n)?s.textContent=n:_n(s),o.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof r=="number"){let a=n-r;this.showDelta(e,a)}return r&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},Xse=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",Qse=class extends Ye{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current"),this.registerCSS(Xse)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let{beans:t,eCurrent:n}=this,i=Vt(t).createElement("span");i.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=i,i.textContent=n.textContent,this.getGui().insertBefore(i,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;if(yt(n)&&(n=""),n===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;let i=this.eCurrent;return H(e.valueFormatted)?i.textContent=e.valueFormatted:H(e.value)?i.textContent=n:_n(i),!0}},Jse=class extends F{constructor(){super(...arguments),this.beanName="cellFlashSvc"}onFlashCells(e,t){if(!e.comp)return;let n=aq(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}animateCell(e,t,n,i){let s=e.comp;if(!s)return;let{gos:r}=this;if(n||(n=r.get("cellFlashDuration")),n===0)return;H(i)||(i=r.get("cellFadeDuration"));let o=`ag-cell-${t}`,a=`ag-cell-${t}-animation`;s.addOrRemoveCssClass(o,!0),s.addOrRemoveCssClass(a,!1);let l=e.eGui;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e.isAlive()&&(s.addOrRemoveCssClass(o,!1),s.addOrRemoveCssClass(a,!0),l.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{e.isAlive()&&(s.addOrRemoveCssClass(a,!1),l.style.transition="")},i))},n)})}};function ere(e,t={}){let{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(i=>n.flashCell(i,t))})}var tre={moduleName:"HighlightChanges",version:W,beans:[Jse],userComponents:{agAnimateShowChangeCellRenderer:Zse,agAnimateSlideCellRenderer:Qse},apiFunctions:{flashCells:ere}};function nre(e){return e.stateSvc?.getState()??{}}function ire(e){switch(e=S({},e),e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=sre(e)}return e}function sre(e){return e.cellSelection=rre(e,"rangeSelection"),e}function rre(e,t){if(e&&typeof e=="object")return e[t]}var ore=class extends F{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=An(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=An(this,()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},0),this.onRowSelectedDebounced=An(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=Jn(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",W);let e=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,()=>e(()=>this.setupStateOnGridReady()));let[t,n,i]=this.addManagedEventListeners({newColumnsLoaded:({source:s})=>{s==="gridInitializing"&&(t(),e(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{n?.(),e(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i?.(),e(()=>this.setupStateOnFirstDataRendered())}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getInitialState(){return ire(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){let e=()=>this.updateCachedState("sideBar",this.getSideBarState());e(),this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());let t=n=>()=>this.updateColumnState([n]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:n,pagination:i}=this.getInitialState();e&&this.setFilterState(e),t&&this.setRowGroupExpansionState(t),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i);let s=this.updateCachedState.bind(this);s("filter",this.getFilterState()),s("rowGroupExpansion",this.getRowGroupExpansionState()),s("rowSelection",this.getRowSelectionState()),s("pagination",this.getPaginationState());let r=()=>{this.updateRowGroupExpansionStateTimer=0,s("rowGroupExpansion",this.getRowGroupExpansionState())};this.addManagedEventListeners({filterChanged:()=>s("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:r,columnRowGroupChanged:r,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(r)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:o=>{(o.newPage||o.newPageSize)&&s("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,cellSelection:t,focusedCell:n,columnOrder:i}=this.getInitialState();n&&this.setFocusedCellState(n),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds);let s=this.updateCachedState.bind(this);s("sideBar",this.getSideBarState()),s("focusedCell",this.getFocusedCellState());let r=this.getRangeSelectionState();s("rangeSelection",r),s("cellSelection",r),s("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>s("focusedCell",this.getFocusedCellState()),cellSelectionChanged:o=>{if(o.finished){let a=this.getRangeSelectionState();s("rangeSelection",a),s("cellSelection",a)}},bodyScrollEnd:()=>s("scroll",this.getScrollState())})}getColumnState(){let e=this.beans,t=e.colModel.isPivotMode(),n=[],i=[],s=[],r=[],o=[],a=[],l=[],c=[],u=[],d=0,h=Qh(e);for(let p=0;p<h.length;p++){let{colId:g,sort:f,sortIndex:m,rowGroup:v,rowGroupIndex:y,aggFunc:w,pivot:x,pivotIndex:D,pinned:M,hide:E,width:A,flex:I}=h[p];u.push(g),f&&(n[m??d++]={colId:g,sort:f}),v&&(i[y??0]=g),typeof w=="string"&&s.push({colId:g,aggFunc:w}),x&&(r[D??0]=g),M&&(M==="right"?a:o).push(g),E&&l.push(g),(I!=null||A)&&c.push({colId:g,flex:I??void 0,width:A})}return{sort:n.length?{sortModel:n}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:r}:void 0,columnPinning:o.length||a.length?{leftColIds:o,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(e){let{sort:t,rowGroup:n,aggregation:i,pivot:s,columnPinning:r,columnVisibility:o,columnSizing:a,columnOrder:l,partialColumnState:c}=e,u={},d=m=>{let v=u[m];return v||(v={colId:m},u[m]=v,v)},h=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:m,sort:v},y)=>{let w=d(m);w.sort=v,w.sortIndex=y}),h.sort=null,h.sortIndex=null),n&&(n.groupColIds.forEach((m,v)=>{let y=d(m);y.rowGroup=!0,y.rowGroupIndex=v}),h.rowGroup=null,h.rowGroupIndex=null),i&&(i.aggregationModel.forEach(({colId:m,aggFunc:v})=>{d(m).aggFunc=v}),h.aggFunc=null),s&&(s.pivotColIds.forEach((m,v)=>{let y=d(m);y.pivot=!0,y.pivotIndex=v}),this.gos.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),r&&(r.leftColIds.forEach(m=>{d(m).pinned="left"}),r.rightColIds.forEach(m=>{d(m).pinned="right"}),h.pinned=null),o&&(o.hiddenColIds.forEach(m=>{d(m).hide=!0}),h.hide=null),a&&(a.columnSizingModel.forEach(({colId:m,flex:v,width:y})=>{let w=d(m);w.flex=v??null,w.width=y}),h.flex=null);let p=l?.orderedColIds,g=!!p?.length,f=g?p.map(m=>d(m)):Object.values(u);f.length&&(this.columnStates=f,hs(this.beans,{state:f,applyOrder:g,defaultState:h},"gridInitializing"))}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let n=this.columnGroupStates;this.columnGroupStates=void 0;let i=this.beans,{pivotResultCols:s,colGroupSvc:r}=i;if(s?.isPivotResultColsPresent()){if(t){let o=[];for(let a of t)s.getPivotResultCol(a.colId)&&o.push(a);hs(i,{state:o,applyOrder:e},"gridInitializing")}n&&r?.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){let e=this.beans.colGroupSvc;if(!e)return;let t=e.getColumnGroupState(),n=[];return t.forEach(({groupId:i,open:s})=>{s&&n.push(i)}),n.length?{openColumnGroupIds:n}:void 0}setColumnGroupState(e){let t=this.beans.colGroupSvc;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup")||!t)return;let n=new Set(e.columnGroup?.openColumnGroupIds),s=t.getColumnGroupState().map(({groupId:r})=>{let o=n.has(r);return o&&n.delete(r),{groupId:r,open:o}});n.forEach(r=>{s.push({groupId:r,open:!0})}),s.length&&(this.columnGroupStates=s),t.setColumnGroupState(s,"gridInitializing")}getFilterState(){let e=this.beans.filterManager,t=e?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);let n=e?.getAdvFilterModel()??void 0;return t||n?{filterModel:t,advancedFilterModel:n}:void 0}setFilterState(e){let t=this.beans.filterManager,{filterModel:n,advancedFilterModel:i}=e??{};n&&t?.setFilterModel(n,"columnFilter"),i&&t?.setAdvFilterModel(i,"advancedFilter")}getRangeSelectionState(){let e=this.beans.rangeSvc?.getCellRanges().map(t=>{let{id:n,type:i,startRow:s,endRow:r,columns:o,startColumn:a}=t;return{id:n,type:i,startRow:s,endRow:r,colIds:o.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeSvc:n,colModel:i,visibleCols:s}=this.beans;if(!fo(t)||!n)return;let r=[];e.cellRanges.forEach(o=>{let a=[];if(o.colIds.forEach(c=>{let u=i.getCol(c);u&&a.push(u)}),!a.length)return;let l=i.getCol(o.startColId);if(!l){let c=s.allCols,u=new Set(a);l=c.find(d=>u.has(d))}r.push(R(S({},o),{columns:a,startColumn:l}))}),n.setCellRanges(r)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e,{frameworkOverrides:i,rowRenderer:s,animationFrameSvc:r,ctrlsSvc:o}=this.beans;i.wrapIncoming(()=>{o.get("center").setCenterViewportScrollLeft(n),o.getScrollFeature()?.setVerticalScrollPosition(t),s.redraw({afterScroll:!0}),r?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.beans.focusSvc.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:n,rowPinned:i}=e,{focusSvc:s,colModel:r}=this.beans;s.setFocusedCell({column:r.getCol(t),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let{pagination:e,gos:t}=this.beans;if(!e)return;let n=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!i))return{page:n,pageSize:i}}setPaginationState(e){let{pagination:t,gos:n}=this.beans;t&&(e.pageSize&&!n.get("paginationAutoPageSize")&&t.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&t.setPage(e.page))}getRowSelectionState(){let e=this.beans.selectionSvc;if(!e)return;let t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e){this.beans.selectionSvc?.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;let n=[];return t.forEachNode(({expanded:i,id:s})=>{i&&s&&n.push(s)}),n.length?{expandedRowGroupIds:n}:void 0}setRowGroupExpansionState(e){this.beans.expansionSvc?.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),n=!1,i=this.cachedState;for(let s of Object.keys(t)){let r=t[s];Kh(r,i[s])||(n=!0)}this.cachedState=S(S({},i),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),Kh(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=R(S({},this.cachedState),{[e]:t})}refreshStaleState(){let e=this.staleStateKeys;e.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0;let t=this.beans.colAnimation;t?.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(t?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},are={moduleName:"GridState",version:W,beans:[ore],apiFunctions:{getState:nre}};function lre(e){return e.rowModel.isLastRowIndexKnown()}function cre(e){return e.pagination?.getPageSize()??100}function ure(e){return e.pagination?.getCurrentPage()??0}function dre(e){return e.pagination?.getTotalPages()??1}function hre(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function pre(e){e.pagination?.goToNextPage()}function gre(e){e.pagination?.goToPreviousPage()}function fre(e){e.pagination?.goToFirstPage()}function mre(e){e.pagination?.goToLastPage()}function vre(e,t){e.pagination?.goToPage(t)}var yre=class extends F{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){let t=this.beans,n=()=>{let i=Math.max(Fl(t),1),s=Math.floor(e/i);t.pagination.setPageSize(s,"autoCalculated")};this.isBodyRendered?An(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Ph="paginationPageSizeSelector",Cre=class extends Ye{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Ph,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){_n(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Ph)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){let s=this.gos.exists("paginationPageSize"),r=this.gos.get(Ph)!==!0;V(94,{pageSizeSet:s,pageSizesSet:r,pageSizeOptions:e,paginationPageSizeOption:t}),r||V(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Ph}),e.unshift("")}let i=String(n?"":t);this.selectPageSizeComp?(zl(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),s=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new PD).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(Ph);return!Array.isArray(t)||!t?.length?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},wre={selector:"AG-PAGE-SIZE-SELECTOR",component:Cre},bre=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",Sre=class extends jN{constructor(){super(),this.btFirst=U,this.btPrevious=U,this.btNext=U,this.btLast=U,this.lbRecordCount=U,this.lbFirstRowOnPage=U,this.lbLastRowOnPage=U,this.lbCurrent=U,this.lbTotal=U,this.pageSizeComp=U,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(bre)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[wre]);let{btFirst:t,btPrevious:n,btNext:i,btLast:s}=this;this.activateTabIndex([t,n,i,s]),t.insertAdjacentElement("afterbegin",us(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",us(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",us(e?"previous":"next",this.beans)),s.insertAdjacentElement("afterbegin",us(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):WK(this.beans,r),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===L.ENTER||i.key===L.SPACE)&&(i.preventDefault(),n())}})}),jK(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):Lte(e,this.getLocaleTextFunc.bind(this))}getTemplate(){let e=this.getLocaleTextFunc(),t=e("page","Page"),n=e("to","to"),i=e("of","of"),s=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){let e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){v$(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=e?n:null;if(i===1){let y=this.rowModel.getRow(0);if(y&&y.group&&!(y.groupData||y.aggData)){this.setTotalLabelsToZero();return}}let s=this.pagination.getCurrentPage(),r=this.pagination.getPageSize(),o,a;this.isZeroPagesToDisplay()?o=a=0:(o=r*s+1,a=o+r-1,e&&a>i&&(a=i));let l=o+r-1,c=!e&&n<l,u=this.formatNumber(o);this.lbFirstRowOnPage.textContent=u;let d,h=this.getLocaleTextFunc();c?d=h("pageLastRowUnknown","?"):d=this.formatNumber(a),this.lbLastRowOnPage.textContent=d;let g=t>0?s+1:0,f=this.formatNumber(g);this.lbCurrent.textContent=f;let m,v;if(e)m=this.formatNumber(t),v=this.formatNumber(i);else{let y=h("more","more");m=y,v=y}this.lbTotal.textContent=m,this.lbRecordCount.textContent=v,this.announceAriaStatus(u,d,v,f,m)}announceAriaStatus(e,t,n,i,s){let r=this.getLocaleTextFunc(),o=r("page","Page"),a=r("to","to"),l=r("of","of"),c=`${e} ${a} ${t} ${l} ${n}`,u=`${o} ${i} ${l} ${s}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnounce?.announceValue(u,"paginationPage"))}setTotalLabelsToZero(){let e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},xre={selector:"AG-PAGINATION",component:Sre},Dre=class extends F{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){let e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return xre}isPaginateChildRows(){let e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){let t=this.currentPage;!this.active||t===e||typeof t!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return H(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:H(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:H(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:H(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){let e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);let t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){let e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}let n=this.pageSize,i=t-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();let s=this.currentPage,r=n*s,o=n*(s+1)-1;if(o>i&&(o=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(r),o===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{let a=e.getTopLevelRowDisplayedIndex(o+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){let e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}let{pageSize:t,currentPage:n}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},Mre={moduleName:"Pagination",version:W,beans:[Dre,yre],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:lre,paginationGetPageSize:cre,paginationGetCurrentPage:ure,paginationGetTotalPages:dre,paginationGetRowCount:hre,paginationGoToNextPage:pre,paginationGoToPreviousPage:gre,paginationGoToFirstPage:fre,paginationGoToLastPage:mre,paginationGoToPage:vre},dependsOn:[iy]};function Ere(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function jO(e,t,n,i,s){t&&(i&&t.parent&&t.parent.level!==-1&&jO(e,t.parent,n,i,s),t.setExpanded(n,void 0,s))}function Ire(e,t){return e.rowModel.getRowNode(t)}function Are(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function Rre(e){return e.rowRenderer.getRenderedNodes()}function Tre(e,t,n){e.rowModel.forEachNode(t,n)}function kre(e){return e.rowRenderer.firstRenderedRow}function Lre(e){return e.rowRenderer.lastRenderedRow}function Pre(e,t){return e.rowModel.getRow(t)}function Fre(e){return e.rowModel.getRowCount()}var Nre={moduleName:"RowApi",version:W,apiFunctions:{redrawRows:Ere,setRowNodeExpanded:jO,getRowNode:Ire,addRenderedRowListener:Are,getRenderedNodes:Rre,forEachNode:Tre,getFirstDisplayedRowIndex:kre,getLastDisplayedRowIndex:Lre,getDisplayedRowAtIndex:Pre,getDisplayedRowCount:Fre}},Ore={moduleName:"ScrollApi",version:W,apiFunctions:{getVerticalPixelRange:yie,getHorizontalPixelRange:Cie,ensureColumnVisible:_O,ensureIndexVisible:BO,ensureNodeVisible:wie}};function _re(e,t,n){if(!t)return;let i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,s=`aria-${t}`;n===null?i.removeAttribute(s):i.setAttribute(s,n)}function Bre(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function Vre(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function Gre(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function zre(e){e.animationFrameSvc?.flushAllFrames()}function Hre(e){return{rowHeight:Fl(e),headerHeight:ap(e)}}function jre(e,t={}){let n=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(r=>{let o=r.getCellRenderer();o!=null&&n.push(Jh(o))}),t.columns?.length)return n;let i=[],s=iD(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(r=>{if(s&&!sD(r.rowNode,s)||!r.isFullWidth())return;let o=r.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){let l=o[a];l!=null&&i.push(Jh(l))}}),[...i,...n]}var Wre={moduleName:"RenderApi",version:W,apiFunctions:{setGridAriaProperty:_re,refreshCells:Bre,refreshHeader:Vre,isAnimationFrameQueueEmpty:Gre,flushAllAnimationFrames:zre,getSizesForCurrentTheme:Hre,getCellRendererInstances:jre}};function Ure(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function $re(e,t,n){e.colAutosize?.autoSizeCols({colKeys:t,skipHeader:n,source:"api"})}function Yre(e,t){e.colAutosize?.autoSizeAllColumns("api",t)}var Kre=class extends F{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:s,source:r="api"}=e,{animationFrameSvc:o,renderStatus:a,colModel:l,autoWidthCalc:c,visibleCols:u}=this.beans;if(o?.flushAllFrames(),this.timesDelayed<5&&a&&!a.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});return}this.timesDelayed=0;let d=[],h=-1,p=n??this.gos.get("skipHeaderOnAutoSize"),g=i??p;for(;h!==0;){h=0;let f=[];t.forEach(m=>{if(!m)return;let v=l.getCol(m);if(!v||sp(v)||d.indexOf(v)>=0)return;let y=c.getPreferredWidthForColumn(v,p);if(y>0){let w=qre(v,y);v.setActualWidth(w,r),d.push(v),h++}f.push(v)}),f.length&&u.refresh(r)}g||this.autoSizeColumnGroupsByColumns(t,r,s),Ru(this.eventSvc,d,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let{colModel:i,ctrlsSvc:s}=this.beans,r=new Set;i.getColsForKeys(e).forEach(c=>{let u=c.getParent();for(;u&&u!=n;)u.isPadding()||r.add(u),u=u.getParent()});let a,l=[];for(let c of r){for(let u of s.getHeaderRowContainerCtrls())if(a=u.getHeaderCtrlForColumn(c),a)break;a&&a.resizeLeafColumnsToFit(t)}return l}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let n=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:n,skipHeader:t,source:e})}addColumnAutosize(e,t){let n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",i);let s=new fu(e);return s.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}}addColumnGroupResize(e,t,n){let i=this.gos.get("skipHeaderOnAutoSize"),s=()=>{let r=[];t.getDisplayedLeafColumns().forEach(a=>{a.getColDef().suppressAutoSize||r.push(a.getColId())}),r.length>0&&this.autoSizeCols({colKeys:r,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",s),()=>e.removeEventListener("dblclick",s)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;let{ctrlsSvc:n,scrollVisibleSvc:i}=this.beans,s=n.getGridBodyCtrl(),o=s.isVerticalScrollShowing()?i.getScrollbarWidth():0,l=$h(s.eGridBody)-o;if(l>0){this.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):V(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let s={};i&&i?.columnLimits?.forEach(f=>{var m=f,{key:p}=m,g=He(m,["key"]);s[typeof p=="string"?p:p.getColId()]=g});let r=this.beans.visibleCols.allCols,o=e===lo(r);if(e<=0||!r.length||o)return;let a=[],l=[];r.forEach(p=>{p.getColDef().suppressSizeToFit===!0?l.push(p):a.push(p)});let c=a.slice(0),u=!1,d=p=>{$s(a,p),l.push(p)};for(a.forEach(p=>{p.resetActualWidth(t);let g=s?.[p.getId()],f=g?.minWidth??i?.defaultMinWidth,m=g?.maxWidth??i?.defaultMaxWidth,v=p.getActualWidth();typeof f=="number"&&v<f?p.setActualWidth(f,t,!0):typeof m=="number"&&v>m&&p.setActualWidth(m,t,!0)});!u;){u=!0;let p=e-lo(l);if(p<=0)a.forEach(g=>{let f=s?.[g.getId()]?.minWidth??i?.defaultMinWidth;if(typeof f=="number"){g.setActualWidth(f,t,!0);return}g.setActualWidth(g.minWidth,t)});else{let g=p/lo(a),f=p;for(let m=a.length-1;m>=0;m--){let v=a[m],y=s?.[v.getId()],w=y?.minWidth??i?.defaultMinWidth,x=y?.maxWidth??i?.defaultMaxWidth,D=v.getMinWidth(),M=v.getMaxWidth(),E=typeof w=="number"&&w>D?w:D,A=typeof x=="number"&&x<M?x:M,I=Math.round(v.getActualWidth()*g);I<E?(I=E,d(v),u=!1):I>A?(I=A,d(v),u=!1):m===0&&(I=f),v.setActualWidth(I,t,!0),f-=I}}}c.forEach(p=>{p.fireColumnWidthChangedEvent(t)});let h=this.beans.visibleCols;h.setLeftValues(t),h.updateBodyWidths(),!n&&Ru(this.eventSvc,c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:s}=e,r=n?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:n}=e;setTimeout(()=>{t?this.autoSizeCols({colKeys:t,skipHeader:n,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",n)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function qre(e,t){let n=e.getMinWidth();t<n&&(t=n);let i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}var Zre={moduleName:"ColumnAutoSize",version:W,beans:[Kre],apiFunctions:{sizeColumnsToFit:Ure,autoSizeColumns:$re,autoSizeAllColumns:Yre},dependsOn:[XN]};function Xre(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function Qre(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function Jre(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function eoe(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}var toe=class extends F{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){let e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};Fh(this.pinnedBottomRows,t),Fh(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0,n=i=>{if(i.rowHeightEstimated){let s=Eu(this.beans,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return Fh(this.pinnedBottomRows,n),t=0,Fh(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}let i=Iu(this.gos),s=t==="top"?EN:IN,r=new Set(n.order),o=[],a=new Set,l=0,c=-1;for(let u of e){let d=i?.({data:u,level:0,rowPinned:t})??s+this.nextId++;if(a.has(d)){V(96,{id:d,data:u});continue}c++,a.add(d),o.push(d);let h=Wh(n,d);if(h!==void 0)h.data!==u&&h.setData(u),l+=this.setRowTopAndRowIndex(h,l,c),r.delete(d);else{let p=new ku(this.beans);p.id=d,p.data=u,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),n.cache[d]=p,n.order.push(d)}}r.forEach(u=>{Wh(n,u)?.clearRowTopAndRowIndex(),delete n.cache[u]}),n.order=o}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(Eu(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return dF(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return dF(this.pinnedBottomRows)}getPinnedTopRowCount(){return aD(this.pinnedTopRows)}getPinnedBottomRowCount(){return aD(this.pinnedBottomRows)}getPinnedTopRow(e){return oD(this.pinnedTopRows,e)}getPinnedBottomRow(e){return oD(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Wh(this.getCache(t),e)}forEachPinnedRow(e,t){return Fh(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}};function dF(e){let t=aD(e);if(t===0)return 0;let n=oD(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function Wh(e,t){return e.cache[t]}function oD(e,t){return Wh(e,e.order[t])}function Fh(e,t){e.order.forEach((n,i)=>{let s=Wh(e,n);s&&t(s,i)})}function aD(e){return e.order.length}var noe={moduleName:"PinnedRow",version:W,beans:[toe],apiFunctions:{getPinnedTopRowCount:Xre,getPinnedBottomRowCount:Qre,getPinnedTopRow:Jre,getPinnedBottomRow:eoe}},ioe=class extends Vh{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,i,s,r,o){this.eWrapper=n,super.setComp(e,t,n,i,s,r,o),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){this.rowNode.rowIndex!=null&&lD(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){S$(this.eGui,this.cellSpan.spannedNodes.size)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellSpan)}onFocusOut(){this.focusedCellPosition=void 0,super.onFocusOut()}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}isCellFocused(){let e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.addOrRemoveCssClass(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){let{beans:t}=this;if(Jv(t)){this.focusedCellPosition=void 0;return}let n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},soe=class extends Yv{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(e=>e.refreshAriaRowIndex())}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){let t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new ioe(t,this,this.beans)}shouldRecreateCellCtrl(e){let t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!0:e.getCellSpan()!==t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},roe=class extends F{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){let{rowSpanSvc:t}=this.beans,n=`${e}Ctrls`,i=this[n],s=i.size,r=this.getAllRelevantRowControls(e),o=new Map,a=!1;for(let c of r)c.isAlive()&&t?.forEachSpannedColumn(c.rowNode,(u,d)=>{if(o.has(d.firstNode))return;let h=i.get(d.firstNode);if(h){o.set(d.firstNode,h),i.delete(d.firstNode);return}a=!0;let p=new soe(d.firstNode,this.beans,!1,!1,!1);o.set(d.firstNode,p)});this[n]=o;let l=o.size===s;if(!(!a&&l)){for(let c of i.values())c.destroyFirstPass(!0),c.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){let{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){let{rowSpanSvc:t}=this.beans,n=t?.getCellSpanByPosition(e);if(!n)return;let i=`${WO(e.rowPinned)}Ctrls`,s=this[i].get(n.firstNode);if(s)return s.getAllCellCtrls().find(r=>r.column===e.column)}getCtrls(e){let t=`${e}Ctrls`;return[...this[t].values()]}destroyRowCtrls(e){let t=`${e}Ctrls`;for(let n of this[t].values())n.destroyFirstPass(!0),n.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},WO=e=>e??"center",ooe=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){let e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;return this.spannedNodes.forEach(n=>{n!==this.lastNode&&(t+=n.rowHeight)}),e-t}},aoe=class extends F{constructor(e){super(),this.column=e}buildCache(e){let{column:t,beans:{gos:n,pinnedRowModel:i,rowModel:s,valueSvc:r}}=this,{colDef:o}=t,a=new Map,l=n.getCallback("isFullWidthRow"),c=o.equals,u=o.spanRows,d=typeof u=="function",h=null,p=null,g,f=(v,y)=>{h=v,p=null,g=y},m=v=>{let y=!v.isExpandable()&&!v.group&&!v.detail&&(l?!l({rowNode:v}):!0);if(v.rowIndex==null||!y){f(null,null);return}if(h==null||v.level!==h.level||v.footer||p&&v.rowIndex-1!==p?.getLastNode().rowIndex){f(v,r.getValue(t,v));return}let w=r.getValue(t,v);if(d){let x=fe(n,{valueA:g,nodeA:h,valueB:w,nodeB:v,column:t,colDef:o});if(!u(x)){f(v,w);return}}else if(c?!c(g,w):g!==w){f(v,w);return}p||(p=new ooe(t,h),a.set(h,p)),p.addSpannedNode(v),a.set(v,p)};switch(e){case"center":s.forEachDisplayedNode?.(m);break;case"top":i?.forEachPinnedRow("top",m);break;case"bottom":i?.forEachPinnedRow("bottom",m);break}this[`${e}ValueNodeMap`]=a}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${WO(e.rowPinned)}ValueNodeMap`].get(e)}},loe=class extends F{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=An(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=An(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){this.addManagedEventListeners({modelUpdated:this.buildModelCaches.bind(this),pinnedRowDataChanged:this.buildPinnedCaches.bind(this)})}register(e){let{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;let n=this.createManagedBean(new aoe(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated(e){let{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){let n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){let{pinnedRowModel:t,rowModel:n}=this.beans,i=e.column,s=e.rowIndex,r=this.spanningColumns.get(i);if(!r)return;let o;switch(e.rowPinned){case"top":o=t?.getPinnedTopRow(s);break;case"bottom":o=t?.getPinnedBottomRow(s);break;default:o=n.getRow(s)}if(o)return r.getCellSpan(o)}getCellStart(e){let t=this.getCellSpanByPosition(e);return t?R(S({},e),{rowIndex:t.firstNode.rowIndex}):e}getCellEnd(e){let t=this.getCellSpanByPosition(e);return t?R(S({},e),{rowIndex:t.getLastNode().rowIndex}):e}getCellSpan(e,t){let n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(let[n,i]of this.spanningColumns)if(i.isCellSpanning(e)){let s=i.getCellSpan(e);t(n,s)}}destroy(){super.destroy(),this.spanningColumns.clear()}},coe={moduleName:"CellSpan",version:W,beans:[loe,roe]},uoe=class extends F{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let{column:e,cellComp:t}=this,n=e.colDef,i=n.cellClassRules,s=this.getCellClassParams(e,n);DD(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,s,r=>t.addOrRemoveCssClass(r,!0),r=>t.addOrRemoveCssClass(r,!1)),this.cellClassRules=i}applyUserStyles(){let e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let i;if(typeof n=="function"){let s=this.getCellClassParams(e,t);i=n(s)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){let{column:e,cellComp:t}=this,n=e.colDef,i=this.getCellClassParams(e,n);this.staticClasses.forEach(r=>t.addOrRemoveCssClass(r,!1));let s=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=s,s.forEach(r=>t.addOrRemoveCssClass(r,!0))}getCellClassParams(e,t){let{value:n,rowNode:i}=this.cellCtrl;return fe(this.beans.gos,{value:n,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},doe=class extends F{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,i){DD(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e,t){return new uoe(e,t)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(s=>{n(s)})}},hoe={moduleName:"CellStyle",version:W,beans:[doe]},poe={moduleName:"RowStyle",version:W,beans:[Dq]};function goe(e,t){return!!e.colHover?.isHovered(t)}var foe=class extends F{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){if(this.gos.get("columnHoverHighlight")){let e=this.beans.colHover;this.addManagedListeners(this.element,{mouseout:e.clearMouseOver.bind(e),mouseover:e.setMouseOver.bind(e,this.columns)})}}},moe="ag-column-hover",voe=class extends F{constructor(){super(...arguments),this.beanName="colHover"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){let t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){let i=()=>{if(!this.gos.get("columnHoverHighlight"))return;let s=this.isHovered(n);t.addOrRemoveCssClass("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t||!this.gos.get("columnHoverHighlight"))return;let n=this.isHovered(e);t.addOrRemoveCssClass(moe,n)}addHeaderFilterColumnHoverListener(e,t,n,i){this.createHoverFeature(e,[n],i);let s=()=>{if(!this.gos.get("columnHoverHighlight"))return;let r=this.isHovered(n);t.addOrRemoveCssClass("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:s}),s()}createHoverFeature(e,t,n){e.createManagedBean(new foe(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},yoe={moduleName:"ColumnHover",version:W,beans:[voe],apiFunctions:{isColumnHovered:goe}},Coe=class extends F{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addEventListener(e,t){let n=this.wrapSvc?.wrap(t)??t,i=!Av.has(e),s=i?this.asyncListeners:this.syncListeners;s.has(e)||s.set(e,new Set),s.get(e).add(n),this.eventSvc.addEventListener(e,n,i)}removeEventListener(e,t){let n=this.wrapSvc?.unwrap(t)??t,s=!!this.asyncListeners.get(e)?.delete(n);s||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeEventListener(e,n,s)}addGlobalListener(e){let t=this.wrapSvc?.wrapGlobal(e)??e,n=(r,o)=>{Av.has(r)&&t(r,o)},i=(r,o)=>{Av.has(r)||t(r,o)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:i});let s=this.eventSvc;s.addGlobalListener(n,!1),s.addGlobalListener(i,!0)}removeGlobalListener(e){let{eventSvc:t,wrapSvc:n,globalListenerPairs:i}=this,s=n?.unwrapGlobal(e)??e;if(i.has(s)){let{syncListener:o,asyncListener:a}=i.get(s);t.removeGlobalListener(o,!1),t.removeGlobalListener(a,!0),i.delete(e)}else this.syncGlobalListeners.delete(s),t.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(s=>this.eventSvc.removeEventListener(i,s,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventSvc.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);let{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:i})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function woe(e,t,n){e.apiEventSvc?.addEventListener(t,n)}function boe(e,t,n){e.apiEventSvc?.removeEventListener(t,n)}function Soe(e,t){e.apiEventSvc?.addGlobalListener(t)}function xoe(e,t){e.apiEventSvc?.removeGlobalListener(t)}var Doe={moduleName:"EventApi",version:W,apiFunctions:{addEventListener:woe,addGlobalListener:Soe,removeEventListener:boe,removeGlobalListener:xoe},beans:[Coe]},Moe=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",Eoe=class extends F{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,i){e&&t.destroyBean(e);let s=yx(this.gos),{column:r,eGui:o}=t,a=r.getColDef();!i&&s&&!a.headerComponent&&(i=Iv(()=>o.querySelector(".ag-header-cell-text")));let l={getColumn:()=>r,getColDef:()=>r.getColDef(),getGui:()=>o,getLocation:()=>"header",getTooltipValue:()=>n??r.getColDef().headerTooltip,shouldDisplayTooltip:i},c=this.createTooltipFeature(l);return c&&(c=t.createBean(c),t.setRefreshFunction("tooltip",()=>c.refreshTooltip())),c}setupHeaderGroupTooltip(e,t,n,i){e&&t.destroyBean(e);let s=yx(this.gos),{column:r,eGui:o}=t,a=r.getColGroupDef();!i&&s&&!a?.headerGroupComponent&&(i=Iv(()=>o.querySelector(".ag-header-group-text")));let l={getColumn:()=>r,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>n??(a&&a.headerTooltip),shouldDisplayTooltip:i};a&&(l.getColDef=()=>a);let c=this.createTooltipFeature(l);return c&&t.createBean(c)}enableCellTooltipFeature(e,t,n){let{column:i,rowNode:s}=e,r=()=>{let l=i.getColDef(),c=s.data;if(l.tooltipField&&H(c))return Bh(c,l.tooltipField,i.isTooltipFieldContainsDots());let u=l.tooltipValueGetter;return u?u(fe(this.gos,{location:"cell",colDef:i.getColDef(),column:i,rowIndex:e.cellPosition.rowIndex,node:s,data:s.data,value:e.value,valueFormatted:e.valueFormatted})):null},o=yx(this.gos);!n&&o&&!e.isCellRenderer()&&(n=Iv(()=>{let l=e.eGui;return l.children.length===0?l:l.querySelector(".ag-cell-value")}));let a={getColumn:()=>i,getColDef:()=>i.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>s,getGui:()=>e.eGui,getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:r,getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:n};return this.createTooltipFeature(a,this.beans)}refreshRowTooltip(e,t,n,i){let s={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},r=this.beans,o=r.context;e&&t.destroyBean(e,o);let a=this.createTooltipFeature(s,r);return t.createBean(a,o)}initCol(e){let{colDef:t}=e;e.tooltipEnabled=H(t.tooltipField)||H(t.tooltipValueGetter)||H(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},Ioe={moduleName:"Tooltip",version:W,beans:[Eoe],dynamicBeans:{tooltipFeature:_Z},userComponents:{agTooltipComponent:Rte},dependsOn:[iy],css:[Moe]},Aoe={moduleName:"Locale",version:W,beans:[Ste]},Roe=class extends F{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=An(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){let{visibleCols:e,rowModel:t,rowSpanSvc:n}=this.beans,i=e.autoHeightCols,s=!1;t.forEachDisplayedNode?.(r=>{let o=r.__autoHeights,a=Eu(this.beans,r).height;for(let l of i){if(this.colSpanSkipRow(l,r))return;let c=o?.[l.getColId()],u=n?.getCellSpan(l,r);if(u){if(u.getLastNode()!==r)continue;if(c=n?.getCellSpan(l,r)?.getLastNodeAutoHeight(),!c)return}if(c==null)return;a=Math.max(c,a)}a!==r.rowHeight&&(r.setRowHeight(a),s=!0)}),s&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,n){if(e.__autoHeights||(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}let i=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipRow(e,t){let{colModel:n,colViewport:i,visibleCols:s}=this.beans;if(!n.colSpanActive)return!1;let r=[];switch(e.getPinned()){case"left":r=s.getLeftColsForRow(t);break;case"right":r=s.getRightColsForRow(t);break;case null:r=i.getColsWithinViewport(t);break}return r.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;let i=t.parentElement,{rowNode:s,column:r}=e,o=this.beans,a=u=>{if(e.editing||!e.isAlive()||!n.isAlive())return;let{paddingTop:d,paddingBottom:h,borderBottomWidth:p,borderTopWidth:g}=Gl(i),f=d+h+p+g,v=t.offsetHeight+f;if(u<5){let y=Vt(o),w=!y||!y.contains(t),x=v==0;if(w||x){window.setTimeout(()=>a(u+1),0);return}}this.setRowAutoHeight(s,v,r)},l=()=>a(0);l();let c=Ia(o,t,l);return n.addDestroyFunc(()=>{c(),this.setRowAutoHeight(s,void 0,r)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}},Toe={moduleName:"RowAutoHeight",version:W,beans:[Roe]},UO={moduleName:"AllCommunity",version:W,dependsOn:[Rse,_se,Yse,cne,Nie,Oie,_ie,Bie,Vie,Gie,zie,Fie,Jne,eie,tie,Qne,iie,sie,are,dse,Mre,KQ,Nre,Ore,Wre,Zre,IX,noe,tse,cte,hoe,yoe,poe,Doe,hte,tre,Ioe,Aoe,Toe,EX,Tse,coe]};var oy=class e{_mobData=nS({request:()=>({}),loader:t=>fetch("/fo2mobs.json").then(n=>n.json()).then(n=>n.mobs)});mobData=this._mobData.asReadonly();constructor(){}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var $O=(()=>{class e extends vO{setViewContainerRef(n,i){this.viewContainerRef=n,this.angularFrameworkOverrides=i}createWrapper(n){let i=this.angularFrameworkOverrides,s=this;class r extends HD{init(l){i.runInsideAngular(()=>{super.init(l),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return i.runInsideAngular(()=>s.createComponent(n))}hasMethod(l){return o.getFrameworkComponentInstance()[l]!=null}callMethod(l,c){let u=this.getFrameworkComponentInstance(),d=u[l];return l==="doesFilterPass"?d.apply(u,c):i.runInsideAngular(()=>d.apply(u,c))}addMethod(l,c){o[l]=c}}let o=new r;return o}createComponent(n){return this.viewContainerRef.createComponent(n)}static{this.\u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})()}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})(),HD=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,cs(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},ay=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t){let n=t;return this.frameworkOverrides.shouldWrapOutgoing&&(n=i=>{this.frameworkOverrides.wrapOutgoing(()=>t(i))},this.wrappedListeners.set(t,n)),n}wrapGlobal(t){let n=t;return this.frameworkOverrides.shouldWrapOutgoing&&(n=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>t(i,s))},this.wrappedGlobalListeners.set(t,n)),n}unwrap(t){return this.wrappedListeners.get(t)??t}unwrapGlobal(t){return this.wrappedGlobalListeners.get(t)??t}},YO=(()=>{class e extends FD{constructor(n){super("angular"),this._ngZone=n,this.isRunningWithinTestZone=!1,this.wrapIncoming=(i,s)=>this.runOutside(i,s),this.wrapOutgoing=i=>this.runInsideAngular(i),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(i,s)=>s==="resize-observer"||s==="popupPositioning"?this._ngZone.runOutsideAngular(i):i():this.runOutside=i=>this._ngZone.runOutsideAngular(i):this.runOutside=i=>i()}get shouldWrapOutgoing(){return this._ngZone&&lt.isInAngularZone()}createLocalEventListenerWrapper(n,i){if(this.shouldWrapOutgoing)return n??(i.setFrameworkOverrides(this),new ay(this))}createGlobalEventListenerWrapper(){return new ay(this)}isFrameworkComponent(n){if(!n)return!1;let i=n.prototype;return i&&"agInit"in i}runInsideAngular(n){return this._ngZone?this._ngZone.run(n):n()}runOutsideAngular(n,i){return this.runOutside(n,i)}static{this.\u0275fac=function(i){return new(i||e)(Ie(lt))}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})(),KO=(()=>{class e{constructor(n,i,s,r){this._viewContainerRef=i,this._angularFrameworkOverrides=s,this._frameworkCompWrapper=r,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(o=>{this._resolveFullyReady=o}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressGroupChangesColumnVisibility=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.alwaysPassFilter=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.cellFlashDuration=void 0,this.cellFadeDuration=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableCellSpan=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupHideParentOfSingleChild=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.treeData=void 0,this.treeDataChildrenField=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.rowNumbers=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.themeCssLayer=void 0,this.themeStyleContainer=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new N,this.toolPanelSizeChanged=new N,this.columnMenuVisibleChanged=new N,this.contextMenuVisibleChanged=new N,this.cutStart=new N,this.cutEnd=new N,this.pasteStart=new N,this.pasteEnd=new N,this.columnVisible=new N,this.columnPinned=new N,this.columnResized=new N,this.columnMoved=new N,this.columnValueChanged=new N,this.columnPivotModeChanged=new N,this.columnPivotChanged=new N,this.columnGroupOpened=new N,this.newColumnsLoaded=new N,this.gridColumnsChanged=new N,this.displayedColumnsChanged=new N,this.virtualColumnsChanged=new N,this.columnEverythingChanged=new N,this.columnHeaderMouseOver=new N,this.columnHeaderMouseLeave=new N,this.columnHeaderClicked=new N,this.columnHeaderContextMenu=new N,this.componentStateChanged=new N,this.cellValueChanged=new N,this.cellEditRequest=new N,this.rowValueChanged=new N,this.cellEditingStarted=new N,this.cellEditingStopped=new N,this.rowEditingStarted=new N,this.rowEditingStopped=new N,this.undoStarted=new N,this.undoEnded=new N,this.redoStarted=new N,this.redoEnded=new N,this.cellSelectionDeleteStart=new N,this.cellSelectionDeleteEnd=new N,this.rangeDeleteStart=new N,this.rangeDeleteEnd=new N,this.fillStart=new N,this.fillEnd=new N,this.filterOpened=new N,this.filterChanged=new N,this.filterModified=new N,this.advancedFilterBuilderVisibleChanged=new N,this.chartCreated=new N,this.chartRangeSelectionChanged=new N,this.chartOptionsChanged=new N,this.chartDestroyed=new N,this.cellKeyDown=new N,this.gridReady=new N,this.firstDataRendered=new N,this.gridSizeChanged=new N,this.modelUpdated=new N,this.virtualRowRemoved=new N,this.viewportChanged=new N,this.bodyScroll=new N,this.bodyScrollEnd=new N,this.dragStarted=new N,this.dragStopped=new N,this.dragCancelled=new N,this.stateUpdated=new N,this.paginationChanged=new N,this.rowDragEnter=new N,this.rowDragMove=new N,this.rowDragLeave=new N,this.rowDragEnd=new N,this.rowDragCancel=new N,this.columnRowGroupChanged=new N,this.rowGroupOpened=new N,this.expandOrCollapseAll=new N,this.pivotMaxColumnsExceeded=new N,this.pinnedRowDataChanged=new N,this.rowDataUpdated=new N,this.asyncTransactionsFlushed=new N,this.storeRefreshed=new N,this.headerFocused=new N,this.cellClicked=new N,this.cellDoubleClicked=new N,this.cellFocused=new N,this.cellMouseOver=new N,this.cellMouseOut=new N,this.cellMouseDown=new N,this.rowClicked=new N,this.rowDoubleClicked=new N,this.rowSelected=new N,this.selectionChanged=new N,this.cellContextMenu=new N,this.rangeSelectionChanged=new N,this.cellSelectionChanged=new N,this.tooltipShow=new N,this.tooltipHide=new N,this.sortChanged=new N,this._nativeElement=n.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this._angularFrameworkOverrides.runOutsideAngular(()=>{this._frameworkCompWrapper.setViewContainerRef(this._viewContainerRef,this._angularFrameworkOverrides);let n=Object.keys(this).filter(a=>!(a.startsWith("_")||a=="gridOptions"||a=="modules"||this[a]instanceof N)),i={};n.forEach(a=>{let l=Loe(a,this[a]);i[a]=l});let s=WF(this.gridOptions,i,n),r={globalListener:this.globalListener.bind(this),frameworkOverrides:this._angularFrameworkOverrides,providedBeanInstances:{frameworkCompWrapper:this._frameworkCompWrapper},modules:this.modules||[],setThemeOnGridDiv:!0},o=pO(this._nativeElement,s,r);o&&(this.api=o),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(n){this._initialised&&this._angularFrameworkOverrides.runOutsideAngular(()=>{let i={};for(let s of Object.keys(n)){let r=n[s];i[s]=r.currentValue}UF(i,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(n){let s=this[n],r=s?.observed??s?.observers?.length>0,o=`on${n.charAt(0).toUpperCase()}${n.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[o];return r||a}globalListener(n,i){if(this._destroyed)return;let s=this[n];if(s&&this.isEmitterUsed(n)){let r=()=>this._angularFrameworkOverrides.runInsideAngular(()=>s.emit(i));this._holdEvents?this._fullyReady.then(()=>r()):r()}}static{this.\u0275fac=function(i){return new(i||e)(Be(vi),Be(iu),Be(YO),Be($O))}}static{this.\u0275cmp=qn({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:[2,"suppressContextMenu","suppressContextMenu",k],preventDefaultOnContextMenu:[2,"preventDefaultOnContextMenu","preventDefaultOnContextMenu",k],allowContextMenuWithControlKey:[2,"allowContextMenuWithControlKey","allowContextMenuWithControlKey",k],columnMenu:"columnMenu",suppressMenuHide:[2,"suppressMenuHide","suppressMenuHide",k],enableBrowserTooltips:[2,"enableBrowserTooltips","enableBrowserTooltips",k],tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:[2,"tooltipMouseTrack","tooltipMouseTrack",k],tooltipShowMode:"tooltipShowMode",tooltipInteraction:[2,"tooltipInteraction","tooltipInteraction",k],popupParent:"popupParent",copyHeadersToClipboard:[2,"copyHeadersToClipboard","copyHeadersToClipboard",k],copyGroupHeadersToClipboard:[2,"copyGroupHeadersToClipboard","copyGroupHeadersToClipboard",k],clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:[2,"suppressCopyRowsToClipboard","suppressCopyRowsToClipboard",k],suppressCopySingleCellRanges:[2,"suppressCopySingleCellRanges","suppressCopySingleCellRanges",k],suppressLastEmptyLineOnPaste:[2,"suppressLastEmptyLineOnPaste","suppressLastEmptyLineOnPaste",k],suppressClipboardPaste:[2,"suppressClipboardPaste","suppressClipboardPaste",k],suppressClipboardApi:[2,"suppressClipboardApi","suppressClipboardApi",k],suppressCutToClipboard:[2,"suppressCutToClipboard","suppressCutToClipboard",k],columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:[2,"maintainColumnOrder","maintainColumnOrder",k],enableStrictPivotColumnOrder:[2,"enableStrictPivotColumnOrder","enableStrictPivotColumnOrder",k],suppressFieldDotNotation:[2,"suppressFieldDotNotation","suppressFieldDotNotation",k],headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:[2,"allowDragFromColumnsToolPanel","allowDragFromColumnsToolPanel",k],suppressMovableColumns:[2,"suppressMovableColumns","suppressMovableColumns",k],suppressColumnMoveAnimation:[2,"suppressColumnMoveAnimation","suppressColumnMoveAnimation",k],suppressMoveWhenColumnDragging:[2,"suppressMoveWhenColumnDragging","suppressMoveWhenColumnDragging",k],suppressDragLeaveHidesColumns:[2,"suppressDragLeaveHidesColumns","suppressDragLeaveHidesColumns",k],suppressGroupChangesColumnVisibility:"suppressGroupChangesColumnVisibility",suppressMakeColumnVisibleAfterUnGroup:[2,"suppressMakeColumnVisibleAfterUnGroup","suppressMakeColumnVisibleAfterUnGroup",k],suppressRowGroupHidesColumns:[2,"suppressRowGroupHidesColumns","suppressRowGroupHidesColumns",k],colResizeDefault:"colResizeDefault",suppressAutoSize:[2,"suppressAutoSize","suppressAutoSize",k],autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:[2,"skipHeaderOnAutoSize","skipHeaderOnAutoSize",k],autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:[2,"singleClickEdit","singleClickEdit",k],suppressClickEdit:[2,"suppressClickEdit","suppressClickEdit",k],readOnlyEdit:[2,"readOnlyEdit","readOnlyEdit",k],stopEditingWhenCellsLoseFocus:[2,"stopEditingWhenCellsLoseFocus","stopEditingWhenCellsLoseFocus",k],enterNavigatesVertically:[2,"enterNavigatesVertically","enterNavigatesVertically",k],enterNavigatesVerticallyAfterEdit:[2,"enterNavigatesVerticallyAfterEdit","enterNavigatesVerticallyAfterEdit",k],enableCellEditingOnBackspace:[2,"enableCellEditingOnBackspace","enableCellEditingOnBackspace",k],undoRedoCellEditing:[2,"undoRedoCellEditing","undoRedoCellEditing",k],undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:[2,"suppressCsvExport","suppressCsvExport",k],defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:[2,"suppressExcelExport","suppressExcelExport",k],excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:[2,"cacheQuickFilter","cacheQuickFilter",k],includeHiddenColumnsInQuickFilter:[2,"includeHiddenColumnsInQuickFilter","includeHiddenColumnsInQuickFilter",k],quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:[2,"applyQuickFilterBeforePivotOrAgg","applyQuickFilterBeforePivotOrAgg",k],excludeChildrenWhenTreeDataFiltering:[2,"excludeChildrenWhenTreeDataFiltering","excludeChildrenWhenTreeDataFiltering",k],enableAdvancedFilter:[2,"enableAdvancedFilter","enableAdvancedFilter",k],alwaysPassFilter:"alwaysPassFilter",includeHiddenColumnsInAdvancedFilter:[2,"includeHiddenColumnsInAdvancedFilter","includeHiddenColumnsInAdvancedFilter",k],advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:[2,"suppressAdvancedFilterEval","suppressAdvancedFilterEval",k],suppressSetFilterByDefault:[2,"suppressSetFilterByDefault","suppressSetFilterByDefault",k],enableCharts:[2,"enableCharts","enableCharts",k],chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:[2,"masterDetail","masterDetail",k],keepDetailRows:[2,"keepDetailRows","keepDetailRows",k],keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:[2,"detailRowAutoHeight","detailRowAutoHeight",k],context:"context",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:[2,"valueCache","valueCache",k],valueCacheNeverExpires:[2,"valueCacheNeverExpires","valueCacheNeverExpires",k],enableCellExpressions:[2,"enableCellExpressions","enableCellExpressions",k],suppressTouch:[2,"suppressTouch","suppressTouch",k],suppressFocusAfterRefresh:[2,"suppressFocusAfterRefresh","suppressFocusAfterRefresh",k],suppressBrowserResizeObserver:[2,"suppressBrowserResizeObserver","suppressBrowserResizeObserver",k],suppressPropertyNamesCheck:[2,"suppressPropertyNamesCheck","suppressPropertyNamesCheck",k],suppressChangeDetection:[2,"suppressChangeDetection","suppressChangeDetection",k],debug:[2,"debug","debug",k],loading:[2,"loading","loading",k],overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:[2,"suppressLoadingOverlay","suppressLoadingOverlay",k],overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:[2,"suppressNoRowsOverlay","suppressNoRowsOverlay",k],pagination:[2,"pagination","pagination",k],paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:[2,"paginationAutoPageSize","paginationAutoPageSize",k],paginateChildRows:[2,"paginateChildRows","paginateChildRows",k],suppressPaginationPanel:[2,"suppressPaginationPanel","suppressPaginationPanel",k],pivotMode:[2,"pivotMode","pivotMode",k],pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:[2,"pivotSuppressAutoColumn","pivotSuppressAutoColumn",k],suppressExpandablePivotGroups:[2,"suppressExpandablePivotGroups","suppressExpandablePivotGroups",k],functionsReadOnly:[2,"functionsReadOnly","functionsReadOnly",k],aggFuncs:"aggFuncs",suppressAggFuncInHeader:[2,"suppressAggFuncInHeader","suppressAggFuncInHeader",k],alwaysAggregateAtRootLevel:[2,"alwaysAggregateAtRootLevel","alwaysAggregateAtRootLevel",k],aggregateOnlyChangedColumns:[2,"aggregateOnlyChangedColumns","aggregateOnlyChangedColumns",k],suppressAggFilteredOnly:[2,"suppressAggFilteredOnly","suppressAggFilteredOnly",k],removePivotHeaderRowWhenSingleValueColumn:[2,"removePivotHeaderRowWhenSingleValueColumn","removePivotHeaderRowWhenSingleValueColumn",k],animateRows:[2,"animateRows","animateRows",k],cellFlashDuration:"cellFlashDuration",cellFadeDuration:"cellFadeDuration",allowShowChangeAfterFilter:[2,"allowShowChangeAfterFilter","allowShowChangeAfterFilter",k],domLayout:"domLayout",ensureDomOrder:[2,"ensureDomOrder","ensureDomOrder",k],enableCellSpan:[2,"enableCellSpan","enableCellSpan",k],enableRtl:[2,"enableRtl","enableRtl",k],suppressColumnVirtualisation:[2,"suppressColumnVirtualisation","suppressColumnVirtualisation",k],suppressMaxRenderedRowRestriction:[2,"suppressMaxRenderedRowRestriction","suppressMaxRenderedRowRestriction",k],suppressRowVirtualisation:[2,"suppressRowVirtualisation","suppressRowVirtualisation",k],rowDragManaged:[2,"rowDragManaged","rowDragManaged",k],suppressRowDrag:[2,"suppressRowDrag","suppressRowDrag",k],suppressMoveWhenRowDragging:[2,"suppressMoveWhenRowDragging","suppressMoveWhenRowDragging",k],rowDragEntireRow:[2,"rowDragEntireRow","rowDragEntireRow",k],rowDragMultiRow:[2,"rowDragMultiRow","rowDragMultiRow",k],rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:[2,"embedFullWidthRows","embedFullWidthRows",k],groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:[2,"groupMaintainOrder","groupMaintainOrder",k],groupSelectsChildren:[2,"groupSelectsChildren","groupSelectsChildren",k],groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:[2,"groupSuppressBlankHeader","groupSuppressBlankHeader",k],groupSelectsFiltered:[2,"groupSelectsFiltered","groupSelectsFiltered",k],showOpenedGroup:[2,"showOpenedGroup","showOpenedGroup",k],groupHideParentOfSingleChild:"groupHideParentOfSingleChild",groupRemoveSingleChildren:[2,"groupRemoveSingleChildren","groupRemoveSingleChildren",k],groupRemoveLowestSingleChildren:[2,"groupRemoveLowestSingleChildren","groupRemoveLowestSingleChildren",k],groupHideOpenParents:[2,"groupHideOpenParents","groupHideOpenParents",k],groupAllowUnbalanced:[2,"groupAllowUnbalanced","groupAllowUnbalanced",k],rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",treeData:[2,"treeData","treeData",k],treeDataChildrenField:"treeDataChildrenField",rowGroupPanelSuppressSort:[2,"rowGroupPanelSuppressSort","rowGroupPanelSuppressSort",k],suppressGroupRowsSticky:[2,"suppressGroupRowsSticky","suppressGroupRowsSticky",k],pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:[2,"suppressModelUpdateAfterUpdateTransaction","suppressModelUpdateAfterUpdateTransaction",k],datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideFullWidthLoadingRow:[2,"suppressServerSideFullWidthLoadingRow","suppressServerSideFullWidthLoadingRow",k],cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:[2,"purgeClosedRowNodes","purgeClosedRowNodes",k],serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:[2,"serverSideSortAllLevels","serverSideSortAllLevels",k],serverSideEnableClientSideSort:[2,"serverSideEnableClientSideSort","serverSideEnableClientSideSort",k],serverSideOnlyRefreshFilteredGroups:[2,"serverSideOnlyRefreshFilteredGroups","serverSideOnlyRefreshFilteredGroups",k],serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:[2,"alwaysShowHorizontalScroll","alwaysShowHorizontalScroll",k],alwaysShowVerticalScroll:[2,"alwaysShowVerticalScroll","alwaysShowVerticalScroll",k],debounceVerticalScrollbar:[2,"debounceVerticalScrollbar","debounceVerticalScrollbar",k],suppressHorizontalScroll:[2,"suppressHorizontalScroll","suppressHorizontalScroll",k],suppressScrollOnNewData:[2,"suppressScrollOnNewData","suppressScrollOnNewData",k],suppressScrollWhenPopupsAreOpen:[2,"suppressScrollWhenPopupsAreOpen","suppressScrollWhenPopupsAreOpen",k],suppressAnimationFrame:[2,"suppressAnimationFrame","suppressAnimationFrame",k],suppressMiddleClickScrolls:[2,"suppressMiddleClickScrolls","suppressMiddleClickScrolls",k],suppressPreventDefaultOnMouseWheel:[2,"suppressPreventDefaultOnMouseWheel","suppressPreventDefaultOnMouseWheel",k],scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:[2,"rowMultiSelectWithClick","rowMultiSelectWithClick",k],suppressRowDeselection:[2,"suppressRowDeselection","suppressRowDeselection",k],suppressRowClickSelection:[2,"suppressRowClickSelection","suppressRowClickSelection",k],suppressCellFocus:[2,"suppressCellFocus","suppressCellFocus",k],suppressHeaderFocus:[2,"suppressHeaderFocus","suppressHeaderFocus",k],selectionColumnDef:"selectionColumnDef",rowNumbers:"rowNumbers",suppressMultiRangeSelection:[2,"suppressMultiRangeSelection","suppressMultiRangeSelection",k],enableCellTextSelection:[2,"enableCellTextSelection","enableCellTextSelection",k],enableRangeSelection:[2,"enableRangeSelection","enableRangeSelection",k],enableRangeHandle:[2,"enableRangeHandle","enableRangeHandle",k],enableFillHandle:[2,"enableFillHandle","enableFillHandle",k],fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:[2,"suppressClearOnFillReduction","suppressClearOnFillReduction",k],sortingOrder:"sortingOrder",accentedSort:[2,"accentedSort","accentedSort",k],unSortIcon:[2,"unSortIcon","unSortIcon",k],suppressMultiSort:[2,"suppressMultiSort","suppressMultiSort",k],alwaysMultiSort:[2,"alwaysMultiSort","alwaysMultiSort",k],multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:[2,"suppressMaintainUnsortedOrder","suppressMaintainUnsortedOrder",k],icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:[2,"suppressRowHoverHighlight","suppressRowHoverHighlight",k],suppressRowTransform:[2,"suppressRowTransform","suppressRowTransform",k],columnHoverHighlight:[2,"columnHoverHighlight","columnHoverHighlight",k],gridId:"gridId",deltaSort:[2,"deltaSort","deltaSort",k],treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:[2,"enableGroupEdit","enableGroupEdit",k],initialState:"initialState",theme:"theme",loadThemeGoogleFonts:[2,"loadThemeGoogleFonts","loadThemeGoogleFonts",k],themeCssLayer:"themeCssLayer",themeStyleContainer:"themeStyleContainer",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:[2,"resetRowDataOnUpdate","resetRowDataOnUpdate",k],processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},features:[fa([YO,$O]),ch,vr],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return e})(),koe=new Set(VD);function Loe(e,t){return koe.has(e)?t===""?!0:t==="false"?!1:t:t}var i2=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,i){this._renderer=n,this._elementRef=i}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(i){return new(i||e)(Be(io),Be(vi))};static \u0275dir=Zn({type:e})}return e})(),hy=(()=>{class e extends i2{static \u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})();static \u0275dir=Zn({type:e,features:[Bs]})}return e})(),pp=new se("");var Poe={provide:pp,useExisting:ua(()=>py),multi:!0};function Foe(){let e=ro()?ro().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Noe=new se(""),py=(()=>{class e extends i2{_compositionMode;_composing=!1;constructor(n,i,s){super(n,i),this._compositionMode=s,this._compositionMode==null&&(this._compositionMode=!Foe())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(i){return new(i||e)(Be(io),Be(vi),Be(Noe,8))};static \u0275dir=Zn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Gs("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},standalone:!1,features:[fa([Poe]),Bs]})}return e})();var Ooe=new se(""),_oe=new se("");function s2(e){return e!=null}function r2(e){return Cl(e)?vt(e):e}function o2(e){let t={};return e.forEach(n=>{t=n!=null?S(S({},t),n):t}),Object.keys(t).length===0?null:t}function a2(e,t){return t.map(n=>n(e))}function Boe(e){return!e.validate}function l2(e){return e.map(t=>Boe(t)?t:n=>t.validate(n))}function Voe(e){if(!e)return null;let t=e.filter(s2);return t.length==0?null:function(n){return o2(a2(n,t))}}function c2(e){return e!=null?Voe(l2(e)):null}function Goe(e){if(!e)return null;let t=e.filter(s2);return t.length==0?null:function(n){let i=a2(n,t).map(r2);return Hw(i).pipe(Me(o2))}}function u2(e){return e!=null?Goe(l2(e)):null}function qO(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function zoe(e){return e._rawValidators}function Hoe(e){return e._rawAsyncValidators}function jD(e){return e?Array.isArray(e)?e:[e]:[]}function cy(e,t){return Array.isArray(e)?e.includes(t):e===t}function ZO(e,t){let n=jD(t);return jD(e).forEach(s=>{cy(n,s)||n.push(s)}),n}function XO(e,t){return jD(t).filter(n=>!cy(e,n))}var uy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=c2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=u2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},WD=class extends uy{name;get formDirective(){return null}get path(){return null}},hp=class extends uy{_parent=null;name=null;valueAccessor=null},UD=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},joe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GRe=R(S({},joe),{"[class.ng-submitted]":"isSubmitted"}),d2=(()=>{class e extends UD{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(Be(hp,2))};static \u0275dir=Zn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&X0("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},standalone:!1,features:[Bs]})}return e})();var lp="VALID",ly="INVALID",Ou="PENDING",cp="DISABLED",Bu=class{},dy=class extends Bu{value;source;constructor(t,n){super(),this.value=t,this.source=n}},up=class extends Bu{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},dp=class extends Bu{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},_u=class extends Bu{status;source;constructor(t,n){super(),this.status=t,this.source=n}};function Woe(e){return(gy(e)?e.validators:e)||null}function Uoe(e){return Array.isArray(e)?c2(e):e||null}function $oe(e,t){return(gy(t)?t.asyncValidators:e)||null}function Yoe(e){return Array.isArray(e)?u2(e):e||null}function gy(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var $D=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Yn(this.statusReactive)}set status(t){Yn(()=>this.statusReactive.set(t))}_status=fi(()=>this.statusReactive());statusReactive=On(void 0);get valid(){return this.status===lp}get invalid(){return this.status===ly}get pending(){return this.status==Ou}get disabled(){return this.status===cp}get enabled(){return this.status!==cp}errors;get pristine(){return Yn(this.pristineReactive)}set pristine(t){Yn(()=>this.pristineReactive.set(t))}_pristine=fi(()=>this.pristineReactive());pristineReactive=On(!0);get dirty(){return!this.pristine}get touched(){return Yn(this.touchedReactive)}set touched(t){Yn(()=>this.touchedReactive.set(t))}_touched=fi(()=>this.touchedReactive());touchedReactive=On(!1);get untouched(){return!this.touched}_events=new St;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ZO(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ZO(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(XO(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(XO(t,this._rawAsyncValidators))}hasValidator(t){return cy(this._rawValidators,t)}hasAsyncValidator(t){return cy(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(R(S({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new dp(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),n&&t.emitEvent!==!1&&this._events.next(new dp(!1,i))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(R(S({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new up(!1,i))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),n&&t.emitEvent!==!1&&this._events.next(new up(!0,i))}markAsPending(t={}){this.status=Ou;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _u(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(R(S({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=cp,this.errors=null,this._forEachChild(s=>{s.disable(R(S({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new dy(this.value,i)),this._events.next(new _u(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(R(S({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=lp,this._forEachChild(i=>{i.enable(R(S({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(R(S({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lp||this.status===Ou)&&this._runAsyncValidator(i,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new dy(this.value,n)),this._events.next(new _u(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(R(S({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cp:lp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Ou,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=r2(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,s)=>i&&i._find(s),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new _u(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,i)}_initObservables(){this.valueChanges=new N,this.statusChanges=new N}_calculateStatus(){return this._allControlsDisabled()?cp:this.errors?ly:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ou)?Ou:this._anyControlsHaveStatus(ly)?ly:lp}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let i=!this._anyControlsDirty(),s=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),s&&this._events.next(new up(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new dp(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){gy(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Uoe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Yoe(this._rawAsyncValidators)}};var h2=new se("",{providedIn:"root",factory:()=>YD}),YD="always";function Koe(e,t){return[...t.path,e]}function qoe(e,t,n=YD){Xoe(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Qoe(e,t),eae(e,t),Joe(e,t),Zoe(e,t)}function QO(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Zoe(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Xoe(e,t){let n=zoe(e);t.validator!==null?e.setValidators(qO(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=Hoe(e);t.asyncValidator!==null?e.setAsyncValidators(qO(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let s=()=>e.updateValueAndValidity();QO(t._rawValidators,s),QO(t._rawAsyncValidators,s)}function Qoe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&p2(e,t)})}function Joe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&p2(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function p2(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function eae(e,t){let n=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function tae(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function nae(e){return Object.getPrototypeOf(e.constructor)===hy}function iae(e,t){if(!t)return null;Array.isArray(t);let n,i,s;return t.forEach(r=>{r.constructor===py?n=r:nae(r)?i=r:s=r}),s||i||n||null}function JO(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function e2(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var sae=class extends $D{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,i){super(Woe(n),$oe(i,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(e2(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){JO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){JO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){e2(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var rae={provide:hp,useExisting:ua(()=>KD)},t2=Promise.resolve(),KD=(()=>{class e extends hp{_changeDetectorRef;callSetDisabledState;control=new sae;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new N;constructor(n,i,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=iae(this,r)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),tae(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qoe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){t2.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,s=i!==0&&k(i);t2.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Koe(n,this._parent):[n]}static \u0275fac=function(i){return new(i||e)(Be(WD,9),Be(Ooe,10),Be(_oe,10),Be(pp,10),Be(ma,8),Be(h2,8))};static \u0275dir=Zn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fa([rae]),Bs,vr]})}return e})();var oae={provide:pp,useExisting:ua(()=>qD),multi:!0},qD=(()=>{class e extends hy{writeValue(n){let i=n??"";this.setProperty("value",i)}registerOnChange(n){this.onChange=i=>{n(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})();static \u0275dir=Zn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Gs("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},standalone:!1,features:[fa([oae]),Bs]})}return e})();var aae={provide:pp,useExisting:ua(()=>fy),multi:!0};function g2(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function lae(e){return e.split(":")[0]}var fy=(()=>{class e extends hy{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i=this._getOptionId(n),s=g2(i,n);this.setProperty("value",s)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=lae(n);return this._optionMap.has(i)?this._optionMap.get(i):n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})();static \u0275dir=Zn({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Gs("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fa([aae]),Bs]})}return e})(),f2=(()=>{class e{_element;_renderer;_select;id;constructor(n,i,s){this._element=n,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(g2(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||e)(Be(vi),Be(io),Be(fy,9))};static \u0275dir=Zn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),cae={provide:pp,useExisting:ua(()=>m2),multi:!0};function n2(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function uae(e){return e.split(":")[0]}var m2=(()=>{class e extends hy{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i;if(Array.isArray(n)){let s=n.map(r=>this._getOptionId(r));i=(r,o)=>{r._setSelected(s.indexOf(o.toString())>-1)}}else i=(s,r)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let s=[],r=i.selectedOptions;if(r!==void 0){let o=r;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);s.push(c)}}else{let o=i.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);s.push(c)}}}this.value=s,n(s)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=uae(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=yr(e)))(s||e)}})();static \u0275dir=Zn({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Gs("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fa([cae]),Bs]})}return e})(),v2=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,i,s){this._element=n,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(n2(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(n2(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||e)(Be(vi),Be(io),Be(m2,9))};static \u0275dir=Zn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var dae=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=so({type:e});static \u0275inj=Jr({})}return e})();var y2=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:h2,useValue:n.callSetDisabledState??YD}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=so({type:e});static \u0275inj=Jr({imports:[dae]})}return e})();var my=class e{sanitizer=_(pS);value=On("");agInit(t){this.refresh(t)}refresh(t){return this.value.set(t.value),!0}imageBypass(t){return this.sanitizer.bypassSecurityTrustStyle(`url(${t})`)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=qn({type:e,selectors:[["fo2tools-animated-image-ag-grid-cell-renderer"]],decls:1,vars:2,consts:[[1,"pixelart",2,"width","64px","height","96px","background-position","50% 40%","background-repeat","no-repeat","background-size","300% 400%"]],template:function(n,i){n&1&&os(0,"div",0),n&2&&zm("background-image",i.imageBypass(i.value()))},styles:[".pixelart[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spriteMoveOnX 1s step-end infinite;image-rendering:pixelated}@keyframes _ngcontent-%COMP%_spriteMoveOnX{0%{background-position-x:50%}25%{background-position-x:100%}50%{background-position-x:50%}75%{background-position-x:0}to{background-position-x:50%}}"],changeDetection:0})};function C2(e){let t=0;return e>=1&&e<=7&&(t=5),e>=8&&e<=9&&(t=6),e>=10&&e<=11&&(t=7),e>=12&&e<=15&&(t=8),e>=16&&e<=19&&(t=9),e>=20&&e<=29&&(t=11),e>=30&&e<=39&&(t=12),e>=40&&e<=49&&(t=14),e>=50&&e<=59&&(t=16),e>=60&&e<=69&&(t=18),e>=70&&e<=79&&(t=20),console.log("ZD:",t),t}function pae(e){return 5*(e-1)+50}function vy(e,t){let n=e-t;if(n>10)return 0;let i=pae(e);if(n>=0){let r=Math.min(Math.max(.05*n,-1),1);return Math.round(i+i*r)}let s=i*(1-(t-e)/C2(t));return s>0?Math.round(s):0}function w2(e){let t=[];for(let n=e;n<=e+10;n++)t.push({playerLvl:e,mobLvl:n,xp:vy(n,e)});return console.log(t),t}function b2(e){let t=[];for(let n=e-1;n>=e-20;n--){let i={playerLvl:e,mobLvl:n,xp:vy(n,e)};if(t.push(i),i.xp<=0)break}return console.log(t),t}var yy=class e{userDPS=On(Number(localStorage.getItem("userDPS"))||200);userLevel=On(Number(localStorage.getItem("userLevel"))||30);constructor(){bl(t=>{let n=this.userDPS(),i=setTimeout(()=>{localStorage.setItem("userDPS",n.toString())},1e3);t(()=>{clearTimeout(i)})}),bl(t=>{let n=this.userLevel(),i=setTimeout(()=>{localStorage.setItem("userLevel",n.toString())},1e3);t(()=>{clearTimeout(i)})})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};fN.registerModules([UO]);var Cy=class e{userDataService=_(yy);gridMode=On(0);hideGoldColumns=fi(()=>{let t=this.gridMode();return t!=0&&t!=1});hideXpColumns=fi(()=>{let t=this.gridMode();return t!=0&&t!=2});hideFactionXpColumns=fi(()=>{let t=this.gridMode();return t!=0&&t!=3});lvl=this.userDataService.userLevel;dps=this.userDataService.userDPS;mobData=_(oy);colDefs=fi(()=>[{field:"image",width:32,cellRenderer:my},{field:"name"},{field:"region",filter:!0},{field:"level",filter:!0},{field:"estXP",headerName:"XP",headerTooltip:"Estimated XP Drop based on player level and mob level",hide:this.hideXpColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"hp",filter:!0},{field:"xpToHpRatio",headerName:"XP:HP",headerTooltip:"Estimated XP to HP Ratio",hide:this.hideXpColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"xpPerMinute",headerName:"XP/m",headerTooltip:"Estimated XP per second, does not account for spawn rate or mob count",hide:this.hideXpColumns(),valueFormatter:t=>this.roundNum(t.value).toString()},{field:"goldMin",hide:this.hideGoldColumns()},{field:"goldMax",hide:this.hideGoldColumns()},{field:"goldAvg",hide:this.hideGoldColumns(),valueFormatter:t=>this.roundNum(t.value).toString()},{field:"goldPerHp",hide:this.hideGoldColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"dropValue",hide:this.hideGoldColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"overallAvgValue",hide:this.hideGoldColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"valuePerHp",hide:this.hideGoldColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"valuePerMinute",headerName:"Value/m",headerTooltip:"Value per second, does not account for spawn rate or mob count",hide:this.hideGoldColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()},{field:"faction",hide:this.hideFactionXpColumns(),filter:!0},{field:"factionXp",hide:this.hideFactionXpColumns(),filter:!0},{field:"factionXpToHpRatio",headerName:"Faction XP:HP",hide:this.hideFactionXpColumns(),filter:!0,valueFormatter:t=>this.roundNum(t.value).toString()}]);gridOptions=On({rowHeight:64});autoSizeStrategy={type:"fitCellContents"};constructor(){bl(()=>{let t=this.mobData.mobData.value();t&&this.rowData.set(t.map(n=>{let i=(n.goldMin??0)+(n.goldMax??0)/2,s=n.drops?this.itemValueChangeToGold(n.drops):0,r=s+i,o=r/(n.health??0),a=n.locations?.at(0)?.area?.name??"Unknown",l=n.level?5*(n.level-1)+50:0,c=vy(n.level??0,this.lvl()),u=c/(n.health??0),h=this.dps()/(n.health??1)*60;return{id:n.id,image:`https://art.fantasyonline2.com/textures/enemies/${n.spriteName}.png`,name:n.name,region:a,level:n.level,hp:n.health,goldMin:n.goldMin,goldMax:n.goldMax,goldAvg:i,goldPerHp:i/(n.health??0),dropValue:s,overallAvgValue:r,valuePerHp:o,valuePerMinute:s*h,xpToHpRatio:u,baseXp:l,estXP:c,xpPerMinute:c*h,faction:n.faction?.name??"Unknown",factionXp:n.factionXp??0,factionXpToHpRatio:(n.factionXp??0)/(n.health??0)}}))})}myTheme=_D.withParams({backgroundColor:"#0E0B1C",fontFamily:{googleFont:"IBM Plex Mono"},foregroundColor:"#F1F1F1"});roundNum(t){return parseFloat(t.toFixed(4))}itemValueChangeToGold(t){let n=0;for(let i of t)n+=i.item.sellPrice*(i.dropRate/100*(i.count??1));return n}rowData=On([]);getRowId=t=>String(t.data.id);enumGridMode=S2;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=qn({type:e,selectors:[["fo2tools-page-mob-value"]],decls:22,vars:13,consts:[[1,"shelved"],[1,"stacked"],["for","dps-tb"],["id","dps-tb","type","number",3,"ngModelChange","ngModel"],["for","lvl-tb"],["id","lvl-tb","type","number",3,"ngModelChange","ngModel"],["for","display-mode"],["id","display-mode",3,"ngModelChange","ngModel"],[3,"value"],[2,"width","100%","height","100%",3,"rowData","columnDefs","theme","autoSizeStrategy","getRowId","gridOptions"]],template:function(n,i){n&1&&(Bt(0,"div",0)(1,"div",1)(2,"label",2),un(3,"Player DPS"),jt(),Bt(4,"input",3),Gs("ngModelChange",function(r){return i.dps.set(r)}),jt()(),Bt(5,"div",1)(6,"label",4),un(7,"Player Level"),jt(),Bt(8,"input",5),Gs("ngModelChange",function(r){return i.lvl.set(r)}),jt()(),Bt(9,"div",1)(10,"label",6),un(11,"Display Mode"),jt(),Bt(12,"select",7),J0("ngModelChange",function(r){return sL(i.gridMode,r)||(i.gridMode=r),r}),Bt(13,"option",8),un(14,"All"),jt(),Bt(15,"option",8),un(16,"Gold"),jt(),Bt(17,"option",8),un(18,"XP"),jt(),Bt(19,"option",8),un(20,"FactionXP"),jt()()()(),os(21,"ag-grid-angular",9)),n&2&&(no(4),Vs("ngModel",i.dps()),no(4),Vs("ngModel",i.lvl()),no(4),Q0("ngModel",i.gridMode),no(),Vs("value",i.enumGridMode.All),no(2),Vs("value",i.enumGridMode.Gold),no(2),Vs("value",i.enumGridMode.XP),no(2),Vs("value",i.enumGridMode.FactionXP),no(2),Vs("rowData",i.rowData())("columnDefs",i.colDefs())("theme",i.myTheme)("autoSizeStrategy",i.autoSizeStrategy)("getRowId",i.getRowId)("gridOptions",i.gridOptions()))},dependencies:[KO,y2,f2,v2,py,qD,fy,d2,KD],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .shelved[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}[_nghost-%COMP%]   .stacked[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex:0 1 auto}"],changeDetection:0})},S2=(s=>(s[s.All=0]="All",s[s.Gold=1]="Gold",s[s.XP=2]="XP",s[s.FactionXP=3]="FactionXP",s))(S2||{});var e_=Object.defineProperty,gae=Object.getOwnPropertyDescriptor,Is=(e,t)=>{for(var n in t)e_(e,n,{get:t[n],enumerable:!0})},C=(e,t,n,i)=>{for(var s=i>1?void 0:i?gae(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&e_(t,n,s),s},G={};Is(G,{error:()=>n_,errorOnce:()=>yae,log:()=>fae,logGroup:()=>wae,reset:()=>Cae,table:()=>mae,warn:()=>t_,warnOnce:()=>vae});var Np=new Set;function fae(...e){console.log(...e)}function t_(e,...t){console.warn(`AG Charts - ${e}`,...t)}function n_(e,...t){typeof e=="object"?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)}function mae(...e){console.table(...e)}function vae(e,...t){let n=`Logger.warn: ${e}`;Np.has(n)||(t_(e,...t),Np.add(n))}function yae(e,...t){let n=`Logger.error: ${e}`;Np.has(n)||(n_(e,...t),Np.add(n))}function Cae(){Np.clear()}function wae(e,t){console.groupCollapsed(e);try{return t()}finally{console.groupEnd()}}var Xu=(()=>{let e=class{static[Symbol.iterator](){return this.registeredModules.values()}static register(t){let n=this.registeredModules.get(t.name);if(n&&(n.enterprise||!t.enterprise))throw new Error(`AG Charts - Module '${t.name}' already registered`);this.registeredModules.set(t.name,t)}static registerMany(t){for(let n of t)this.register(n)}static reset(){this.registeredModules.clear()}static detectChartDefinition(t){return this.detectDefinition("chart",t)}static detectSeriesDefinition(t){return this.detectDefinition("series",t)}static detectDefinition(t,n){for(let i of this.registeredModules.values())if(i.type===t&&i.detect(n))return i;throw new Error(`AG Charts - Unknown ${t} type; Check options are correctly structured and series types are specified`)}};return e.registeredModules=new Map,e})(),aE=class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)||this.events.set(e,new Set),this.events.get(e)?.add(t),()=>this.off(e,t)}off(e,t){let n=this.events.get(e);n&&(n.delete(t),n.size===0&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach(n=>n(t))}clear(e){e?this.events.delete(e):this.events.clear()}};function qy(e){return typeof e>"u"?[]:Array.isArray(e)?e:[e]}function bae(e){return Array.from(new Set(e))}function lE(e,t){return e.reduce((n,i)=>{let s=t(i);return n[s]??(n[s]=[]),n[s].push(i),n},{})}function Pr(e,t){if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(Array.isArray(e[n])&&Array.isArray(t[n])){if(!Pr(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function x2(e,t,n=0){if(e.length===0)return[];let i=[];for(let s=0;s<t;s++)i.push(e.at((s+n)%e.length));return i}function Sae(e,t){let n=new Map;return t.forEach((i,s)=>{n.set(i,s)}),e.sort((i,s)=>{let r=n.get(i)??1/0,o=n.get(s)??1/0;return r-o})}function i_(e,t,n){if(e>t)return;let i;for(;t>=e;){let s=Math.floor((t+e)/2);n(s)?(i=s,e=s+1):t=s-1}return i}function s_(e,t,n){if(e>t)return;let i;for(;t>=e;){let s=Math.floor((t+e)/2);n(s)?(i=s,t=s-1):e=s+1}return i}function xae(e,t,n){if(e>t)return;let i;for(;t>=e;){let s=Math.floor((t+e)/2),r=n(s);r==null?e=s+1:(i=r,t=s-1)}return i}function Dae(e,t){let n=Math.max(e.length,t.length),i=new Set,s=new Set;for(let r=0;r<n;r++){let o=e[r],a=t[r];o!==a&&(s.has(a)?s.delete(a):a&&i.add(a),i.has(o)?i.delete(o):o&&s.add(o))}return{changed:i.size>0||s.size>0,added:i,removed:s}}function D2(e,t,n){let{leading:i=!0,trailing:s=!0}=n??{},r,o,a=!1;function l(){s&&o?(r=setTimeout(l,t),e(...o)):a=!1,o=null}function c(...u){a?o=u:(a=!0,r=setTimeout(l,t),i?e(...u):o=u)}return Object.assign(c,{cancel(){clearTimeout(r),a=!1,o=null}})}function*sc(...e){for(let t of e)yield*t}function Mae(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e?e:[e]}function gp(e){for(let t of e)return t;throw new Error("AG Charts - no first() value found")}function Eae(e,t="and",n=String,i=1/0){if(e.length===1)return n(e[0]);e=e.map(n);let s=e.pop();if(e.length>=i){let r=e.length-(i-1);return`${e.slice(0,i-1).join(", ")}, and ${r} more ${t} ${s}`}return`${e.join(", ")} ${t} ${s}`}function Ep(e,t=1/0){switch(typeof e){case"undefined":return"undefined";case"number":if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";default:return e=JSON.stringify(e),e.length>t?`${e.slice(0,t)}... (+${e.length-t} characters)`:e}}function Iae(e){let t=1;for(let n=0;n<e.length;n++)e.charCodeAt(n)===10&&t++;return t}function Vy(e){return e!=null}function mt(e){return Array.isArray(e)}function r_(e){return typeof e=="boolean"}function dd(e){return e instanceof Date}function ig(e){return dd(e)&&!isNaN(Number(e))}function Aae(e){return e instanceof RegExp}function hc(e){return typeof e=="function"}function yn(e){return typeof e=="object"&&e!==null&&!mt(e)}function Hn(e){return typeof e=="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function xi(e){return typeof e=="string"}function bs(e){return typeof e=="number"}function We(e){return Number.isFinite(e)}function Rae(e){return typeof window<"u"&&e instanceof HTMLElement}function Tae(e,t){return Object.values(e).includes(t)}function kae(e){return typeof e=="symbol"}var sg=Symbol("description"),Lae=Symbol("required");function SC(e,t,n=""){if(!yn(e))return{valid:null,errors:[{path:n,value:e,message:M2(n,e,"an object")}]};let i=new Set(Object.keys(e)),s=[],r={};function o(a){return mt(t)?`${n}[${a}]`:n?`${n}.${a}`:a}for(let[a,l]of Object.entries(t)){i.delete(a);let c=e[a];if(!(!l[Lae]&&typeof c>"u"))if(hc(l))l(c,e)?r[a]=c:s.push({key:a,path:n,value:c,message:M2(o(a),c,l)});else{let u=SC(c,l,o(a));r[a]=u.valid,s.push(...u.errors)}}for(let a of i)s.push({key:a,path:n,unknown:!0,message:`Unknown option \`${o(a)}\`, ignoring.`});return{valid:r,errors:s}}function M2(e,t,n){let i=xi(n)?n:n[sg],s=i?`; expecting ${i}`:"";return`${e?`Option \`${e}\``:"Value"} cannot be set to \`${Ep(t)}\`${s}, ignoring.`}function jn(e,t){return Object.assign((n,i)=>e(n,i),{[sg]:t})}var wy=(...e)=>jn((t,n)=>e.every(i=>i(t,n)),e.map(t=>t[sg]).filter(Boolean).join(" and ")),rc=(...e)=>jn((t,n)=>e.some(i=>i(t,n)),e.map(t=>t[sg]).filter(Boolean).join(" or ")),v1e=jn(mt,"an array"),y1e=jn(r_,"a boolean"),C1e=jn(hc,"a function"),Do=jn(We,"a number"),XD=jn(yn,"an object"),Wi=jn(xi,"a string"),by=jn(e=>dd(e)||(We(e)||xi(e))&&ig(new Date(e)),"a date"),Pae=(e,t=!0)=>jn(n=>We(n)&&(n>e||t&&n===e),`a number greater than ${t?"or equal to ":""}${e}`),Fae=(e,t)=>jn(n=>We(n)&&n>=e&&n<=t,`a number between ${e} and ${t} inclusive`),w1e=Pae(0),Sy=Fae(0,1),E2=e=>We(e)||ig(e),I2=e=>jn((t,n)=>!E2(t)||!E2(n[e])||t<n[e],`to be less than ${e}`);function Nae(...e){yn(e[0])&&(e=Object.values(e[0]));let t=Eae(e,"or",n=>`'${n}'`,6);return jn(n=>e.includes(n),`a keyword such as ${t}`)}var AM=(e,t)=>jn((n,i)=>mt(n)&&n.every(s=>e(s,i)),t??`${e[sg]} array`),o_={};Is(o_,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Xs,fromToMotion:()=>kt,staticFromToMotion:()=>Oo});var Or={};typeof window<"u"?Or.window=window:typeof global<"u"&&(Or.window=global.window);typeof document<"u"?Or.document=document:typeof global<"u"&&(Or.document=global.document);function Lo(e){return e?Or.document?.[e]:Or.document}function ft(e){return e?Or.window?.[e]:Or.window}function a_(e){Or.document=e}function l_(e){Or.window=e}function Ne(e,t,n){let i=Lo().createElement(e);if(typeof t=="object"&&(n=t,t=void 0),t)for(let s of t.split(" "))i.classList.add(s);return n&&Object.assign(i.style,n),i}function Ds(e){return Lo().createElementNS("http://www.w3.org/2000/svg",e)}function c_(e,t){let n=Lo("body"),i=Ne("a",{display:"none"});i.href=e,i.download=t,n.appendChild(i),i.click(),setTimeout(()=>n.removeChild(i))}var RM=new Map;function Oae(){RM.clear()}function As(e){let t=e.constructor,n=Object.hasOwn(t,"className")?t.className:t.name;if(!n)throw new Error(`The ${t} is missing the 'className' property.`);let i=(RM.get(n)??0)+1;return RM.set(n,i),`${n}-${i}`}function _ae(){return crypto.randomUUID?.()??Bae()}function Bae(){let e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t="";for(let n=0;n<e.length;n++)(n===4||n===6||n===8||n===10)&&(t+="-"),t+=e[n].toString(16).padStart(2,"0");return t}var xC={containsPoint:Vae,isEmpty:Gae,normalize:zae};function Vae(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function Gae(e){return e==null||e.height===0||e.width===0||isNaN(e.height)||isNaN(e.width)}function zae(e){let{x:t,y:n,width:i,height:s}=e;return(i==null||i>0)&&(s==null||s>0)?e:(t!=null&&i!=null&&i<0&&(i=-i,t=t-i),n!=null&&s!=null&&s<0&&(s=-s,n=n-s),{x:t,y:n,width:i,height:s})}var DC=Symbol("interpolate"),Zy=e=>e[DC]!=null;function MC(e,t,n,i=1/0){let s={nearest:void 0,distanceSquared:i};for(let r of n){let o=r.distanceSquared(e,t);if(o===0)return{nearest:r,distanceSquared:0};o<s.distanceSquared&&(s.nearest=r,s.distanceSquared=o)}return s}function Hae(e,t,n,i=1/0){let{x:s=e,y:r=t}=n.transformPoint?.(e,t)??{},o={nearest:void 0,distanceSquared:i};for(let a of n.children){let{nearest:l,distanceSquared:c}=a.nearestSquared(s,r,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}function De(e,t,n){return Math.min(n,Math.max(e,t))}function TM(e,t){let[n,i]=Cn(t);return De(n,e,i)}function Cn(e){if(e.length===0)return[];let t=[1/0,-1/0];for(let n of e)n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n);return t}function sd(e){let[t,n]=Cn(e);return n-t}function u_(e,t,n=1e-10){return e>=t[0]-n&&e<=t[1]+n}function Zs(e,t,n=1e-10){return e===t||Math.abs(e-t)<n}function EC(e){return Math.sign(e)===-1||Object.is(e,-0)}function d_(e){return e%1===0}function jae(e,t=2){let n=10**t;return Math.round(e*n)/n}function cE(e,t){return Math.floor(e%t+(e<0?t:0))}function IC(e){if(Math.floor(e)===e)return 0;let t=String(e),n=0;if(e<1e-6||e>=1e21){let s;[t,s]=t.split("e"),s!=null&&(n=Number(s))}let i=t.split(".")[1]?.length??0;return Math.max(i-n,0)}var Op=class ju{constructor(t,n,i,s){this.x=t,this.y=n,this.width=i,this.height=s}static fromDOMRect({x:t,y:n,width:i,height:s}){return new ju(t,n,i,s)}static merge(t){let n=1/0,i=1/0,s=-1/0,r=-1/0;for(let o of t)o.x<n&&(n=o.x),o.y<i&&(i=o.y),o.x+o.width>s&&(s=o.x+o.width),o.y+o.height>r&&(r=o.y+o.height);return new ju(n,i,s-n,r-i)}static nearestBox(t,n,i){return MC(t,n,i)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON(){return{}}}}clone(){let{x:t,y:n,width:i,height:s}=this;return new ju(t,n,i,s)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,n){return xC.containsPoint(this,t,n)}intersection(t){if(!this.collidesBBox(t))return;let n=De(t.x,this.x,t.x+t.width),i=De(t.y,this.y,t.y+t.height),s=De(t.x,this.x+this.width,t.x+t.width),r=De(t.y,this.y+this.height,t.y+t.height);return new ju(n,i,s-n,r-i)}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,n){if(this.containsPoint(t,n))return 0;let i=t-De(this.x,t,this.x+this.width),s=n-De(this.y,n,this.y+this.height);return i*i+s*s}shrink(t,n){if(typeof t=="number")this.applyMargin(t,n);else for(let[i,s]of Object.entries(t))this.applyMargin(s,i);return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(t,n){if(typeof t=="number")this.applyMargin(-t,n);else for(let[i,s]of Object.entries(t))this.applyMargin(-s,i);return this}applyMargin(t,n){switch(n){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=t*2;break;case"horizontal":this.x+=t,this.width-=t*2;break;case void 0:this.x+=t,this.y+=t,this.width-=t*2,this.height-=t*2;break}}translate(t,n){return this.x+=t,this.y+=n,this}[DC](t,n){return new ju(this.x*(1-n)+t.x*n,this.y*(1-n)+t.y*n,this.width*(1-n)+t.width*n,this.height*(1-n)+t.height*n)}};Op.zero=Object.freeze(new Op(0,0,0,0));Op.NaN=Object.freeze(new Op(NaN,NaN,NaN,NaN));var Z=Op;function q(e){return function(t,n){let i=`__${n}`;t[n]||Wae(t,n,i,e)}}function Wae(e,t,n,i){let{type:s="normal",changeCb:r,convertor:o,checkDirtyOnAssignment:a=!1}=i??{},l={type:s,changeCb:r,checkDirtyOnAssignment:a,convertor:o},c;switch(s){case"normal":c=Kae(n,l);break;case"transform":c=qae(n);break;case"path":c=Zae(n);break}c=Yae($ae(Uae(c,l),l),l),Object.defineProperty(e,t,{set:c,get:function(){return this[n]},enumerable:!0,configurable:!0})}function Uae(e,t){let{convertor:n}=t;return n?function(i){e.call(this,n(i))}:e}var AC=Symbol("no-change");function $ae(e,t){let{changeCb:n}=t;return n?function(i){let s=e.call(this,i);return s!==AC&&n.call(this,this),s}:e}function Yae(e,t){let{checkDirtyOnAssignment:n}=t;return n?function(i){let s=e.call(this,i);return i?._dirty===!0&&this.markDirty(),s}:e}function Kae(e,t){let{changeCb:n}=t;return function(i){let s=this[e];return i!==s?(this[e]=i,this.markDirty(),n?.(this),i):AC}}function qae(e){return function(t){let n=this[e];return t!==n?(this[e]=t,this.markDirtyTransform(),t):AC}}function Zae(e){return function(t){let n=this[e];return t!==n?(this[e]=t,this._dirtyPath||(this._dirtyPath=!0,this.markDirty()),t):AC}}var h_=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(h_||{}),uE=(()=>{let e=class p_{constructor(n){this.serialNumber=p_._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=As(this),this.pointerEvents=0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=n?.name,this.tag=n?.tag??NaN,this.zIndex=n?.zIndex??0}static toSVG(n,i,s){let r=n?.toSVG();if(r==null||!r.elements.length&&!r.defs?.length)return;let o=Ds("svg");if(o.setAttribute("width",String(i)),o.setAttribute("height",String(s)),o.setAttribute("viewBox",`0 0 ${i} ${s}`),r.defs?.length){let a=Ds("defs");a.append(...r.defs),o.append(a)}return o.append(...r.elements),o.outerHTML}static*extractBBoxes(n,i){for(let s of n)if(!i||s.visible&&!s.transitionOut){let r=s.getBBox();r&&(yield r)}}get datum(){return this._datum??this.parentNode?.datum}set datum(n){this._datum!==n&&(this._previousDatum=this._datum,this._datum=n)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(n,i=1){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=i,this.childNodeCounts.thisComplexity=i;for(let s of this.children()){let r=s.preRender(n);this.childNodeCounts.groups+=r.groups,this.childNodeCounts.nonGroups+=r.nonGroups,this.childNodeCounts.complexity+=r.complexity}return this.childNodeCounts}render(n){let{stats:i}=n;if(this._dirty=!1,n.debugNodeSearch){let s=this.name??this.id;n.debugNodeSearch.some(r=>typeof r=="string"?r===s:r.test(s))&&(n.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}_setLayerManager(n){this._layerManager=n,this._debug=n?.debug;for(let i of this.children())i._setLayerManager(n)}sortChildren(n){if(this.dirtyZIndex=!1,!this.childNodes)return;let i=[...this.childNodes].sort(n);this.childNodes.clear();for(let s of i)this.childNodes.add(s)}*traverseUp(n){let i=this;for(n&&(yield i);i=i.parentNode;)yield i}*children(){if(this.childNodes)for(let n of this.childNodes)yield n}*descendants(){for(let n of this.children())yield n,yield*n.descendants()}isLeaf(){return!this.childNodes?.size}isRoot(){return!this.parentNode}append(n){this.childNodes??(this.childNodes=new Set);for(let i of Mae(n))i.parentNode?.removeChild(i),this.childNodes.add(i),i.parentNode=this,i._setLayerManager(this.layerManager);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(n){return this.append(n),n}removeChild(n){return this.childNodes?.delete(n)?(delete n.parentNode,n._setLayerManager(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(),!0):!1}remove(){return this.parentNode?.removeChild(this)??!1}clear(){for(let n of this.children())delete n.parentNode,n._setLayerManager();this.childNodes?.clear(),this.invalidateCachedBBox()}destroy(){this.parentNode?.removeChild(this)}setProperties(n,i){if(i)for(let s of i)this[s]=n[s];else Object.assign(this,n);return this}containsPoint(n,i){return!1}pickNode(n,i,s=!1){if(!this.visible||this.pointerEvents===1||!this.containsPoint(n,i))return;let r=[...this.children()];if(r.length>1e3)for(let o=r.length-1;o>=0;o--){let a=r[o],c=a.containsPoint(n,i)?a.pickNode(n,i):void 0;if(c)return c}else if(r.length)for(let o=r.length-1;o>=0;o--){let a=r[o].pickNode(n,i);if(a)return a}else if(!this.isContainerNode)return this}invalidateCachedBBox(){this.cachedBBox!=null&&(this.cachedBBox=void 0,this.parentNode?.invalidateCachedBBox())}getBBox(){return this.cachedBBox==null&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(){let{_dirty:n}=this;this.cachedBBox==null&&n||(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1;for(let n of this.children())n.markClean()}}onZIndexChange(){let{parentNode:n}=this;n&&(n.dirtyZIndex=!0)}toSVG(){}};return e._nextSerialNumber=0,e})();C([q()],uE.prototype,"visible",2);C([q({changeCb:e=>e.onZIndexChange()})],uE.prototype,"zIndex",2);var Ha=uE,xy=(e,t,n)=>e*(1-n)+t*n,QD=e=>{let t=e<0?-1:1,n=Math.abs(e);return n<=.04045?e/12.92:t*((n+.055)/1.055)**2.4},JD=e=>{let t=e<0?-1:1,n=Math.abs(e);return n>.0031308?t*(1.055*n**(1/2.4)-.055):12.92*e},Xae=(()=>{let e=class pt{constructor(n,i,s,r=1){this.r=De(0,n||0,1),this.g=De(0,i||0,1),this.b=De(0,s||0,1),this.a=De(0,r||0,1)}static validColorString(n){return n.indexOf("#")>=0?!!pt.parseHex(n):n.indexOf("rgb")>=0?!!pt.stringToRgba(n):pt.nameToHex.has(n.toLowerCase())}static fromString(n){if(n.indexOf("#")>=0)return pt.fromHexString(n);let i=pt.nameToHex.get(n.toLowerCase());if(i)return pt.fromHexString(i);if(n.indexOf("rgb")>=0)return pt.fromRgbaString(n);throw new Error(`Invalid color string: '${n}'`)}static parseHex(n){n=n.replace(/ /g,"").slice(1);let i;switch(n.length){case 6:case 8:i=[];for(let s=0;s<n.length;s+=2)i.push(parseInt(`${n[s]}${n[s+1]}`,16));break;case 3:case 4:i=n.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if(i?.length>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(n){let i=pt.parseHex(n);if(i){let[s,r,o,a]=i;return new pt(s/255,r/255,o/255,a/255)}throw new Error(`Malformed hexadecimal color string: '${n}'`)}static stringToRgba(n){let i=-1,s=-1;for(let l=0;l<n.length;l++){let c=n[l];if(i===-1&&c==="(")i=l;else if(c===")"){s=l;break}}if(i===-1||s===-1)return;let o=n.substring(i+1,s).split(","),a=[];for(let l=0;l<o.length;l++){let c=o[l],u=parseFloat(c);if(!Number.isFinite(u))return;c.indexOf("%")>=0?(u=De(0,u,100),u/=100):l===3?u=De(0,u,1):(u=De(0,u,255),u/=255),a.push(u)}return a}static fromRgbaString(n){let i=pt.stringToRgba(n);if(i){if(i.length===3)return new pt(i[0],i[1],i[2]);if(i.length===4)return new pt(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${n}'`)}static fromArray(n){if(n.length===4)return new pt(n[0],n[1],n[2],n[3]);if(n.length===3)return new pt(n[0],n[1],n[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(n,i,s,r=1){let o=pt.HSBtoRGB(n,i,s);return new pt(o[0],o[1],o[2],r)}static fromHSL(n,i,s,r=1){let o=pt.HSLtoRGB(n,i,s);return new pt(o[0],o[1],o[2],r)}static fromOKLCH(n,i,s,r=1){let o=pt.OKLCHtoRGB(n,i,s);return new pt(o[0],o[1],o[2],r)}static padHex(n){return n.length===1?"0"+n:n}toHexString(){let n="#"+pt.padHex(Math.round(this.r*255).toString(16))+pt.padHex(Math.round(this.g*255).toString(16))+pt.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(n+=pt.padHex(Math.round(this.a*255).toString(16))),n}toRgbaString(n=3){let i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,n);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return pt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(n,i,s){let r=QD(n),o=QD(i),a=QD(s),l=Math.cbrt(.4122214708*r+.5363325363*o+.0514459929*a),c=Math.cbrt(.2119034982*r+.6806995451*o+.1073969566*a),u=Math.cbrt(.0883024619*r+.2817188376*o+.6299787005*a),d=.2104542553*l+.793617785*c-.0040720468*u,h=1.9779984951*l-2.428592205*c+.4505937099*u,p=.0259040371*l+.7827717662*c-.808675766*u,g=Math.atan2(p,h)*180/Math.PI,f=d,m=Math.hypot(h,p),v=g>=0?g:g+360;return[f,m,v]}static OKLCHtoRGB(n,i,s){let r=n,o=i*Math.cos(s*Math.PI/180),a=i*Math.sin(s*Math.PI/180),l=(r+.3963377774*o+.2158037573*a)**3,c=(r-.1055613458*o-.0638541728*a)**3,u=(r-.0894841775*o-1.291485548*a)**3,d=4.0767416621*l-3.3077115913*c+.2309699292*u,h=-1.2684380046*l+2.6097574011*c-.3413193965*u,p=-.0041960863*l-.7034186147*c+1.707614701*u,g=JD(d),f=JD(h),m=JD(p);return[g,f,m]}static RGBtoHSL(n,i,s){let r=Math.min(n,i,s),o=Math.max(n,i,s),a=(o+r)/2,l,c;if(o===r)l=0,c=0;else{let u=o-r;c=a>.5?u/(2-o-r):u/(o+r),o===n?l=(i-s)/u+(i<s?6:0):o===i?l=(s-n)/u+2:l=(n-i)/u+4,l*=60}return[l,c,a]}static HSLtoRGB(n,i,s){if(n=(n%360+360)%360,i===0)return[s,s,s];let r=s<.5?s*(1+i):s+i-s*i,o=2*s-r;function a(d){return d<0&&(d+=1),d>1&&(d-=1),d<.16666666666666666?o+(r-o)*6*d:d<.5?r:d<.6666666666666666?o+(r-o)*(.6666666666666666-d)*6:o}let l=a(n/360+1/3),c=a(n/360),u=a(n/360-1/3);return[l,c,u]}static RGBtoHSB(n,i,s){let r=Math.min(n,i,s),o=Math.max(n,i,s),a=o===0?0:(o-r)/o,l=0;if(r!==o){let c=o-r,u=(o-n)/c,d=(o-i)/c,h=(o-s)/c;n===o?l=h-d:i===o?l=2+u-h:l=4+d-u,l/=6,l<0&&(l=l+1)}return[l*360,a,o]}static HSBtoRGB(n,i,s){n=(n%360+360)%360/360;let r=0,o=0,a=0;if(i===0)r=o=a=s;else{let l=(n-Math.floor(n))*6,c=l-Math.floor(l),u=s*(1-i),d=s*(1-i*c),h=s*(1-i*(1-c));switch(l>>0){case 0:r=s,o=h,a=u;break;case 1:r=d,o=s,a=u;break;case 2:r=u,o=s,a=h;break;case 3:r=u,o=d,a=s;break;case 4:r=h,o=u,a=s;break;case 5:r=s,o=u,a=d;break}}return[r,o,a]}static mix(n,i,s){return new pt(xy(n.r,i.r,s),xy(n.g,i.g,s),xy(n.b,i.b,s),xy(n.a,i.a,s))}};return e.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]),e})(),Tt=Xae;function Qae(e,t){return n=>Number(e)*(1-n)+Number(t)*n}function g_(e,t){if(typeof e=="string")try{e=Tt.fromString(e)}catch{e=Tt.fromArray([0,0,0])}if(typeof t=="string")try{t=Tt.fromString(t)}catch{t=Tt.fromArray([0,0,0])}return n=>Tt.mix(e,t,n).toRgbaString()}var Xy=Symbol("BREAK"),Qu="__decorator_config";function f_(e,t){Object.getOwnPropertyDescriptor(e,Qu)==null&&Object.defineProperty(e,Qu,{value:{}});let n=e[Qu],i=t.toString();if(typeof n[i]<"u")return n[i];let s=new WeakMap;n[i]={setters:[],getters:[],observers:[],valuesMap:s};let r=Object.getOwnPropertyDescriptor(e,t),o=r?.set,a=r?.get;return Object.defineProperty(e,t,{set:function(u){let{setters:d,observers:h}=n[i],p;d.some(g=>g.length>2)&&(p=a?a.call(this):s.get(this));for(let g of d)if(u=g(this,t,u,p),u===Xy)return;o?o.call(this,u):s.set(this,u);for(let g of h)g(this,u,p)},get:function(){let u=a?a.call(this):s.get(this);for(let d of n[i].getters)if(u=d(this,t,u),u===Xy)return;return u},enumerable:!0,configurable:!1}),n[i]}function Po(e,t,n){return(i,s)=>{let r=f_(i,s);r.setters.push(e),t&&r.getters.unshift(t),n&&Object.assign(r,n)}}function m_(e){return(t,n)=>{f_(t,n).observers.push(e)}}function RC(e){return typeof e<"u"&&Qu in e}function ac(e){let t=new Set;for(;RC(e);)t.add(e?.[Qu]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(n=>Object.keys(n))}function v_(e){return ac(e).reduce((t,n)=>(t[n]=e[n]??null,t),{})}function Jae(e,t){let n=t.toString();for(;RC(e);){let i=e[Qu];if(Object.hasOwn(i,n))return i[n];e=Object.getPrototypeOf(e)}}function uc(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every((n,i)=>uc(n,t[i])):Hn(e)?Hn(t)?dE(e,t,uc):!1:e===t}function dE(e,t,n){for(let i of Object.keys(t))if(!(i in e))return!1;for(let i of Object.keys(e))if(!(i in t)||!n(e[i],t[i]))return!1;return!0}function ke(...e){let t={};for(let n of e){if(!yn(n))continue;let i=RC(n)?ac(n):Object.keys(n);for(let s of i)Hn(t[s])&&Hn(n[s])?t[s]=ke(t[s],n[s]):t[s]??(t[s]=n[s])}return t}function Qy(e,...t){return t&&mt(e)?e.map(n=>ke(n,...t)):e}function ele(e,t){return Object.entries(e).reduce((n,[i,s])=>(n[i]=t(s,i,e),n),{})}function kM(e,t){let n=S({},e);for(let i of t)delete n[i];return n}function hE(e,t){return(mt(t)?t:t.split(".")).reduce((i,s)=>i[s],e)}var pE=new Set(["__proto__","constructor","prototype"]);function gE(e,t,n){let i=mt(t)?t.slice():t.split("."),s=i.pop();if(i.some(o=>pE.has(o)))return;let r=i.reduce((o,a)=>o[a],e);return r[s]=n,r[s]}function LM(e,t,n){if(n===void 0)return t;for(let i of e){let s=n[i];s!==void 0&&(t[i]=s)}return t}function Ip(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{let n=e[t];n!==null&&(typeof n=="object"||typeof n=="function")&&!Object.isFrozen(n)&&Ip(n)}),e}var PM={};Is(PM,{easeIn:()=>tle,easeInOut:()=>nle,easeInOutQuad:()=>rle,easeInQuad:()=>ile,easeOut:()=>_p,easeOutQuad:()=>sle,inverseEaseOut:()=>C_,linear:()=>y_});var y_=e=>e,tle=e=>1-Math.cos(e*Math.PI/2),_p=e=>Math.sin(e*Math.PI/2),nle=e=>-(Math.cos(e*Math.PI)-1)/2,ile=e=>e*e,sle=e=>1-(1-e)**2,rle=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,C_=e=>2*Math.asin(e)/Math.PI,Jy=.2,Wu=["initial","remove","update","add","trailing","end","none"],Bp={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Jy,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+Jy,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},w_=(e=>(e.Loop="loop",e.Reverse="reverse",e))(w_||{});function ole(e){return e.every(t=>t instanceof Ha)}function TC(e){return ole(e)?{nodes:e,selections:[]}:{nodes:[],selections:e}}function FM(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((n,i)=>FM(n,t[i])):Zy(e)&&Zy(t)?e.equals(t):Hn(e)&&Hn(t)?dE(e,t,FM):!1}var b_=class{constructor(e){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??y_,this.phase=e.phase;let t=e.duration??Bp[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,e.skip===!0&&(this.onUpdate?.(e.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),e.collapsable!==!1&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return FM(e.from,e.to)?0:t}play(e=!1){this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,e&&this.onUpdate?.(this.from,!0,this)))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(e){if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);let t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;let n=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(n,!1,this);let i=this.delay+this.duration;return this.elapsed>=i?(this.stop(),this.isComplete=!0,this.onComplete?.(this),e-(i-t)):0}get delta(){return this.ease(De(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if(typeof t!="object"||Zy(t))return this.interpolateValue(e,t);let n=[];for(let i of Object.keys(t)){let s=this.interpolateValue(e[i],t[i]);s!=null&&n.push([i,s])}return i=>{let s={};for(let[r,o]of n)s[r]=o(i);return s}}interpolateValue(e,t){if(!(e==null||t==null)){if(Zy(e))return n=>e[DC](t,n);try{switch(typeof e){case"number":return Qae(e,t);case"string":return g_(e,t);case"boolean":if(e===t)return()=>e;break}}catch{}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}},Xs={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function kt(e,t,n,i,s,r,o){let{fromFn:a,toFn:l,applyFn:c=(g,f)=>g.setProperties(f)}=s,{nodes:u,selections:d}=TC(i),h=(g,f)=>{let m,v=0,y=0;for(let D of f){let M=g[v]===D,E={last:y>=f.length-1,lastLive:v>=g.length-1,prev:f[y-1],prevFromProps:m,prevLive:g[v-1],next:f[y+1],nextLive:g[v+(M?1:0)]},A=`${e}_${t}_${D.id}`;n.stopByAnimationId(A);let I="unknown";M?r&&o&&(I=ale(D,D.datum,r,o)):I="removed",D.transitionOut=I==="removed";let w=a(D,D.datum,I,E),{phase:T,start:P,finish:O,delay:$,duration:ae}=w,ue=He(w,["phase","start","finish","delay","duration"]),x=l(D,D.datum,I,E),{phase:Q,start:he,finish:ge,delay:J,duration:de}=x,Y=He(x,["phase","start","finish","delay","duration"]),te=O==null;n.animate({id:A,groupId:e,phase:T??Q??"update",duration:ae??de,delay:$??J,from:ue,to:Y,ease:_p,collapsable:te,onPlay:()=>{let ee=S(S(S({},P),he),ue);c(D,ee,"start")},onUpdate(ee){c(D,ee,"update")},onStop:()=>{let ee=S(S(S(S(S(S({},P),he),ue),Y),O),ge);c(D,ee,"end")}}),M&&v++,y++,m=ue}},p=0;for(let g of d){let f=g.nodes(),m=f.filter(v=>!g.isGarbage(v));h(m,f),n.animate({id:`${e}_${t}_selection_${p}`,groupId:e,phase:"end",from:0,to:1,ease:_p,onStop(){g.cleanup()}}),p++}h(u,u)}function Oo(e,t,n,i,s,r,o){let{nodes:a,selections:l}=TC(i),{start:c,finish:u,phase:d}=o;n.animate({id:`${e}_${t}`,groupId:e,phase:d??"update",from:s,to:r,ease:_p,onPlay:()=>{if(c){for(let h of a)h.setProperties(c);for(let h of l)for(let p of h.nodes())p.setProperties(c)}},onUpdate(h){for(let p of a)p.setProperties(h);for(let p of l)for(let g of p.nodes())g.setProperties(h)},onStop:()=>{for(let h of a)h.setProperties(S(S({},r),u));for(let h of l){for(let p of h.nodes())p.setProperties(S(S({},r),u));h.cleanup()}}})}function ale(e,t,n,i){let s=n(e,t);return i.added.has(s)?"added":i.removed.has(s)?"removed":"updated"}var kC=class{ticks(e,t,n){}niceDomain(e,t=this.domain){return t}tickFormatter(e){}datumFormatter(e){}get bandwidth(){}get step(){}get inset(){}},lle=(()=>{let e=class S_ extends kC{constructor(n=[],i=[]){super(),this.domain=n,this.range=i,this.defaultClamp=!1}static is(n){return n instanceof S_}normalizeDomains(...n){let i,s=1/0,r,o=-1/0;for(let a of n)for(let l of a){let c=l.valueOf();c<s&&(s=c,i=l),c>o&&(o=c,r=l)}return i!=null&&r!=null?{domain:[i,r],animatable:!0}:{domain:[],animatable:!1}}transform(n){return n}transformInvert(n){return n}calcBandwidth(n=1){let{domain:i}=this,s=this.getPixelRange();if(i.length===0)return s;let r=Math.abs(i[1].valueOf()-i[0].valueOf())/n+1,o=Math.floor(s),a=Math.min(r,o);return s/Math.max(1,a)}convert(n,i=this.defaultClamp){let{domain:s}=this;if(!s||s.length<2)return NaN;let r=Number(this.transform(s[0])),o=Number(this.transform(s[1])),a=Number(this.transform(n)),{range:l}=this,[c,u]=l;if(i){let[d,h]=Cn([r,o]);if(a<d)return c;if(a>h)return u}return r===o?(c+u)/2:a===r?c:a===o?u:c+(a-r)/(o-r)*(u-c)}invert(n,i){let s=this.domain.map(d=>this.transform(d)),[r,o]=s,{range:a}=this,[l,c]=a,u;return l===c?u=this.toDomain((Number(r)+Number(o))/2):u=this.toDomain(Number(r)+(n-l)/(c-l)*(Number(o)-Number(r))),this.transformInvert(u)}getPixelRange(){let[n,i]=this.range;return Math.abs(i-n)}};return e.defaultTickCount=5,e})(),Xe=lle,cle={};Is(cle,{TimeInterval:()=>rd,day:()=>eC,friday:()=>Dle,hour:()=>Ku,millisecond:()=>x_,minute:()=>Yu,monday:()=>wle,month:()=>ic,saturday:()=>Mle,second:()=>$u,sunday:()=>Ap,thursday:()=>xle,tuesday:()=>ble,utcDay:()=>Ble,utcHour:()=>Nle,utcMinute:()=>Lle,utcMonth:()=>zle,utcYear:()=>Wle,wednesday:()=>Sle,year:()=>LC});var rd=class{constructor(e,t,n){this._encode=e,this._decode=t,this._rangeCallback=n}floor(e){let t=new Date(e),n=this._encode(t);return this._decode(n)}ceil(e){let t=new Date(Number(e)-1),n=this._encode(t);return this._decode(n+1)}range(e,t,{extend:n=!1,visibleRange:i=[0,1]}={}){let s=!1;e.getTime()>t.getTime()&&([e,t]=[t,e],s=!0);let r=this._rangeCallback?.(e,t),o=this._encode(n?this.floor(e):this.ceil(e)),a=this._encode(n?this.ceil(t):this.floor(t));if(a<o)return[];let l=a-o,c,u;s?(c=Math.ceil(o+(1-i[1])*l),u=Math.floor(o+(1-i[0])*l)):(c=Math.floor(o+i[0]*l),u=Math.ceil(o+i[1]*l));let d=[];for(let h=c;h<=u;h+=1){let p=this._decode(h);d.push(p)}return r?.(),d}},Yi=class extends rd{getOffset(e,t){return Math.floor(this._encode(new Date(e)))%t}every(e,t){let n=0,i,s=e;e=Math.max(1,Math.round(e)),s!==e&&G.warnOnce(`interval step of [${s}] rounded to [${e}].`);let{snapTo:r="start"}=t??{};if(typeof r=="string"){let l=n;i=(c,u)=>{let d=r==="start"?c:u;return n=this.getOffset(d,e),()=>n=l}}else typeof r=="number"?n=this.getOffset(new Date(r),e):r instanceof Date&&(n=this.getOffset(r,e));let o=l=>Math.floor((this._encode(l)-n)/e),a=l=>this._decode(l*e+n);return new rd(o,a,i)}};function ule(e){return e.getTime()}function dle(e){return new Date(e)}var x_=new Yi(ule,dle),Pa=1e3,Ln=Pa*60,ci=Ln*60,Ms=ci*24,Eo=Ms*7,fp=Ms*30,od=Ms*365,D_=new Date().getTimezoneOffset()*Ln;function hle(e){return Math.floor((e.getTime()-D_)/Pa)}function ple(e){return new Date(D_+e*Pa)}var $u=new Yi(hle,ple),M_=new Date().getTimezoneOffset()*Ln;function gle(e){return Math.floor((e.getTime()-M_)/Ln)}function fle(e){return new Date(M_+e*Ln)}var Yu=new Yi(gle,fle),E_=new Date().getTimezoneOffset()*Ln;function mle(e){return Math.floor((e.getTime()-E_)/ci)}function vle(e){return new Date(E_+e*ci)}var Ku=new Yi(mle,vle);function yle(e){let t=e.getTimezoneOffset()*Ln;return Math.floor((e.getTime()-t)/Ms)}function Cle(e){let t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t}var eC=new Yi(yle,Cle);function pc(e){let n=(7+e-4)%7;function i(r){let o=r.getTimezoneOffset()*Ln;return Math.floor((r.getTime()-o)/Eo-n/7)}function s(r){let o=new Date(1970,0,1);return o.setDate(o.getDate()+r*7+n),o}return new Yi(i,s)}var Ap=pc(0),wle=pc(1),ble=pc(2),Sle=pc(3),xle=pc(4),Dle=pc(5),Mle=pc(6);function Ele(e){return e.getFullYear()*12+e.getMonth()}function Ile(e){let t=Math.floor(e/12),n=e-t*12;return new Date(t,n,1)}var ic=new Yi(Ele,Ile);function Ale(e){return e.getFullYear()}function Rle(e){let t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t}var LC=new Yi(Ale,Rle);function Tle(e){return Math.floor(e.getTime()/Ln)}function kle(e){return new Date(e*Ln)}var Lle=new Yi(Tle,kle);function Ple(e){return Math.floor(e.getTime()/ci)}function Fle(e){return new Date(e*ci)}var Nle=new Yi(Ple,Fle);function Ole(e){return Math.floor(e.getTime()/Ms)}function _le(e){let t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}var Ble=new Yi(Ole,_le);function Vle(e){return e.getUTCFullYear()*12+e.getUTCMonth()}function Gle(e){let t=Math.floor(e/12),n=e-t*12;return new Date(Date.UTC(t,n,1))}var zle=new Yi(Vle,Gle);function Hle(e){return e.getUTCFullYear()}function jle(e){let t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}var Wle=new Yi(Hle,jle),Dy={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function fE(e,t=new Date(e.getFullYear(),0,1)){let n=e.getTimezoneOffset()-t.getTimezoneOffset(),i=e.getTime()-t.getTime()+n*6e4,s=36e5*24;return Math.floor(i/s)}function A2(e,t){let i=new Date(e.getFullYear(),0,1).getDay(),s=(t-i+7)%7,r=new Date(e.getFullYear(),0,s+1);return r<=e?Math.floor(fE(e,r)/7)+1:0}var Ule=0,I_=1,R2=4;function A_(e,t=e.getFullYear()){let i=new Date(t,0,1).getDay(),s=(R2-i+7)%7,r=new Date(t,0,s-(R2-I_)+1);return r<=e?Math.floor(fE(e,r)/7)+1:A_(e,t-1)}function $le(e){let t=e.getTimezoneOffset(),n=Math.abs(t);return`${t>0?"-":"+"}${kn(Math.floor(n/60),2,"0")}${kn(Math.floor(n%60),2,"0")}`}var Yle={a:e=>Dy.shortDays[e.getDay()],A:e=>Dy.days[e.getDay()],b:e=>Dy.shortMonths[e.getMonth()],B:e=>Dy.months[e.getMonth()],c:"%x, %X",d:(e,t)=>kn(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>kn(e.getMilliseconds()*1e3,6,t??"0"),H:(e,t)=>kn(e.getHours(),2,t??"0"),I:(e,t)=>{let n=e.getHours()%12;return n===0?"12":kn(n,2,t??"0")},j:(e,t)=>kn(fE(e)+1,3,t??"0"),m:(e,t)=>kn(e.getMonth()+1,2,t??"0"),M:(e,t)=>kn(e.getMinutes(),2,t??"0"),L:(e,t)=>kn(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>kn(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>kn(A2(e,Ule),2,t??"0"),V:(e,t)=>kn(A_(e),2,t??"0"),w:(e,t)=>kn(e.getDay(),2,t??"0"),W:(e,t)=>kn(A2(e,I_),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>kn(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>kn(e.getFullYear(),4,t??"0"),Z:e=>$le(e),"%":()=>"%"},Kle={_:" ",0:"0","-":""};function kn(e,t,n){let i=String(Math.floor(e));return i.length>=t?i:`${n.repeat(t-i.length)}${i}`}function rg(e){let t=[];for(;e.length>0;){let n=e.indexOf("%");if(n!==0){let a=n>0?e.substring(0,n):e;t.push(a)}if(n<0)break;let i=e[n+1],s=Kle[i];s!=null&&n++;let r=e[n+1],o=Yle[r];if(typeof o=="function")t.push([o,s]);else if(typeof o=="string"){let a=rg(o);t.push([a,s])}else t.push(`${s??""}${r}`);e=e.substring(n+2)}return n=>{let i=typeof n=="number"?new Date(n):n;return t.map(s=>typeof s=="string"?s:s[0](i,s[1])).join("")}}function Gn(e){return e instanceof Date?e.getTime():e}function mE(e,t,n){let i=R_(e,t,n),s=rg(i);return r=>s(r)}function R_(e,t,n=0){let i=1/0;for(let u=1;u<e.length;u++)i=Math.min(i,Math.abs(e[u].valueOf()-e[u-1].valueOf()));let[s,r]=t.length===0?[0,0]:Cn([t[0].valueOf(),t[t.length-1].valueOf()]),o=new Date(s).getFullYear(),l=new Date(r).getFullYear()-o>0,c=isFinite(i)?qle(i,e):Zle(e[0]);return Qle(Math.max(c-n,0),l,e)}function qle(e,t){return e<Pa?0:e<Ln?1:e<ci?2:e<Ms?3:e<Eo?4:e<Ms*28||e<Ms*31&&Xle(t)?5:e<od?6:7}function Zle(e){return $u.floor(e)<e?0:Yu.floor(e)<e?1:Ku.floor(e)<e?2:eC.floor(e)<e?3:ic.floor(e)<e?Ap.floor(e)<e?4:5:LC.floor(e)<e?6:7}function Xle(e){let t=new Date(e[0]).getMonth();for(let n=1;n<e.length;n++){let i=new Date(e[n]).getMonth();if(t===i)return!0;t=i}return!1}function Qle(e,t,n){let i=Gn(n[0]),s=Gn(n.at(-1)),r=Math.abs(s-i),o=t||e===7,a=r===0,c=[["hour",6*ci,14*Ms,3,"%I %p"],["hour",Ln,6*ci,3,"%I:%M"],["second",1e3,6*ci,1,":%S"],["ms",0,6*ci,0,".%L"],["am/pm",Ln,6*ci,3,"%p"]," ",["day",Ms,Eo,4,"%a"],["month",a?0:Eo,52*Eo,5,"%b %d"],["month",5*Eo,10*od,6,"%B"]," ",["year",o?0:od,1/0,7,"%Y"]].filter(h=>{if(typeof h=="string")return!0;let[p,g,f,m]=h;return m>=e&&g<=r&&r<f}).reduce((h,p)=>(typeof p=="string"?h.result.push(p):h.used.has(p[0])||(h.result.push(p),h.used.add(p[0])),h),{result:[],used:new Set}).result,u=c.findIndex(h=>typeof h!="string"),d=c.findLastIndex(h=>typeof h!="string");return c.slice(u,d+1).map(h=>typeof h=="string"?h:h[4]).join("").replaceAll(/\s+/g," ").trim()}var hd=(e,t)=>{let n=Symbol(String(t));e[n]=void 0,Object.defineProperty(e,t,{get(){return this[n]},set(i){this[n]!==i&&(this[n]=i,this.invalid=!0)},enumerable:!0,configurable:!1})};function T_(e,t,n){if(n==null||n[0]===0&&n[1]===1)return e;let i=De(0,Math.floor(n[0]*e.length),e.length),s=De(0,Math.ceil(n[1]*e.length),e.length),r=t?e.length-s:i,o=t?e.length-i:s;return e.slice(r,o)}var PC=class k_ extends kC{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof k_}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=De(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this.invalid=!0,this._paddingInner=De(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this.invalid=!0,this._paddingOuter=De(0,t,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&G.warnOnce("Expected update to not invalidate scale"))}ticks(t,n=this.domain,i){return T_(n,!1,i)}convert(t,n){this.refresh();let i=this.getIndex(t);return i==null||i<0||i>=this.domain.length?NaN:this.ordinalRange(i)}invertNearestIndex(t){this.refresh();let{domain:n}=this;if(n.length===0)return-1;let i=0,s=n.length-1,r=1/0,o=0;for(;i<=s;){let a=(s+i)/2|0,l=this.ordinalRange(a),c=Math.abs(l-t);if(c===0)return a;c<r&&(r=c,o=a),l<t?i=a+1:s=a-1}return o}update(){let t=this.domain.length;if(t===0)return;let[n,i]=this.range,{_paddingInner:s}=this,{_paddingOuter:r,round:o}=this,a=i-n,l;t===1?(s=0,l=a*(1-r*2)):l=a/Math.max(1,t-s+r*2);let c=o?Math.floor(l):l,u=n+(a-c*(t-s))/2,d=c*(1-s);o&&(u=Math.round(u),d=Math.round(d)),this._step=c,this._inset=u,this._bandwidth=d,this._rawBandwidth=l*(1-s)}ordinalRange(t){let{_inset:n,_step:i,range:s}=this,r=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return De(r,n+i*t,o)}};C([hd],PC.prototype,"range",2);C([hd],PC.prototype,"round",2);C([hd],PC.prototype,"interval",2);var og=PC,ag=class extends og{constructor(){super(...arguments),this.type="band",this.index=void 0,this._domain=[]}set domain(e){this._domain!==e&&(this.invalid=!0,this._domain=e,this.index=void 0)}get domain(){return this._domain}normalizeDomains(...e){let t,n=new Set,i=!0;for(let s of e)n.has(s)||(n.add(s),t==null?t=T2(s):(i&&(i=Jle(s,t)),t=T2([...t,...s])));return t??(t=[]),{domain:t,animatable:i}}toDomain(e){}invert(e,t=!1){this.refresh();let n=t?this.bandwidth/2:0,i=this.invertNearestIndex(Math.max(0,e-n));return t||e===this.ordinalRange(i)?this.domain[i]:void 0}getIndex(e){let{index:t}=this;if(t==null){let{domain:n}=this;t=new Map;for(let i=0;i<n.length;i++)t.set(Gn(n[i]),i);this.index=t}return t.get(Gn(e))}};function T2(e){let t,n=new Set;for(let i of e){let s=Gn(i),r=n.size;n.add(s),n.size!==r?t?.push(i):t??(t=e.slice(0,n.size))}return t??e}function Jle(e,t){let n=-1;for(let i of e){let s=t.indexOf(i);if(s===-1)n=1/0;else{if(s<=n)return!1;n=s}}return!0}var Se=class{set(e){let{className:t=this.constructor.name}=this.constructor;if(typeof e!="object")return G.warn(`unable to set ${t} - expecting a properties object`),this;let n=new Set(Object.keys(e));for(let i of ac(this))if(n.has(i)){let s=e[i],r=this;if(_r(r[i]))if(r[i]instanceof lg){let o=r[i].reset(s);o!=null?r[i]=o:G.warn(`unable to set [${i}] - expecting a properties array`)}else r[i].set(s);else r[i]=s;n.delete(i)}for(let i of n)G.warn(`unable to set [${i}] in ${t} - property is unknown`);return this}isValid(e){return ac(this).every(t=>{let{optional:n}=Jae(this,t),i=n===!0||typeof this[t]<"u";return i||G.warnOnce(`${e??""}[${t}] is required.`),i})}toJson(){return ac(this).reduce((e,t)=>{let n=this[t];return e[t]=_r(n)?n.toJson():n,e},{})}},lg=class L_ extends Array{constructor(t,...n){super(n.length);let s=(r=>!!r?.prototype?.constructor?.name)(t)?r=>new t().set(r):t;Object.defineProperty(this,"itemFactory",{value:s,enumerable:!1,configurable:!1}),this.set(n)}set(t){if(mt(t)){this.length=t.length;for(let n=0;n<t.length;n++)this[n]=this.itemFactory(t[n])}return this}reset(t){if(Array.isArray(t))return new L_(this.itemFactory,...t)}toJson(){return this.map(t=>t?.toJson?.()??t)}};function _r(e){return e instanceof Se||e instanceof lg}function b(e,t={}){let{optional:n=!1,property:i}=t;return Po((s,r,o)=>{let a=R(S({},t),{target:s,property:r});if(n&&typeof o>"u"||e(o,a))return _r(s[r])&&!_r(o)?(s[r].set(o),s[r]):o;let l=i??String(r).replace(/^_*/,""),c=s.constructor.className??s.constructor.name.replace(/Properties$/,""),u=Ep(o,50);return G.warn(`Property [${l}] of [${c}] cannot be set to [${u}]${e.message?`; expecting ${hg(e,a)}`:""}, ignoring.`),Xy},void 0,{optional:n})}var Vr=(...e)=>{let t=[];return et((n,i)=>(t.length=0,e.every(s=>{let r=s(n,i);return r||t.push(hg(s,i)),r})),()=>t.filter(Boolean).join(" AND "))},ja=(...e)=>et((t,n)=>e.some(i=>i(t,n)),t=>e.map(cce(t)).filter(Boolean).join(" OR ")),K=SE(et((e,t)=>_r(e)||yn(e)&&_r(t.target[t.property]),"a properties object")),P_=SE(et(e=>yn(e),"an object")),le=et(r_,"a boolean"),di=et(hc,"a function"),B=et(xi,"a string"),je=dce(et(We,"a number")),F_=et(e=>bs(e)&&!isNaN(e),"a real number"),FC=et(e=>bs(e)&&isNaN(e),"NaN"),j=je.restrict({min:0}),Qe=je.restrict({min:0,max:1}),pd=ja(je,FC),cg=uce(et(mt,"an array")),_o=(e,t)=>et((n,i)=>mt(n)&&n.every(s=>e(s,i)),n=>{let i=hg(cg,n)??"";return typeof t=="function"?`${i} of ${t(n)}`:t?`${i} of ${t}`:i}),tC=e=>We(e)||ig(e),ug=e=>et((t,n)=>!tC(t)||!tC(n.target[e])||t<n.target[e],`to be less than ${e}`),dg=e=>et((t,n)=>!tC(t)||!tC(n.target[e])||t>n.target[e],`to be greater than ${e}`),vE=et(ig,"Date object"),yE=ja(vE,j),N_="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",qe=et(e=>xi(e)&&Tt.validColorString(e),`color String. ${N_}`),O_=SE(et(e=>yn(e)&&e.type==="gradient","a color gradient object")),Ki=et(_o(qe),`color strings. ${N_}`),ece=_o(le,"boolean values"),NC=_o(je,"numbers"),__=_o(B,"strings"),tce=et(_o(vE),"Date objects"),CE=et(_o(K),"objects"),nce=ut(["butt","round","square"],"a line cap"),ice=ut(["round","bevel","miter"],"a line join"),sce=ut(["solid","dashed","dotted"],"a line style"),Gr=et(_o(j),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),wE=ut(["top","right","bottom","left"],"a position"),Bo=ut(["normal","italic","oblique"],"a font style"),Vo=ja(ut(["normal","bold","bolder","lighter"],"a font weight"),je.restrict({min:1,max:1e3})),OC=ut(["never","always","hyphenate","on-space"],"a text wrap strategy"),B_=ut(["left","center","right"],"a text align"),rce=ut(["top","middle","bottom"],"a vertical align"),oce=ut(["ellipsis","hide"],"an overflow strategy"),V_=ut(["horizontal","vertical"],"a direction"),ace=ut(["inside","outside"],"a placement"),_C=ja(ut(["exact","nearest"],"interaction range"),je),bE=ut(["top","bottom","left","right"]);function ut(e,t="a"){return et((n,i)=>{let s=e.find(r=>{let o=typeof r=="string"?r:r.value;return n===o});if(s==null)return!1;if(typeof s!="string"&&(s.deprecated===!0||s.deprecatedTo!=null)){let r=[`Property [%s] with value '${s.value}' is deprecated.`];s.deprecatedTo&&r.push(`Use ${s.deprecatedTo} instead.`),G.warnOnce(r.join(" "),i.property)}return!0},`${t} keyword such as ${lce(e)}`)}var G_=ja(Vr(je.restrict({min:1}),ug("maxSpacing")),FC),z_=ja(Vr(je.restrict({min:1}),dg("minSpacing")),FC);function et(e,t){return e.message=t,e}function lce(e){let t=e.filter(i=>typeof i=="string"||i.undocumented!==!0).map(i=>`'${typeof i=="string"?i:i.value}'`);if(t.length===1)return t[0];let n=t.pop();return`${t.join(", ")} or ${n}`}function hg(e,t){return hc(e.message)?e.message(t):e.message}function cce(e){return t=>hg(t,e)}function uce(e){return Object.assign(e,{restrict({length:t,minLength:n}={}){let i="an array";return bs(n)&&n>0?i="a non-empty array":bs(t)&&(i=`an array of length ${t}`),et(s=>mt(s)&&(bs(t)?s.length===t:!0)&&(bs(n)?s.length>=n:!0),i)}})}function dce(e){return Object.assign(e,{restrict({min:t,max:n}={}){let i=["a number"],s=bs(t),r=bs(n);return s&&r?i.push(`between ${t} and ${n} inclusive`):s?i.push(`greater than or equal to ${t}`):r&&i.push(`less than or equal to ${n}`),et(o=>We(o)&&(s?o>=t:!0)&&(r?o<=n:!0),i.join(" "))}})}function SE(e){return Object.assign(e,{restrict(t){return et(n=>n instanceof t,n=>hg(e,n)??`an instance of ${t.name}`)}})}var H_={};Is(H_,{resetMotion:()=>vn});function vn(e,t){let{nodes:n,selections:i}=TC(e);for(let s of i){for(let r of s.nodes()){let o=t(r,r.datum);r.setProperties(o)}s.cleanup()}for(let s of n){let r=t(s,s.datum);s.setProperties(r)}}var hce=2e3,k2=Date.now(),pce=()=>{let e=Date.now()-k2;if(e>hce){let t=(Math.floor(e/100)/10).toFixed(1);G.log(`**** ${t}s since last log message ****`)}k2=Date.now()},ct={create(...e){return Object.assign((...n)=>{ct.check(...e)&&(typeof n[0]=="function"&&(n=qy(n[0]())),pce(),G.log(...n))},{check:()=>ct.check(...e),group:(n,i)=>ct.check(...e)?G.logGroup(n,i):i()})},check(...e){return e.length===0&&e.push(!0),qy(ft("agChartsDebug")).some(n=>e.includes(n))}};function j_({context:e,pixelRatio:t,width:n,height:i}){e.save(),e.resetTransform(),e.clearRect(0,0,Math.ceil(n*t),Math.ceil(i*t)),e.restore()}function W_(e){if(ct.check("canvas")){let t=e.save.bind(e),n=e.restore.bind(e),i=0;Object.assign(e,{save(){t(),i++},restore(){if(i===0)throw new Error("AG Charts - Unable to restore() past depth 0");n(),i--},verifyDepthZero(){if(i!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${i}`)}})}}function L2(e,t,n){return[Math.round(e*n),Math.round(t*n)]}var U_=class{constructor(e){let{width:t,height:n,pixelRatio:i,willReadFrequently:s=!1}=e;this.width=t,this.height=n,this.pixelRatio=i;let[r,o]=L2(t,n,i);this.canvas=new OffscreenCanvas(r,o),this.context=this.canvas.getContext("2d",{willReadFrequently:s}),this.context.setTransform(i,0,0,i,0,0),W_(this.context)}drawImage(e,t=0,n=0){return e.drawImage(this.canvas,t,n)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(e,t,n){if(!(e>0&&t>0))return;let{canvas:i,context:s}=this;if(e!==this.width||t!==this.height||n!==this.pixelRatio){let[r,o]=L2(e,t,n);i.width=r,i.height=o}s.setTransform(n,0,0,n,0,0),this.width=e,this.height=t,this.pixelRatio=n}clear(){j_(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},P2=e=>{let t=Tt.fromString(e),[n,i,s]=Tt.RGBtoOKLCH(t.r,t.g,t.b);return{l:n,c:i,h:s,a:t.a}},eM=1e-6,F2=e=>e.c<eM||e.l<eM||e.l>1-eM,gce=(e,t,n)=>{n=De(0,n,1);let i;if(F2(e))i=t.h;else if(F2(t))i=e.h;else{let a=e.h,l=t.h,c=t.h-e.h;c>180?l-=360:c<-180&&(l+=360),i=a*(1-n)+l*n}let s=e.c*(1-n)+t.c*n,r=e.l*(1-n)+t.l*n,o=e.a*(1-n)+t.a*n;return Tt.fromOKLCH(r,s,i,o)},Wa=class extends kC{constructor(){super(...arguments),this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(P2)}update(){let{domain:e,range:t}=this;e.length<2&&(G.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(let n=1;n<e.length;n++){let i=e[n-1],s=e[n];if(i>=s){G.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((r,o)=>r-o);break}}if(t.length<e.length)for(let n=t.length;n<e.length;n++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(P2)}normalizeDomains(...e){return{domain:e.flat(),animatable:!0}}toDomain(){}convert(e){this.refresh();let{domain:t,range:n,parsedRange:i}=this,s=t[0],r=t.at(-1),o=n[0],a=n[n.length-1];if(e<=s)return o;if(e>=r)return a;let l,c;if(t.length===2){let h=(e-s)/(r-s),p=1/(n.length-1);l=n.length<=2?0:Math.min(Math.floor(h*(n.length-1)),n.length-2),c=(h-l*p)/p}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);let h=t[l],p=t[l+1];c=(e-h)/(p-h)}let u=i[l],d=i[l+1];return gce(u,d,c).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&G.warnOnce("Expected update to not invalidate scale"))}};C([hd],Wa.prototype,"domain",2);C([hd],Wa.prototype,"range",2);var BC=class{constructor(e,t=[],n){this.colorSpace=e,this.stops=t,this.bbox=n,this._cache=void 0}createGradient(e,t){let n=this.bbox??t;if(this._cache!=null&&this._cache.ctx===e&&this._cache.bbox.equals(n))return this._cache.gradient;let{stops:i,colorSpace:s}=this;if(i.length===0)return;if(i.length===1)return i[0].color;let r=this.createCanvasGradient(e,n);if(r==null)return;let o=s==="oklch",a=.05,l=i[0];r.addColorStop(l.offset,l.color);for(let c=1;c<i.length;c+=1){let u=i[c];if(o){let d=new Wa;d.domain=[l.offset,u.offset],d.range=[l.color,u.color];for(let h=l.offset+a;h<u.offset;h+=a)r.addColorStop(h,d.convert(h))}r.addColorStop(u.offset,u.color),l=u}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:n,gradient:r},r}},Ss=Math.PI*2,mp=Math.PI/2;function gt(e){return e%=Ss,e+=Ss,e%=Ss,e}function fce(e){return e%=Ss,e+=Ss,e!==Ss&&(e%=Ss),e}function Vp(e){return e%=Ss,e<-Math.PI?e+=Ss:e>=Math.PI&&(e-=Ss),e}function Fa(e,t,n){let i=gt(e),s=gt(t),r=gt(n);return s<r?s<=i&&i<=r:s>r?s<=i||i<=r:!0}function tn(e){return e/180*Math.PI}function mce(e){return e/Math.PI*180}function VC(e,t){return e=gt(e),t=gt(t),t-e+(e>t?Ss:0)}function $_(e){let t=gt(e);return t<=mp?t/mp:t<=Math.PI?(Math.PI-t)/mp:t<=1.5*Math.PI?(t-Math.PI)/mp:(Ss-t)/mp}var NM=class extends BC{constructor(e,t,n=0,i){super(e,t,i),this.angle=n}createCanvasGradient(e,t){let{angle:i}=this,s=gt(tn(i+90)),r=Math.cos(s),o=Math.sin(s),a=t.width,l=t.height,c=t.x+a*.5,u=t.y+l*.5,d=Math.sqrt(l*l+a*a)/2,h=Math.atan2(l,a),p;s<Math.PI/2?p=s:s<Math.PI?p=Math.PI-s:s<1.5*Math.PI?p=s-Math.PI:p=2*Math.PI-s;let g=d*Math.abs(Math.cos(p-h));return e.createLinearGradient(c+r*g,u+o*g,c-r*g,u-o*g)}},xE=class extends Se{constructor(){super(...arguments),this.color="black"}};C([b(je,{optional:!0})],xE.prototype,"stop",2);C([b(qe,{optional:!0})],xE.prototype,"color",2);function vce(e){let t;for(let{stop:n}of e)if(n!=null){if(t!=null&&n<t)return!1;t=n}return!0}function Y_(e){return e.flatMap((t,n)=>{let{offset:i}=t,s=e.at(n+1)?.color;return s!=null?[t,{offset:i,color:s}]:[t]})}function yce(e,t){let n=t==="discrete"?1:0,i=e.map((s,r,{length:o})=>({offset:(r+n)/(o-1+n),color:s}));return t==="discrete"?Y_(i):i}function K_(e,t,n,i="continuous"){if(e.length===0)return yce(t,i);if(!vce(e))return G.warnOnce("[fills] must have the stops defined in ascending order"),[];let s=Math.min(...n),r=Math.max(...n),o=i==="discrete",a=new Float64Array(e.length),l=0,c=-1;for(let p=0;p<e.length;p+=1){let g=e[p];if(p>=c){c=e.length-1;for(let m=p+1;m<e.length;m+=1)if(e[m].stop!=null){c=m;break}}let{stop:f}=g;if(f==null){let m=e[l].stop,v=e[c].stop,y=m??s,w=v??r,x=o&&m==null?1:0;f=y+(w-y)*(p-l+x)/(c-l+x)}else l=p;a[p]=Math.max(0,Math.min(1,(f-s)/(r-s)))}let u=e.find(p=>p.color!=null)?.color,d,h=e.map(({color:p},g)=>{let f=a[g];return p!=null?u=p:u!=null?p=u:(d==null&&(d=new Wa,d.domain=[0,1],d.range=t),p=d.convert(f)),{offset:f,color:p}});return i==="discrete"?Y_(h):h}function q_(e){return e!==null&&yn(e)&&e.type=="gradient"}function bo(e,t,n){let i=Math.round(t*e)/e;return n==null?i:n===0?0:n<1?Math.ceil(n*e)/e:Math.round((n+t)*e)/e-i}function N2(e,t){return Math.floor(t*e)/e}var Cce=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,Mi=(()=>{let e=class qs extends Ha{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=qs.defaultStyles.fill,this.stroke=qs.defaultStyles.stroke,this.strokeWidth=qs.defaultStyles.strokeWidth,this.lineDash=qs.defaultStyles.lineDash,this.lineDashOffset=qs.defaultStyles.lineDashOffset,this.lineCap=qs.defaultStyles.lineCap,this.lineJoin=qs.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=qs.defaultStyles.opacity,this.fillShadow=qs.defaultStyles.fillShadow,this.gradientFillOptions={domain:[0,1],defaultColorRange:qs.defaultStyles.defaultColorRange}}restoreOwnStyles(){let{defaultStyles:n}=this.constructor;Object.assign(this,n)}getGradient(n){let i;if(n instanceof BC)return n;if(typeof n=="string"&&n?.startsWith("linear-gradient")&&(i=Cce.exec(n))){let s=parseFloat(i[1]),r=[],o=i[2],a=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,l;for(;l=a.exec(o);)r.push(l[0]);return new NM("rgb",r.map((c,u)=>({color:c,offset:u/(r.length-1)})),s)}else if(q_(n))return this.createLinearGradient(n)}createLinearGradient(n){let{colorStops:i=[],direction:s}=n,r=s==="horizontal",{domain:o,defaultColorRange:a=[]}=this.gradientFillOptions,l=K_(i,a,o);return new NM("oklch",l,r?0:90)}onFillChange(){this.fillGradient=this.getGradient(this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(n,i){return bo(this.layerManager?.canvas?.pixelRatio??1,n,i)}fillStroke(n,i){this.renderFill(n,i),this.renderStroke(n,i)}renderFill(n,i){if(this.fill){let{globalAlpha:s}=n;this.applyFill(n),this.applyFillAlpha(n),this.applyShadow(n),this.executeFill(n,i),n.globalAlpha=s}n.shadowColor="rgba(0, 0, 0, 0)"}executeFill(n,i){i?n.fill(i):n.fill()}applyFill(n){let i=this.gradientFillOptions.bbox??this.getBBox();n.fillStyle=this.fillGradient?.createGradient(n,i)??(typeof this.fill=="string"?this.fill:void 0)??"black"}applyStroke(n){n.strokeStyle=this.strokeGradient?.createGradient(n,this.getBBox())??(typeof this.stroke=="string"?this.stroke:void 0)??"black"}applyFillAlpha(n){n.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(n){let i=this.layerManager?.canvas.pixelRatio??1,s=this.fillShadow;s?.enabled&&(n.shadowColor=s.color,n.shadowOffsetX=s.xOffset*i,n.shadowOffsetY=s.yOffset*i,n.shadowBlur=s.blur*i)}renderStroke(n,i){if(this.stroke&&this.strokeWidth){let{globalAlpha:s}=n;this.applyStroke(n),n.globalAlpha*=this.opacity*this.strokeOpacity,n.lineWidth=this.strokeWidth,this.lineDash&&n.setLineDash(this.lineDash),this.lineDashOffset&&(n.lineDashOffset=this.lineDashOffset),this.lineCap&&(n.lineCap=this.lineCap),this.lineJoin&&(n.lineJoin=this.lineJoin),this.miterLimit!=null&&(n.miterLimit=this.miterLimit),this.executeStroke(n,i),n.globalAlpha=s}}executeStroke(n,i){i?n.stroke(i):n.stroke()}containsPoint(n,i){return this.isPointInPath(n,i)}applySvgFillAttributes(n){let{fill:i,fillOpacity:s}=this;n.setAttribute("fill",typeof i=="string"?i:"none"),n.setAttribute("fill-opacity",String(s))}applySvgStrokeAttributes(n){let{stroke:i,strokeOpacity:s,strokeWidth:r,lineDash:o,lineDashOffset:a}=this;if(i!=null&&(n.setAttribute("stroke",typeof i=="string"?i:"none"),n.setAttribute("stroke-opacity",String(s)),n.setAttribute("stroke-width",String(r))),o?.some(l=>l!==0)===!0){let l=o.length%2===1?[...o,...o]:o;n.setAttribute("stroke-dasharray",l.join(" ")),n.setAttribute("stroke-dashoffset",String(a))}}};return e.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,defaultColorRange:["#5090dc","#ef5452"]},e})();C([q()],Mi.prototype,"fillOpacity",2);C([q()],Mi.prototype,"strokeOpacity",2);C([q({changeCb:e=>e.onFillChange()})],Mi.prototype,"fill",2);C([q({changeCb:e=>e.onStrokeChange()})],Mi.prototype,"stroke",2);C([q()],Mi.prototype,"strokeWidth",2);C([q()],Mi.prototype,"lineDash",2);C([q()],Mi.prototype,"lineDashOffset",2);C([q()],Mi.prototype,"lineCap",2);C([q()],Mi.prototype,"lineJoin",2);C([q()],Mi.prototype,"miterLimit",2);C([q({convertor:e=>De(0,e,1)})],Mi.prototype,"opacity",2);C([q({checkDirtyOnAssignment:!0})],Mi.prototype,"fillShadow",2);C([q({changeCb:e=>e.onFillChange()})],Mi.prototype,"gradientFillOptions",2);var Es=Mi,Z_=[1,0,0,1,0,0],nr=class Gy{get e(){return[...this.elements]}constructor(t=Z_){this.elements=[...t]}setElements(t){let n=this.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],this}get identity(){let t=this.elements;return Zs(t[0],1)&&Zs(t[1],0)&&Zs(t[2],0)&&Zs(t[3],1)&&Zs(t[4],0)&&Zs(t[5],0)}AxB(t,n,i){let s=t[0]*n[0]+t[2]*n[1],r=t[1]*n[0]+t[3]*n[1],o=t[0]*n[2]+t[2]*n[3],a=t[1]*n[2]+t[3]*n[3],l=t[0]*n[4]+t[2]*n[5]+t[4],c=t[1]*n[4]+t[3]*n[5]+t[5];i=i??t,i[0]=s,i[1]=r,i[2]=o,i[3]=a,i[4]=l,i[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){let n=new Array(6);return t instanceof Gy?this.AxB(this.elements,t.elements,n):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],n),new Gy(n)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){let t=this.elements,n=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=1/(n*r-i*s);return n*=l,i*=l,s*=l,r*=l,new Gy([r,-i,-s,n,s*a-r*o,i*o-n*a])}invertSelf(){let t=this.elements,n=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=1/(n*r-i*s);return n*=l,i*=l,s*=l,r*=l,t[0]=r,t[1]=-i,t[2]=-s,t[3]=n,t[4]=s*a-r*o,t[5]=i*o-n*a,this}transformPoint(t,n){let i=this.elements;return{x:t*i[0]+n*i[2]+i[4],y:t*i[1]+n*i[3]+i[5]}}transformBBox(t,n){let i=this.elements,s=i[0],r=i[1],o=i[2],a=i[3],l=t.width*.5,c=t.height*.5,u=t.x+l,d=t.y+c,h=Math.abs(l*s)+Math.abs(c*o),p=Math.abs(l*r)+Math.abs(c*a);return n??(n=new Z(0,0,0,0)),n.x=u*s+d*o+i[4]-h,n.y=u*r+d*a+i[5]-p,n.width=h+h,n.height=p+p,n}toContext(t){if(this.identity)return;let n=this.elements;t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}static updateTransformMatrix(t,n,i,s,r,o,a){let l=n,c=i,u,d;l===1&&c===1?(u=0,d=0):(u=a?.scalingCenterX??0,d=a?.scalingCenterY??0);let h=s,p=Math.cos(h),g=Math.sin(h),f,m;h===0?(f=0,m=0):(f=a?.rotationCenterX??0,m=a?.rotationCenterY??0);let v=r,y=o,w=u*(1-l)-f,x=d*(1-c)-m;return t.setElements([p*l,g*l,-g*c,p*c,p*w-g*x+f+v,g*w+p*x+m+y]),t}};function Ra(e){return Q_(e.constructor)}var X_=Symbol("isMatrixTransform");function Q_(e){return e[X_]===!0}function DE(e){var t,n;let i=e;if(Q_(e))return e;let s=Symbol("matrix_combined_transform");class r extends i{constructor(){super(...arguments),this[n]=new nr,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}updateMatrix(a){}computeTransformMatrix(){this._dirtyTransform&&(this[s].setElements(Z_),this.updateMatrix(this[s]),this._dirtyTransform=!1)}toParent(a){return this.computeTransformMatrix(),this[s].identity?a.clone():this[s].transformBBox(a)}toParentPoint(a,l){return this.computeTransformMatrix(),this[s].identity?{x:a,y:l}:this[s].transformPoint(a,l)}fromParent(a){return this.computeTransformMatrix(),this[s].identity?a.clone():this[s].inverse().transformBBox(a)}fromParentPoint(a,l){return this.computeTransformMatrix(),this[s].identity?{x:a,y:l}:this[s].inverse().transformPoint(a,l)}computeBBox(){let a=super.computeBBox();return a&&this.toParent(a)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(a,l,c=!1){return c||({x:a,y:l}=this.fromParentPoint(a,l)),super.pickNode(a,l)}render(a){this.computeTransformMatrix();let{ctx:l}=a,c=this[s],u=!1;c.identity||(l.save(),u=!0,c.toContext(l)),super.render(a),u&&l.restore()}toSVG(){this.computeTransformMatrix();let a=super.toSVG(),l=this[s];if(l.identity||a==null)return a;let c=Ds("g");c.append(...a.elements);let[u,d,h,p,g,f]=l.e;return c.setAttribute("transform",`matrix(${u} ${d} ${h} ${p} ${g} ${f})`),{elements:[c],defs:a.defs}}}return t=X_,n=s,r[t]=!0,r}function gd(e){var t;let n=e,i=Symbol("matrix_rotation");class s extends DE(n){constructor(){super(...arguments),this[t]=new nr,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(o){super.updateMatrix(o);let{rotation:a,rotationCenterX:l,rotationCenterY:c}=this;a!==0&&(nr.updateTransformMatrix(this[i],1,1,a,0,0,{rotationCenterX:l,rotationCenterY:c}),o.multiplySelf(this[i]))}}return t=i,C([q({type:"transform"})],s.prototype,"rotationCenterX",2),C([q({type:"transform"})],s.prototype,"rotationCenterY",2),C([q({type:"transform"})],s.prototype,"rotation",2),s}function ME(e){var t;let n=e,i=Symbol("matrix_scale");class s extends DE(n){constructor(){super(...arguments),this[t]=new nr,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(o){super.updateMatrix(o);let{scalingX:a,scalingY:l,scalingCenterX:c,scalingCenterY:u}=this;a===1&&l===1||(nr.updateTransformMatrix(this[i],a,l,0,0,0,{scalingCenterX:c,scalingCenterY:u}),o.multiplySelf(this[i]))}}return t=i,C([q({type:"transform"})],s.prototype,"scalingX",2),C([q({type:"transform"})],s.prototype,"scalingY",2),C([q({type:"transform"})],s.prototype,"scalingCenterX",2),C([q({type:"transform"})],s.prototype,"scalingCenterY",2),s}function gc(e){var t;let n=e,i=Symbol("matrix_translation");class s extends DE(n){constructor(){super(...arguments),this[t]=new nr,this.translationX=0,this.translationY=0}updateMatrix(o){super.updateMatrix(o);let{translationX:a,translationY:l}=this;a===0&&l===0||(nr.updateTransformMatrix(this[i],1,1,0,a,l),o.multiplySelf(this[i]))}}return t=i,C([q({type:"transform"})],s.prototype,"translationX",2),C([q({type:"transform"})],s.prototype,"translationY",2),s}var Pt=class{static fromCanvas(e,t){let n=[];for(let i of e.traverseUp())Ra(i)&&n.unshift(i);for(let i of n)t=i.fromParent(t);return Ra(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){t==null?t=e.getBBox():Ra(e)&&(t=e.toParent(t));for(let n of e.traverseUp())Ra(n)&&(t=n.toParent(t));return t}static fromCanvasPoint(e,t,n){let i=[];for(let s of e.traverseUp())Ra(s)&&i.unshift(s);for(let s of i)({x:t,y:n}=s.fromParentPoint(t,n));return Ra(e)&&({x:t,y:n}=e.fromParentPoint(t,n)),{x:t,y:n}}static toCanvasPoint(e,t,n){Ra(e)&&({x:t,y:n}=e.toParentPoint(t,n));for(let i of e.traverseUp())Ra(i)&&({x:t,y:n}=i.toParentPoint(t,n));return{x:t,y:n}}},tM=(e,t)=>Math.sign(e-t);function J_(e,t){if(typeof e=="number"&&typeof t=="number")return tM(e,t);let n=typeof e=="number"?[e]:e,i=typeof t=="number"?[t]:t,s=Math.min(n.length,i.length);for(let r=0;r<s;r+=1){let o=tM(n[r],i[r]);if(o!==0)return o}return tM(n.length,i.length)}var vp,eB=(()=>{let e=class bp extends Ha{constructor(n){super(n),this.opacity=1,this.renderToOffscreenCanvas=!1,this.optimizeForInfrequentRedraws=!1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=n?.renderToOffscreenCanvas===!0}static is(n){return n instanceof bp}static computeChildrenBBox(n,i=!0){return Z.merge(Ha.extractBBoxes(n,i))}static compareChildren(n,i){return J_(n.zIndex,i.zIndex)||n.serialNumber-i.serialNumber}containsPoint(n,i){return!0}computeBBox(){return bp.computeChildrenBBox(this.children())}computeSafeClippingBBox(n){let i=this.computeBBox();if(!i.isFinite())return;let s=0,r=4;for(let p of this.descendants())p instanceof Es&&(s=Math.max(s,p.strokeWidth));let o=Math.max(1,s/2*r),{x:a,y:l}=Pt.toCanvasPoint(this,0,0),c=N2(n,a+i.x-o)-a,u=N2(n,l+i.y-o)-l,d=Math.ceil(i.x+i.width-c+o),h=Math.ceil(i.y+i.height-u+o);return new Z(c,u,d,h)}prepareSharedCanvas(n,i,s){return vp==null||vp.pixelRatio!==s?vp=new U_({width:n,height:i,pixelRatio:s}):vp.resize(n,i,s),vp}isDirty(n){let{width:i,height:s,devicePixelRatio:r}=n,{dirty:o,dirtyZIndex:a,layer:l}=this,c=l!=null&&(this._lastWidth!==i||this._lastHeight!==s),u=this._lastDevicePixelRatio!==r;if(this._lastWidth=i,this._lastHeight=s,this._lastDevicePixelRatio=r,o||a||c||u)return!0;for(let d of this.children())if(d.dirty)return!0;return!1}preRender(n){let i=super.preRender(n,0);return i.groups+=1,i.nonGroups-=1,this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&i.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this._layerManager?.addLayer({name:this.name})):this.layer!=null&&(this._layerManager?.removeLayer(this.layer),this.layer=void 0),i}render(n){let{layer:i,renderToOffscreenCanvas:s}=this,r=S({},n);if(!s){this.renderInContext(r),super.render(r);return}let{ctx:o,stats:a,devicePixelRatio:l}=n,{image:c}=this;if(this.isDirty(n)){c?.bitmap.close(),c=void 0;let d=i?void 0:this.computeSafeClippingBBox(l),h=(p,...g)=>{let f=p.context;r.ctx=f,p.clear(),f.save(),f.setTransform(...g),f.globalAlpha=1,this.renderInContext(r),f.restore(),f.verifyDepthZero?.()};if(i)h(i,o.getTransform());else if(d){let{x:p,y:g,width:f,height:m}=d,v=this.prepareSharedCanvas(f,m,l);h(v,l,0,0,l,-p*l,-g*l),c={bitmap:v.transferToImageBitmap(),x:p,y:g,width:f,height:m}}else this.dirtyZIndex&&this.sortChildren(bp.compareChildren);this.image=c,a&&a.layersRendered++}else this.skipRender(r),a&&a.layersSkipped++;let{globalAlpha:u}=o;if(o.globalAlpha=u*this.opacity,i)o.save(),o.resetTransform(),i.drawImage(o),o.restore();else if(c){let{bitmap:d,x:h,y:p,width:g,height:f}=c;o.drawImage(d,0,0,g*l,f*l,h,p,g,f)}o.globalAlpha=u,super.render(r)}skipRender(n){let{stats:i}=n;for(let s of this.children())s.markClean(),i&&(i.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,i.opsSkipped+=this.childNodeCounts.complexity)}applyClip(n,i){let{x:s,y:r,width:o,height:a}=i;n.beginPath(),n.rect(s,r,o,a),n.clip()}renderInContext(n){let{ctx:i,stats:s}=n;this.dirtyZIndex&&this.sortChildren(bp.compareChildren),i.save(),i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),n.clipBBox=Pt.toCanvas(this,this.clipRect));for(let r of this.children()){if(!r.visible){r.markClean(),s&&(s.nodesSkipped+=r.childNodeCounts.nonGroups+r.childNodeCounts.groups,s.opsSkipped+=r.childNodeCounts.complexity);continue}i.save(),r.render(n),i.restore()}i.restore()}setClipRect(n){this.clipRect=n?Pt.fromCanvas(this,n):void 0}setClipRectCanvasSpace(n){this.clipRect=n}_setLayerManager(n){this.layer&&(this._layerManager?.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(n)}getVisibility(){for(let n of this.traverseUp(!0))if(!n.visible)return!1;return!0}toSVG(){if(!this.visible)return;let n=[],i=[];for(let s of this.children()){let r=s.toSVG();r!=null&&(i.push(...r.elements),r.defs!=null&&n.push(...r.defs))}return{elements:i,defs:n}}};return e.className="Group",e})();C([q({convertor:e=>De(0,e,1)})],eB.prototype,"opacity",2);var ye=eB,wce=class extends ME(ye){},bce=class extends gd(ye){},ui=class extends gc(ye){},yp=class extends gd(gc(ye)){};function Sce(e=0,t=0){return new OffscreenCanvas(e,t).getContext("2d")}var EE=class{constructor(e=5){this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;let t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){let n=this.store.keys(),i=this.store.size-this.maxCacheSize;for(;i>0;){let s=n.next();s.done||this.store.delete(s.value),i--}}return t}clear(){this.store.clear()}},Go=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){let t=typeof e.font=="string"?e.font:Yt.toFontString(e.font),n=`${t}-${e.textAlign??"start"}-${e.textBaseline??"alphabetic"}`;return this.instanceMap.get(n)??this.createFontMeasurer(t,e,n)}static createFontMeasurer(e,t,n){let i=Sce();i.font=e,i.textAlign=t.textAlign??"start",i.textBaseline=t.textBaseline??"alphabetic";let s=new tB(i,t);return this.instanceMap.set(n,s),s}};Go.instanceMap=new EE(10);var tB=class{constructor(e,t){this.ctx=e,this.measureMap=new EE(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font=typeof t.font=="string"?t.font:Yt.toFontString(t.font),this.textMeasurer=new IE(n=>this.cachedCtxMeasureText(n),t.textBaseline??"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){let t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},Yt=(()=>{let e=class{static toFontString({fontSize:t=10,fontStyle:n,fontWeight:i,fontFamily:s,lineHeight:r}){let o="";return n&&(o+=`${n} `),i&&(o+=`${i} `),o+=`${t}px`,r&&(o+=`/${r}px`),o+=` ${s}`,o.trim()}static getLineHeight(t){return Math.ceil(t*this.defaultLineHeight)}static getVerticalModifier(t){switch(t){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}};return e.EllipsisChar="\u2026",e.defaultLineHeight=1.15,e.lineSplitter=/\r?\n/g,e})(),IE=class{constructor(e,t="alphabetic"){this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){let t=this.measureTextFn(e);return t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),{width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}}getMultilineMetrics(e){let t=0,n=0,i=0,s=0,r=0,o=Yt.getVerticalModifier(this.textBaseline),a=[],l=0,c=e.length;for(let u of e){let d=this.measureTextFn(u);d.fontBoundingBoxAscent??(d.fontBoundingBoxAscent=d.emHeightAscent),d.fontBoundingBoxDescent??(d.fontBoundingBoxDescent=d.emHeightDescent),t<d.width&&(t=d.width),s<d.actualBoundingBoxLeft&&(s=d.actualBoundingBoxLeft),l===0?(n+=d.actualBoundingBoxAscent,i+=d.actualBoundingBoxAscent):r+=d.fontBoundingBoxAscent,l===c-1?n+=d.actualBoundingBoxDescent:r+=d.fontBoundingBoxDescent,a.push({text:u,width:d.width,height:d.actualBoundingBoxAscent+d.actualBoundingBoxDescent,lineHeight:d.fontBoundingBoxAscent+d.fontBoundingBoxDescent,offsetTop:d.actualBoundingBoxAscent,offsetLeft:d.actualBoundingBoxLeft}),l++}return n+=r,i+=r*o,{width:t,height:n,offsetTop:i,offsetLeft:s,lineMetrics:a}}textWidth(e,t){if(t){let n=0;for(let i=0;i<e.length;i++)n+=this.textWidth(e.charAt(i));return n}return e.length>1?this.measureTextFn(e).width:this.charMap.get(e)??this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){let t=typeof e=="string"?e.split(Yt.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){let{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}},qi=class zy extends Es{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=zy.defaultStyles.textAlign,this.textBaseline=zy.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split(`
`).map(t=>t.trim())??[]}static computeBBox(t,n,i,s){let{offsetTop:r,offsetLeft:o,width:a,height:l}=Go.measureLines(t,s);return new Z(n-o,i-r,a,l)}computeBBox(){let{x:t,y:n,lines:i,textBaseline:s,textAlign:r}=this;return zy.computeBBox(i,t,n,{font:this,textBaseline:s,textAlign:r})}isPointInPath(t,n){let i=this.getBBox();return i?i.containsPoint(t,n):!1}render(t){let{ctx:n,stats:i}=t;if(!this.lines.length||!this.layerManager)return i&&(i.nodesSkipped+=1),super.render(t);let{fill:s,stroke:r,strokeWidth:o}=this,{pixelRatio:a}=this.layerManager.canvas;if(n.font=Yt.toFontString(this),n.textAlign=this.textAlign,n.textBaseline=this.textBaseline,s){this.applyFill(n),n.globalAlpha*=this.opacity*this.fillOpacity;let{fillShadow:l}=this;l?.enabled&&(n.shadowColor=l.color,n.shadowOffsetX=l.xOffset*a,n.shadowOffsetY=l.yOffset*a,n.shadowBlur=l.blur*a),this.renderLines((c,u,d)=>n.fillText(c,u,d))}if(r&&o){this.applyStroke(n),n.lineWidth=o,n.globalAlpha*=this.opacity*this.strokeOpacity;let{lineDash:l,lineDashOffset:c,lineCap:u,lineJoin:d}=this;l&&n.setLineDash(l),c&&(n.lineDashOffset=c),u&&(n.lineCap=u),d&&(n.lineJoin=d),this.renderLines((h,p,g)=>n.strokeText(h,p,g))}super.render(t)}renderLines(t){let{lines:n,x:i,y:s}=this,r=this.lineHeight??Yt.getLineHeight(this.fontSize),o=(r-r*n.length)*Yt.getVerticalModifier(this.textBaseline);for(let a of n)t(a,i,s+o),o+=r}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}toSVG(){if(!this.visible||!this.text)return;let t=Ds("text");return this.applySvgFillAttributes(t),t.setAttribute("font-family",this.fontFamily?.split(",")[0]??""),t.setAttribute("font-size",String(this.fontSize)),t.setAttribute("font-style",this.fontStyle??""),t.setAttribute("font-weight",String(this.fontWeight??"")),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),t.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=this.text??"",{elements:[t]}}};qi.className="Text";qi.defaultStyles=R(S({},Es.defaultStyles),{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});C([q()],qi.prototype,"x",2);C([q()],qi.prototype,"y",2);C([q({changeCb:e=>e.onTextChange()})],qi.prototype,"text",2);C([q()],qi.prototype,"fontStyle",2);C([q()],qi.prototype,"fontWeight",2);C([q()],qi.prototype,"fontSize",2);C([q()],qi.prototype,"fontFamily",2);C([q()],qi.prototype,"textAlign",2);C([q()],qi.prototype,"textBaseline",2);C([q()],qi.prototype,"lineHeight",2);var hn=qi,nB=class extends gd(hn){},ad=class extends gd(gc(hn)){},nM="color: green",iM="color: grey";function xce(){return m_(()=>{})}function OM(e,t){let n=ac(t);if(n.length===0)return;let i=v_(e);for(let s of n)s in i&&(t[s]=i[s])}var iB=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},Dce=(()=>{let e=class bi extends iB{constructor(n,i,s){super(),this.defaultState=n,this.states=i,this.enterEach=s,this.debug=ct.create(!0,"animation"),this.state=n,this.debug(`%c${this.constructor.name} | init -> ${n}`,nM)}transition(n,i){if(!this.transitionChild(n,i)||this.state===bi.child||this.state===bi.parent)return;let r=this.state,o=this.states[this.state],a=o[n],l=`%c${this.constructor.name} | ${this.state} -> ${n} ->`;if(Array.isArray(a))a=a.find(d=>{if(!d.guard)return!0;let h=d.guard(i);return h||this.debug(`${l} (guarded)`,d.target,iM),h});else if(typeof a=="object"&&!(a instanceof bi)&&a.guard&&!a.guard(i)){this.debug(`${l} (guarded)`,a.target,iM);return}if(!a){this.debug(`${l} ${this.state}`,iM);return}let c=this.getDestinationState(a),u=c===this.state?void 0:o.onExit;this.debug(`${l} ${c}`,nM),this.state=c,typeof a=="function"?a(i):typeof a=="object"&&!(a instanceof bi)&&a.action?.(i),u?.(),this.enterEach?.(r,c),c!==r&&c!==bi.child&&c!==bi.parent&&this.states[c].onEnter?.(r,i)}transitionAsync(n,i){setTimeout(()=>{this.transition(n,i)},0)}is(n){return this.state===bi.child&&this.childState?this.childState.is(n):this.state===n}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(n,i){return this.state!==bi.child||!this.childState||(OM(this,this.childState),this.childState.transition(n,i),!this.childState.is(bi.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${n} -> ${this.defaultState}`,nM),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1)}getDestinationState(n){let i=this.state;return typeof n=="string"?i=n:n instanceof bi?(this.childState=n,this.childState.parent=this,i=bi.child):typeof n=="object"&&(n.target instanceof bi?(this.childState=n.target,this.childState.parent=this,i=bi.child):n.target!=null&&(i=n.target)),i}};return e.child="__child",e.parent="__parent",e})(),pg=Dce,Mce=class extends iB{constructor(...e){super(),this.stateMachines=e;for(let t of e)t.parent=this}transition(e,t){for(let n of this.stateMachines)OM(this,n),n.transition(e,t)}transitionAsync(e,t){for(let n of this.stateMachines)OM(this,n),n.transitionAsync(e,t)}};function wt(e,t){let n=mt(e)?e:e.split(".");if(n.length===1){let[i]=n;return Po((s,r,o)=>s[i]=o,s=>s[i],t)}return Po((i,s,r)=>gE(i,n,r),i=>hE(i,n),t)}function Ece(e){return Po((t,n,i)=>t[e]=i)}function wn(e,t){return Po((n,i,s)=>n[e][t??i]=s)}function Ei(e){let{newValue:t,oldValue:n,changeValue:i}=e;return Po((s,r,o,a)=>(o!==a&&(a!==void 0&&n?.call(s,a),o!==void 0&&t?.call(s,o),i?.call(s,o,a)),o))}function Ua(e){return m_(e)}var AE=class{static wrapText(e,t){return this.wrapLines(e,t).join(`
`)}static wrapLines(e,t){let n=this.textWrap(e,t);return t.overflow==="hide"&&n.some(i=>i.endsWith(Yt.EllipsisChar))?[]:n}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+Yt.EllipsisChar}static truncateLine(e,t,n,i){let s=t.textWidth(Yt.EllipsisChar),r=0,o=0;for(;o<e.length;o++){let a=t.textWidth(e.charAt(o));if(r+a>n)break;r+=a}if(e.length===o&&(!i||r+s<=n))return i?e+Yt.EllipsisChar:e;for(e=e.slice(0,o).trimEnd();e.length&&t.textWidth(e)+s>n;)e=e.slice(0,-1).trimEnd();return e+Yt.EllipsisChar}static textWrap(e,t){let n=e.split(Yt.lineSplitter),i=Go.getMeasurer(t);if(t.textWrap==="never")return n.map(a=>this.truncateLine(a.trimEnd(),i,t.maxWidth));let s=[],r=t.textWrap==="hyphenate",o=t.textWrap==null||t.textWrap==="on-space";for(let a of n){let l=a.trimEnd();if(l===""){s.push(l);continue}let c=0,u=0,d=0;for(;c<l.length;){let h=l.charAt(c);if(u+=i.textWidth(h),h===" "&&(d=c),u>t.maxWidth){if(c===0)break;let p=i.textWidth(l.slice(0,c+1));if(p<=t.maxWidth){u=p,c++;continue}if(d){let m=this.getWordAt(l,d+1),v=i.textWidth(m);if(v<=t.maxWidth){s.push(l.slice(0,d).trimEnd()),l=l.slice(d).trimStart(),c=0,u=0,d=0;continue}else o&&v>t.maxWidth&&s.push(l.slice(0,d).trimEnd(),this.truncateLine(l.slice(d).trimStart(),i,t.maxWidth,!0))}else o&&s.push(this.truncateLine(l,i,t.maxWidth,!0));if(o){l="";break}let g=r?"-":"",f=l.slice(0,c).trim();for(;f.length&&i.textWidth(f+g)>t.maxWidth;)f=f.slice(0,-1).trimEnd();if(s.push(f+g),!f.length){l="";break}l=l.slice(f.length).trimStart(),c=-1,u=0,d=0}c++}l&&s.push(l)}return this.avoidOrphans(s,i,t),this.clipLines(s,i,t)}static getWordAt(e,t){let n=e.indexOf(" ",t);return n===-1?e.slice(t):e.slice(t,n)}static clipLines(e,t,n){if(!n.maxHeight)return e;let{height:i,lineMetrics:s}=t.measureLines(e);if(i<=n.maxHeight)return e;for(let r=0,o=0;r<s.length;r++){let{lineHeight:a}=s[r];if(o+=a,o>n.maxHeight){if(n.overflow==="hide")return[];let l=e.slice(0,r||1),c=l.pop();return l.concat(this.truncateLine(c,t,n.maxWidth,!0))}}return e}static avoidOrphans(e,t,n){if(n.avoidOrphans===!1||e.length<2)return;let{length:i}=e,s=e[i-1],r=e[i-2];if(r.length<s.length)return;let o=r.lastIndexOf(" ");if(o===-1||o===r.indexOf(" ")||s.includes(" "))return;let a=r.slice(o+1);t.textWidth(s+a)<=n.maxWidth&&(e[i-2]=r.slice(0,o),e[i-1]=a+" "+s)}},Ct=(()=>{let e=class extends Se{constructor(){super(...arguments),this.id=As(this),this.node=new nB({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(t,n){return t.layoutManager.addListener("layout:complete",()=>this.updateA11yText(t,n))}computeTextWrap(t,n){let{text:i,padding:s,wrapping:r}=this,o=Math.min(this.maxWidth??1/0,t)-s*2,a=this.maxHeight??n-s*2;if(!isFinite(o)&&!isFinite(a)){this.node.text=i;return}let l=AE.wrapText(i??"",{maxWidth:o,maxHeight:a,font:this,textWrap:r});this.node.text=l,this.truncated=l.includes(Yt.EllipsisChar)}updateA11yText(t,n){let{proxyInteractionService:i}=t;if(this.enabled&&this.text){let s=Pt.toCanvas(this.node);if(s){let{id:r}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:r,where:n})),this.proxyText.textContent=this.text,this.proxyText.setBounds(s),this.proxyText.addListener("mousemove",o=>this.handleMouseMove(t,o)),this.proxyText.addListener("mouseleave",o=>this.handleMouseLeave(t,o))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(t,n){if(n!=null&&this.enabled&&this.node.visible&&this.truncated){let{x:i,y:s}=Pt.toCanvas(this.node),r=n.sourceEvent.offsetX+i,o=n.sourceEvent.offsetY+s,a={type:"pointermove",canvasX:r,canvasY:o};t.tooltipManager.updateTooltip(this.id,{canvasX:r,canvasY:o,lastPointerEvent:a,showArrow:!1},{type:"structured",title:this.text})}}handleMouseLeave(t,n){t.tooltipManager.removeTooltip(this.id)}};return e.SMALL_PADDING=10,e.LARGE_PADDING=20,e})();C([b(le),wn("node","visible")],Ct.prototype,"enabled",2);C([b(B,{optional:!0}),wn("node")],Ct.prototype,"text",2);C([b(B_,{optional:!0}),wn("node")],Ct.prototype,"textAlign",2);C([b(Bo,{optional:!0}),wn("node")],Ct.prototype,"fontStyle",2);C([b(Vo,{optional:!0}),wn("node")],Ct.prototype,"fontWeight",2);C([b(j),wn("node")],Ct.prototype,"fontSize",2);C([b(B),wn("node")],Ct.prototype,"fontFamily",2);C([b(qe,{optional:!0}),wn("node","fill")],Ct.prototype,"color",2);C([b(j,{optional:!0})],Ct.prototype,"spacing",2);C([b(j,{optional:!0})],Ct.prototype,"maxWidth",2);C([b(j,{optional:!0})],Ct.prototype,"maxHeight",2);C([b(OC)],Ct.prototype,"wrapping",2);C([b(j)],Ct.prototype,"padding",2);C([b(B)],Ct.prototype,"layoutStyle",2);var RE=(e=>(e.X="x",e.Y="y",e))(RE||{}),TE=class{constructor(){this.moduleMap=new Map}*modules(){for(let e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){let t=xi(e)?e:e.optionsKey;this.moduleMap.get(t)?.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){return this.moduleMap.get(xi(e)?e:e.optionsKey)?.moduleInstance}isEnabled(e){return this.moduleMap.has(xi(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),(t,n)=>e(t.moduleInstance,n))}destroy(){for(let e of this.moduleMap.keys())this.moduleMap.get(e)?.moduleInstance.destroy();this.moduleMap.clear()}};function sB(e,t){return e.valueOf()-t.valueOf()}function Ice(e){let t=NaN,n=[];for(let i of e){let s=i.valueOf();t!==s&&n.push(i),t=s}return n}function _M(e){let t=e.slice().sort(sB);return kE(t)==null?Ice(t):t}function kE(e){if(e.length===0)return 1;let t=Number(e[e.length-1])>Number(e[0])?1:-1,n=-1/0*t;for(let i of e){let s=i.valueOf();if(Math.sign(s-n)!==t)return;n=s}return t}function rB(e){let t,n,i=Rce.exec(e);i&&([,t,e,n]=i);let s=Ace.exec(e);if(!s)throw new Error(`The number formatter is invalid: ${e}`);let[,r,o,a,l,c,u,d,h,p,g]=s;return{fill:r,align:o,sign:a,symbol:l,zero:c,width:parseInt(u),comma:d,precision:parseInt(h),trim:!!p,type:g,prefix:t,suffix:n}}function oB(e){let t=typeof e=="string"?rB(e):e,{fill:n,align:i,sign:s="-",symbol:r,zero:o,width:a,comma:l,type:c,prefix:u="",suffix:d="",precision:h}=t,{trim:p}=t,g=h==null||isNaN(h),f;if(!c)f=ws.g,p=!0;else if(c in ws&&c in qu)f=g?qu[c]:ws[c];else if(c in ws)f=ws[c];else if(c in qu)f=qu[c];else throw new Error(`The number formatter type is invalid: ${c}`);let m;return h==null||g?m=c?6:12:m=h,v=>{let y=f(v,m);return p&&(y=Lce(y)),l&&(y=Pce(y,l)),y=Nce(v,y,s),r&&r!=="#"&&(y=`${r}${y}`),r==="#"&&c==="x"&&(y=`0x${y}`),c==="s"&&(y=`${y}${Fce(v)}`),(c==="%"||c==="p")&&(y=`${y}%`),a!=null&&!isNaN(a)&&(y=Oce(y,a,n??o,i)),y=`${u}${y}${d}`,y}}var Ace=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,Rce=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,qu={b:e=>My(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>My(e).toString(8),x:e=>My(e).toString(16),X:e=>qu.x(e).toUpperCase(),n:e=>qu.d(e),"%":e=>`${My(e*100).toFixed(0)}`},ws={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>ws.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>ws.f(e,t).toUpperCase(),g:(e,t)=>{if(e===0)return"0";let n=Math.abs(e),i=Math.floor(Math.log10(n));return i>=-4&&i<t?n.toFixed(t-1-i):n.toExponential(t-1)},G:(e,t)=>ws.g(e,t).toUpperCase(),n:(e,t)=>ws.g(e,t),p:(e,t)=>ws.r(e*100,t),r:(e,t)=>{if(e===0)return"0";let n=Math.abs(e),s=Math.floor(Math.log10(n))-(t-1);if(s<=0)return n.toFixed(-s);let r=10**s;return(Math.round(n/r)*r).toFixed()},s:(e,t)=>{let n=cB(e);return ws.r(e/10**n,t)},"%":(e,t)=>ws.f(e*100,t)},aB=-24,lB=24,Tce={[aB]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[lB]:"Y"},kce="\u2212";function My(e){return Math.floor(Math.abs(e))}function Lce(e){return e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function Pce(e,t){let n=e.indexOf(".");n<0&&(n=e.length);let i=e.substring(0,n).split(""),s=e.substring(n);for(let r=i.length-3;r>0;r-=3)i.splice(r,0,t);return`${i.join("")}${s}`}function Fce(e){return Tce[cB(e)]}function cB(e){return De(aB,e?Math.floor(Math.log10(Math.abs(e))/3)*3:0,lB)}function Nce(e,t,n=""){if(n==="(")return e>=0?t:`(${t})`;let i=n==="+"?"+":"";return`${e>=0?i:kce}${t}`}function Oce(e,t,n=" ",i=">"){let s=e;if(i===">"||!i)s=s.padStart(t,n);else if(i==="<")s=s.padEnd(t,n);else if(i==="^"){let r=Math.max(0,t-s.length),o=Math.ceil(r/2),a=Math.floor(r/2);s=s.padStart(o+s.length,n),s=s.padEnd(a+s.length,n)}return s}var Rt=(e,t,n)=>({duration:t*n,timeInterval:e,step:n}),Sp=[Rt($u,Pa,1),Rt($u,Pa,5),Rt($u,Pa,15),Rt($u,Pa,30),Rt(Yu,Ln,1),Rt(Yu,Ln,5),Rt(Yu,Ln,15),Rt(Yu,Ln,30),Rt(Ku,ci,1),Rt(Ku,ci,3),Rt(Ku,ci,6),Rt(Ku,ci,12),Rt(eC,Ms,1),Rt(eC,Ms,2),Rt(Ap,Eo,1),Rt(Ap,Eo,2),Rt(Ap,Eo,3),Rt(ic,fp,1),Rt(ic,fp,2),Rt(ic,fp,3),Rt(ic,fp,4),Rt(ic,fp,6),Rt(LC,od,1)],uB=[1,2,5,10];function O2(e,t){return Math.abs(Math.round(e)-e)<t}function LE(e,t,n,i,s,r){if(n<2)return[e,t];let o=Gp(e,t,n,i,s);if(!Number.isFinite(o))return[];if(O2(e/o,1e-12)||(e=Math.ceil(e/o)*o),O2(t/o,1e-12)||(t=Math.floor(t/o)*o),r!=null&&r[0]!==0&&r[1]!==1){let a=t-e,l=e+a*r[0],c=t-a*(1-r[1]);return zp(l-l%o,c+c%o,o)}return zp(e,t,o)}function dB(e,t,n,i,s,r){let o=r??Math.abs(t-e)/Math.max(n,1),a=0;for(let h of Sp){if(o<=h.duration)break;a++}if(a===0){let h=Math.max(Gp(e,t,n,i,s),1);return x_.every(h)}else if(a===Sp.length){let h=r==null?Gp(e/od,t/od,n,i,s):1;return LC.every(h)}let l=Sp[a-1],c=Sp[a],{timeInterval:u,step:d}=o-l.duration<c.duration-o?l:c;return u.every(d)}function Gp(e,t,n,i=0,s=1/0){if(e===t)return De(1,i,s);if(n<1)return NaN;let r=Math.abs(t-e),o=10**Math.floor(Math.log10(r/n)),a=NaN,l=1/0,c=!1;for(let u of uB){let d=Math.ceil(r/(u*o)),h=d>=i&&d<=s;if(c&&!h)continue;let p=Math.abs(d-n);(l>p||c!==h)&&(c||(c=h),l=p,a=u)}return a*o}function _2(e){for(let t=e.length-1;t>=0;t-=1)if(e[t]!=="0")return t+1;return 0}function B2(e,t){let n=rB(t??",f");(n.precision==null||isNaN(n.precision))&&(!n.type||"eEFgGnprs".includes(n.type)?n.precision=Math.max(...e.map(s=>{if(!Number.isFinite(s))return 0;let[r,o]=s.toExponential((n.type?6:12)-1).split(/[.e]/g);return(r!=="1"&&r!=="-1"?1:0)+_2(o)+1})):"f%".includes(n.type)&&(n.precision=Math.max(...e.map(s=>{if(!Number.isFinite(s)||s===0)return 0;let r=Math.floor(Math.log10(Math.abs(s))),o=n.type?6:12,a=s.toExponential(o-1).split(/[.e]/g)[1],l=_2(a);return Math.max(0,l-r)}))));let i=oB(n);return s=>i(Number(s))}function zp(e,t,n){if(!Number.isFinite(n)||n<=0)return[];let i=10**IC(n),s=Math.min(e,t),r=Math.max(e,t),o=[];for(let a=0;;a+=1){let l=Math.round((s+n*a)*i)/i;if(l>r)break;o.push(l)}return o}function Hp(e,t){return e>=t?(G.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function _ce(e,t){let n=Math.abs(t-e),i=10**Math.floor(Math.log10(n)),s=1/0,r=[e,t];for(let o of uB){let a=o*i,l=Math.floor(e/a)*a,c=Math.ceil(t/a)*a,u=1-n/Math.abs(c-l);s>u&&(s=u,r=[l,c])}return r}function hB(e,t,n,i,s,r){r=Math.max(r,e/(s+1)),isNaN(n)&&(n=r),isNaN(i)&&(i=e),n>i&&(n===r?n=i:i=n);let o=Math.max(1,Math.floor(e/(t*n))),a=Math.min(o,Math.ceil(e/(t*i))),l=De(a,Math.floor(s/t),o);return{minTickCount:a,maxTickCount:o,tickCount:l}}var pB=class extends Xe{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,t){return e instanceof Date||(e=new Date(e)),super.convert(e,t)}invert(e){return new Date(super.invert(e))}niceDomain(e,t=this.domain){if(t.length<2)return[];let n=4,[i,s]=t;for(let r=0;r<n;r++){let[o,a]=Bce(i,s,e);if(Gn(i)===Gn(o)&&Gn(s)===Gn(a))break;i=o,s=a}return[i,s]}ticks(e,t=this.domain,n=[0,1]){let{nice:i,interval:s,tickCount:r=Xe.defaultTickCount,minTickCount:o,maxTickCount:a}=e;if(t.length<2)return[];let l=t.map(Gn),c=l[0],u=l[l.length-1];if(s!=null){let d=this.getPixelRange();return PE({start:c,stop:u,interval:s,availableRange:d,visibleRange:n})??V2({start:c,stop:u,tickCount:r,minTickCount:o,maxTickCount:a,visibleRange:n})}else{if(i&&r===2)return t;if(i&&r===1)return t.slice(0,1)}return V2({start:c,stop:u,tickCount:r,minTickCount:o,maxTickCount:a,visibleRange:n})}_tickFormatter({domain:e,ticks:t,specifier:n},i){return n!=null?rg(n):mE(t,e,i)}tickFormatter(e){return this._tickFormatter(e)}datumFormatter(e){return this._tickFormatter(e,1)}};function V2({start:e,stop:t,tickCount:n,minTickCount:i,maxTickCount:s,visibleRange:r}){let o=dB(e,t,n,i,s);return o?o.range(new Date(e),new Date(t),{visibleRange:r}):[]}function PE({start:e,stop:t,interval:n,availableRange:i,visibleRange:s}){if(!n)return[];if(n instanceof rd){let u=n.range(new Date(e),new Date(t),{visibleRange:s});return Hp(u.length,i)?void 0:u}let r=Math.abs(n);if(Hp(Math.abs(t-e)/r,i))return;let o=Sp.findLast(u=>r%u.duration===0);if(o)return o.timeInterval.every(r/(o.duration/o.step)).range(new Date(e),new Date(t),{visibleRange:s});let a=new Date(Math.min(e,t)),l=new Date(Math.max(e,t)),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+r);return c}function Bce(e,t,n){let{interval:i}=n,s=Math.min(Gn(e),Gn(t)),r=Math.max(Gn(e),Gn(t)),o=e>t,a;if(i instanceof rd)a=i;else{let l=typeof i=="number"?(r-s)/Math.max(i,1):n.tickCount??Xe.defaultTickCount;a=dB(s,r,l,n.minTickCount,n.maxTickCount)}if(a){let l=a.range(new Date(s),new Date(r),{extend:!0}),c=o?[...l].reverse():l,u=c[0],d=c.at(-1);return[u,d]}else return[e,t]}var Fr=class gB extends og{constructor(){super(...arguments),this.type="ordinal-time",this._domain=[],this.isReversed=!1}static is(t){return t instanceof gB}set domain(t){t!==this._domain&&(this.invalid=!0,this._domain=t,this.isReversed=t.length>0&&t[0]>t[t.length-1],this.sortedTimestamps=void 0,this.precomputedSteps=void 0)}get domain(){return this._domain}toDomain(t){return new Date(t)}normalizeDomains(...t){let n=t.filter(s=>s.length>0).map(s=>{let r=kE(s);return r==null&&(s=_M(s.slice()),r=1),{domain:s,sortOrder:r}});if(n.length===0)return{domain:[],animatable:!1};if(n.length===1)return{domain:n[0].domain,animatable:!0};let i=n.flatMap(s=>s.domain);return i=_M(i),n.every(s=>s.sortOrder===-1)&&i.reverse(),{domain:i,animatable:!0}}ticks({interval:t,maxTickCount:n},i=this.domain,s=[0,1]){if(!i.length)return[];this.refresh();let{isReversed:r}=this;if(t==null)return Vce(i,n,r,s);let[o,a]=[i[0].valueOf(),i.at(-1).valueOf()],l=Math.min(o,a),c=Math.max(o,a),[u,d]=this.range,h=Math.abs(d-u),p=PE({start:l,stop:c,interval:t,availableRange:h,visibleRange:s})??[],g=-1;return p.filter(f=>{let m=this.findInterval(f.valueOf()),v=m===g;return g=m,!v})}getSortedTimestamps(){let{sortedTimestamps:t}=this;return t==null&&(t=this.domain.map(Gn),this.isReversed&&t.reverse(),this.sortedTimestamps=t),t}getPrecomputedSteps(){let{domain:t}=this,{precomputedSteps:n}=this,i=t.length<1e4?t.length:Math.ceil(t.length/16);if(n!=null||i<=1)return n;let s=this.getSortedTimestamps();n=new Int32Array(i);let r=s[0],a=s[s.length-1]-r,l=0,c=s.length-1;for(let u=0;u<n.length;u+=1)n[u]=this.findIntervalInRange(r+u/i*a,l,c);this.precomputedSteps=n}findIntervalInRange(t,n,i){let s=this.getSortedTimestamps();for(;n<=i;){let r=(n+i)/2|0;if(s[r]===t)return r;s[r]<t?n=r+1:i=r-1}return n}findInterval(t){let n=this.getPrecomputedSteps(),i,s;if(n==null)i=0,s=this.domain.length-1;else{let r=this.getSortedTimestamps(),o=r[0],a=r[r.length-1],l=Math.min((t-o)/(a-o)*n.length|0,n.length-1|0);i=n[l],s=l<n.length-2?n[l+1]:r.length-1}return this.findIntervalInRange(t,i,s)}tickFormatter({domain:t,ticks:n,specifier:i}){return i!=null?rg(i):mE(n,t)}datumFormatter(t){return this.tickFormatter(t)}invert(t,n=!1){this.refresh();let{domain:i}=this;if(n){let r=this.invertNearestIndex(t-this.bandwidth/2);return r!=null?i[r]:void 0}return xae(0,i.length-1,r=>this.ordinalRange(r)>=t?i[r]:void 0)??i[0]}getIndex(t){let n=this.getSortedTimestamps(),i=Number(t);if(i<n[0])return;let s=this.findInterval(i);return this.isReversed&&(s=this.domain.length-s-1),s}};function Vce(e,t,n,i){let s=[],r=Math.ceil(e.length/t),o=Math.floor(r/2),a=Math.floor(i[0]*e.length),l=Math.ceil(i[1]*e.length);for(let c=a;c<l;c+=1){let u=n?e.length-1-c:c;(r<=0||(u+o)%r===0)&&s.push(e[c])}return n&&s.reverse(),s}var Kt=class ec{constructor(t,n,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=ct.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Ha,n)?()=>new n:n}static select(t,n,i=!0){return new ec(t,n,i)}static selectAll(t,n){let i=[],s=r=>{n(r)&&i.push(r);for(let o of r.children())s(o)};return s(t),i}static selectByClass(t,...n){return ec.selectAll(t,i=>n.some(s=>i instanceof s))}static selectByTag(t,n){return ec.selectAll(t,i=>i.tag===n)}createNode(t,n,i){let s=this.nodeFactory(t);return s.datum=t,n?.(s),i==null?this._nodes.push(s):this._nodes.splice(i,0,s),this.parentNode.appendChild(s),s}update(t,n,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",t),i){let s=new Map(t.map((r,o)=>[i(r),[r,o]]));for(let[r,o]of this._nodesMap.entries())if(s.has(o)){let[a]=s.get(o);r.datum=a,this.garbageBin.delete(r),s.delete(o)}else this.garbageBin.add(r);for(let[r,[o,a]]of s.entries())this._nodesMap.set(this.createNode(o,n,a),r)}else{let s=Math.max(t.length,this.data.length);for(let r=0;r<s;r++)r>=t.length?this.garbageBin.add(this._nodes[r]):r>=this._nodes.length?this.createNode(t[r],n):(this._nodes[r].datum=t[r],this.garbageBin.delete(this._nodes[r]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(t=>this.garbageBin.has(t)?(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}each(t){for(let n of this._nodes.entries())t(n[1],n[1].datum,n[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){let n=this._nodes[t];yield{node:n,datum:n.datum,index:t}}}select(t){return ec.selectAll(this.parentNode,t)}selectByClass(t){return ec.selectByClass(this.parentNode,t)}selectByTag(t){return ec.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}get length(){return this._nodes.length}};function Rp(e,t,n,i){let s=e-n,r=t-i;return s*s+r*r}function Tp(e,t,n,i,s,r,o){if(n===s&&i===r)return Math.min(o,Rp(e,t,n,i));let a=s-n,l=r-i,c=Math.max(0,Math.min(1,((e-n)*a+(t-i)*l)/(a*a+l*l))),u=n+c*a,d=i+c*l;return Math.min(o,Rp(e,t,u,d))}function Gce(e,t,n,i,s,r,o,a,l){a&&([o,r]=[r,o]);let c=Math.atan2(t-i,e-n);if(!Fa(c,r,o)){let d=n+Math.cos(r)*s,h=i+Math.sin(r)*s,p=n+Math.cos(r)*s,g=i+Math.sin(r)*s;return Math.min(l,Rp(e,t,d,h),Rp(e,t,p,g))}let u=s-Math.sqrt(Rp(e,t,n,i));return Math.min(l,u*u)}var Zi=class extends Es{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Z(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t):!1}distanceSquared(e,t){let{x1:n,y1:i,x2:s,y2:r}=this;return Tp(e,t,n,i,s,r,1/0)}render(e){let{ctx:t,devicePixelRatio:n}=e,{x1:i,y1:s,x2:r,y2:o}=this;if(i===r){let{strokeWidth:a}=this,l=Math.round(i*n)/n+Math.trunc(a*n)%2/(n*2);i=l,r=l}else if(s===o){let{strokeWidth:a}=this,l=Math.round(s*n)/n+Math.trunc(a*n)%2/(n*2);s=l,o=l}t.beginPath(),t.moveTo(i,s),t.lineTo(r,o),this.fillStroke(t),this.fillShadow?.markClean(),super.render(e)}toSVG(){if(!this.visible)return;let e=Ds("line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};Zi.className="Line";Zi.defaultStyles=R(S({},Es.defaultStyles),{fill:void 0,strokeWidth:1});C([q()],Zi.prototype,"x1",2);C([q()],Zi.prototype,"y1",2);C([q()],Zi.prototype,"x2",2);C([q()],Zi.prototype,"y2",2);var zce=new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}),Hce=new Intl.NumberFormat("en-US",{style:"percent"});function Fo(e,t=2){return typeof e=="number"?mB(e,t):String(e??"")}function fB(e){return Hce.format(e)}function mB(e,t){return t===2?zce.format(e):new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}).format(e)}var ir=class extends Es{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Z(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){let{ctx:t}=e,{x1:n,y1:i,x2:s,y2:r}=this;n=this.align(n),i=this.align(i),s=this.align(s),r=this.align(r);let{fill:o,opacity:a,isRange:l}=this;if(!!(l&&o)){let{fillOpacity:f}=this;this.applyFill(t),t.globalAlpha=a*f,t.beginPath(),t.moveTo(n,i),t.lineTo(s,i),t.lineTo(s,r),t.lineTo(n,r),t.closePath(),t.fill()}let{stroke:u,strokeWidth:d,startLine:h,endLine:p}=this;if(!!((h||p)&&u&&d)){let{strokeOpacity:f,lineDash:m,lineDashOffset:v,lineCap:y,lineJoin:w}=this;this.applyStroke(t),t.globalAlpha=a*f,t.lineWidth=d,m&&t.setLineDash(m),v&&(t.lineDashOffset=v),y&&(t.lineCap=y),w&&(t.lineJoin=w),t.beginPath(),h&&(t.moveTo(n,i),t.lineTo(s,i)),p&&(t.moveTo(s,r),t.lineTo(n,r)),t.stroke()}this.fillShadow?.markClean(),super.render(e)}};ir.className="Range";ir.defaultStyles=R(S({},Es.defaultStyles),{strokeWidth:1});C([q()],ir.prototype,"x1",2);C([q()],ir.prototype,"y1",2);C([q()],ir.prototype,"x2",2);C([q()],ir.prototype,"y2",2);C([q()],ir.prototype,"startLine",2);C([q()],ir.prototype,"endLine",2);C([q()],ir.prototype,"isRange",2);var gn=class extends Se{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Yt.toFontString(this)}};C([b(le)],gn.prototype,"enabled",2);C([b(qe,{optional:!0})],gn.prototype,"color",2);C([b(Bo,{optional:!0})],gn.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],gn.prototype,"fontWeight",2);C([b(j)],gn.prototype,"fontSize",2);C([b(B)],gn.prototype,"fontFamily",2);C([b(di,{optional:!0})],gn.prototype,"formatter",2);function nC(e){let{parallelFlipRotation:t=0,regularFlipRotation:n=0}=e,i=e.rotation?gt(tn(e.rotation)):0,s=!i&&t>=0&&t<=Math.PI?-1:1,r=!i&&n>=0&&n<=Math.PI?-1:1,o=0;return e.parallel?o=s*Math.PI/2:r===-1&&(o=Math.PI),{configuredRotation:i,defaultRotation:o,parallelFlipFlag:s,regularFlipFlag:r}}function jce(e,t){return isNaN(e)?t?0:10:e}function Wce(e,t,n,i){return e&&!t?n*i===-1?"hanging":"bottom":"middle"}function G2(e,t,n,i,s){let r=t>0&&t<=Math.PI,o=n>0&&n<=Math.PI,a=r||o?-1:1;if(e)if(t||n){if(i*a===-1)return"end"}else return"center";else if(i*s===-1)return"end";return"start"}function Uce(e,t,n,i){let s=[];for(let{tickLabel:r,translationY:o}of e){if(!r)continue;let{width:a,height:l}=i.measureLines(r),c=new Z(t,o,a,l),u=new Z(t,o,0,0);n.transformBBox(u,c);let{x:d,y:h}=c;s.push({point:{x:d,y:h},label:{text:r,width:a,height:l}})}return s}function $ce(e){return e!=null&&Object.hasOwn(e,"toString")&&xi(e.toString())}function Yce(e){return e!=null&&Object.hasOwn(e,"valueOf")&&We(e.valueOf())}function GC(e){return We(e)||ig(e)||Yce(e)}function z2(e,t){return e!=null&&(!t||GC(e))}function BM(e){return $ce(e)&&Object.hasOwn(e,"id")?e.id:e}var FE=e=>e==="value"?et((t,n)=>n.target.type==="line",t=>t.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):et((t,n)=>n.target.type==="range",t=>t.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),vB=(e,t,n,i,s)=>{let r=e==="line"&&t!==void 0,o=e==="range"&&n!==void 0;if(!r&&!o)return!0;let[a,l]=n??[t,void 0],c=Xe.is(i)||Fr.is(i),u=z2(a,c)&&!isNaN(i.convert(a)),d=z2(l,c)&&!isNaN(i.convert(l));if(r&&u||o&&u&&d)return s?.()??!0;let h=["Expecting crossLine"];return o?(u||h.push(`range start ${Ep(a)}`),d||h.push(`${u?"":"and "}range end ${Ep(l)}`)):h.push(`value ${Ep(a)}`),h.push("to match the axis scale domain."),G.warnOnce(h.join(" ")),!1},Kce={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},qce={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function VM({yDirection:e,padding:t=0,position:n="top",bbox:i}){let s=e?Kce:qce,{xTranslationDirection:r,yTranslationDirection:o}=s[n],a=r*(t+i.width/2),l=o*(t+i.height/2);return{xTranslation:a,yTranslation:l}}function yB({yDirection:e,bbox:t,padding:n=0,position:i="top"}){let s={};return i.startsWith("inside")||(i==="top"&&!e?s.top=n+t.height:i==="bottom"&&!e?s.bottom=n+t.height:i==="left"&&e?s.left=n+t.width:i==="right"&&e&&(s.right=n+t.width)),s}var iC=({direction:e,xEnd:t,yStart:n,yEnd:i})=>e==="y"?{x:t/2,y:n}:{x:t,y:isNaN(i)?n:(n+i)/2},H2=({direction:e,xStart:t,xEnd:n,yStart:i,yEnd:s})=>e==="y"?{x:t,y:isNaN(s)?i:(i+s)/2}:{x:n/2,y:i},j2=({direction:e,xEnd:t,yStart:n,yEnd:i})=>e==="y"?{x:t,y:isNaN(i)?n:(n+i)/2}:{x:t/2,y:isNaN(i)?n:i},W2=({direction:e,xStart:t,xEnd:n,yStart:i,yEnd:s})=>e==="y"?{x:n/2,y:isNaN(s)?i:s}:{x:t,y:isNaN(s)?i:(i+s)/2},Zce=({xEnd:e,yStart:t,yEnd:n})=>({x:e/2,y:isNaN(n)?t:(t+n)/2}),U2=({direction:e,xStart:t,xEnd:n,yStart:i})=>e==="y"?{x:t/2,y:i}:{x:n,y:i},$2=({direction:e,xStart:t,yStart:n,yEnd:i})=>e==="y"?{x:t,y:isNaN(i)?n:i}:{x:t,y:n},Y2=({direction:e,xEnd:t,yStart:n,yEnd:i})=>e==="y"?{x:t,y:n}:{x:t,y:isNaN(i)?n:i},K2=({direction:e,xStart:t,xEnd:n,yStart:i,yEnd:s})=>e==="y"?{x:n,y:isNaN(s)?i:s}:{x:t,y:isNaN(s)?i:s},CB={top:{c:iC},bottom:{c:W2},left:{c:H2},right:{c:j2},"top-left":{c:U2},"top-right":{c:Y2},"bottom-left":{c:$2},"bottom-right":{c:K2},inside:{c:Zce},"inside-left":{c:H2},"inside-right":{c:j2},"inside-top":{c:iC},"inside-bottom":{c:W2},"inside-top-left":{c:U2},"inside-bottom-left":{c:$2},"inside-top-right":{c:Y2},"inside-bottom-right":{c:K2}},Xce=ut(["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"],"crossLine label position"),Rs=class extends Se{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};C([b(le,{optional:!0})],Rs.prototype,"enabled",2);C([b(B,{optional:!0})],Rs.prototype,"text",2);C([b(Bo,{optional:!0})],Rs.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],Rs.prototype,"fontWeight",2);C([b(j)],Rs.prototype,"fontSize",2);C([b(B)],Rs.prototype,"fontFamily",2);C([b(je)],Rs.prototype,"padding",2);C([b(qe,{optional:!0})],Rs.prototype,"color",2);C([b(Xce,{optional:!0})],Rs.prototype,"position",2);C([b(je,{optional:!0})],Rs.prototype,"rotation",2);C([b(le,{optional:!0})],Rs.prototype,"parallel",2);var $i=(()=>{let e=class extends Se{constructor(){super(),this.id=As(this),this.label=new Rs,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.rangeGroup=new ye({name:this.id}),this.lineGroup=new ye({name:this.id}),this.labelGroup=new ye({name:this.id}),this.crossLineRange=new ir,this.crossLineLabel=new ad,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(t){let{enabled:n,data:i,type:s,value:r,range:o,scale:a}=this;if(!s||!a||!n||!t||!vB(s,r,o,a)||i.length===0){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateNodes();let{isRange:l}=this;l!==this._isRange&&(l?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=l}calculateLayout(t,n){if(!t)return;let{scale:i,gridLength:s,sideFlag:r,direction:o,label:{position:a="top"},clippedRange:l,strokeWidth:c=0}=this;if(this.data=[],!i)return;let u=i.bandwidth??0,d=i.step??0,h=(n?-1:1)*(i instanceof og?(d-u)/2:0),[p,g]=[0,r*s],[f,m]=this.getRange(),v=m===void 0&&Fr.is(i)?u/2+h:0,[y,w]=[Number(i.convert(f,!0))-h+v,i.convert(m,!0)+u+h];y=TM(y,l),w=TM(w,l),[f,m]=[Number(i.convert(f))+v,i.convert(m)+u];let x=(f===y||m===w||y!==w)&&Math.abs(w-y)>0;if(x&&y>w&&([y,w]=[w,y],[f,m]=[m,f]),f-h>=y&&(f-=h),m+h<=w&&(m+=h),this.isRange=x,this.startLine=c>0&&f>=y&&f<=y+h,this.endLine=c>0&&m>=w-u-h&&m<=w,!x&&!this.startLine&&!this.endLine||(this.data=[y,w],!this.label.enabled))return;let{c:D=iC}=CB[a]??{},{x:M,y:E}=D({direction:o,xStart:p,xEnd:g,yStart:y,yEnd:w});this.labelPoint={x:M,y:E}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){let{crossLineRange:t,sideFlag:n,gridLength:i,data:s,startLine:r,endLine:o,isRange:a,fill:l,fillOpacity:c,stroke:u,strokeWidth:d,lineDash:h}=this;t.x1=0,t.x2=n*i,t.y1=s[0],t.y2=s[1],t.startLine=r,t.endLine=o,t.isRange=a,t.fill=l,t.fillOpacity=c??1,t.stroke=u,t.strokeWidth=d??1,t.strokeOpacity=this.strokeOpacity??1,t.lineDash=h}updateLabel(){let{crossLineLabel:t,label:n}=this;n.text&&(t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.color,t.text=n.text)}positionLabel(){let{crossLineLabel:t,labelPoint:{x:n=void 0,y:i=void 0}={},label:{parallel:s,rotation:r,position:o="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:u}=this;if(n===void 0||i===void 0)return;let{defaultRotation:d,configuredRotation:h}=nC({rotation:r,parallel:s,regularFlipRotation:u,parallelFlipRotation:c});t.rotation=d+h,t.textBaseline="middle",t.textAlign="center";let p=t.getBBox();if(!p)return;let g=l==="y",{xTranslation:f,yTranslation:m}=VM({yDirection:g,padding:a,position:o,bbox:p});t.translationX=n+f,t.translationY=i+m}getRange(){let{value:t,range:n,scale:i}=this,s=Xe.is(i)||Fr.is(i),r=n?.[0]??t,o=n?.[1];return!s&&o===void 0&&(o=r),s&&r===o&&(o=void 0),[r,o]}computeLabelBBox(){let{label:t}=this;if(!t.enabled)return;let n=new ad;n.fontFamily=t.fontFamily,n.fontSize=t.fontSize,n.fontStyle=t.fontStyle,n.fontWeight=t.fontWeight,n.text=t.text;let{labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:r,rotation:o,position:a="top",padding:l=0},direction:c,parallelFlipRotation:u,regularFlipRotation:d}=this;if(i===void 0||s===void 0)return;let{configuredRotation:h}=nC({rotation:o,parallel:r,regularFlipRotation:d,parallelFlipRotation:u});n.rotation=h,n.textBaseline="middle",n.textAlign="center";let p=n.getBBox();if(!p)return;let g=c==="y",{xTranslation:f,yTranslation:m}=VM({yDirection:g,padding:l,position:a,bbox:p});return n.x=i+f,n.y=s+m,n.getBBox()}calculatePadding(t){let{isRange:n,startLine:i,endLine:s,direction:r,label:{padding:o=0,position:a="top"}}=this;if(!n&&!i&&!s)return;let l=this.computeLabelBBox();if(l?.x==null||l?.y==null)return;let c=yB({yDirection:r==="y",padding:o,position:a,bbox:l});t.left=Math.max(t.left??0,c.left??0),t.right=Math.max(t.right??0,c.right??0),t.top=Math.max(t.top??0,c.top??0),t.bottom=Math.max(t.bottom??0,c.bottom??0)}};return e.className="CrossLine",e})();C([b(le,{optional:!0})],$i.prototype,"enabled",2);C([b(ut(["range","line"],"a crossLine type"),{optional:!0})],$i.prototype,"type",2);C([b(Vr(FE("range"),cg.restrict({length:2})),{optional:!0})],$i.prototype,"range",2);C([b(FE("value"),{optional:!0})],$i.prototype,"value",2);C([b(qe,{optional:!0})],$i.prototype,"fill",2);C([b(Qe,{optional:!0})],$i.prototype,"fillOpacity",2);C([b(qe,{optional:!0})],$i.prototype,"stroke",2);C([b(je,{optional:!0})],$i.prototype,"strokeWidth",2);C([b(Qe,{optional:!0})],$i.prototype,"strokeOpacity",2);C([b(Gr,{optional:!0})],$i.prototype,"lineDash",2);C([b(K)],$i.prototype,"label",2);var wB=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_GRID=1]="AXIS_GRID",e[e.AXIS=2]="AXIS",e[e.ZOOM_SELECTION=3]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=4]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=5]="SERIES_LAYER",e[e.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=8]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=9]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=10]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=11]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=12]="STATUS_BAR",e[e.SERIES_LABEL=13]="SERIES_LABEL",e[e.LEGEND=14]="LEGEND",e[e.NAVIGATOR=15]="NAVIGATOR",e[e.FOREGROUND=16]="FOREGROUND",e))(wB||{}),Qce=["stroke","lineDash"],Jce=_o(e=>yn(e)&&Object.keys(e).every(t=>Qce.includes(t)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),zC=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};C([b(le)],zC.prototype,"enabled",2);C([b(j)],zC.prototype,"width",2);C([b(Jce)],zC.prototype,"style",2);function $a(e,t=[void 0]){return Po((n,i,s)=>t.includes(s)?hc(e)?e(s):e:s)}var bB=et(e=>We(e)&&e>0||e instanceof rd,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),fc=class extends Se{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};C([b(bB,{optional:!0})],fc.prototype,"step",2);C([b(cg,{optional:!0})],fc.prototype,"values",2);C([b(G_),$a(NaN)],fc.prototype,"minSpacing",2);C([b(z_),$a(NaN)],fc.prototype,"maxSpacing",2);var fn=class extends Se{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.spacing=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};C([b(le)],fn.prototype,"enabled",2);C([b(Bo,{optional:!0})],fn.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],fn.prototype,"fontWeight",2);C([b(je.restrict({min:1}))],fn.prototype,"fontSize",2);C([b(B)],fn.prototype,"fontFamily",2);C([b(j)],fn.prototype,"spacing",2);C([b(pd),$a(NaN)],fn.prototype,"minSpacing",2);C([b(qe,{optional:!0})],fn.prototype,"color",2);C([b(je,{optional:!0})],fn.prototype,"rotation",2);C([b(le)],fn.prototype,"avoidCollisions",2);C([b(le)],fn.prototype,"mirrored",2);C([b(le)],fn.prototype,"parallel",2);C([b(di,{optional:!0})],fn.prototype,"itemStyler",2);C([b(di,{optional:!0})],fn.prototype,"formatter",2);C([b(B,{optional:!0})],fn.prototype,"format",2);var HC=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};C([b(le)],HC.prototype,"enabled",2);C([b(j)],HC.prototype,"width",2);C([b(qe,{optional:!0})],HC.prototype,"stroke",2);var fd=class extends Se{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};C([b(le)],fd.prototype,"enabled",2);C([b(j)],fd.prototype,"width",2);C([b(j)],fd.prototype,"size",2);C([b(qe,{optional:!0})],fd.prototype,"stroke",2);var sr=class extends Se{constructor(){super(...arguments),this.caption=new Ct,this.enabled=!1,this.spacing=Ct.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};C([b(le)],sr.prototype,"enabled",2);C([b(B,{optional:!0})],sr.prototype,"text",2);C([b(j,{optional:!0})],sr.prototype,"spacing",2);C([b(Bo,{optional:!0})],sr.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],sr.prototype,"fontWeight",2);C([b(j)],sr.prototype,"fontSize",2);C([b(B)],sr.prototype,"fontFamily",2);C([b(qe,{optional:!0})],sr.prototype,"color",2);C([b(OC)],sr.prototype,"wrapping",2);C([b(di,{optional:!0})],sr.prototype,"formatter",2);var SB=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(SB||{});function sC(e){let[t,n]=Cn(e.range),i=Math.floor(t),s=Math.ceil(n);return{min:i,max:s,visible:i!==s}}var GM=Math.PI*2,eue=GM/2;function tue(e,t){return Math.abs(t-e)<eue?t:e>t?t+GM:t-GM}function xB(e){let t=(o,a)=>{let[l=e.min,c=e.max]=Cn(a??[]);return o<l||o>c};return{tick:{fromFn(o,a,l){let c=o.y1+o.translationY,u=o.opacity;return(l==="added"||t(o.datum.translationY,o.datum.range))&&(c=a.translationY,u=0),{y:0,translationY:c,opacity:u,phase:Xs[l]}},toFn(o,a,l){let c=a.translationY,u=1;return l==="removed"&&(u=0),{y:0,translationY:c,opacity:u,finish:{y:c,translationY:0}}},applyFn(o,a){o.setProperties(a),o.visible=!t(o.y)}},line:{fromFn(o,a){return R(S({},o.previousDatum??a),{phase:Xs.updated})},toFn(o,a){return S({},a)}},label:{fromFn(o,a,l){let c=o.previousDatum??a,u=c.x,d=c.y,h=c.rotationCenterX,p=Math.round(o.translationY),g=c.rotation,f=o.opacity;return l==="removed"||t(c.y,c.range)?g=a.rotation:(l==="added"||t(o.datum.y,o.datum.range))&&(p=Math.round(c.translationY),f=0,g=a.rotation),{x:u,y:d,rotationCenterX:h,translationY:p,rotation:g,opacity:f,phase:Xs[l]}},toFn(o,a,l){let c=a.x,u=a.y,d=a.rotationCenterX,h=Math.round(a.translationY),p=0,g=1;return l==="added"?p=a.rotation:l==="removed"?(g=0,p=a.rotation):p=tue(o.previousDatum?.rotation??a.rotation,a.rotation),{x:c,y:u,rotationCenterX:d,translationY:h,rotation:p,opacity:g,finish:{rotation:a.rotation}}}},group:{fromFn(o,a){let{rotation:l,translationX:c,translationY:u}=o;return{rotation:l,translationX:c,translationY:u,phase:Xs.updated}},toFn(o,a){let{rotation:l,translationX:c,translationY:u}=a;return{rotation:l,translationX:c,translationY:u}}}}}function DB(){return(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})}function NE(e){let{visible:t,min:n,max:i}=e;return(s,r)=>{let o=r.translationY,a=t&&o>=n&&o<=i;return{y:o,translationY:0,opacity:1,visible:a}}}function OE(){return(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})}function MB(){return(e,t)=>S({},t)}var rC=class extends gc(Zi){},EB=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(EB||{}),mc=(()=>{let e=class IB{constructor(n,i){this.moduleCtx=n,this.scale=i,this.id=As(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new fc,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new yp({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new ye({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new ye({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new ye({name:`${this.id}-Labels`,zIndex:9}),this.gridGroup=new yp({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new ye({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new yp({name:`${this.id}-CrossLines-Range`,zIndex:4}),this.crossLineLineGroup=new yp({name:`${this.id}-CrossLines-Line`,zIndex:8}),this.crossLineLabelGroup=new yp({name:`${this.id}-CrossLines-Label`,zIndex:13}),this.tickLineGroupSelection=Kt.select(this.tickLineGroup,rC,!1),this.tickLabelGroupSelection=Kt.select(this.tickLabelGroup,ad,!1),this.gridLineGroupSelection=Kt.select(this.gridLineGroup,rC,!1),this._crossLines=[],this.line=new HC,this.tick=new fd,this.gridLine=new zC,this.label=this.createLabel(),this.defaultTickMinSpacing=IB.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.labelFormatter=void 0,this.datumFormatter=void 0,this.scaleFormatterParams=void 0,this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new sr,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.animatable=!0,this._scaleNiceDomainInputDomain=void 0,this._scaleNiceDomainRangeExtent=NaN,this.moduleMap=new TE,this.range=this.scale.range.slice(),this.crossLines.forEach(s=>this.initCrossLine(s))}get type(){return this.constructor.type??""}get labelNodes(){return this.tickLabelGroupSelection.nodes()}set crossLines(n){let{CrossLineConstructor:i}=this.constructor;this._crossLines.forEach(s=>this.detachCrossLine(s)),this._crossLines=n.map(s=>{let r=new i;return r.set(s),r}),this._crossLines.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}resetAnimation(n){}attachCrossLine(n){this.crossLineRangeGroup.appendChild(n.rangeGroup),this.crossLineLineGroup.appendChild(n.lineGroup),this.crossLineLabelGroup.appendChild(n.labelGroup)}detachCrossLine(n){this.crossLineRangeGroup.removeChild(n.rangeGroup),this.crossLineLineGroup.removeChild(n.lineGroup),this.crossLineLabelGroup.removeChild(n.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(n=>n())}updateScale(){let{range:n,visibleRange:i,scale:s}=this,r=(n[1]-n[0])/(i[1]-i[0]),o=r*i[0],a=n[0]-o;s.range=[a,a+r],this.crossLines.forEach(l=>{l.clippedRange=[n[0],n[1]]})}setCrossLinesVisible(n){this.crossLineRangeGroup.visible=n,this.crossLineLineGroup.visible=n,this.crossLineLabelGroup.visible=n}attachAxis(n){n.gridNode.appendChild(this.gridGroup),n.axisNode.appendChild(this.axisGroup),n.labelNode.appendChild(this.labelGroup),n.crossLineRangeNode.appendChild(this.crossLineRangeGroup),n.crossLineLineNode.appendChild(this.crossLineLineGroup),n.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(n){n.gridNode.removeChild(this.gridGroup),n.axisNode.removeChild(this.axisGroup),n.labelNode.removeChild(this.labelGroup),n.crossLineRangeNode.removeChild(this.crossLineRangeGroup),n.crossLineLineNode.removeChild(this.crossLineLineGroup),n.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(n){this.labelGroup.append(n)}inRange(n,i=0){let[s,r]=Cn(this.range);return n>=s-i&&n<=r+i}defaultDatumFormatter(n,i){return Fo(n,i+1)}defaultLabelFormatter(n,i){return Fo(n,i)}onGridLengthChange(n,i){i^n&&this.onGridVisibilityChange(),this.crossLines.forEach(s=>this.initCrossLine(s))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new fn}update(){this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateGridLines(),this.updateTickLines(),this.updateCrossLines()}getAxisLineCoordinates(){let[n,i]=Cn(this.range);return{x:0,y1:n,y2:i}}getLabelStyles(n,i){let{label:s}=this,r={color:s.color,spacing:s.spacing,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight},o;s.itemStyler&&(o=this.moduleCtx.callbackCache.call(s.itemStyler,S(S({},n),r)));let{color:a,fontFamily:l,fontSize:c,fontStyle:u,fontWeight:d,spacing:h}=ke(o,i,r);return{fill:a,fontFamily:l,fontSize:c,fontStyle:u,fontWeight:d,spacing:h}}getTickSize(){return this.tick.enabled?this.tick.size:0}setTitleProps(n,i){let{title:s}=this;if(!s.enabled){n.enabled=!1,n.node.visible=!1;return}n.enabled=!0,n.color=s.color,n.fontFamily=s.fontFamily,n.fontSize=s.fontSize,n.fontStyle=s.fontStyle,n.fontWeight=s.fontWeight,n.wrapping=s.wrapping;let r=n.node,o=(s.spacing??0)+i.spacing,a=this.label.getSideFlag(),l=gt(this.rotation),c=a===-1&&l>Math.PI&&l<Math.PI*2?-1:1,u=c*a*Math.PI/2,d=c===1?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),g=Math.floor(a===-1?c*-o:-o),{callbackCache:f}=this.moduleCtx,{formatter:m=y=>y.defaultValue}=s,v=f.call(m,this.getTitleFormatterParams());n.text=v,r.setProperties({visible:!0,text:v,textBaseline:d,x:p,y:g,rotation:u})}processData(){let{includeInvisibleDomains:n,boundSeries:i,direction:s}=this,o=(n?i:i.filter(a=>a.isEnabled())).map(a=>a.getDomain(s));this.setDomains(...o)}setDomains(...n){let i,s;n.length>0?{domain:i,animatable:s}=this.scale.normalizeDomains(...n):(i=[],s=!0),this.dataDomain=this.normaliseDataDomain(i),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=s}calculateLayout(n){let{scale:i,label:s,visibleRange:r,nice:o}=this;this.updateScale();let a=sd(this.range),l=this.dataDomain.domain,c;r[0]===0&&r[1]===1?c=void 0:o?this._scaleNiceDomainInputDomain===l&&this._scaleNiceDomainRangeExtent===a?c=this.scale.domain:c=this.calculateTickLayout(l,0,[0,1]).niceDomain:c=l;let u;o?c==null?u=0:u=1:u=2;let{niceDomain:d,primaryTickCount:h,ticks:p,tickDomain:g,fractionDigits:f,bbox:m}=this.calculateTickLayout(c??l,u,r,n);this.scale.domain=d,this._scaleNiceDomainInputDomain=o?l:void 0,this._scaleNiceDomainRangeExtent=o?a:NaN;let v=s.format;this.labelFormatter=i.tickFormatter({domain:g,specifier:v,ticks:p,fractionDigits:f})??(E=>this.defaultLabelFormatter(E,f)),this.datumFormatter=i.datumFormatter({domain:g,specifier:v,ticks:p,fractionDigits:f})??(E=>this.defaultDatumFormatter(E,f)),this.scaleFormatterParams={domain:g,ticks:p,fractionDigits:f},this.layout.label={fractionDigits:f,spacing:this.label.spacing,format:this.label.format};let y=s.getSideFlag(),w=this.isAnySeriesActive(),{rotation:x,parallelFlipRotation:D,regularFlipRotation:M}=this.calculateRotations();return this.crossLines.forEach(E=>{var A;E.sideFlag=-y,E.direction=x===-Math.PI/2?"x":"y",E instanceof $i&&((A=E.label).parallel??(A.parallel=s.parallel)),E.parallelFlipRotation=D,E.regularFlipRotation=M,E.calculateLayout?.(w,this.reverse)}),{primaryTickCount:h,bbox:m}}getTransformBox(n){let i=new nr,{rotation:s,translationX:r,translationY:o}=this.getAxisTransform();return nr.updateTransformMatrix(i,1,1,s,r,o),i.transformBBox(n)}calculateRotations(){let n=tn(this.rotation),i=gt(n),s=gt(n-Math.PI/2);return{rotation:n,parallelFlipRotation:i,regularFlipRotation:s}}updateCrossLines(){let n=this.isAnySeriesActive();this.crossLines.forEach(i=>{i.update(n)})}updateTickLines(){let{tick:n,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each((r,o)=>{r.strokeWidth=o.tickWidth??n.width,r.stroke=o.tickStroke??n.stroke,r.x1=s*(o.tickSize??this.getTickSize()),r.x2=0})}getAxisTransform(){return{rotation:tn(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){let{crossLineRangeGroup:n,crossLineLineGroup:i,crossLineLabelGroup:s,gridGroup:r,translation:o}=this,{rotation:a}=this.calculateRotations(),l=Math.floor(o.x),c=Math.floor(o.y);n.setProperties({rotation:a,translationX:l,translationY:c}),i.setProperties({rotation:a,translationX:l,translationY:c}),s.setProperties({rotation:a,translationX:l,translationY:c}),r.setProperties({rotation:a,translationX:l,translationY:c})}updateGridLines(){let n=this.label.getSideFlag(),{gridLine:{style:i,width:s},gridPadding:r,gridLength:o}=this;o===0||i.length===0||this.gridLineGroupSelection.each((a,l,c)=>{let{stroke:u,lineDash:d}=i[c%i.length];a.setProperties({x1:r,x2:-n*o+r,stroke:u,strokeWidth:s,lineDash:d})})}formatTick(n,i,s,r){let{labelFormatter:o,label:{formatter:a},moduleCtx:{callbackCache:l}}=this,c;return a?c=l.call(a,{value:n,index:i,fractionDigits:s}):r?c=r(n):o&&(c=o(n)),String(c??n)}formatDatum(n){let{label:{formatter:i},moduleCtx:{callbackCache:s},datumFormatter:r=this.labelFormatter}=this,o;return i?o=s.call(i,{value:n,index:NaN}):r?o=s.call(r,n):mt(n)&&(o=n.filter(Boolean).join(" - ")),String(o??n)}getScaleValueFormatter(n){let{scaleFormatterParams:i}=this,s;try{n!=null&&i!=null&&(s=this.scale.tickFormatter(R(S({},i),{specifier:n})))}catch{G.warnOnce(`the format string ${n} is invalid, ignoring.`)}return s??(s=r=>this.formatDatum(r)),s}getBBox(){return this.axisGroup.getBBox()}initCrossLine(n){n.scale=this.scale,n.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(n=>this.includeInvisibleDomains||n.isEnabled())}clipTickLines(n,i,s,r){this.tickLineGroup.setClipRect(new Z(n,i,s,r))}clipGrid(n,i,s,r){this.gridGroup.setClipRect(new Z(n,i,s,r))}getTitleFormatterParams(){let{direction:n}=this,i=[];for(let s of this.boundSeries){let r=s.getKeys(n),o=s.getNames(n);for(let a=0;a<r.length;a++)i.push({key:r[a],name:o[a]})}return{direction:n,boundSeries:i,defaultValue:this.title?.text}}normaliseDataDomain(n){return{domain:[...n],clipped:!1}}getLayoutState(){return S({id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),R(S({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){let{scale:n}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:Xe.is(n)||Fr.is(n),getCanvasBounds:()=>Pt.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,s)=>(s.getKeyProperties(this.direction).forEach(o=>i.add(o)),i),new Set),seriesIds:()=>this.boundSeries.map(i=>i.id),scaleValueFormatter:i=>this.getScaleValueFormatter(i),scaleInvert:i=>n.invert(i,!0),scaleInvertNearest:i=>n.invert(i,!0),attachLabel:i=>this.attachLabel(i),inRange:(i,s)=>this.inRange(i,s)}}isReversed(){return this.reverse}};return e.defaultTickMinSpacing=50,e.CrossLineConstructor=$i,e})();C([b(le)],mc.prototype,"nice",2);C([b(le)],mc.prototype,"reverse",2);C([b(__)],mc.prototype,"keys",2);C([b(K)],mc.prototype,"interval",2);C([b(K)],mc.prototype,"title",2);C([Ua((e,t,n)=>e.onGridLengthChange(t,n))],mc.prototype,"gridLength",2);var _E=mc;function nue(e,t,n,i,s,r){if(e.size===0)return!1;let o=e.x,a=e.y;t!=null&&(o-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let l=o;o<n?l=n:o>n+s&&(l=n+s);let c=a;a<i?c=i:a>i+r&&(c=i+r);let u=o-l,d=a-c;return Math.sqrt(u*u+d*d)<=e.size*.5}function AB(e,t,n,i,s){let r=e.x+e.width>t&&e.x<t+i,o=e.y+e.height>n&&e.y<n+s;return r&&o}function iue(e,t,n,i,s){return t+i<e.x+e.width&&t>e.x&&n>e.y&&n+s<e.y+e.height}function sue(e){return e!=null&&typeof e.point=="object"&&typeof e.label=="object"}var rue={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function oue(e,t,n=5){let i=new Map,s=[],r=new Map([...e.entries()].map(([a,l])=>[a,l.toSorted((c,u)=>u.point.size-c.point.size)])),o=[...r.values()].flat();for(let[a,l]of r.entries()){let c=[];if(l[0]?.label){for(let u=0,d=l.length;u<d;u++){let h=l[u],{point:p,label:g,anchor:f}=h,{text:m,width:v,height:y}=g,w=p.size*.5,x=0,D=0;if(w>0&&h.placement!=null){let O=rue[h.placement];x=(v*.5+w+n)*O.x,D=(y*.5+w+n)*O.y}let M=p.x-v*.5+x-((f?.x??.5)-.5)*p.size,E=p.y-y*.5+D-((f?.y??.5)-.5)*p.size;if(!(!t||iue(t,M,E,v,y))||o.some(O=>nue(O.point,O.anchor,M,E,v,y))||s.some(O=>AB(O,M,E,v,y)))continue;let P={index:u,text:m,x:M,y:E,width:v,height:y,datum:h};c.push(P),s.push(P)}i.set(a,c)}}return i}function aue(e,t=0){let n=[];for(let i=0;i<e.length;i++){let s=e[i],{point:{x:r,y:o},label:{text:a}}=s,{width:l,height:c}=s.label;if(l+=t,c+=t,n.some(u=>AB(u,r,o,l,c)))return!0;n.push({index:i,text:a,x:r,y:o,width:l,height:c,datum:s})}return!1}function lue(e,t,n){let[i,s]=Cn(e);i=cue(Math.floor(i),s,t);let r=due(i,s,t),o=t-1;s=i+o*r;let a=n?[s,i]:[i,s],l=uue(i,r,t);return{domain:a,ticks:l}}function cue(e,t,n){let i=Math.abs(t-e)/(n-1),s=Math.floor(Math.log10(i)),r=Math.pow(10,s);return Math.floor(e/r)*r}function uue(e,t,n){let i=Math.floor(Math.log10(t)),s=t>0&&t<1?Math.abs(i):0,r=Math.pow(10,s),o=[];for(let a=0;a<n;a++){let l=e+t*a;o[a]=Math.round(l*r)/r}return o}function due(e,t,n){let i=n-1,s=(t-e)/i;return hue(s)}function hue(e){let t=Math.floor(Math.log10(e)),n=Math.pow(10,t),i=e/n*10;return i>0&&i<=1?n/10:i>1&&i<=2?2*n/10:i>1&&i<=5?5*n/10:i>5&&i<=10?10*n/10:i>10&&i<=20?20*n/10:i>20&&i<=40?40*n/10:i>40&&i<=50?50*n/10:i>50&&i<=100?100*n/10:i}function BE(){let e=new Map;return t=>{let n=e.get(t);return n?(e.set(t,n+1),`${t}_${n}`):(e.set(t,1),t)}}var RB=class{constructor(e){this.axis=e}estimateTickCount(e,t,n){return hB(sd(this.axis.range),sd(e),t,n,Xe.defaultTickCount,this.axis.defaultTickMinSpacing)}filterTicks(e,t){let{minSpacing:n,maxSpacing:i}=this.axis.interval,r=!isNaN(n)||!isNaN(i)?Math.ceil(e.length/t):2,o=e.length%r?-1:0;return e.filter((a,l)=>(l+o)%r===0)}generateTicks({domain:e,primaryTickCount:t,visibleRange:n,niceMode:i,parallelFlipRotation:s,regularFlipRotation:r,labelX:o,sideFlag:a}){let{scale:l,label:c,interval:{minSpacing:u,maxSpacing:d}}=this.axis,{parallel:h,rotation:p,fontFamily:g,fontSize:f,fontStyle:m,fontWeight:v}=c,y=t!==void 0,{defaultRotation:w,configuredRotation:x,parallelFlipFlag:D,regularFlipFlag:M}=nC({rotation:p,parallel:h,regularFlipRotation:r,parallelFlipRotation:s}),E=x+w,A=new nr,{maxTickCount:I}=this.estimateTickCount(n,u,d),P=!(Xe.is(l)||Fr.is(l))||isNaN(I)?10:I,O=G2(h,x,0,a,M),$=Wce(h,x,a,D),ae=Yt.toFontString({fontFamily:g,fontSize:f,fontStyle:m,fontWeight:v}),ue=Go.getMeasurer({font:ae}),Q={fontFamily:g,fontSize:f,fontStyle:m,fontWeight:v,textBaseline:$,textAlign:O},he=c.enabled&&c.avoidCollisions,ge=({ticks:me},Re)=>{if(!he)return!1;let ne=x!==0||Re!==0,ie=E+Re,z=jce(c.minSpacing,ne);nr.updateTransformMatrix(A,1,1,ie,0,0);let X=Uce(me,o,A,ue);return aue(X,z)},J={tickDomain:[],ticks:[],rawTicks:[],fractionDigits:0,niceDomain:void 0},de=0,Y=0,te=!0,ee=!1;for(;!ee&&te&&de<=P;){Y=0;for(let me of this.getTickStrategies({domain:e,niceMode:i,secondaryAxis:y,index:de}))({tickData:J,index:de,autoRotation:Y,terminate:ee}=me({index:de,tickData:J,textProps:Q,terminate:ee,primaryTickCount:t,visibleRange:n,get labelOverlap(){return ge(J,Y)}}));te=ge(J,Y)}O=G2(h,x,Y,a,M);let Ce=w+x+Y;return!y&&J.rawTicks.length>0&&(t=J.rawTicks.length),{tickData:J,primaryTickCount:t,combinedRotation:Ce,textBaseline:$,textAlign:O}}getTickStrategies({domain:e,niceMode:t,index:n,secondaryAxis:i}){let{scale:s,label:r,interval:o}=this.axis,{minSpacing:a}=o,l=Xe.is(s)||Fr.is(s),c=r.enabled&&r.avoidCollisions,u=!l&&n!==0&&c,d=r.autoRotate===!0&&r.rotation===void 0,h=[],p;o.values?p=3:i?p=1:u?p=2:p=0;let g=({index:f,tickData:m,primaryTickCount:v,visibleRange:y,terminate:w})=>this.createTickData(e,t,y,v,p,f,m,w);if(h.push(g),!l&&!isNaN(a)){let f=({index:m,tickData:v,primaryTickCount:y,visibleRange:w,terminate:x})=>this.createTickData(e,t,w,y,2,m,v,x);h.push(f)}if(c&&d){let f=({index:m,tickData:v,labelOverlap:y,terminate:w})=>({index:m,tickData:v,autoRotation:y?gt(tn(r.autoRotateAngle??0)):0,terminate:w});h.push(f)}return h}createTickData(e,t,n,i,s,r,o,a){let{scale:l,interval:c}=this.axis,{step:u,values:d,minSpacing:h,maxSpacing:p}=c,{maxTickCount:g,minTickCount:f,tickCount:m}=this.estimateTickCount(n,h,p),v=Xe.is(l)||Fr.is(l),y=!v||isNaN(g)?10:g,w=D=>v?Math.max(m-D,f):g,x=u==null&&d==null&&w(r)>f&&(v||s===2);for(;r<=y;){let D=o.rawTicks;if(o=this.getTicks({domain:e,niceMode:t,visibleRange:n,tickGenerationType:s,previousTicks:D,minTickCount:f,maxTickCount:g,primaryTickCount:i,tickCount:w(r)}),r++,!x||!Pr(o.rawTicks,D))break}return a||(a=u!=null||d!=null),{tickData:o,index:r,autoRotation:0,terminate:a}}getTicks({domain:e,niceMode:t,visibleRange:n,tickGenerationType:i,previousTicks:s,tickCount:r,minTickCount:o,maxTickCount:a,primaryTickCount:l}){let{axis:c}=this,{label:u,range:d,scale:h,interval:p}=c,g=BE(),f={nice:t===0,interval:p.step,tickCount:r,minTickCount:o,maxTickCount:a},m=R(S({},f),{nice:t===0||t===1}),v=t===0?h.niceDomain(f,e):e,y=v,w;switch(i){case 3:if(y=p.values,w=p.values,Xe.is(h)){let[T,P]=Cn(v.map(Number));w=w.filter(O=>Number(O)>=T&&Number(O)<=P).sort((O,$)=>Number(O)-Number($))}break;case 1:if(Xe.is(h)){let T=lue(e.map(Number),l??0,c.reverse);w=T.ticks,v=T.domain.map(P=>h.toDomain(P))}else w=h.ticks(m,v,n)??[];break;case 2:w=this.filterTicks(s,r);break;default:w=h.ticks(m,v,n)??[]}let x=w.reduce((T,P)=>Math.max(T,typeof P=="number"?IC(P):0),0),D={domain:y,ticks:w,fractionDigits:x,specifier:u.format},M=h.tickFormatter(D),E=h.domain;h.domain=v;let A=(h.bandwidth??0)/2,I=[];for(let T=0;T<w.length;T++){let P=w[T],O=h.convert(P)+A;if(d.length>0&&!c.inRange(O,.001))continue;let $=u.enabled?c.formatTick(P,T,x,M):"";I.push({tick:P,tickId:g($),tickLabel:$,translationY:Math.floor(O)})}return h.domain=E,{tickDomain:y,rawTicks:w,fractionDigits:x,ticks:I,niceDomain:v}}},VE=class extends fn{constructor(){super(...arguments),this.autoRotateAngle=335}};C([b(le,{optional:!0})],VE.prototype,"autoRotate",2);C([b(je)],VE.prototype,"autoRotateAngle",2);var GE=class TB extends _E{constructor(t,n){super(t,n),this.lineNode=this.axisGroup.appendChild(new rC({name:`${this.id}-Axis-line`,zIndex:1})),this.tempText=new ad,this.tempCaption=new Ct,this.tickGenerator=new RB(this),this.generatedTicks=void 0,this.animationManager=t.animationManager,this.animationState=new pg("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:s=>this.animateReadyUpdate(s),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.axisGroup.appendChild(this.title.caption.node);let i;this.destroyFns.push(t.layoutManager.addListener("layout:complete",s=>{let r=[s.chart.width,s.chart.height];i!=null&&!Pr(r,i)&&this.animationState.transition("resize"),i=r}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof TB}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}createAxisContext(){return R(S({},super.createAxisContext()),{position:this.position})}createLabel(){return new VE}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}calculateTickLayout(t,n,i,s){let r=this.label.getSideFlag(),{parallelFlipRotation:o,regularFlipRotation:a}=this.calculateRotations(),l=r*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),c=this.tickGenerator.generateTicks({domain:t,niceMode:n,visibleRange:i,primaryTickCount:s,parallelFlipRotation:o,regularFlipRotation:a,labelX:l,sideFlag:r}),{tickData:u,primaryTickCount:d=s}=c,{ticks:h,tickDomain:p,rawTicks:g,fractionDigits:f,niceDomain:m=t}=u,v=h.map(w=>this.getTickLabelProps(w,c)),y=this.tickBBox(h,v);return this.generatedTicks={ticks:h,labels:v},{ticks:g,tickDomain:p,niceDomain:m,primaryTickCount:d,fractionDigits:f,bbox:y}}update(){this.updateDirection();let t=Array.from(this.tickLabelGroupSelection.nodes(),r=>r.datum.tickId);if(super.update(),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),this.generatedTicks){let{ticks:r}=this.generatedTicks;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{let o=r.map(l=>l.tickId),a=Dae(t,o);this.animationState.transition("update",a)}}let{enabled:n,stroke:i,width:s}=this.line;this.lineNode.setProperties({stroke:i,strokeWidth:n?s:0}),this.updateTitle(!this.generatedTicks?.ticks.length)}updatePosition(){super.updatePosition(),this.axisGroup.datum=this.getAxisTransform()}tickBBox(t,n){let i=this.label.getSideFlag(),s=[],{x:r,y1:o,y2:a}=this.getAxisLineCoordinates(),l=new Z(r+Math.min(i*this.seriesAreaPadding,0),o,this.seriesAreaPadding,a-o);if(s.push(l),this.tick.enabled)for(let d of t){let{x1:h,x2:p,y:g}=this.getTickLineCoordinates(d),f=new Z(h,g,p-h,0);s.push(f)}let{tempText:c}=this;if(this.label.enabled)for(let d of n){if(!d.visible)continue;c.setProperties(R(S({},d),{translationY:Math.round(d.translationY)}));let h=c.getBBox();h&&s.push(h)}if(this.title?.enabled){let d=Z.merge(s).width;this.setTitleProps(this.tempCaption,{spacing:d});let h=this.tempCaption.node.getBBox();h&&s.push(h)}let u=Z.merge(s);return this.getTransformBox(u)}getTickLabelProps(t,n){let{combinedRotation:i,textBaseline:s,textAlign:r}=n,{range:o}=this.scale,a=t.tickLabel,c=this.label.getSideFlag()*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),u=a!==""&&a!=null;return R(S({},this.getLabelStyles({value:t.tickLabel})),{tickId:t.tickId,rotation:i,rotationCenterX:c,translationY:t.translationY,text:a,textAlign:r,textBaseline:s,visible:u,x:c,y:0,range:o})}getTickLineCoordinates(t){let i=this.label.getSideFlag()*this.getTickSize(),s=Math.min(0,i),r=s+Math.abs(i),o=t.translationY;return{x1:s,x2:r,y:o}}updateSelections(){if(!this.generatedTicks)return;let t=this.getAxisLineCoordinates(),{ticks:n,labels:i}=this.generatedTicks,s=r=>r.tickId;this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?n:[],void 0,s),this.tickLineGroupSelection.update(n,void 0,s),this.tickLabelGroupSelection.update(i,void 0,s)}updateTitle(t,n){let{title:i,tickLineGroup:s,tickLabelGroup:r,lineNode:o}=this;i.enabled&&!t&&n==null&&(n=ye.computeChildrenBBox([s,r,o]).width+(r.visible?0:this.seriesAreaPadding)),n??(n=0),this.setTitleProps(i.caption,{spacing:n})}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((t,n)=>{t.fill=n.fill,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.text=n.text,t.textBaseline=n.textBaseline,t.textAlign=n.textAlign??"center"})}animateReadyUpdate(t){let{animationManager:n}=this.moduleCtx,i=sC(this),s=xB(i);kt(this.id,"axis-group",n,[this.axisGroup],s.group),kt(this.id,"line",n,[this.lineNode],s.line),kt(this.id,"line-paths",n,[this.gridLineGroupSelection,this.tickLineGroupSelection],s.tick,(r,o)=>o.tickId,t),kt(this.id,"tick-labels",n,[this.tickLabelGroupSelection],s.label,(r,o)=>o.tickId,t)}resetSelectionNodes(){let t=sC(this);vn([this.axisGroup],DB()),vn([this.gridLineGroupSelection,this.tickLineGroupSelection],NE(t)),vn([this.tickLabelGroupSelection],OE()),vn([this.lineNode],MB())}};C([b(j,{optional:!0})],GE.prototype,"thickness",2);C([b(wE)],GE.prototype,"position",2);var gg=GE,jC=(()=>{let e=class kB extends gg{constructor(n,i=new ag){super(n,i),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}static is(n){return n instanceof kB}normaliseDataDomain(n){return{domain:n,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:n,paddingOuter:i}=this;if(!We(n)||!We(i)){let s=this.reduceBandScalePadding();n??(n=s.inner),i??(i=s.outer)}this.scale.paddingInner=n??0,this.scale.paddingOuter=i??0}reduceBandScalePadding(){return this.boundSeries.reduce((n,i)=>{let s=i.getBandScalePadding?.();return s&&(n.inner>s.inner&&(n.inner=s.inner),n.outer<s.outer&&(n.outer=s.outer)),n},{inner:1/0,outer:-1/0})}};return e.className="CategoryAxis",e.type="category",e})();C([b(Qe)],jC.prototype,"groupPaddingInner",2);C([b(Qe,{optional:!0})],jC.prototype,"paddingInner",2);C([b(Qe,{optional:!0})],jC.prototype,"paddingOuter",2);var md=jC,WC=class{constructor(){this.destroyFns=[]}destroy(){for(let e of this.destroyFns)e()}},pue=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...e){for(let t of e){this.registerDependencies(t);let n=this.modules.find(i=>t.type===i.type&&("optionsKey"in t&&"optionsKey"in i?t.optionsKey===i.optionsKey:!0)&&t.identifier===i.identifier);if(n){if(t.packageType==="enterprise"&&n.packageType==="community"){let i=this.modules.indexOf(n);this.modules.splice(i,1,t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}else this.modules.push(t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}hasEnterpriseModules(){return this.modules.some(e=>e.packageType==="enterprise")}*byType(...e){let t=new Set,n=this.modules.filter(r=>e.includes(r.type)),i=r=>{let o=this.dependencies.get(r);return o?.flatMap(i).concat(o)??[]},s=[];for(let r of n){let o="optionsKey"in r?r.optionsKey:r.contextKey;if(!t.has(o)){for(let a of i(o)){if(t.has(a))continue;let l=this.modulesByOptionKey.get(a);if(!l){s.push(a);continue}e.includes(l.type)&&(yield l,t.add(a))}yield r,t.add(o)}}if(s.length>0)throw new Error(`Could not resolve module dependencies: ${s}`)}registerDependencies(e){if(e.dependencies==null||e.dependencies.length===0)return;let t="optionsKey"in e?e.optionsKey:e.contextKey;this.dependencies.set(t,e.dependencies)}},Nr=new pue,q2=class{constructor(){this.queue=[]}await(e=50){return new Promise(t=>{let n=()=>{clearTimeout(s),t(!0)},s=setTimeout(()=>{let r=this.queue.indexOf(n);r<0||(this.queue.splice(r,1),t(!1))},e);this.queue.push(n)})}notify(){this.queue.splice(0).forEach(e=>e())}};function gue(){return new Promise(e=>{setTimeout(e,0)})}function oC(e,t){e&&(t=xC.normalize(t),t.width==null?e.style.removeProperty("width"):e.style.width=`${t.width}px`,t.height==null?e.style.removeProperty("height"):e.style.height=`${t.height}px`,t.x==null?e.style.removeProperty("left"):e.style.left=`${t.x}px`,t.y==null?e.style.removeProperty("top"):e.style.top=`${t.y}px`)}function LB(e){let t=parseFloat(e.style.width)||e.offsetWidth,n=parseFloat(e.style.height)||e.offsetHeight,i=parseFloat(e.style.left)||e.offsetLeft,s=parseFloat(e.style.top)||e.offsetTop;return{x:i,y:s,width:t,height:n}}function fue(e){if(e.focus({preventScroll:!0}),e.lastChild?.textContent==null)return;let t=Lo().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);let n=ft().getSelection();n?.removeAllRanges(),n?.addRange(t)}var mue=0;function vue(e){return`${e??"ag-charts-element"}-${mue++}`}function PB(){let e=ft("navigator");if("scheduling"in e){let t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function UC(e){return`ag-charts-icon ag-charts-icon-${e}`}var zM="class-instance";function No(e,t,n){if(mt(t)){if(!mt(e)||e.length!==t.length||t.some((i,s)=>No(e[s],i)!=null))return t}else if(Hn(t)){if(!Hn(e))return t;let i={},s=new Set([...Object.keys(e),...Object.keys(t)]);for(let r of s)if(!(e[r]===t[r]||n?.includes(r)))if(typeof e[r]==typeof t[r]){let o=No(e[r],t[r]);o!==null&&(i[r]=o)}else i[r]=t[r];return Object.keys(i).length?i:null}else if(e!==t)return t;return null}function FB(e,t){for(let n of Object.keys(e))if(e[n]!==t?.[n])return!1;return!0}function Jt(e,t){return mt(e)?e.map(n=>Jt(n,t)):Hn(e)?yue(e,t):e instanceof Map?new Map(Jt(Array.from(e))):zE(e)}function yue(e,t){let n={};for(let i of Object.keys(e))n[i]=t?.has(i)?zE(e[i]):Jt(e[i],t);return n}function zE(e){return mt(e)?e.slice(0):Hn(e)?S({},e):dd(e)?new Date(e):Aae(e)?new RegExp(e.source,e.flags):e}function Io(e,t,n,i,s,r){if(mt(e)){r=t(e,i,s,r);let o=0;for(let a of e)r=Io(a,t,n,i?.[o],s,r),o++}else if(Hn(e)){r=t(e,i,s,r);for(let o of Object.keys(e)){if(n?.has(o))continue;let a=e[o];r=Io(a,t,n,i?.[o],s,r)}}return r}function kp(e,t,n={}){let{path:i,matcherPath:s=i?.replace(/(\[[0-9+]+])/i,"[]"),skip:r=[]}=n;if(e==null)throw new Error(`AG Charts - target is uninitialised: ${i??"<root>"}`);if(t==null)return e;if(_r(e))return e.set(t);let o=e,a=sM(e);for(let l of Object.keys(t)){if(pE.has(l))continue;let c=`${s?s+".":""}${l}`;if(r.includes(c))continue;let u=t[l],d=`${i?i+".":""}${l}`,h=o.constructor,p=o[l];try{let g=sM(p),f=sM(u);if(a===zM&&!(l in e)){if(u===void 0)continue;G.warn(`unable to set [${d}] in ${h?.name} - property is unknown`);continue}if(g!=null&&f!=null&&f!==g&&(g!==zM||f!=="object")){G.warn(`unable to set [${d}] in ${h?.name} - can't apply type of [${f}], allowed types are: [${g}]`);continue}if(_r(p))o[l].set(u);else if(f==="object"){if(p==null){G.warn(`unable to set [${d}] in ${h?.name} - property is unknown`);continue}kp(p,u,R(S({},n),{path:d,matcherPath:c}))}else o[l]=u}catch(g){G.warn(`unable to set [${d}] in [${h?.name}]; nested error is: ${g.message}`)}}return e}function sM(e){return e==null?null:Rae(e)||dd(e)?"primitive":mt(e)?"array":yn(e)?Hn(e)?"object":zM:hc(e)?"function":"primitive"}function NB(e,t,n){return HM(e,t,e,n)}function HM(e,t,n,i,s=[],r={}){if(mt(e)){Z2(e,t,n,s,r);let o=0;for(let a of e)HM(a,t,n,i,[...s,`${o}`],r),o++}else if(Hn(e)){Z2(e,t,n,s,r);for(let o of Object.keys(e)){if(i?.has(o))continue;let a=e[o];HM(a,t,n,i,[...s,o],r)}}return r}function Z2(e,t,n,i,s){if(mt(e))for(let r=0;r<e.length;r++)e[r]=X2(e[r],t,n,[...i,`${r}`],s);else for(let[r,o]of Object.entries(e))e[r]=X2(o,t,n,[...i,r],s)}function X2(e,t,n,i,s){let{operation:r,values:o}=HE(e);return r?(s[i.join(".")]=e,_B(r,o,t,n,i,new Set)):e}var OB=(e=>(e.Ref="$ref",e.Path="$path",e.If="$if",e.Eq="$eq",e.Not="$not",e.Or="$or",e.And="$and",e.Mul="$mul",e.Round="$round",e.Rem="$rem",e.Mix="$mix",e.ForegroundBackgroundMix="$foregroundBackgroundMix",e.ForegroundBackgroundAccentMix="$foregroundBackgroundAccentMix",e))(OB||{}),Cue=new Set(Object.values(OB));function HE(e){if(!Hn(e))return{};let[t,...n]=Object.keys(e);return n.length!==0||!Cue.has(t)?{}:{operation:t,values:e[t]}}function _B(e,t,n,i,s,r){return mt(t)&&(t=t.map(o=>{let{operation:a,values:l}=HE(o);return a?_B(a,l,n,i,s,r):o})),BB[e](t,n,i,s,r)}function Ey(e){return bs(e)&&e>=0&&e<=1}var BB={$ref:(e,t,n,i,s)=>{if(xi(e)&&e in t){let{operation:r,values:o}=HE(t[e]);if(r!=="$ref")return t[e];if(s?.has(o)){G.warnOnce(`\`$ref\` json operation failed on [${String(e)}] at [${i.join(".")}], circular reference detected with [${[...s].join(", ")}].`);return}return s?.add(o),BB.$ref(o,t,n,i,s)}G.warnOnce(`\`$ref\` json operation failed on [${String(e)}] at [${i.join(".")}], expecting one of [${Object.keys(t).join(", ")}].`)},$path:(e,t,n,i)=>{if(!xi(e)){G.warnOnce(`\`$path\` json operation failed on [${String(e)}] at [${i.join(".")}], expecting a string.`);return}let s=e.split("/"),r=[...i];for(let a of s)a===".."?(r.pop(),r.pop()):a==="."?r.pop():r.push(a);let o=n;for(let a of r){if(!(a in o)){G.warnOnce(`\`$path\` json operation failed on [${String(e)}] at [${i.join(".")}], could not find path in object.`);return}o=o[a]}return o},$if:([e,t,n])=>e?t:n,$eq:([e,t])=>e===t,$not:([e,t])=>e!==t,$or:([e,t])=>e||t,$and:([e,t])=>e&&t,$mul:([e,t],n,i,s)=>{if(typeof e=="number"&&typeof t=="number")return e*t;G.warnOnce(`\`$mul\` json operation failed on [${String(e)}] and [${String(t)}] at [${s.join(".")}], expecting two numbers.`)},$round:([e],t,n,i)=>{if(typeof e=="number")return Math.round(e);G.warnOnce(`\`$round\` json operation failed on [${String(e)}] at [${i.join(".")}], expecting a number.`)},$rem:([e],t)=>{if(typeof e=="number")return Math.round(e*t.fontSize)},$mix:([e,t,n],i,s,r)=>{if(typeof e=="string"&&typeof t=="string"&&Ey(n))try{return Tt.mix(Tt.fromString(e),Tt.fromString(t),n).toString()}catch{}G.warnOnce(`\`$mix\` json operation failed on [${String(e)}, ${String(t)}, ${String(n)}] at [${r.join(".")}], expecting two colors and a number between 0 and 1.`)},$foregroundBackgroundMix:([e],t,n,i)=>{if(Ey(e))return Tt.mix(Tt.fromString(t.foregroundColor),Tt.fromString(t.backgroundColor),e).toString();G.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(e)}}}] at [${i.join(".")}], expecting a number between 0 and 1.`)},$foregroundBackgroundAccentMix:([e,t],n,i,s)=>{if(Ey(e)&&Ey(t))return Tt.mix(Tt.mix(Tt.fromString(n.foregroundColor),Tt.fromString(n.backgroundColor),e),Tt.fromString(n.accentColor),t).toString();G.warnOnce(`\`$foregroundBackgroundAccentMix\` json operation failed on [${String(e)}, ${String(t)}}] at [${s.join(".")}], expecting two numbers between 0 and 1.`)}},wue=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch(n=>G.errorOnce(n))})}async acquireImmediately(e){return this.available?(await this.acquire(e),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t?.()}catch(n){G.error("mutex callback error",n),t?.()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},VB=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new Error("AG Charts - listener must be a Function");let n=this.eventListeners.get(e);n?n.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){this.eventListeners.get(e)?.delete(t),this.eventListeners.size===0&&this.eventListeners.delete(e)}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){this.eventListeners.get(e.type)?.forEach(t=>t(e))}},Ya=class extends Se{constructor(e=0,t=e,n=e,i=t){super(),this.top=e,this.right=t,this.bottom=n,this.left=i}};C([b(j)],Ya.prototype,"top",2);C([b(j)],Ya.prototype,"right",2);C([b(j)],Ya.prototype,"bottom",2);C([b(j)],Ya.prototype,"left",2);function bue(e){return GB((t,n)=>ft().requestAnimationFrame(t),e)}function Sue(e){return GB((t,n=0)=>{n===0?queueMicrotask(t):setTimeout(t,n)},e)}function GB(e,t){let n=0,i=!1,s,r,o=()=>i,a=()=>{i=!1,r?.(),r=void 0,s=void 0,n>0&&e(l)},l=()=>{let c=n;n=0,i=!0;let u=t({count:c});if(!u){a();return}u.then(a,a)};return{schedule(c){n===0&&!o()&&e(l,c),n++},async await(){if(o())for(s==null&&(s=new Promise(c=>{r=c}));o();)await s}}}function Wl(e){return e==="true"}function xue(e){return Number(e)}function Ys(e){return e}var Due={role:Ys,"aria-checked":Wl,"aria-controls":Ys,"aria-describedby":Ys,"aria-disabled":Wl,"aria-expanded":Wl,"aria-haspopup":Wl,"aria-hidden":Wl,"aria-label":Ys,"aria-labelledby":Ys,"aria-live":Ys,"aria-orientation":Ys,"aria-selected":Wl,"data-preventdefault":Wl,class:Ys,id:Ys,tabindex:xue,title:Ys,placeholder:Ys};function ot(e,t,n){n==null||n===""||n===""?e?.removeAttribute(t):e?.setAttribute(t,n.toString())}function dc(e,t){if(t!=null)for(let[n,i]of Object.entries(t))n!=="class"&&ot(e,n,i)}function $C(e,t,n){if(!(e instanceof HTMLElement))return;let i=e.getAttribute(t);return i===null?n:Due[t]?.(i)??void 0}function Qs(e,t,n){e!=null&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n.toString()))}function Mue(e,t){for(let[n,i]of Object.entries(t))Qs(e,n,i)}var jE=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function Vu(e,t,n){let{offsetX:i,offsetY:s,clientX:r,clientY:o}=t,{currentX:a,currentY:l}=Ao.calcCurrentXY(n,t);return{type:e,offsetX:i,offsetY:s,clientX:r,clientY:o,currentX:a,currentY:l,sourceEvent:t}}function Iy(e,t,n){return{type:e,sourceEvent:t}}var Eue={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>Vu("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>Vu("click",e,t),dblclick:(e,t)=>Vu("dblclick",e,t),mouseenter:(e,t)=>Vu("mouseenter",e,t),mousemove:(e,t)=>Vu("mousemove",e,t),mouseleave:(e,t)=>Vu("mouseleave",e,t),wheel:e=>{let{offsetX:t,offsetY:n,clientX:i,clientY:s}=e,r=e.deltaMode===0?.01:1,o=e.deltaX*r,a=e.deltaY*r;return{type:"wheel",offsetX:t,offsetY:n,clientX:i,clientY:s,deltaX:o,deltaY:a,sourceEvent:e}},touchstart:(e,t)=>Iy("touchstart",e,t),touchmove:(e,t)=>Iy("touchmove",e,t),touchend:(e,t)=>Iy("touchend",e,t),touchcancel:(e,t)=>Iy("touchcancel",e,t)},Ao=class{static alloc(e,t,n){return Eue[e](t,n)}static isHTMLEvent(e){return jE.includes(e)}static calcCurrentXY(e,t){let n=e.getBoundingClientRect();return{currentX:t.clientX-n.x,currentY:t.clientY-n.y}}},Iue=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var n;if(!(e in(this.sourceListeners??{}))){let i=r=>{let o=Ao.alloc(e,r,t.getElement());for(let a of this.widgetListeners?.[e]??[])a(o,t)},s={};e.startsWith("touch")&&(s.passive=!1),this.initSourceHandler(e,i),t.getElement().addEventListener(e,i,s)}return this.widgetListeners??(this.widgetListeners={}),(n=this.widgetListeners)[e]??(n[e]=[]),this.widgetListeners[e]}add(e,t,n){this.lazyGetWidgetListeners(e,t).push(n)}remove(e,t,n){let i=this.lazyGetWidgetListeners(e,t),s=i.indexOf(n);s>-1&&i.splice(s,1)}destroy(e){for(let[t,n]of Object.entries(this.sourceListeners??{})){let i=t;e.getElement().removeEventListener(i,n)}this.widgetListeners=void 0,this.sourceListeners=void 0}},Aue=class{constructor(e,t,n,i){this.glob=e,this.self=t,this.window=ft(),this.mousegeneral=l=>{l.stopPropagation(),l.stopImmediatePropagation()},this.mousemove=l=>{l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(l)},this.mouseup=l=>{l.button===0&&(l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(l),this.destroy())};let{window:s,mousegeneral:r,mousemove:o,mouseup:a}=this;s.addEventListener("mousedown",r,{capture:!0}),s.addEventListener("mouseenter",r,{capture:!0}),s.addEventListener("mouseleave",r,{capture:!0}),s.addEventListener("mouseout",r,{capture:!0}),s.addEventListener("mouseover",r,{capture:!0}),s.addEventListener("mousemove",o,{capture:!0}),s.addEventListener("mouseup",a,{capture:!0}),t.mouseDragger=this,e.globalMouseDragCallbacks=n,e.globalMouseDragCallbacks.mousedown(i)}destroy(){let{window:e,mousegeneral:t,mousemove:n,mouseup:i}=this;e.removeEventListener("mousedown",t,{capture:!0}),e.removeEventListener("mouseenter",t,{capture:!0}),e.removeEventListener("mouseleave",t,{capture:!0}),e.removeEventListener("mouseout",t,{capture:!0}),e.removeEventListener("mouseover",t,{capture:!0}),e.removeEventListener("mousemove",n,{capture:!0}),e.removeEventListener("mouseup",i,{capture:!0}),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};function Rue(e,t,n,i){if(e.globalMouseDragCallbacks==null)return new Aue(e,t,n,i)}var Tue=500,kue=100;function Lue(e,t){let n=e.clientX-t.clientX,i=e.clientY-t.clientY;return n*n+i*i}var jM=!1,Pue=class{constructor(e,t,n,i,s){this.glob=e,this.self=t,this.initialTouch=i,this.target=s,this.longTapInterrupted=!1,this.longtap=()=>{let{target:a,initialTouch:l}=this;if(!this.longTapInterrupted){a.dispatchEvent(new TouchEvent("touchcancel",{touches:[l],bubbles:!0})),jM=!0;let c=g=>{g.preventDefault()},u=g=>{jM=!1,g.preventDefault(),a.removeEventListener("touchmove",c),a.removeEventListener("touchend",u),a.removeEventListener("touchcancel",u)};a.addEventListener("touchmove",c,{passive:!1}),a.addEventListener("touchend",u,{passive:!1}),a.addEventListener("touchcancel",u,{passive:!1});let{clientX:d,clientY:h}=l,p=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:ft(),clientX:d,clientY:h,pointerType:"touch"});a.dispatchEvent(p)}},this.touchmove=a=>{let{glob:l,self:c,initialTouch:u}=this,d=this.findInitialFinger(a.targetTouches);d!=null&&(this.longTapInterrupted=this.longTapInterrupted||Lue(u,d)>kue,c.dragTouchEnabled&&d!=null&&l.globalTouchDragCallbacks?.touchmove(a,d))},this.touchend=a=>{this.longTapInterrupted=!0;let l=this.findInitialFinger(a.changedTouches,a.touches);l!=null&&this.glob.globalTouchDragCallbacks?.touchend(a,l),this.destroy()},this.longtapTimer=setTimeout(this.longtap,Tue);let{touchmove:r,touchend:o}=this;s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchstart",o,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),s.addEventListener("touchcancel",o,{passive:!1}),t.touchDragger=this,e.globalTouchDragCallbacks=n}destroy(){let{longtapTimer:e,touchmove:t,touchend:n}=this;clearTimeout(e),this.target.removeEventListener("touchstart",n),this.target.removeEventListener("touchmove",t),this.target.removeEventListener("touchend",n),this.target.removeEventListener("touchcancel",n),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...e){let t=e.map(n=>Array.from(n)).flat();return Array.from(t).find(n=>n.identifier===this.initialTouch.identifier)}};function Fue(e,t,n,i,s){if(!(e.globalTouchDragCallbacks!=null||jM))return new Pue(e,t,n,i,s)}function rM(e,t,n,i){let{currentX:s,currentY:r}=Ao.calcCurrentXY(e.getElement(),i),o=i.pageX-n.pageX,a=i.pageY-n.pageY;return{type:t,device:"mouse",offsetX:n.offsetX+o,offsetY:n.offsetY+a,clientX:i.clientX,clientY:i.clientY,currentX:s,currentY:r,originDeltaX:o,originDeltaY:a,sourceEvent:i}}function Nue(e,{pageX:t,pageY:n}){let{x:i,y:s}=e.getElement().getBoundingClientRect();return{offsetX:t-i,offsetY:n-s}}function oM(e,t,n,i,s){let{currentX:r,currentY:o}=Ao.calcCurrentXY(e.getElement(),s),a=s.pageX-n.pageX,l=s.pageY-n.pageY;return{type:t,device:"touch",offsetX:n.offsetX+a,offsetY:n.offsetY+l,clientX:s.clientX,clientY:s.clientY,currentX:r,currentY:o,originDeltaX:a,originDeltaY:l,sourceEvent:i}}var Q2={},J2=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.dragStartListeners=void 0,this.dragMoveListeners=void 0,this.dragEndListeners=void 0,this.mouseDragger?.destroy(),this.touchDragger?.destroy()}add(e,t,n){switch(e){case"drag-start":{this.dragStartListeners??(this.dragStartListeners=[]),this.dragStartListeners.push(n),this.registerDragTrigger(t);break}case"drag-move":{this.dragMoveListeners??(this.dragMoveListeners=[]),this.dragMoveListeners.push(n),this.registerDragTrigger(t);break}case"drag-end":{this.dragEndListeners??(this.dragEndListeners=[]),this.dragEndListeners.push(n),this.registerDragTrigger(t);break}}}remove(e,t,n){switch(e){case"drag-start":return this.removeHandler(this.dragStartListeners,n);case"drag-move":return this.removeHandler(this.dragMoveListeners,n);case"drag-end":return this.removeHandler(this.dragEndListeners,n)}}removeHandler(e,t){let n=e?.indexOf(t);n!==void 0&&e?.splice(n,1)}registerDragTrigger(e){if(this.dragTriggerRemover==null){let t=i=>this.triggerMouseDrag(e,i),n=i=>this.triggerTouchDrag(e,i);e.getElement().addEventListener("mousedown",t),e.getElement().addEventListener("touchstart",n,{passive:!1}),this.dragTriggerRemover=()=>{e.getElement().removeEventListener("mousedown",t),e.getElement().removeEventListener("touchstart",n)}}}triggerMouseDrag(e,t){t.button===0&&this.startMouseDrag(e,t)}startMouseDrag(e,t){let n={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};LM(["pageX","pageY","offsetX","offsetY"],n,t);let i={mousedown:s=>{let r=rM(e,"drag-start",n,s);this.dispatch("drag-start",e,r)},mousemove:s=>{let r=rM(e,"drag-move",n,s);this.dispatch("drag-move",e,r)},mouseup:s=>{let r=rM(e,"drag-end",n,s);this.dispatch("drag-end",e,r),this.endDrag(e,r)}};this.mouseDragger=Rue(Q2,this,i,t)}endDrag(e,{sourceEvent:t,clientX:n,clientY:i}){let s=e.getElement(),r=s.getBoundingClientRect();xC.containsPoint(r,n,i)||(s.dispatchEvent(new MouseEvent("mouseleave",t)),t.target?.dispatchEvent(new MouseEvent("mouseenter",t)))}triggerTouchDrag(e,t){let n=t.targetTouches.item(0);t.targetTouches.length===1&&n!=null&&this.startOneFingerTouch(e,t,n)}startOneFingerTouch(e,t,n){let i=S({pageX:NaN,pageY:NaN},Nue(e,n));LM(["pageX","pageY"],i,n);let s={touchmove:(a,l)=>{let c=oM(e,"drag-move",i,a,l);this.dispatch("drag-move",e,c)},touchend:(a,l)=>{let c=oM(e,"drag-end",i,a,l);this.dispatch("drag-end",e,c)}},r=e.getElement();this.touchDragger=Fue(Q2,this,s,n,r);let o=oM(e,"drag-start",i,t,n);this.dispatch("drag-start",e,o)}dispatch(e,t,n){switch(e){case"drag-start":this.dragStartListeners?.forEach(i=>i(n,t));break;case"drag-move":this.dragMoveListeners?.forEach(i=>i(n,t));break;case"drag-end":this.dragEndListeners?.forEach(i=>i(n,t));break}this.dispatchCallback(e,n)}},Oue=class{constructor(e){this.elem=e}setBounds(e){oC(this.elemContainer??this.elem,e)}getBounds(){return LB(this.elemContainer??this.elem)}static setElementContainer(e,t){let n=e.getBounds();oC(t,n),Mue(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},zr=class extends Oue{constructor(e){super(e),this.elem=e,this.index=NaN,this.children=[]}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.parent?.removeChild(this),this.children.forEach(e=>{e.parent=void 0,e.destroy()}),this.children.length=0,this.destructor(),this.elem.remove(),this.elemContainer?.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}setHidden(e){Qs(this.elem,"display",e?"none":void 0)}isHidden(){return ft()?.getComputedStyle?.(this.elem).display==="none"}setCursor(e){Qs(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){ot(this.elem,"aria-describedby",e)}setAriaHidden(e){ot(this.elem,"aria-hidden",e)}setAriaLabel(e){ot(this.elem,"aria-label",e)}setInnerHTML(e){this.elem.innerHTML=e}isDisabled(){return $C(this.elem,"aria-disabled",!1)}parseFloat(e){return e===""?0:parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(){this.elem.focus()}setPreventsDefault(e){ot(this.elem,"data-preventdefault",e)}setTabIndex(e){ot(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){let t=this.children.findIndex(n=>n===e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(...e){this.elem.classList.add(...e)}removeClass(...e){this.elem.classList.remove(...e)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){this.elem.removeChild(e.getElement())}onChildAdded(e){}onChildRemoved(e){}getBefore({domIndex:e}){if(e!==void 0)return this.children.filter(t=>t.domIndex!==void 0&&t.domIndex>e).reduce((t,n)=>!t||n.domIndex<t.domIndex?n:t,void 0)}addListener(e,t){return Ao.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new Iue),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new J2(this.onDispatch.bind(this))),this.internalListener.add(e,this,t)),()=>this.removeListener(e,t)}removeListener(e,t){Ao.isHTMLEvent(e)?this.htmlListener?.remove(e,this,t):this.htmlListener!=null&&this.internalListener?.remove(e,this,t)}setDragTouchEnabled(e){this.internalListener??(this.internalListener=new J2(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){if(!t.sourceEvent.bubbles)return;let{parent:n}=this;for(;n!=null;){let{internalListener:i}=n;if(i!=null){let s=S(S({},t),Ao.calcCurrentXY(n.getElement(),t));i.dispatch(e,n,s)}n=n.parent}}static addWindowEvent(e,t){let n=i=>{i.persisted||t()};return ft().addEventListener("pagehide",n),()=>ft().removeEventListener("pagehide",n)}},WE=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(WE||{}),zB=class{constructor(){this.events=new aE,this.elements=new Map}addListener(e,t){return this.events.on(e,t)}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>this.elements.get(e)?.delete(t)}createContext(e,t){let n=new _ue(e,t);for(let i of Object.values(WE))typeof i=="number"&&this.elements.get(i)?.forEach(s=>s(n));return n}emitLayoutComplete(e,t){let n="layout:complete",{width:i,height:s}=e;this.events.emit(n,{type:n,axes:t.axes??[],chart:{width:i,height:s},clipSeries:t.clipSeries??!1,series:t.series})}},_ue=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new Z(0,0,e,t)}},YC=class{constructor(){this.title=new Ct,this.subtitle=new Ct,this.footnote=new Ct}positionCaptions(e){let{title:t,subtitle:n,footnote:i}=this,s=e.layoutBox.height/10;if(t.enabled){let{spacing:r=n.enabled?Ct.SMALL_PADDING:Ct.LARGE_PADDING}=t;this.positionCaption("top",t,e.layoutBox,s),this.shrinkLayoutByCaption("top",t,e.layoutBox,r)}n.enabled&&(this.positionCaption("top",n,e.layoutBox,s),this.shrinkLayoutByCaption("top",n,e.layoutBox,n.spacing)),i.enabled&&(this.positionCaption("bottom",i,e.layoutBox,s),this.shrinkLayoutByCaption("bottom",i,e.layoutBox,i.spacing))}positionAbsoluteCaptions(e){let{title:t,subtitle:n,footnote:i}=this,{rect:s}=e.series;for(let r of[t,n,i])if(r.layoutStyle==="overlay"){if(r.textAlign==="left")r.node.x=s.x+r.padding;else if(r.textAlign==="right"){let o=r.node.getBBox();r.node.x=s.x+s.width-o.width-r.padding}}}computeX(e,t){return e==="left"?t.x:e==="right"?t.x+t.width:t.x+t.width/2}positionCaption(e,t,n,i){let s=Math.max(Yt.getLineHeight(t.fontSize),i);t.node.x=this.computeX(t.textAlign,n)+t.padding,t.node.y=n.y+(e==="top"?0:n.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(n.width,s)}shrinkLayoutByCaption(e,t,n,i=0){if(t.layoutStyle==="block"){let s=t.node.getBBox();n.shrink(Math.ceil(e==="top"?s.y-n.y+s.height+i:n.y+n.height-s.y+i),e)}}};C([b(K)],YC.prototype,"title",2);C([b(K)],YC.prototype,"subtitle",2);C([b(K)],YC.prototype,"footnote",2);var Bue=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],Vue=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){let e=this.chartService.publicApi?.getOptions()?.chartType;return e==null&&(e="candlestick"),e}guardMemento(e){return e==null||Bue.includes(e)}restoreMemento(e,t,n){if(n==null)return;let i={chartType:n};this.chartService.publicApi?.updateDelta(i).catch(s=>G.error("error restoring state",s))}},HB=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0}setFns(e){this.destroy(),this.destroyFns=e}push(...e){this.destroyFns.push(...e)}},jp="11.1.0",e3=Symbol("previous-memento-not-found"),Gue=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=ct.create(!0,"history"),this.destroyFns=new HB,this.destroyFns.setFns([e.addListener("series-undo",this.undo.bind(this)),e.addListener("series-redo",this.redo.bind(this))])}destroy(){this.destroyFns.destroy()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(let[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e,...t){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));let n=new Map;for(let i of t){if(!this.originators.has(i.mementoOriginatorKey))throw new Error(`Originator [${i.mementoOriginatorKey}] has not been added to the HistoryManager.`);n.set(i.mementoOriginatorKey,i.createMemento())}this.history.push({label:e,mementos:n}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){let e=this.history[this.historyIndex];if(e){for(let t of e.mementos.keys()){let n=this.findPreviousMemento(t);if(n===e3)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,n)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){let e=this.history[this.historyIndex+1];if(e){for(let[t,n]of e.mementos.entries())this.restoreMemento(t,n);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):e3}restoreMemento(e,t){this.originators.get(e)?.restoreMemento(jp,jp,t)}debugEvent(...e){this.debug(...e,this.history.map((t,n)=>n===this.historyIndex?`** ${t.label} **`:t.label))}},jB=class WM{constructor(t){this.version=t.split("-")[0]}save(...t){let n={version:this.version};for(let i of Object.values(t))n[i.mementoOriginatorKey]=this.encode(i,i.createMemento());return n}restore(t,...n){if(typeof t!="object"){G.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){G.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){G.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(let i of n){let s=this.decode(i,t[i.mementoOriginatorKey]),r=[];if(!i.guardMemento(s,r)){let o=r.length>0?`

${r.join(`

`)}

`:"";G.warnOnce(`Could not restore [${i.mementoOriginatorKey}] data, value was invalid, ignoring.${o}`,s);return}i.restoreMemento(this.version,t.version,s)}}encode(t,n){try{return JSON.parse(JSON.stringify(n,WM.encodeTypes))}catch(i){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${i}].`,{cause:i})}}decode(t,n){if(n==null)return n;try{return JSON.parse(JSON.stringify(n),WM.decodeTypes)}catch(i){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${i}].`,{cause:i})}}static encodeTypes(t,n){return dd(this[t])?{__type:"date",value:this[t].toISOString()}:n}static decodeTypes(t,n){return yn(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):n}},zue=class{constructor(){this.caretaker=new jB(jp),this.state=new Map}setState(e,t){uc(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){let{caretaker:t,state:n}=this;if(!n.has(e.mementoOriginatorKey))return;let i=n.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:i},e)}},Hue=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-foreground-color: #464646;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-padding: 20px;--ag-charts-shadow-color: #00000080;--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #464646;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-input-background-color: #fff;--ag-charts-input-text-color: #464646;--ag-charts-crosshair-label-background-color: #fff;--ag-charts-crosshair-label-text-color: #464646;--ag-charts-spacing: 4px;--ag-charts-border-radius: 4px;--ag-charts-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-focus-shadow: 0 0 0 3px var(--ag-charts-accent-color);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-background-color: var(--ag-charts-background-color);--ag-charts-button-border-color: var(--ag-charts-border-color);--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-text-color: var(--ag-charts-text-color);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: solid 1px var(--ag-charts-border-color);--ag-charts-focus-border: solid 1px var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-chrome-text-color);background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{padding:3px 6px}.ag-charts-tooltip--arrow:before{content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-top:none;border-left:none;clip-path:polygon(0% 100%,100% 0%,100% 100%)}.ag-charts-tooltip--arrow:after{--tooltip-inner-size: calc(var(--tooltip-arrow-size) - 2px);content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-inner-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-inner-size);height:var(--tooltip-inner-size);border:inherit;border-color:transparent;background:inherit;clip-path:polygon(-10% 100%,100% -10%,100% 100%)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:8px}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;align-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:16px;align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-chrome-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-chrome-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);color:var(--ag-charts-chrome-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`,zo=class{constructor(){this.registeredListeners=new Map}addListener(e,t){let n={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(n):this.registeredListeners.set(e,[n]),()=>this.removeListener(n.symbol)}removeListener(e){for(let[t,n]of this.registeredListeners.entries()){let i=n.findIndex(s=>s.symbol===e);if(i>=0){n.splice(i,1),n.length===0&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(let n of this.getListenersByType(e))try{n.handler(...t)}catch(i){G.errorOnce(String(i))}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},Ka=class{constructor(){this.listeners=new zo,this.destroyFns=[]}addListener(e,t){return this.listeners.addListener(e,t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(e=>e())}},jue=class Hy{constructor(t,n,i){this.element=t,this.topTabGuard=n,this.bottomTabGuard=i,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,s=>this.onTab(s,!1)),this.initTabGuard(this.bottomTabGuard,s=>this.onTab(s,!0)),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",s=>this.onBlur(s),{capture:!0})}set tabIndex(t){this.guardTabIndex=t,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(let t of this.destroyFns)t();this.destroyFns.length=0}initTabGuard(t,n){let i=()=>n(t);t.addEventListener("focus",i),this.destroyFns.push(()=>t.removeEventListener("focus",i))}setGuardIndices(t){let n=t;ot(this.topTabGuard,"tabindex",n),ot(this.bottomTabGuard,"tabindex",n)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:t}){let{topTabGuard:n,bottomTabGuard:i}=this;this.hasFocus=!1,this.guardTabIndex!==0&&t!==n&&t!==i&&this.setGuardIndices(this.guardTabIndex)}onTab(t,n){if(this.guardTabIndex!==0){let i;t.tabIndex===0?(i=this.findExitTarget(!n),this.setGuardIndices(this.guardTabIndex)):i=this.findEnterTarget(n),i?.focus()}}static queryFocusable(t,n){let i=ft();return Array.from(t.querySelectorAll(n)).filter(s=>{if(s instanceof HTMLElement){let r=i.getComputedStyle(s);return r.display!=="none"&&r.visibility!=="none"}return!1})}findEnterTarget(t){let n=Hy.queryFocusable(this.element,'[tabindex="0"]'),i=t?n.length-1:0;return n[i]}findExitTarget(t){let n=Hy.queryFocusable(Lo(),"[tabindex]").filter(r=>r.tabIndex>0).sort((r,o)=>r.tabIndex-o.tabIndex),{before:i,after:s}=Hy.findBeforeAndAfter(n,this.guardTabIndex);return t?i:s}static findBeforeAndAfter(t,n){let i=0,s=t.length-1,r,o;for(;i<=s;){let a=Math.floor((i+s)/2),l=t[a].tabIndex;if(l===n){r=t[a-1]||void 0,o=t[a+1]||void 0;break}else l<n?(r=t[a],i=a+1):(o=t[a],s=a-1)}return{before:r,after:o}}};function Js(e,t,n,i,s){t.addEventListener(n,i);let r=()=>t.removeEventListener(n,i,s);return e.push(r),r}function WB(e,t,n){Js(e,t,"keydown",i=>{i.key==="Escape"&&n(i)})}function Wue(e,t,n){let i=Js(e,window,"mousedown",s=>{[0,2].includes(s.button)&&!UB(t,s)&&(n(),i())});return i}function Uue(e,t,n){let i=Js(e,window,"touchstart",s=>{Array.from(s.targetTouches).some(o=>!UB(t,o))&&(n(),i())});return i}function UB(e,t){if(t.target instanceof Element){let{x:n,y:i,width:s,height:r}=e.getBoundingClientRect(),{clientX:o,clientY:a}=t;return o>=n&&a>=i&&o<=n+s&&a<=i+r}return!1}function KC(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function UE(e,t,...n){return KC(e)&&(e.key===t||n.some(i=>e.key===i))}function t3(e,t,n,i){n&&Js(e,t,"keydown",s=>{UE(s,i)&&n.focus()})}function $ue(e,t,n,i,s,r){t3(e,t,s,r),t3(e,t,n,i),Js(e,t,"keydown",o=>{UE(o,i,r)&&o.preventDefault()})}var Ju={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function $B(e){let{orientation:t,buttons:n,wrapAround:i=!1,onEscape:s,onFocus:r,onBlur:o}=e,{nextKey:a,prevKey:l}=Ju[t],c=p=>{p.target&&"tabIndex"in p.target&&(n.forEach(g=>g.tabIndex=-1),p.target.tabIndex=0)},[u,d]=i?[n.length,n.length]:[0,1/0],h=[];for(let p=0;p<n.length;p++){let g=n[(u+p-1)%d],f=n[p],m=n[(u+p+1)%d];Js(h,f,"focus",c),r&&Js(h,f,"focus",r),o&&Js(h,f,"blur",o),s&&WB(h,f,s),$ue(h,f,m,a,g,l),f.tabIndex=p===0?0:-1}return h}var Yue=class{constructor(e,t,n){this.lastFocus=t,this.closeCallback=n,this.destroyFns=[],this.destroyFns.push(Wue(this.destroyFns,e,()=>this.close(!0))),this.destroyFns.push(Uue(this.destroyFns,e,()=>this.close(!0)))}close(e){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(e)}finishClosing(e){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0,ot(this.lastFocus,"aria-expanded",!1),e||this.lastFocus?.focus({preventScroll:!0}),this.lastFocus=void 0}};function YB(e){let{sourceEvent:t,orientation:n,menu:i,buttons:s,closeCallback:r,overrideFocusVisible:o,autoCloseOnBlur:a=!1}=e,{nextKey:l,prevKey:c}=Ju[n],u=YE(t);ot(u,"aria-expanded",!0);let d=new Yue(i,u,r),h=()=>d.close(),{destroyFns:p}=d;if(i.role="menu",i.ariaOrientation=n,p.push(...$B({orientation:n,buttons:s,onEscape:h,wrapAround:!0})),i.tabIndex=-1,WB(p,i,h),Js(p,i,"keydown",g=>{g.target===i&&(g.key===l||g.key===c)&&(g.preventDefault(),s[0]?.focus())}),a){let g=f=>{!s.includes(f.relatedTarget)&&h()};for(let f of s)Js(p,f,"blur",g)}return s[0]?.focus({preventScroll:!0}),o!==void 0&&(s.forEach(f=>f.setAttribute("data-focus-visible-override",o.toString())),Js(p,i,"keydown",()=>{s.forEach(f=>f.setAttribute("data-focus-visible-override","true"))},{once:!0})),d}function Kue(e,t){return n=>{if(e.ariaDisabled==="true")return n.preventDefault();t(n)}}function $E(e){return"button"in e?e.button===0:KC(e)&&(e.code==="Space"||e.key==="Enter")}function YE(e){if(e?.target instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function KB(e){let t=n=>{if(n.defaultPrevented)return;$C(n.target,"data-preventdefault",!0)&&UE(n,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&n.preventDefault()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}var que=class{constructor(e){this.callback=e,this.devicePixelRatio=ft("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=t=>{t.matches||(this.devicePixelRatio=ft("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){let e=ft("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);e?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},Zue=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([t,n])=>this.observe(t,n)),this.queuedObserveRequests=[],this.observeWindow()},typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(t=>{for(let{target:n,contentRect:{width:i,height:s}}of t){let r=this.elements.get(n);this.checkSize(r,n,i,s)}}));let e;this.pixelRatioObserver=new que(()=>{clearTimeout(e),e=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady=Lo("readyState")==="complete",this.documentReady?this.observeWindow():ft()?.addEventListener("load",this.onLoad)}destroy(){ft()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){let e=this.pixelRatioObserver?.pixelRatio??1;for(let[t,n]of this.elements)if(n.size!=null&&n.size.pixelRatio!==e){let{width:i,height:s}=n.size;n.size={width:i,height:s,pixelRatio:e},n.cb(n.size,t)}}checkSize(e,t,n,i){if(e&&(n!==e.size?.width||i!==e.size?.height)){let s=this.pixelRatioObserver?.pixelRatio??1;e.size={width:n,height:i,pixelRatio:s},e.cb(e.size,t)}}observe(e,t){if(!this.documentReady){this.queuedObserveRequests.push([e,t]);return}this.elements.has(e)?this.removeFromQueue(e):this.resizeObserver?.observe(e);let n={cb:t};this.elements.set(e,n)}unobserve(e){this.resizeObserver?.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}},ld=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),typeof t<"u"&&super.set(e,t),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},Xue='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>',Que=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area"],n3={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},Jue=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]);function ede(e,t){if(typeof IntersectionObserver>"u")return;let n=new IntersectionObserver(i=>{for(let s of i)s.target===e&&t(s.intersectionRatio)},{root:e});return n.observe(e),n}var qB={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return qB}};function i3(e,t){let n=Ne("div");return n.className="ag-charts-tab-guard",e.insertAdjacentElement(t,n),n}var ZB=class extends Ka{constructor(e,t){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new Zue,this.cursorState=new ld("default"),this.minWidth=0,this.minHeight=0;let n=Ne("div");n.innerHTML=Xue,this.element=n.children.item(0),this.styleRootElement=t,this.rootElements=Que.reduce((a,l)=>{let c=`ag-charts-${l}`,u=this.element.classList.contains(c)?this.element:this.element.querySelector(`.${c}`);if(!u)throw new Error(`AG Charts - unable to find DOM element ${c}`);return a[l]={element:u,children:new Map,listeners:[]},a},{});let i=!1;this.observer=ede(this.element,a=>{a===0&&!i&&this.listeners.dispatch("hidden",{type:"hidden"}),i=a===0}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",Hue),e&&this.setContainer(e),this.destroyFns.push(KB(this.element));let s=this.element.querySelector(".ag-charts-canvas-center");if(s==null)throw new Error("Error initializing tab guards");let r=i3(s,"beforebegin"),o=i3(s,"afterend");this.tabGuards=new jue(s,r,o)}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach(e=>{e.children.forEach(t=>t.remove()),e.element.remove()}),this.element.remove()}setSizeOptions(e=300,t=300,n,i){let{style:s}=this.element;s.width=`${n??e}px`,s.height=`${i??t}px`,this.minWidth=n??e,this.minHeight=i??t,this.updateContainerClassName()}updateContainerSize(){let{style:e}=this.rootElements["canvas-center"].element;e.visibility=this.containerSize==null?"hidden":"",this.containerSize?(e.width=`${this.containerSize.width??0}px`,e.height=`${this.containerSize.height??0}px`):(e.width="",e.height=""),this.updateContainerClassName()}setTabGuardIndex(e){this.tabGuards.tabIndex=e}setContainer(e){if(e===this.container)return;if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),!(this.getShadowDocumentRoot(e)!=null))for(let n of this.rootElements.styles.children.keys())this.removeChild("styles",n);this.container=e;for(let[n,i]of this.styles)this.addStyles(n,i);e.appendChild(this.element),this.sizeMonitor.observe(e,n=>{this.containerSize=n,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}setThemeClass(e){let t="ag-charts-theme-";this.element.classList.forEach(n=>{n.startsWith(t)&&n!==e&&this.element.classList.remove(n)}),this.element.classList.add(e)}setThemeParameters(e){let t={accentColor:"accent-color",axisColor:"axis-color",backgroundColor:"background-color",borderColor:"border-color",foregroundColor:"foreground-color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",gridLineColor:"grid-line-color",padding:"padding",subtleTextColor:"subtle-text-color",textColor:"text-color",chromeBackgroundColor:"chrome-background-color",chromeFontFamily:"chrome-font-family",chromeFontSize:"chrome-font-size",chromeFontWeight:"chrome-font-weight",chromeSubtleTextColor:"chrome-subtle-text-color",chromeTextColor:"chrome-text-color",inputBackgroundColor:"input-background-color",inputTextColor:"input-text-color",crosshairLabelBackgroundColor:"crosshair-label-background-color",crosshairLabelTextColor:"crosshair-label-text-color"},n=["fontSize","chromeFontSize"];for(let[i,s]of Object.entries(e)){let r=`${s}`;n.includes(i)&&(r=`${s}px`),this.element.style.setProperty(`--ag-charts-${t[i]}`,r)}}updateCanvasLabel(e){ot(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,n){this.getEventElement(this.element,e).addEventListener(e,t,n)}removeEventListener(e,t,n){this.getEventElement(this.element,e).removeEventListener(e,t,n)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){let e=ft(),t=new Z(0,0,e.innerWidth,e.innerHeight),n=this.getRawOverlayClientRect();return t.intersection(n)?.toDOMRect()??qB}getRawOverlayClientRect(){let e=this.element;for(;e!=null;){let r=e.computedStyleMap?.()?.get("overflow-y")?.toString();if(r==="auto"||r==="scroll")return Z.fromDOMRect(e.getBoundingClientRect());e=e.parentElement}let t=this.getShadowDocumentRoot();if(t!=null)return Z.fromDOMRect(t.getBoundingClientRect());let{innerWidth:n,innerHeight:i}=ft();return new Z(0,0,n,i)}getShadowDocumentRoot(e=this.container){let t=e?.ownerDocument?.body??Lo("body");for(;e!=null;){if(e===t)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}return this.container}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){let{children:t}=this.rootElements[e],n=[];for(let i of t.values())n.push(Z.fromDOMRect(i.getBoundingClientRect()));return Z.merge(n)}isManagedChildDOMElement(e,t,n){let{children:i}=this.rootElements[t],s=i?.get(n);return s!=null&&e.contains(s)}contains(e,t){return t==null?this.element.contains(e):this.rootElements[t].element.contains(e)}addStyles(e,t){let n="data-ag-charts";if(this.styles.set(e,t),this.container==null)return;let i=o=>o.getAttribute(n)===e,s=o=>{let a=new Set(["TITLE","META"]),l=!0,c;for(let d of o.children){if(l&&a.has(d.tagName)){c=d;continue}if(l=!1,i(d))return;d.hasAttribute(n)&&(c=d)}let u=Ne("style");return c!=null?o.insertBefore(u,c.nextSibling):o.prepend(u),u},r;this.styleRootElement?r=s(this.styleRootElement):this.getShadowDocumentRoot(this.container)!=null?r=this.addChild("styles",e):r=s(Lo("head")),!(r==null||i(r))&&(r.setAttribute(n,e),r.innerHTML=t)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e,t){this.cursorState.set(e,t),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(e,t,n,i){let{element:s,children:r,listeners:o}=this.rootElements[e];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(t))return r.get(t);let{childElementType:a="div"}=Jue.get(e)??{};if(n&&n.tagName.toLowerCase()!==a.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");let l=n??Ne(a);for(let[c,u,d]of o)l.addEventListener(c,u,d);if(r.set(t,l),i){let c=s.querySelector(i.query);if(c==null)throw new Error(`AG Charts - addChild query failed ${i.query}`);c.insertAdjacentElement(i.where,l)}else s?.appendChild(l);return l}removeChild(e,t){let{children:n}=this.rootElements[e];n&&(n.get(t)?.remove(),n.delete(t))}incrementDataCounter(e){let{dataset:t}=this.element;t[e]??(t[e]="0"),t[e]=String(Number(t[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}updateContainerClassName(){let{element:e,containerSize:t,minWidth:n,minHeight:i}=this;e.classList.toggle(n3.safeHorizontal,n>=(t?.width??1/0)),e.classList.toggle(n3.safeVertical,i>=(t?.height??1/0))}},tde=class extends zr{constructor(){super(Ne("div")),this.textElement=Ds("text"),this.textElement.role="presentation",this.svgElement=Ds("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){this.textElement.textContent=e;let n=this.textElement.getBBox?.();n&&this.svgElement.setAttribute("viewBox",`${n.x} ${n.y} ${n.width} ${n.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},fg=class extends zr{constructor(){super(Ne("button")),this.setEnabled(!0)}destructor(){}setEnabled(e){ot(this.elem,"aria-disabled",!e),Qs(this.elem,"pointer-events",e?void 0:"none")}addListener(e,t){return super.addListener(e,(n,i)=>{(e==="click"||e==="dblclick")&&this.isDisabled()||t(n,i)})}},nde=class extends zr{constructor(){super(Ne("div")),ot(this.elem,"role","group")}destructor(){}},XB=class extends zr{constructor(e,t){super(Ne("div")),this.focusedChildIndex=0,this.onChildFocus=(n,i)=>{let s=this.children[this.focusedChildIndex];this.focusedChildIndex=i.index,s?.setTabIndex(-1),i.setTabIndex(0)},this.onChildKeyDown=(n,i)=>{let s=this.orientation,[r,o]=s==="both"?[Ju.horizontal,Ju.vertical]:[Ju[s],void 0],a=-1;if(KC(n.sourceEvent)){let l=n.sourceEvent.key;l===r.nextKey||l===o?.nextKey?a=i.index+1:(l===r.prevKey||l===o?.prevKey)&&(a=i.index-1)}this.children[a]?.focus()},this.orientation=e,ot(this.elem,"role",t)}get orientation(){return $C(this.elem,"aria-orientation")??"both"}set orientation(e){ot(this.elem,"aria-orientation",e!=="both"?e:void 0)}focus(){this.children[this.focusedChildIndex]?.focus()}onChildAdded(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown),e.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}},ide=class extends XB{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(e=>e.getElement().parentElement.remove())}addChildToDOM(e,t){let n=Ne("div");ot(n,"role","listitem"),Qs(n,"position","absolute"),zr.setElementContainer(e,n),this.appendOrInsert(n,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(e){this.children.length===0&&(e=!0),super.setHidden(e)}},cd=class extends zr{constructor(e){super(e)}destructor(){}},sde=(()=>{let e=class xp extends zr{constructor(){super(Ne("input")),this._step=xp.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(n){this._step=n,this.getElement().step=n.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(n){if(n!==this._keyboardStep?.step&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),n!==void 0)){let i=()=>this.getElement().step=n.attributeValue,s=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:n,onKeyDown:i,onKeyUp:s,onBlur:s},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return $C(this.elem,"aria-orientation")??"both"}set orientation(n){ot(this.elem,"aria-orientation",n!=="both"?n:void 0),xp.registerDefaultPreventers(this,n)}destructor(){}clampValueRatio(n,i){let s=this.getValueRatio(),r=De(n,s,i);return r!==s&&this.setValueRatio(r),r}setValueRatio(n,i){let{divider:s}=this.step,r=Math.round(n*1e4)/s,{ariaValueText:o=fB(r/s)}=i??{},a=this.getElement();a.value=`${r}`,a.ariaValueText=o}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(n,i){i==="both"?n.removeListener("keydown",xp.onKeyDown):n.addListener("keydown",xp.onKeyDown)}static onKeyDown(n,i){let s=[],{orientation:r}=i;r==="horizontal"?s=["ArrowUp","ArrowDown"]:r==="vertical"&&(s=["ArrowLeft","ArrowRight"]),s.includes(n.sourceEvent.code)&&n.sourceEvent.preventDefault()}};return e.STEP_ONE={attributeValue:"1",divider:1},e.STEP_HUNDRETH={attributeValue:"0.01",divider:100},e})(),KE=sde,rde=class extends fg{constructor(){super(),ot(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){ot(this.elem,"aria-checked",e)}},qC=class extends XB{constructor(e="horizontal"){super(e,"toolbar")}destructor(){}};function Gu(e,t){return t.params?.type===e}function ode(e){if(e==="button")return new fg;if(e==="slider")return new KE;if(e==="toolbar")return new qC;if(e==="group")return new nde;if(e==="list")return new ide;if(e==="region")return new cd(Ne("div"));if(e==="text")return new tde;if(e==="listswitch")return new rde;throw Error("AG Charts - error allocating meta")}function s3(e){let t={params:e,result:void 0};return t.result=ode(t.params.type),t}var QB=class{constructor(e,t){this.localeManager=e,this.domManager=t,this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e())}addLocalisation(e){e(),this.destroyFns.push(this.localeManager.addListener("locale-changed",e))}createProxyContainer(e){let t=s3(e),{params:n,result:i}=t,s=i.getElement();return this.domManager.addChild("canvas-proxy",n.domManagerId,s),s.classList.add(...n.classList,"ag-charts-proxy-container"),s.role=n.type,"ariaOrientation"in n&&(s.ariaOrientation=n.ariaOrientation),Gu("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(n.ariaLabel.id,n.ariaLabel.params)}),i}createProxyElement(e){let t=s3(e);if(Gu("button",t)){let{params:n,result:i}=t,s=i.getElement();if(this.initInteract(n,i),typeof n.textContent=="string")s.textContent=n.textContent;else{let{textContent:r}=n;this.addLocalisation(()=>{s.textContent=this.localeManager.t(r.id,r.params)})}this.setParent(t.params,t.result)}if(Gu("slider",t)){let{params:n,result:i}=t,s=i.getElement();this.initInteract(n,i),s.type="range",s.role="presentation",s.style.margin="0px",this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(n.ariaLabel.id,n.ariaLabel.params)}),this.setParent(t.params,t.result)}if(Gu("text",t)){let{params:n,result:i}=t;this.initElement(n,i),this.setParent(t.params,t.result)}if(Gu("listswitch",t)){let{params:n,result:i}=t;this.initInteract(n,i),i.setTextContent(n.textContent),i.setChecked(n.ariaChecked),i.setAriaDescribedBy(n.ariaDescribedBy),this.setParent(t.params,t.result)}if(Gu("region",t)){let{params:n,result:i}=t,s=i.getElement();this.initInteract(n,i),s.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){let n=t.getElement();return ot(n,"id",e.id),Qs(n,"cursor",e.cursor),n.classList.toggle("ag-charts-proxy-elem",!0),n}initInteract(e,t){let{tabIndex:n,domIndex:i}=e,s=this.initElement(e,t);n!==void 0&&(s.tabIndex=n),i!==void 0&&(t.domIndex=i)}setParent(e,t){if("parent"in e)e.parent?.addChild(t);else{let n={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),n)}}},ade={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"},lde=/\$\{(\w+)}(?:\[(\w+)])?/gi,aM={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},cde=({defaultValue:e,variables:t})=>e?.replaceAll(lde,(n,i,s)=>{let r=t[i],o=s!=null?aM[s]:null;return s!=null&&o==null&&G.warnOnce(`Format style [${s}] is not supported`),o!=null?o.format(r):typeof r=="number"?aM.number.format(r):r instanceof Date?aM.datetime.format(r):String(r)}),ude=class extends zo{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.dispatch("locale-changed"))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.dispatch("locale-changed"))}t(e,t={}){let{localeText:n=ade,getLocaleText:i}=this,s=n[e];return i?.({key:e,defaultValue:s,variables:t})??cde({key:e,defaultValue:s,variables:t})??e}},qE=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;let{width:t,height:n,canvasElement:i,willReadFrequently:s=!1}=e;this.pixelRatio=e.pixelRatio??ft("devicePixelRatio")??1,this.element=i??Ne("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(n??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((n??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:s}),this.onEnabledChange(),this.resize(t??0,n??0,this.pixelRatio),W_(this.context)}drawImage(e,t=0,n=0){return e.drawImage(this.context.canvas,t,n)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,n){if(!(e>0&&t>0))return;let{element:i,context:s}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.setTransform(n,0,0,n,0,0),i.style.width=e+"px",i.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=n}clear(){j_(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};C([Ua(e=>e.onEnabledChange())],qE.prototype,"enabled",2);var dde=class{constructor(e){this.canvas=e,this.debug=ct.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,n){this.canvas.resize(e,t,n),this.layersMap.forEach(({canvas:i})=>i.resize(e,t,n))}addLayer(e){let{width:t,height:n,pixelRatio:i}=this.canvas,{name:s}=e,r=new U_({width:t,height:n,pixelRatio:i});return this.layersMap.set(r,{id:this.nextLayerId++,name:s,canvas:r}),this.debug("Scene.addLayer() - layers",this.layersMap),r}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(let e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}};function hde(e){for(let t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}function pde(){if(!("memory"in performance))return;let{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:n}=performance.memory,i=[];for(let s of[t,e,n])typeof s=="number"&&i.push(hde(s));return`Heap ${i.join(" / ")}`}function r3(e,t,n,i,s={},r=Z.zero){if(!ct.check("scene:stats","scene:stats:verbose"))return;let{layersRendered:o=0,layersSkipped:a=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:u=0,opsSkipped:d=0}=i??{},h=performance.now(),T=t,{start:p}=T,g=He(T,["start"]),f=Object.entries(g).map(([P,O])=>o3(P,O)).filter(P=>P!=null).join(" + "),m=Object.entries(s).map(([P,O])=>`${P}: ${JSON.stringify(O)}`).join(" ; "),v=ct.check("scene:stats:verbose"),y=pde(),w=[`${o3("\u23F1\uFE0F",p,h)} (${f})`,`${m}`,`Layers: ${v?lM(o,a):e.size}`,v?`Nodes: ${lM(l,c)}`:null,v?`Ops: ${lM(u,d)}`:null,v&&y?y:null].filter(xi),x=new IE(P=>n.measureText(P)),D=new Map(w.map(P=>[P,x.measureLines(P)])),M=Math.max(...Array.from(D.values(),P=>P.width)),E=Cde(D.values(),P=>P.height),A=2+r.x;n.save(),n.fillStyle="white",n.fillRect(A,0,M,E),n.fillStyle="black";let I=0;for(let[P,O]of D.entries())I+=O.height,n.fillText(P,A,I);n.restore()}function gde(e){let t=qy(ft("agChartsSceneDebug")),n=[];for(let i of t)i==="layout"?n.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):n.push(i);e.debugNodeSearch=n}function fde(e,t){e.save();for(let[n,i]of Object.entries(t)){let s=Pt.toCanvas(i);if(!s){G.log(`Scene.render() - no bbox for debugged node [${n}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(s.x,s.y,s.width,s.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(n,s.x,s.y,s.width),e.fillText(n,s.x,s.y,s.width)}e.restore()}var mde=new Set,vde=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function yde(e){let t=He(e,[]);for(let n of Object.keys(t))vde.has(n)||typeof t[n]!="number"&&typeof t[n]!="string"&&typeof t[n]!="boolean"&&(mde.add(n),delete t[n]);return t}function jy(e,t){if(!ct.check(!0,"scene"))return{};let n=0;return S({node:t==="json"?yde(e):e,name:e.name??e.id,dirty:e.dirty},Array.from(e.children(),i=>jy(i,t)).reduce((i,s)=>{let{name:r}=s,{node:{visible:o,opacity:a,zIndex:l,translationX:c,translationY:u,rotation:d,scalingX:h,scalingY:p},node:g}=s;(!o||a<=0)&&(r=`(${r})`),ye.is(g)&&g.renderToOffscreenCanvas&&(r=`*${r}*`);let f=Array.isArray(l)?`(${l.join(", ")})`:l,m=[`${(n++).toString().padStart(3,"0")}|`,`${r??"<unknown>"}`,`z: ${f}`,c&&`x: ${c}`,u&&`y: ${u}`,d&&`r: ${d}`,h!=null&&h!==1&&`sx: ${h}`,p!=null&&p!==1&&`sy: ${p}`].filter(w=>!!w).join(" "),v=m,y=1;for(;i[v]!=null&&y<100;)v=`${m} (${y++})`;return i[v]=s,i},{}))}function JB(e){if(!e.dirty)return{dirtyTree:{},paths:[]};let t=Array.from(e.children(),s=>JB(s)).filter(s=>s.paths.length>0),n=ye.is(e)?e.name??e.id:e.id,i=t.length?t.flatMap(s=>s.paths).map(s=>`${n}.${s}`):[n];return{dirtyTree:S({name:n,node:e,dirty:e.dirty},t.map(s=>s.dirtyTree).filter(s=>s.dirty!=null).reduce((s,r)=>(s[r.name??"<unknown>"]=r,s),{})),paths:i}}function lM(e,t){let n=e+t;return`${e} / ${n} (${Math.round(100*e/n)}%)`}function o3(e,t,n){let i=n!=null?n-t:t;return`${e}: ${Math.round(i*100)/100}ms`}function Cde(e,t){let n=0;for(let i of e)n+=t(i);return n}var ZE=(()=>{let e=class{constructor(t){this.debug=ct.create(!0,"scene"),this.id=As(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new qE(t),this.layersManager=new dde(this.canvas)}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(t){let{element:n}=this.canvas;return n.parentElement?.removeChild(n),t.appendChild(n),this}setRoot(t){return this.root===t?this:(this.isDirty=!0,this.root?._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager)),this)}clear(){this.canvas.clear()}attachNode(t){return this.appendChild(t),()=>this.removeChild(t)}appendChild(t){return this.root?.appendChild(t),this}removeChild(t){return this.root?.removeChild(t),this}download(t,n){c_(this.canvas.toDataURL(n),t?.trim()??"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,n,i){return t=Math.round(t),n=Math.round(n),i??(i=this.pixelRatio),t>0&&n>0&&(t!==this.width||n!==this.height||i!==this.pixelRatio)?(this.pendingSize=[t,n,i],this.isDirty=!0,!0):!1}render(t){let{debugSplitTimes:n={start:performance.now()},extraDebugStats:i,seriesRect:s}=t??{},{canvas:r,canvas:{context:o}={},root:a,pendingSize:l,width:c,height:u,pixelRatio:d}=this;if(!o)return;let h=performance.now();if(l&&(this.layersManager.resize(...l),this.pendingSize=null),a&&!a.visible){this.isDirty=!1;return}if(a?.dirty===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:jy(a,"console")}),r3(this.layersManager,n,o,void 0,i,s);return}let p={ctx:o,width:c,height:u,devicePixelRatio:d,debugNodes:{}};ct.check("scene:stats:verbose")&&(p.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),gde(p);let g=!1;if(a?.dirty!==!1&&(g=!0,r.clear()),a&&ct.check("scene:dirtyTree")){let{dirtyTree:f,paths:m}=JB(a);ct.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:f,paths:m})}if(a&&g){if(a.visible&&a.preRender(p),this.debug.check()){let f=jy(a,"console");this.debug("Scene.render() - before",{canvasCleared:g,tree:f})}a.visible&&(o.save(),a.render(p),o.restore())}n["\u270D\uFE0F"]=performance.now()-h,o.verifyDepthZero?.(),this.isDirty=!1,r3(this.layersManager,n,o,p.stats,i,s),fde(o,p.debugNodes),a&&this.debug.check()&&this.debug("Scene.render() - after",{tree:jy(a,"console"),canvasCleared:g})}toSVG(){let{root:t,width:n,height:i}=this;if(t!=null)return Ha.toSVG(t,n,i)}strip(){let{context:t,pixelRatio:n}=this.canvas;t.setTransform(n,0,0,n,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};return e.className="Scene",e})(),wde=class{constructor(){this.cache=new WeakMap}call(e,...t){let n,i=this.cache.get(e);try{n=JSON.stringify(t)}catch{return this.invoke(e,t,i)}return i==null&&(i=new Map,this.cache.set(e,i)),i.has(n)?i.get(n):this.invoke(e,t,i,n)}invoke(e,t,n,i){try{let s=e(...t);return n&&i!=null&&n.set(i,s),s}catch(s){G.warnOnce("User callback errored, ignoring",s);return}}invalidateCache(){this.cache=new WeakMap}},bde=class extends Ka{constructor(e){super(),this.annotationRoot=e,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return e==null||mt(e)}restoreMemento(e,t,n){this.annotations=this.cleanData(n??[]).map(i=>{let s=this.getAnnotationTypeStyles(i.type);return ke(i,s)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}attachNode(e){return this.annotationRoot.append(e),()=>(this.annotationRoot?.removeChild(e),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){return this.styles?.[e]}cleanData(e){for(let t of e)"textAlign"in t&&delete t.textAlign;return e}},Sde=class{constructor(e){this.sceneRoot=e,this.axes=new Map,this.axisGridGroup=new ye({name:"Axes-Grids",zIndex:1}),this.axisGroup=new ye({name:"Axes",zIndex:2}),this.axisLabelGroup=new ye({name:"Axes-Labels",zIndex:13}),this.axisCrosslineRangeGroup=new ye({name:"Axes-Crosslines-Range",zIndex:4}),this.axisCrosslineLineGroup=new ye({name:"Axes-Crosslines-Line",zIndex:8}),this.axisCrosslineLabelGroup=new ye({name:"Axes-Crosslines-Label",zIndex:13}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){let n={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(let i of e)t.includes(i)||(i.detachAxis(n),i.destroy());for(let i of t)e?.includes(i)||i.attachAxis(n);this.axes.clear();for(let i of t){let s=i.createAxisContext();this.axes.has(s.direction)?this.axes.get(s.direction)?.push(s):this.axes.set(s.direction,[s])}}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},ZC=class extends zo{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=ct.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){typeof e=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(e){return D2(t=>this.fetch(t).catch(n=>G.error("callback failed",n)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return D2((t,n)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:n})},e,{leading:!0,trailing:!0})}async fetch(e){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");let t=performance.now(),n=this.requestCounter++;this.debug(`DataService - requesting | ${n}`),this.freshRequests.push(n);let i;try{i=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-t}ms | ${n}`)}catch(r){this.debug(`DataService - request failed | ${n}`),G.errorOnce(`DataService - request failed | [${r}]`)}this.isLoadingInitialData=!1;let s=this.freshRequests.findIndex(r=>r===n);if(s===-1||this.dispatchOnlyLatest&&s!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${n}`);return}this.freshRequests=this.freshRequests.slice(s+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(i)?this.throttledDispatch(n,i):this.dispatch("data-error")}};C([Ei({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],ZC.prototype,"dispatchThrottle",2);C([Ei({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],ZC.prototype,"requestThrottle",2);var a3=class{constructor(e){this.maxAnimationTime=e,this.debug=ct.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Wu.map(t=>[t,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(Wu[this.currentPhase])??[]}checkOverlappingId(e){e!=null&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){if(e.isComplete)return;if(Wu.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),this.phases.get(e.phase)?.push(e)}removeAnimation(e){this.controllers.delete(e.id);let t=this.phases.get(e.phase),n=t?.indexOf(e);n!=null&&n>=0&&t?.splice(n,1)}progress(e){if(!this.isReady)return;let t=e===0?.01:e,n=()=>{let c=Wu[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:Bp[c]}},{phase:i,phaseControllers:s,phaseMeta:r}=n(),o=()=>Wu[this.currentPhase]==null,a=()=>{for({phase:i,phaseControllers:s,phaseMeta:r}=n();!o()&&s.length===0;)this.currentPhase++,{phase:i,phaseControllers:s,phaseMeta:r}=n(),this.debug(`AnimationBatch - phase changing to ${i}`,{unusedTime:t},s)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${i} with ${s?.length} of ${l}`);do{let c=t,u=r.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0,d=0;for(let h of s)u?h.stop():t=Math.min(h.update(c),t),h.isComplete&&(d++,this.removeAnimation(h));this.animationTimeConsumed+=c-t,this.debug(`AnimationBatch - updated ${s.length} controllers; ${d} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(let[,t]of this.controllers)if(t.duration>0&&Bp[t.phase].skipIfNoEarlierAnimations!==!0){e=!1;break}if(!e)for(let[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(e=!0){if(this.skipAnimations===!1&&e===!0){for(let t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(let e of this.controllers.values())e.play()}stop(){for(let e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){G.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(e){if(e!=null&&this.controllers.has(e)){let t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(let t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach(e=>e()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},e4=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))(e4||{}),t4=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function l3(e){return e==null?!0:!isNaN(e)&&e>=0&&e<=2}var n4=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new a3(this.defaultDuration*1.5),this.debug=ct.create(!0,"animation"),this.events=new aE,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){let t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){this.failsafeOnError(a);return}let{id:n}=e;n==null&&(n=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);let i=this.isSkipped()||e.phase==="none";i&&this.debug("AnimationManager - skipping animation");let{delay:s,duration:r}=e;if(!l3(s))throw new Error(`Animation delay of ${s} is unsupported (${n})`);if(!l3(r))throw new Error(`Animation duration of ${r} is unsupported (${n})`);let o=new b_(R(S({},e),{id:n,skip:i,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(o,this.defaultDuration))return this.batch.addAnimation(o),o}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=ft().requestAnimationFrame(t=>{e(t).catch(n=>G.error(n))})}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let e,t=async n=>{let i=()=>{let s=n-(e??n);e=n,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:s}),this.interactionManager.pushState(2);try{this.batch.progress(s)}catch(r){this.failsafeOnError(r)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:s})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(i):await this.chartUpdateMutex.acquire(i),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){G.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new a3(this.defaultDuration*1.5),e===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},i4=class extends Ka{seriesEvent(e){this.listeners.dispatch(e,{type:e})}seriesKeyNavZoom(e,t){let n={type:"series-keynav-zoom",delta:e,widgetEvent:t};this.listeners.dispatch("series-keynav-zoom",n)}legendItemClick(e,t,n,i,s){let r={type:"legend-item-click",legendType:e,series:t,itemId:n,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",r)}legendItemDoubleClick(e,t,n,i,s,r){let o={type:"legend-item-double-click",legendType:e,series:t,itemId:n,enabled:i,legendItemName:r,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",o)}},s4=class{constructor(){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new zo}static check(e,t){return t.type===e}static checkCallback(e,t,n){return e===t}dispatchContext(e,t,n,i){let{sourceEvent:s}=t,r=i?.x??t.canvasX,o=i?.y??t.canvasY;s.stopPropagation();let a={type:e,x:r,y:o,context:n,sourceEvent:s};this.listeners.dispatch("",a)}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter(t=>t.id!=null&&!this.hiddenActions.has(t.id)&&["all",e].includes(t.type))}registerDefaultAction(e){let t=e.id!=null&&!this.defaultActions.some(({id:n})=>n===e.id);return t&&this.defaultActions.push(e),()=>{let n=t?this.defaultActions.findIndex(({id:i})=>i===e.id):-1;n!==-1&&this.defaultActions.splice(n,1)}}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}showAction(e){this.hiddenActions.add(e)}hideAction(e){this.hiddenActions.delete(e)}isDisabled(e){return this.disabledActions.has(e)}},r4=class extends Ka{constructor(){super(...arguments),this.highlightStates=new ld}updateHighlight(e,t){let{activeHighlight:n}=this;this.highlightStates.set(e,t),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,n)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:n,callerId:e})}getActiveHighlight(){return this.activeHighlight}isEqual(e,t){return e===t||e!=null&&t!=null&&e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}};function c3(e,t){if(e==null||t.length===0)return[!1,!1];let n=e.valueOf(),i=t[0],s=t[t.length-1];if(typeof i=="string")return[n===i,n===s];let r=i.valueOf(),o=s.valueOf();return r>o&&([r,o]=[o,r]),[n===r,n===o]}function Va(e,t,n,i,s){let{xValue:r,yValue:o}=e,[a,l]=c3(o,s),[c,u]=c3(r,i);return{datum:e,xKey:t,yKey:n,xValue:r,yValue:o,first:c,last:u,min:a,max:l}}function o4(e,[t,n],i){let s=s_(0,e-1,o=>{let a=i(o)?.[1]??NaN;return!Number.isFinite(a)||a>t})??0,r=i_(0,e-1,o=>{let a=i(o)?.[0]??NaN;return!Number.isFinite(a)||a<n})??e-1;return r=Math.min(r+1,e),[s,r]}function XE(e,t){let n=t.yBar?.upperPoint??t.midPoint??e.datumMidPoint?.(t);if(n){let{x:i,y:s}=Pt.toCanvasPoint(e.contentGroup,n.x,n.y);return{canvasX:Math.round(i),canvasY:Math.round(s)}}}function a4(e,t,n,i,s){let r=-1,o=0,a=0,l=!1;for(;o<i&&r<=t-e;){r+=1;let c=n+a;if(l||(a*=-1),a>=0&&(a+=1),l&&a<0&&(a-=1),c<e||c>t){l=!0;continue}s(c)&&(o+=1)}return o}var aC=class{constructor(e,t){this.domManager=e,this.tooltip=t,this.stateTracker=new ld,this.suppressState=new ld(!1),this.appliedState=null,t.setup(e),e.addListener("hidden",()=>this.tooltip.hide())}updateTooltip(e,t,n){this.tooltip.enabled&&(n??(n=this.stateTracker.get(e)?.content),this.stateTracker.set(e,{content:n,meta:t}),this.applyStates())}removeTooltip(e){this.tooltip.enabled&&(this.stateTracker.delete(e),this.applyStates())}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){let e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):null;if(this.suppressState.stateValue()||t?.meta==null||t?.content==null){this.appliedState=null,this.tooltip.hide();return}let n=this.domManager.getBoundingClientRect(),i=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():n;if(this.appliedState?.content===t?.content){let s=this.tooltip.isVisible();this.tooltip.show(i,n,t?.meta,null,s)}else this.tooltip.show(i,n,t?.meta,t?.content);this.appliedState=t}static makeTooltipMeta(e,t,n){let{canvasX:i,canvasY:s}=e,r=t.properties.tooltip,o={canvasX:i,canvasY:s,enableInteraction:r.interaction?.enabled??!1,lastPointerEvent:{type:e.type,canvasX:i,canvasY:s},showArrow:r.showArrow,position:{type:r.position.type,xOffset:r.position.xOffset,yOffset:r.position.yOffset}},a=XE(t,n);return(r.position.type==="node"||r.position.type==="sparkline")&&a?R(S({},o),{canvasX:a.canvasX,canvasY:a.canvasY}):o}isEnteringInteractiveTooltip(e){let{tooltip:t}=this,n=e.sourceEvent.relatedTarget;return t.interactive&&t.enabled&&t.isVisible()&&t.contains(n)}},u3=3,xde=505;function cM(e,t,n){let{offsetX:i,offsetY:s,clientX:r,clientY:o,currentX:a,currentY:l,sourceEvent:c}=n;return{type:t,device:e,offsetX:i,offsetY:s,clientX:r,clientY:o,currentX:a,currentY:l,sourceEvent:c}}function d3(e,t){let n=e*e+t*t,i=u3*u3;return n>=i}var l4=class{constructor(e){this.destroyFns=[],this.listeners=new zo,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.destroyFns.push(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.destroyFns.forEach(e=>e()),this.listeners.destroy()}addListener(e,t){return this.listeners.addListener(e,t)}dispatch(e){this.listeners.dispatch(e.type,e)}onTouchStart(e){let{clientX:t,clientY:n}=e.sourceEvent.targetTouches.item(0)??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=t,this.touch.clientY=n}onTouchMove(e){let{clientX:t,clientY:n}=e.sourceEvent.targetTouches.item(0)??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-t),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-n),this.touch.clientX=t,this.touch.clientY=n}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.dispatch(e)}onDblClick(e){this.dispatch(S({device:"mouse"},e))}onDragStart(e){this.dragStartEvent=e}onDragMove(e){this.dragStartEvent!=null&&d3(e.originDeltaX,e.originDeltaY)&&(this.dispatch(this.dragStartEvent),this.dispatch(R(S({},this.dragStartEvent),{type:"drag-move"})),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.dispatch(e)}onDragEnd(e){if(this.isDragging){this.dispatch(e),this.isDragging=!1;return}if(e.device==="mouse"){let t=cM("mouse","click",e);this.dispatch(t)}else if(e.sourceEvent.type==="touchend"){if(d3(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;let t=cM("touch","click",e);this.dispatch(t);let n=Date.now();if(this.lastClickTime!==void 0&&n-this.lastClickTime<=xde){let i=cM(e.device,"dblclick",e);this.dispatch(i),this.lastClickTime=void 0}else this.lastClickTime=n}}},uM=class extends cd{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},Dde=class{constructor(e){this.seriesWidget=new uM(e.getParent("series-area")),this.chartWidget=new uM(e.getParent("canvas-proxy")),this.containerWidget=new uM(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),this.seriesDragInterpreter=new l4(this.seriesWidget)}destroy(){this.seriesDragInterpreter.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}},UM={bottomCenter:Rde,center:Ade,clone:Pde,collides:Fde,end:Ede,from:Nde,height:kde,round:Lde,start:Mde,topCenter:Ide,origin:Ode,width:Tde};function Mde(e){return{x:e.x1,y:e.y1}}function Ede(e){return{x:e.x2,y:e.y2}}function Ide(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}}function Ade(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function Rde(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}}function Tde(e){return Math.abs(e.x2-e.x1)}function kde(e){return Math.abs(e.y2-e.y1)}function Lde(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}}function Pde(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}function Fde(e,t){let n=h3(e),i=h3(t);return n.x1<=i.x2&&n.x2>=i.x1&&n.y1<=i.y2&&n.y2>=i.y1}function h3(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function Nde(e,t,n,i){if(typeof e=="number")return{x1:e,y1:t,x2:n,y2:i};if("width"in e)return{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height};throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${n}] [${i}]`)}function Ode(){return{x1:0,y1:0,x2:0,y2:0}}function Ay(e,t,n,i,s){return t+(i-t)*((s-e)/(n-e))}function p3(e,t,n,i,s){return e+(s-t)*((n-e)/(i-t))}function g3(e,t,n){return[p3(e,n.min,t,n.max,0),p3(e,n.min,t,n.max,1)]}function _de(e,t,n){let[i,s]=g3(e.x1,e.x2,t),[r,o]=g3(e.y1,e.y2,n);return{x1:i,x2:s,y1:r,y2:o}}function f3(e,t,n,i,s,r){if(n<=s&&r<=i)return n;let o=s-n,a=r-i,l=Math.abs(o)<Math.abs(a)?o:a;return De(e,n+l,t)}function Bde(e,t,n){let{x:i={min:0,max:1},y:s={min:0,max:1}}=t,r=UM.from(n),o=UM.from(e),a=_de(o,i,s),l=f3(a.x1,a.x2,o.x1,o.x2,r.x1,r.x2),c=f3(a.y1,a.y2,o.y1,o.y2,r.y1,r.y2);return{x:{min:Ay(o.x1,i.min,o.x2,i.max,l),max:Ay(o.x1,i.min,o.x2,i.max,l+e.width)},y:{min:Ay(o.y1,s.min,o.y2,s.max,c),max:Ay(o.y1,s.min,o.y2,s.max,c+e.height)}}}var Vde=["rangeX","rangeY","ratioX","ratioY","autoScaledAxes"],Gde=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},m3=e=>jn((t,n)=>!Xe.is(e?.scale)&&!Fr.is(e?.scale)||t==null||n.end==null?!0:t<=n.end,"to be less than end"),c4=class extends Ka{constructor(e,t){super(),this.fireChartEvent=e,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new ld(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new Gde,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.destroyFns.push(t.addListener("layout:complete",()=>{let{pendingMemento:n}=this,i=!this.didLayoutAxes;this.didLayoutAxes=!0,n?this.restoreMemento(n.version,n.mementoVersion,n.memento):i&&this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(e==null)return!0;if(!yn(e))return!1;for(let o of Object.keys(e))if(!Vde.includes(o))return!1;let n=this.getPrimaryAxis("x"),i=this.getPrimaryAxis("y"),s={rangeX:{start:wy(rc(Do,by),m3(n)),end:rc(Do,by)},rangeY:{start:wy(rc(Do,by),m3(i)),end:rc(Do,by)},ratioX:{start:wy(Sy,I2("end")),end:Sy},ratioY:{start:wy(Sy,I2("end")),end:Sy},autoScaledAxes:AM(Nae("y"))},r=SC(e,s);return r.errors.length>0?(t.push(...r.errors.map(o=>o.message)),!1):!0}restoreMemento(e,t,n){let{independentAxes:i}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:e,mementoVersion:t,memento:n};return}this.pendingMemento=void 0;let s=this.getDefinedZoom();if(n?.rangeX?s.x=this.rangeToRatio(n.rangeX,"x")??{min:0,max:1}:n?.ratioX?s.x={min:n.ratioX.start??0,max:n.ratioX.end??1}:s.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let a=n?.autoScaledAxes?.includes("y");n?.rangeY?(s.y=this.rangeToRatio(n.rangeY,"y")??{min:0,max:1},a??(a=!1)):n?.ratioY?(s.y={min:n.ratioY.start??0,max:n.ratioY.end??1},a??(a=!1)):(s.y={min:0,max:1},a??(a=!0)),s.autoScaleYAxis=a}if(this.lastRestoredState=s,i!==!0){this.updateZoom("zoom-manager",s);return}let r=this.getPrimaryAxis("x"),o=this.getPrimaryAxis("y");for(let a of[r,o])a&&this.updateAxisZoom("zoom-manager",a.id,s[a.direction])}updateAxes(e){this.axes=e;let t=new Map(e.map(n=>[n.id,this.axisZoomManagers.get(n.id)]));this.axisZoomManagers.clear();for(let n of e)this.axisZoomManagers.set(n.id,t.get(n.id)??new zde(n));this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(e=!0){this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t}setNavigatorEnabled(e=!0){this.navigatorModule=e}setZoomModuleEnabled(e=!0){this.zoomModule=e}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(t?.x&&(t.x.min<0||t.x.max>1)&&(G.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${t.x.min}, max: ${t.x.max} }], expecting a ratio of 0 to 1, ignoring.`),t.x=void 0),t?.y&&(t.y.min<0||t.y.max>1)&&(G.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${t.y.min}, max: ${t.y.max} }], expecting a ratio of 0 to 1, ignoring.`),t.y=void 0),this.axisZoomManagers.size===0){let i=this.state.stateId();(i==="initial"||i===e)&&this.state.set(e,t);return}this.state.set(e,t);let n=t?.autoScaleYAxis;n!=null&&(this.autoScaleYAxis.manuallyAdjusted=!n),this.axisZoomManagers.forEach(i=>{i.updateZoom(e,t?.[i.getDirection()])}),this.applyChanges(e)}updateAxisZoom(e,t,n){this.axisZoomManagers.get(t)?.updateZoom(e,n),this.applyChanges(e)}resetZoom(e){this.autoScaleYAxis.manuallyAdjusted=!1;let t=this.getRestoredZoom();this.updateZoom(e,{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1},autoScaleYAxis:t?.autoScaleYAxis??!0})}resetAxisZoom(e,t){let i=this.axisZoomManagers.get(t)?.getDirection();if(i==null)return;let s=this.getRestoredZoom();if(i==="y"){let r=s?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!r}this.updateAxisZoom(e,t,s?.[i]??{min:0,max:1})}setAxisManuallyAdjusted(e,t){this.axisZoomManagers.get(t)?.getDirection()==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,n){let i=this.getPrimaryAxis(t);i&&this.updateAxisZoom(e,i.id,n)}panToBBox(e,t,n){if(!this.isZoomEnabled())return!1;let i=this.getZoom();if(i===void 0||!i.x&&!i.y)return!1;if(!(t.width>0&&t.height>0&&Math.abs(n.width)<=Math.abs(t.width)&&Math.abs(n.height)<=Math.abs(t.height)))return G.warnOnce("cannot pan to target BBox - chart too small?"),!1;let r=Bde(t,i,n);return this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",r.x),this.updatePrimaryAxisZoom(e,"y",r.y)):this.updateZoom(e,r),!0}fireZoomPanStartEvent(e){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:e})}extendToEnd(e,t,n){return this.extendWith(e,t,i=>Number(i)-n)}extendWith(e,t,n){let i=this.getPrimaryAxis(t);if(!i)return;let s=this.getDomainExtents(i);if(!s)return;let[,r]=s,o=n(r),a=this.rangeToRatio({start:o,end:r},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,n){let i=this.getPrimaryAxis(t);if(!i)return;let s=this.getDomainExtents(i);if(!s)return;let[r,o]=s;[r,o]=n(r,o);let a=this.rangeToRatio({start:r,end:o},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;if(this.axisZoomManagers.forEach(n=>{n.getDirection()==="x"?e??(e=n.getZoom()):n.getDirection()==="y"&&(t??(t=n.getZoom()))}),e||t)return{x:e,y:t}}getAxisZoom(e){return this.axisZoomManagers.get(e)?.getZoom()??{min:0,max:1}}getAxisZooms(){let e={};for(let[t,n]of this.axisZoomManagers.entries())e[t]={direction:n.getDirection(),zoom:n.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){return this.getPrimaryAxis(e)?.id}isVisibleItemsCountAtLeast(e,t){let n=this.getPrimaryAxis("x"),i=this.getPrimaryAxis("y"),s=new Set,r=0,o=[e.x.min,e.x.max],a=[e.y.min,e.y.max];for(let l of n?.boundSeries??[]){s.add(l.id);let c=t-(r??0),u=l.getVisibleItems(o,a,c);if(r+=u,r>=t)return!0}for(let l of i?.boundSeries??[]){if(s.has(l.id))continue;let c=t-(r??0),u=l.getVisibleItems(o,a,c);if(r+=u,r>=t)return!0}return s.size===0}getMementoRanges(){let e=this.getDefinedZoom(),t;return this.autoScaleYAxis.enabled&&(t=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max},autoScaledAxes:t}}autoScaleYZoom(e,t=!0){if(!this.isZoomEnabled())return;let{independentAxes:n,autoScaleYAxis:i}=this,s=this.getZoom();if(s?.x==null||!i.enabled||i.manuallyAdjusted)return;let{padding:r}=i,o;if(s.x?.min===0&&s.x?.max===1?o={min:0,max:1}:n?o=this.primaryAxisZoom("y",s.x,{padding:r}):o=this.combinedAxisZoom("y",s.x,{padding:r}),o!=null){if(n){let a=this.getPrimaryAxis("y");(a==null?void 0:this.axisZoomManagers.get(a.id))?.updateZoom("zoom-manager",o)}else for(let a of this.axisZoomManagers.values())a.getDirection()==="y"&&a.updateZoom("zoom-manager",o);t&&this.applyChanges(e)}}applyChanges(e){if(this.autoScaleYZoom(e,!1),!Array.from(this.axisZoomManagers.values(),i=>i.applyChanges()).includes(!0))return;let n={};for(let[i,s]of this.axisZoomManagers.entries())n[i]=s.getZoom();this.listeners.dispatch("zoom-change",R(S({type:"zoom-change"},this.getZoom()),{axes:n,callerId:e})),this.fireChartEvent(S({type:"zoom"},this.getMementoRanges()))}getRangeDirection(e,t){let n=this.getPrimaryAxis(t);if(!n||!Xe.is(n.scale)&&!Fr.is(n.scale))return;let i=this.getDomainPixelExtents(n);if(!i)return;let[s,r]=i,o,a;return s<=r?(o=n.scale.invert(0),a=n.scale.invert(s+(r-s)*e.max)):(o=n.scale.invert(s-(s-r)*e.min),a=n.scale.invert(0)),{start:o,end:a}}rangeToRatio(e,t){let n=this.getPrimaryAxis(t);if(!n)return;let i=this.getDomainPixelExtents(n);if(!i)return;let[s,r]=i,o=e.start==null?s:n.scale.convert?.(e.start),a=e.end==null?r:n.scale.convert?.(e.end);if(!We(o)||!We(a))return;let[l,c]=[Math.min(s,r),Math.max(s,r)];if(o<l||o>c){G.warnOnce(`Invalid range start [${e.start}], expecting a value between [${n.scale.invert?.(s)}] and [${n.scale.invert?.(r)}], ignoring.`);return}if(a<l||a>c){G.warnOnce(`Invalid range end [${e.end}], expecting a value between [${n.scale.invert?.(s)}] and [${n.scale.invert?.(r)}], ignoring.`);return}o=Math.min(c,Math.max(l,o)),a=Math.min(c,Math.max(l,a));let u=r-s,d=Math.abs((o-s)/u),h=Math.abs((a-s)/u);return{min:d,max:h}}getPrimaryAxis(e){return this.axes?.find(t=>t.direction===e)}getDomainExtents(e){let{domain:t}=e.scale,n=t.at(0),i=t.at(-1);if(!(n==null||i==null))return[n,i]}getDomainPixelExtents(e){let{domain:t}=e.scale,n=e.scale.convert?.(t.at(0)),i=e.scale.convert?.(t.at(-1));if(!(!We(n)||!We(i)))return[n,i]}getDefinedZoom(){let e=this.getZoom();return{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}}}zoomBounds(e,t,n,i){let s=e.scale,r=s.range;s.range=[0,1];let o=t.scale,a=o.range;o.range=[0,1];let l=1,c=!1,u=0,d=!1;for(let g of t.boundSeries){let{connectsToYAxis:f}=g,m=g.getRange("y",[n.min,n.max]);for(let v of m){let y=o.convert(v);Number.isFinite(y)&&(y<l&&(l=y,c=!f||v<0),y>u&&(u=y,d=!f||v>0))}}if(We(t.min)&&(l=0),We(t.max)&&(u=1),s.range=r,o.range=a,l>=u)return;let h=(c?i:0)+(d?i:0),p=Math.min((u-l)*(1+h),1);if(!(p<=0)){if(c&&d){let g=(u+l)/2;l=g-p/2,u=g+p/2}else!c&&d?u=l+p:c&&!d&&(l=u-p);return l<0?(u+=-l,l=0):u>1&&(l-=u-1,u=1),{min:l,max:u}}}primaryAxisZoom(e,t,{padding:n=0}={}){let i=e==="x"?"y":"x",s=this.getPrimaryAxis(i),r=this.getPrimaryAxis(e);if(!(s==null||r==null))return this.zoomBounds(s,r,t,n)}combinedAxisZoom(e,t,{padding:n=0}={}){let i=e==="x"?"y":"x",s=new Map;for(let l of this.axes)if(l.direction===i)for(let c of l.boundSeries)s.set(c,l);let r=1,o=0;for(let l of this.axes)if(l.direction===e)for(let c of l.boundSeries){let u=s.get(c);if(u==null)continue;let d=this.zoomBounds(u,l,t,n);if(d==null)return;r=Math.min(r,d.min),o=Math.max(o,d.max)}let a=1e-6;if(r<a&&(r=0),o>1-a&&(o=1),!(r>o))return{min:r,max:o}}},zde=class{constructor(e){this.axis=e;let[t=0,n=1]=e.visibleRange;this.state=new ld({min:t,max:n}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return Jt(this.state.stateValue())}hasChanges(){let e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){let e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}},Hde=class{constructor(){this.labelData=new Map}updateLabels(e,t,n=Z.zero){let i={x:-t.left,y:-t.top,width:n.width+t.left+t.right,height:n.height+t.top+t.bottom},s=new Set(e.map(o=>o.id));for(let o of this.labelData.keys())s.has(o)||this.labelData.delete(o);for(let o of e){let a=o.getLabelData();a.every(sue)&&this.labelData.set(o.id,a)}let r=oue(this.labelData,i,5);for(let o of e)o.updatePlacedLabelData?.(r.get(o.id)??[])}},jde=class extends Ka{constructor(){super(...arguments),this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:e,isFixed:t})=>!e&&!t).map(({enabled:e,seriesId:t,itemId:n,legendItemName:i})=>({visible:e,seriesId:t,itemId:n,legendItemName:i}))}guardMemento(e){return e==null||mt(e)}restoreMemento(e,t,n){n?.forEach(i=>{let{seriesId:s,data:r}=this.getRestoredData(i)??{};!s||!r||this.updateData(s,r)}),this.update()}getRestoredData(e){let{seriesId:t,itemId:n,legendItemName:i,visible:s}=e;if(t){let o=(this.legendDataMap.get(t)??[]).map(a=>{let l=a.seriesId===t&&(!n||a.itemId===n);return l&&a.isFixed&&this.warnFixed(a.seriesId,a.itemId),!a.isFixed&&l?R(S({},a),{enabled:s}):a});return{seriesId:t,data:o}}if(!(n==null&&i==null))for(let r of this.getData()){if(n!=null&&r.itemId!==n||i!=null&&r.legendItemName!==i)continue;if(r.isFixed){this.warnFixed(r.seriesId,n);return}let o=(this.legendDataMap.get(r.seriesId)??[]).map(a=>a.itemId===n||a.legendItemName===i?R(S({},a),{enabled:s}):a);return{seriesId:r.seriesId,data:o}}}warnFixed(e,t){G.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:e??this.getData()})}updateData(e,t=[]){this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem({enabled:e,seriesId:t,itemId:n,legendItemName:i}){if(i){this.getData().forEach(a=>{let l=(this.legendDataMap.get(a.seriesId)??[]).map(c=>c.legendItemName===i?R(S({},c),{enabled:e}):c);this.updateData(a.seriesId,l)});return}let s=this.getData(t),r=s.length===1,o=s.map(a=>n==null&&r||a.itemId===n?R(S({},a),{enabled:e}):a);this.updateData(t,o)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce((t,[n,i])=>t.concat(i),[])}getDatum({seriesId:e,itemId:t}={}){return this.getData(e).find(n=>n.itemId===t)}getSeriesEnabled(e){let t=this.getData(e);if(t.length>0)return t.some(n=>n.enabled)}getItemEnabled({seriesId:e,itemId:t}={}){return this.getDatum({seriesId:e,itemId:t})?.enabled??!0}},Wde=class{constructor(){this.groups={}}registerSeries({internalId:e,seriesGrouping:t,visible:n,type:i}){var s;t&&((s=this.groups)[i]??(s[i]={}),this.groups[i][e]={grouping:t,visible:n})}updateSeries({internalId:e,seriesGrouping:t,visible:n,type:i}){if(!t)return;let s=this.groups[i]?.[e];s&&(s.grouping=t,s.visible=n)}deregisterSeries({internalId:e,type:t}){this.groups[t]&&delete this.groups[t][e],this.groups[t]&&Object.keys(this.groups[t]).length===0&&delete this.groups[t]}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:n}){if(!t)return{visibleGroupCount:n?1:0,visibleSameStackCount:n?1:0,index:0};let i=new Set,s=new Set;for(let o of Object.values(this.groups[e]??{}))o.visible&&(i.add(o.grouping.groupIndex),o.grouping.groupIndex===t.groupIndex&&s.add(o.grouping.stackIndex));let r=Array.from(i);return r.sort((o,a)=>o-a),{visibleGroupCount:r.length,visibleSameStackCount:s.size,index:r.indexOf(t.groupIndex)}}},Lp=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=4]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=6]="SCENE_RENDER",e[e.NONE=7]="NONE",e))(Lp||{}),u4=class{constructor(e){this.updateCallback=e,this.events=new aE}addListener(e,t){return this.events.on(e,t)}removeListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(){this.events.emit("update-complete",{type:"update-complete"})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:e}){this.events.emit("process-data",{type:"process-data",series:e})}},Ude=class{constructor(e,t){this.callbackCache=new wde,this.chartEventManager=new i4,this.highlightManager=new r4,this.layoutManager=new zB,this.localeManager=new ude,this.seriesStateManager=new Wde,this.stateManager=new zue,this.seriesLabelLayoutManager=new Hde,this.contextModules=[];let{scene:n,root:i,syncManager:s,container:r,fireEvent:o,updateCallback:a,updateMutex:l,styleContainer:c,chartType:u}=t;this.chartService=e,this.syncManager=s,this.domManager=new ZB(r,c),this.widgets=new Dde(this.domManager);let d=this.domManager.addChild("canvas","scene-canvas",n?.canvas.element);this.scene=n??new ZE({canvasElement:d}),this.scene.setRoot(i),this.axisManager=new Sde(i),this.legendManager=new jde,this.annotationManager=new bde(e.annotationRoot),this.chartTypeOriginator=new Vue(e),this.interactionManager=new t4,this.contextMenuRegistry=new s4,this.updateService=new u4(a),this.proxyInteractionService=new QB(this.localeManager,this.domManager),this.historyManager=new Gue(this.chartEventManager),this.animationManager=new n4(this.interactionManager,l),this.dataService=new ZC(this.animationManager),this.tooltipManager=new aC(this.domManager,e.tooltip),this.zoomManager=new c4(o,this.layoutManager);for(let h of Nr.byType("context")){if(!h.chartTypes.includes(u))continue;let p=h.moduleFactory(this);this.contextModules.push(p),this[h.contextKey]=p}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach(e=>e.destroy())}},d4=class extends Se{constructor(){super(...arguments),this.range="tooltip"}};C([b(ut(["tooltip","node"],"a range"))],d4.prototype,"range",2);function $de(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function Yde(e,t){if(e==null||t==null)return e===t;if(e.size!==t.size)return!1;for(let[n,i]of e){let s=t.get(n);if(s==null||!$de(i,s))return!1}return!0}function Kde(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s+=1){let n=e[s],{type:r,idsMap:o,scopes:a,data:l}=n,c=He(n,["type","idsMap","scopes","data"]),i=t[s],{type:u,idsMap:d,scopes:h,data:p}=i,g=He(i,["type","idsMap","scopes","data"]);if(r!==u||a&&h&&!Pr(a,h)||l&&p&&l!==p||!uc(c,g)||!Yde(o,d))return!1}return!0}function qde(e,t){let o=e,{props:n}=o,i=He(o,["props"]),a=t,{props:s}=a,r=He(a,["props"]);return uc(i,r)&&Kde(n,s)}function Zde(e,t,n,i){return t===e.data&&Pr(n,e.ids)&&qde(i,e.opts)}var v3=class h4{constructor(){this.domain=new Set}static is(t){return t instanceof h4}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},ka=class p4{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof p4}static extendDomain(t,n=[1/0,-1/0]){for(let i of t)typeof i=="number"&&(n[0]>i&&(n[0]=i),n[1]<i&&(n[1]=i));return n}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}},zu=0,Hu=1,Ar=2,Xde=class{constructor(e){let t=e.reduce((r,o)=>Math.max(r,o.length),0),i=1<<32-Math.clz32(t);t===i/2&&(i=i>>>1),this.maxLevelSize=i;let s=new Float64Array((i*2-1)*2).fill(NaN);for(let r of e)for(let o=0;o<r.length;o+=1){let a=Number(r[o]),l=i+o-1,c=(l*Ar|0)+zu,u=(l*Ar|0)+Hu,d=s[c],h=s[u];(!Number.isFinite(d)||a<d)&&(s[c]=a),(!Number.isFinite(h)||a>h)&&(s[u]=a)}for(let r=i/2|0;r>=1;r=r/2|0){let o=r-1|0,a=o+r|0;for(let l=0;l<r;l+=1){let c=o+l,u=a+l*2,d=u+1,h=s[(u*Ar|0)+zu],p=s[(d*Ar|0)+zu];s[(c*Ar|0)+zu]=!Number.isFinite(p)||h<p?h:p;let g=s[(u*Ar|0)+Hu],f=s[(d*Ar|0)+Hu];s[(c*Ar|0)+Hu]=!Number.isFinite(f)||g>f?g:f}}this.buffer=s}computeRangeInto(e,t,n,i,s,r,o){let a=s+r-1;if(a<t||s>=n)return o;if(s>=t&&a<n){let l=e[(i*Ar|0)+zu],c=e[(i*Ar|0)+Hu];Number.isFinite(l)&&(o[0]=Math.min(o[0],l)),Number.isFinite(c)&&(o[1]=Math.max(o[1],c))}else r>1&&(i=i*2|0,r=r/2|0,this.computeRangeInto(e,t,n,i+1|0,s,r,o),this.computeRangeInto(e,t,n,i+2|0,s+r,r,o));return o}rangeBetween(e,t){if(e>t)return[NaN,NaN];let{maxLevelSize:n,buffer:i}=this,s=[1/0,-1/0];return this.computeRangeInto(i,e,t,0,0,n,s),s}get range(){let{buffer:e}=this;return[e[zu],e[Hu]]}},y3=Symbol("domain-ranges");function Qde(e){return e.map(t=>yn(t)?JSON.stringify(t):t).join("-")}function C3(e){return Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(e*1e4)/1e4}function Di(e){let t=e?.map(Number);return t?.every(Number.isFinite)?t:[]}function QE(e,t){return t?.get(e.id)??0}function Jde(e){return"scopes"in e&&Array.isArray(e.scopes)}var Ry=Symbol("invalid");function dM(e,t){let n=[];for(let i=0;i<e;i+=1)n[i]=t;return n}function lC(e,t,n){let i=[];for(let s of e){let r=s.get(t)?.[n];if(r==null)return;i.push(r)}return i}function g4(e){let t=[],n=0,i,s=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;i=s.exec(e);){if(i.index!==n)return;n=i.index+i[0].length;let r=i[1].trim();if(r.startsWith("."))t.push(r.slice(1).trim());else if(r.startsWith("[")){let o=r.slice(1,-1).trim();o.startsWith("'")?t.push(o.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):o.startsWith('"')?t.push(o.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):t.push(o)}else t.push(r)}if(n===e.length)return t}function ehe(e){return t=>{let n=t;for(let i of e)n=n[i];return n}}var f4=class{constructor(e,t="standalone",n=!1){this.opts=e,this.mode=t,this.suppressFieldDotNotation=n,this.debug=ct.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(a,l,c,u){for(let d of a)u.has(d)||u.set(d,dM(l.length,!1)),u.get(d)[c]=!0};let i=!0;for(let a of e.props){if(a.type==="key"&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");a.type==="value"&&i&&(i=!1)}let s=({matchGroupIds:a=[]})=>{for(let l of a)if(this.values.every(c=>c.groupId!==l))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)},r=new Set,o=new Set;for(let a of e.props){let l=a.type==="key"?r:o;switch(Jde(a)&&a.scopes?.forEach(c=>l.add(c)),a.type){case"key":this.keys.push(R(S({},a),{index:this.keys.length,missing:new Map}));break;case"value":if(a.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(a)}`);this.values.push(R(S({},a),{index:this.values.length,missing:new Map}));break;case"aggregate":s(a),this.aggregates.push(R(S({},a),{index:this.aggregates.length}));break;case"group-value-processor":s(a),this.groupProcessors.push(R(S({},a),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(R(S({},a),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(R(S({},a),{index:this.reducers.length}));break;case"processor":this.processors.push(R(S({},a),{index:this.processors.length}));break}}if(this.opts.groupByKeys||this.opts.groupByFn!=null){let a=new Set(o.values());if(r.forEach(l=>a.delete(l)),a.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...a.values()]}`)}}resolveProcessedDataDefById(e,t){let n=this.scopeCache.get(e.id)?.get(t);if(!n)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:n.index,def:n}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,n){let i=this.resolveProcessedDataIndexById(e,t),s=n.keys[i];if(s==null)throw new Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return s.get(e.id)}hasColumnById(e,t){return this.scopeCache.get(e.id)?.get(t)!=null}resolveColumnById(e,t,n){let i=this.resolveProcessedDataIndexById(e,t),s=n.columns?.[i];if(s==null)throw new Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return s}*forEachDatum(e,t,n){let i=t.columnScopes.findIndex(s=>s.has(e.id));for(let s of n.datumIndices[i]??[])yield t.columns[i][s]}*forEachGroupDatum(e,t){let n=t.columnScopes.findIndex(r=>r.has(e.id)),i={groupIndex:0,columnIndex:n},s=[];for(let r of t.groups){i.group=r;let o=0;for(let a of r.datumIndices[n]??s)i.datumIndex=a,i.valueIndex=o++,yield i;i.groupIndex++}}*forEachGroupDatumTuple(e,t){let i={columnIndex:t.columnScopes.findIndex(s=>s.has(e.id)),datumIndexes:[void 0,void 0,void 0]};for(let s of this.forEachGroupDatum(e,t))i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=s.group,i.nextGroupIndex=s.groupIndex,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=s.datumIndex,i.group!=null&&i.datumIndexes[1]!=null&&(yield i);i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=void 0,i.nextGroupIndex=void 0,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=void 0,i.group!=null&&i.datumIndexes[1]!=null&&(yield i)}getDomain(e,t,n,i){return this.getDomainsByType(n??"value",i)?.[this.resolveProcessedDataIndexById(e,t)]??[]}getDomainBetweenRange(e,t,[n,i],s){let r=t.map(c=>this.resolveProcessedDataIndexById(e,c)),o=r.join(":"),a=s[y3],l=a.get(o);if(l==null){let c=r.map(u=>s.columns[u]);l=new Xde(c),a.set(o,l)}return l.rangeBetween(n,i)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e){let{opts:{groupByKeys:t,groupByFn:n},aggregates:i,groupProcessors:s,reducers:r,processors:o,propertyProcessors:a}=this,l=performance.now();if(t&&this.keys.length===0)return;let c=this.extractData(e);t?c=this.groupData(c):n&&(c=this.groupData(c,n(c))),s.length>0&&c.type==="grouped"&&this.postProcessGroups(c),i.length>0&&c.type==="ungrouped"?this.aggregateUngroupedData(c):i.length>0&&c.type==="grouped"&&this.aggregateGroupedData(c),a.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),o.length>0&&this.postProcessData(c),this.warnDataMissingProperties(e);let u=performance.now();return c.time=u-l,this.debug.check()&&the(c),this.processScopeCache(),c}warnDataMissingProperties(e){if(e.size!==0)for(let t of sc(this.keys,this.values))for(let[n,i]of t.missing){if(i<(e.get(n)?.length??1/0))continue;let s=n==null?"":` for ${n}`;G.warnOnce(`the key '${t.property}' was not found in any data element${s}.`)}}processScopeCache(){this.scopeCache.clear();for(let e of sc(this.keys,this.values,this.aggregates))if(e.idsMap)for(let[t,n]of e.idsMap)for(let i of n)if(!this.scopeCache.has(t))this.scopeCache.set(t,new Map([[i,e]]));else{if(this.scopeCache.get(t)?.has(i))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(t).set(i,e)}}valueGroupIdxLookup({matchGroupIds:e}){let t=[];for(let[n,i]of this.values.entries())(!e||i.groupId&&e.includes(i.groupId))&&t.push(n);return t}valueIdxLookup(e,t){let n=e==null||e.length===0,i=typeof t=="string"?t:t.id,s=o=>{if(o.idsMap){for(let[a,l]of o.idsMap)if(e?.includes(a)&&l.has(i))return!0}return!1},r=this.values.reduce((o,a,l)=>((a.scopes==null||n&&!a.scopes.length||a.scopes.some(u=>e?.includes(u)))&&(a.property===i||a.id===i||s(a))&&o.push(l),o),[]);if(r.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return r}extractData(e){let{dataDomain:t,processValue:n,allScopesHaveSameDefs:i}=this.initDataDomainProcessor(),{keys:s,values:r}=this,{invalidData:o,invalidKeys:a,allKeyMappings:l}=this.extractKeys(s,e,n),{columns:c,columnScopes:u,partialValidDataCount:d,maxDataLength:h}=this.extractValues(o,r,e,a,n),p=g=>{let f=t.get(g),m=f.getDomain();return ka.is(f)&&m[0]>m[1]?[]:m};return{type:"ungrouped",input:{count:h},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...l.values()],columns:c,columnScopes:u,invalidKeys:a,invalidData:o,domain:{keys:s.map(p),values:r.map(p)},defs:{allScopesHaveSameDefs:i,keys:s,values:r},partialValidDataCount:d,time:0,[y3]:new Map}}extractKeys(e,t,n){let i=new Map,s=new Map,r=new Map,o,a,l=(c,u)=>{let d=a.get(c);o.set(u,o.get(d)),i.has(d)&&(i.set(u,i.get(d)),s.set(u,s.get(d)))};for(let c of e){let{invalidValue:u,scopes:d}=c;o=new Map,a=new Map,r.set(c,o);for(let h of d??[]){let p=t.get(h)??[];if(a.has(p)){l(p,h);continue}let g=[];o.set(h,g),a.set(p,h);let f,m;for(let v=0;v<p.length;v++){let y=n(c,p[v],v,h);if(y!==Ry){g.push(y);continue}g.push(u),f??(f=dM(p.length,!1)),m??(m=dM(p.length,!1)),f[v]=!0,m[v]=!0}f&&m&&(i.set(h,f),s.set(h,m))}}return{invalidData:s,invalidKeys:i,allKeyMappings:r}}extractValues(e,t,n,i,s){let r=0,o=[],a=[],l=0;for(let c of t){let{invalidValue:u}=c;if(new Set(c.scopes.map(m=>n.get(m))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(c)}`);let h=new Set(c.scopes),p=gp(c.scopes),g=n.get(p),f=g.map((m,v)=>{let y=i.get(p)?.[v],w=s(c,m,v,c.scopes);return(y||w===Ry)&&this.markScopeDatumInvalid(c.scopes,g,v,e),y?w=u:w===Ry&&(r+=1,w=u),w});o.push(f),a.push(h),l=Math.max(l,f.length)}return{columns:o,columnScopes:a,partialValidDataCount:r,maxDataLength:l}}groupData(e,t){var n;let i=new Map,{keys:s,columns:r,columnScopes:o,invalidKeys:a,invalidData:l}=e,c=e.scopes,u=new Set;for(let p of c){let g=r.map((x,D)=>D).filter(x=>!u.has(x)&&o[x].has(p));if(g.length===0)continue;for(let x of g)u.add(x);let f=new Set;for(let x of g)for(let D of o[x])f.add(D);let m=s.map(x=>x.get(p)).filter(x=>x!=null),v=r[gp(g)],y=l?.get(p),w=a?.get(p);for(let x=0;x<v.length;x++){if(w?.[x]===!0)continue;let D=m.map(I=>I[x]);if(D==null||D.length===0)throw new Error("AG Charts - no keys found for scope: "+p);let M=t?.(D)??D,E=Qde(M),A=i.get(E)??{keys:M,datumIndices:[],validScopes:c};if(i.has(E)||i.set(E,A),y?.[x]===!0){A.validScopes===c&&(A.validScopes=new Set(c.values()));for(let I of f)A.validScopes.delete(I)}if(A.validScopes.size!==0)for(let I of g)(n=A.datumIndices)[I]??(n[I]=[]),A.datumIndices[I].push(x)}}let d=[],h=[];for(let{keys:p,datumIndices:g,validScopes:f}of i.values())f?.size!==0&&(d.push(p),h.push({datumIndices:g,keys:p,aggregation:[],validScopes:f}));return R(S({},e),{type:"grouped",domain:R(S({},e.domain),{groups:d}),groups:h})}aggregateUngroupedData(e){let t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;let{keys:n,columns:i,dataSources:s}=e,r=gp(s.keys()),o=s.get(r);e.aggregation=o?.map((a,l)=>{let c=[];for(let[u,d]of this.aggregates.entries()){let h=this.valueGroupIdxLookup(d),p=d.groupAggregateFunction?.()??[1/0,-1/0],g=h.map(y=>i[y][l]),f=lC(n,r,l),m=f!=null?d.aggregateFunction(g,f):void 0;m&&(p=d.groupAggregateFunction?.(m,p)??ka.extendDomain(m,p));let v=d.finalFunction?.(p)??p;if(d.round===!0)for(let y in v)v[y]=C3(v[y]);c[u]=v,ka.extendDomain(v,t[u])}return c})}aggregateGroupedData(e){let t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;let{columns:n}=e;for(let[i,s]of this.aggregates.entries()){let r=this.valueGroupIdxLookup(s);for(let o of e.groups){if(o.aggregation??(o.aggregation=[]),o.validScopes?.size===0)continue;let a=o.keys,l=s.groupAggregateFunction?.()??[1/0,-1/0],c=Math.max(...r.map(d=>o.datumIndices[d]?.length??0));for(let d=0;d<c;d++){let h=r.map(g=>n[g][o.datumIndices[g]?.[d]]),p=s.aggregateFunction(h,a);p&&(l=s.groupAggregateFunction?.(p,l)??ka.extendDomain(p,l))}let u=s.finalFunction?.(l)??l;if(s.round===!0)for(let d in u)u[d]=C3(u[d]);o.aggregation[i]=u,ka.extendDomain(u,t[i])}}}postProcessGroups(e){let{groupProcessors:t}=this,{columnScopes:n,columns:i,invalidData:s,scopes:r}=e;for(let o of t){let a=this.valueGroupIdxLookup(o),l=o.adjust()();for(let c of e.groups)c.validScopes===r&&l(i,a,c);for(let c of a){let d=this.values[c].valueType==="category",h=i[c],p=gp(n[c]),g=s?.get(p),f=d?new v3:new ka;for(let m=0;m<h.length;m+=1)g?.[m]!==!0&&f.extend(h[m]);e.domain.values[c]=f.getDomain()}}}postProcessProperties(e){for(let{adjust:t,property:n,scopes:i}of this.propertyProcessors)for(let s of this.valueIdxLookup(i,n))t()(e,s)}reduceData(e){e.reduced??(e.reduced={});let{dataSources:t,keys:n}=e;for(let i of this.reducers){let s=i.reducer(),r=i.initialValue;if(e.type==="grouped")for(let o of e.groups)r=s(r,o.keys);else{let o=gp(t.keys()),a=n.map(u=>u.get(o)).filter(u=>u!=null),l=a.map(()=>{}),c=t.get(o);for(let u=0;u<c.length;u+=1){for(let d=0;d<l.length;d++)l[d]=a[d]?.[u];r=s(r,l)}}e.reduced[i.property]=r}}postProcessData(e){e.reduced??(e.reduced={});for(let t of this.processors)e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(){let{keys:e,values:t}=this,n=new Set;for(let c of t)if(c.scopes)for(let u of c.scopes)n.add(u);let i=new Map,s=new Map,r=!0,o=()=>{for(let c of sc(e,t))c.valueType==="category"?i.set(c,new v3):(i.set(c,new ka),r&&(r=(c.scopes??[]).length===n.size))};o();let a=this.buildAccessors(sc(e,t));return{dataDomain:i,processValue:(c,u,d,h)=>{let p,g;if(a.has(c.property)){try{g=a.get(c.property)(u)}catch{}p=g!=null}else p=c.property in u,g=p?u[c.property]:c.missingValue;c.forceValue!=null&&(g=p&&EC(g)?-1*c.forceValue:c.forceValue,p=!0);let f="missingValue"in c;if(!p&&!f)if(typeof h=="string"){let m=c.missing.get(h)??0;c.missing.set(h,m+1)}else for(let m of h){let v=c.missing.get(m)??0;c.missing.set(m,v+1)}if(i.has(c)||o(),p&&c.validation?.(g,u,d)===!1)if("invalidValue"in c)g=c.invalidValue;else return this.mode!=="integrated"&&G.warnOnce(`invalid value of type [${typeof g}] for [${c.scopes} / ${c.id}] ignored:`,`[${g}]`),Ry;return c.processor&&(s.has(c)||s.set(c,c.processor()),g=s.get(c)?.(g)),i.get(c)?.extend(g),g},initDataDomain:o,scopes:n,allScopesHaveSameDefs:r}}buildAccessors(e){let t=new Map;if(this.suppressFieldDotNotation)return t;for(let n of e){if(!(n.property.includes(".")||n.property.includes("[")))continue;let s=g4(n.property);if(s==null){G.warnOnce("Invalid property path [%s]",n.property);continue}let r=ehe(s);t.set(n.property,r)}return t}};function the(e){let t=(n,i)=>{i.length>0&&(G.log(`DataModel.processData() - ${n}`),G.table(i))};G.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Group Domains",e.domain.groups??[]),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[])}var nhe=(()=>{let e=class So{constructor(n,i){this.mode=n,this.suppressFieldDotNotation=i,this.debug=ct.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(n,i,s){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((r,o)=>{this.requested.push({id:n,opts:s,data:i,resolve:r,reject:o})})}execute(n){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let i=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",i);let s=this.mergeRequested(i);this.debug("DataController.execute() - merged",s),this.debug.check()&&(ft().processedData=[]);let r=[];for(let{data:o,ids:a,opts:l,resolves:c,rejects:u}of s){let d=n?.find(g=>Zde(g,o,a,l)),h,p;if(d==null)try{h=new f4(l,this.mode,this.suppressFieldDotNotation);let g=new Map(i.map(f=>[f.id,f.data]));p=h.processData(g)}catch(g){u.forEach(f=>f(g));continue}else({dataModel:h,processedData:p}=d);r.push({opts:l,data:o,ids:a,dataModel:h,processedData:p}),this.debug.check()&&ft("processedData").push(p),p?.partialValidDataCount===0?c.forEach(g=>g({dataModel:h,processedData:p})):p?this.splitResult(h,p,a,c):u.forEach(g=>g(new Error("AG Charts - no processed data generated")))}return r}validateRequests(n){let i=[];for(let[s,r]of n.entries())s>0&&r.data.length!==n[0].data.length&&r.opts.groupByData===!1&&r.opts.groupByKeys===!1?r.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(r);return i}mergeRequested(n){let i=[];for(let s of n){let r=i.find(So.groupMatch(s));r?r.push(s):i.push([s])}return i.map(So.mergeRequests)}splitResult(n,i,s,r){for(let o=0;o<s.length;o++){let a=r[o];a({dataModel:n,processedData:i})}}static groupMatch({data:n,opts:i}){function s(u){return u.filter(d=>d.type==="key").map(d=>d.property).join(";")}let{groupByData:r,groupByKeys:o=!1,groupByFn:a,props:l}=i,c=s(l);return([u])=>(r===!1||u.data===n)&&(u.opts.groupByKeys??!1)===o&&u.opts.groupByFn===a&&s(u.opts.props)===c}static mergeRequests(n){let i=new Set(["key","group-value-processor"]);return n.reduce((s,d)=>{var{id:r,data:o,resolve:a,reject:l,opts:h}=d,p=h,{props:c}=p,u=He(p,["props"]);s.ids.push(r),s.rejects.push(l),s.resolves.push(a),s.data??(s.data=o),s.opts??(s.opts=R(S({},u),{props:[]}));for(let g of c){let f=R(S({},g),{scopes:[r],data:o});So.createIdsMap(r,f);let m=s.opts.props.find(v=>v.type===f.type&&(i.has(v.type)||v.data===f.data)&&So.deepEqual(v,f));if(!m){s.opts.props.push(f);continue}m.scopes??(m.scopes=[]),m.scopes.push(...f.scopes??[]),(m.type==="key"||m.type==="value")&&f.idsMap?.size&&So.mergeIdsMap(f.idsMap,m.idsMap)}return s},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(n,i){for(let[s,r]of n){let o=i.get(s);if(o==null)i.set(s,new Set(r));else for(let a of r)o.add(a)}}static createIdsMap(n,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(n)?i.idsMap.get(n).add(i.id):i.idsMap.set(n,new Set([i.id])))}static deepEqual(n,i){if(n===i)return!0;if(n&&i&&typeof n=="object"&&typeof i=="object"){if(n.constructor!==i.constructor)return!1;let s,r;if(Array.isArray(n)){if(r=n.length,r!==i.length)return!1;for(s=r-1;s>=0;s--)if(!So.deepEqual(n[s],i[s]))return!1;return!0}let o=Object.keys(n);if(r=o.length,r!==Object.keys(i).length)return!1;for(s=r-1;s>=0;s--){let a=o[s];if(!So.skipKeys.has(a)&&(!Object.hasOwn(i,a)||!So.deepEqual(n[a],i[a])))return!1}return!0}return!1}};return e.skipKeys=new Set(["id","idsMap","type","scopes","data"]),e})(),m4=nhe,ihe=class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate)}create(e,t){let n=this.axesMap.get(e);if(n)return n(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},Ro=new ihe,vd=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function she(e){return vd.some(t=>t.type==="series"&&t.identifier===e)}function vc(e){return vd.find(t=>t.type==="series"&&t.identifier===e)?.chartTypes}function rhe(e){return vc(e)?.find(n=>n==="cartesian")==="cartesian"}function ohe(e){return vc(e)?.find(n=>n==="polar")==="polar"}function ahe(e){return vc(e)?.find(n=>n==="hierarchy")==="hierarchy"}function lhe(e){return vc(e)?.find(n=>n==="topology")==="topology"}function che(e){return vc(e)?.find(n=>n==="flow-proportion")==="flow-proportion"}function uhe(e){return vc(e)?.find(n=>n==="standalone")==="standalone"}function dhe(e){return vc(e)?.find(n=>n==="gauge")==="gauge"}function hhe(e){return e.packageType==="enterprise"}function phe(e){if(!hhe(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");let t=vd.find(n=>n.type===e.type&&("optionsKey"in n&&"optionsKey"in e?n.optionsKey===e.optionsKey:!0)&&("contextKey"in n&&"contextKey"in e?n.contextKey===e.contextKey:!0)&&n.identifier===e.identifier&&e.chartTypes.every(i=>n.chartTypes.includes(i)));return t&&(t.useCount??(t.useCount=0),t.useCount++),t!=null}function ghe(){return vd.filter(({useCount:e})=>e==null||e===0)}var fhe=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,{optionsKey:t,moduleFactory:n,themeTemplate:i}){this.legendMap.set(e,{optionsKey:t,moduleFactory:n}),this.themeTemplates.set(t,i)}create(e,t){let n=this.legendMap.get(e)?.moduleFactory;if(n)return n(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((e,[t,n])=>(e[t]=n.optionsKey,e),{})}},JE=new fhe,v4=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return this.get(e)==="cartesian"}isPolar(e){return this.get(e)==="polar"}isHierarchy(e){return this.get(e)==="hierarchy"}isTopology(e){return this.get(e)==="topology"}isFlowProportion(e){return this.get(e)==="flow-proportion"}isStandalone(e){return this.get(e)==="standalone"}isGauge(e){return this.get(e)==="gauge"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))}get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))}get hierarchyTypes(){return this.seriesTypes.filter(e=>this.isHierarchy(e))}get topologyTypes(){return this.seriesTypes.filter(e=>this.isTopology(e))}get flowProportionTypes(){return this.seriesTypes.filter(e=>this.isFlowProportion(e))}get standaloneTypes(){return this.seriesTypes.filter(e=>this.isStandalone(e))}get gaugeTypes(){return this.seriesTypes.filter(e=>this.isGauge(e))}},mhe=class extends Map{set(e,t){return super.set(e,ke(t,this.get(e)))}},Mt=new v4,y4=new v4,$M=new mhe,vhe=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,{chartTypes:[t],moduleFactory:n,tooltipDefaults:i,defaultAxes:s,themeTemplate:r,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:u,hidden:d}){this.setThemeTemplate(e,r),this.seriesMap.set(e,{moduleFactory:n,tooltipDefaults:i,defaultAxes:s,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:u}),Mt.set(e,t),d||y4.set(e,t)}create(e,t){let n=this.seriesMap.get(e)?.moduleFactory;if(n)return n(t);throw new Error(`AG Charts - unknown series type: ${e}`)}cloneDefaultAxes(e,t){let n=this.seriesMap.get(e)?.defaultAxes;if(n==null)return null;let i=typeof n=="function"?n(t):n;return{axes:Jt(i)}}isDerivedDefaultAxes(e){return typeof this.seriesMap.get(e)?.defaultAxes=="function"}setThemeTemplate(e,t){let n=this.themeTemplates.get(e);this.themeTemplates.set(e,ke(t,n))}getThemeTemplate(e){return this.themeTemplates.get(e)}getPaletteFactory(e){return this.seriesMap.get(e)?.paletteFactory}getTooltipDefauls(e){return this.seriesMap.get(e)?.tooltipDefaults}isSolo(e){return this.seriesMap.get(e)?.solo??!1}isGroupable(e){return this.seriesMap.get(e)?.groupable??!1}isStackable(e){return this.seriesMap.get(e)?.stackable??!1}isStackedByDefault(e){return this.seriesMap.get(e)?.stackedByDefault??!1}},Si=new vhe,eI=class tc extends Ka{constructor(t){super(),this.chart=t}subscribe(t=tc.DEFAULT_GROUP){let n=this.get(t);return n||(n=new Set,tc.chartsGroups.set(t,n)),n.add(this.chart),this}unsubscribe(t=tc.DEFAULT_GROUP){return this.get(t)?.delete(this.chart),this}getChart(){return this.chart}getGroup(t=tc.DEFAULT_GROUP){let n=this.get(t);return n?Array.from(n):[]}getGroupSiblings(t=tc.DEFAULT_GROUP){return this.getGroup(t).filter(n=>n!==this.chart)}get(t){return tc.chartsGroups.get(t)}};eI.chartsGroups=new Map;eI.DEFAULT_GROUP=Symbol("sync-group-default");var yhe=eI,tI=class extends Se{constructor(){super(...arguments),this.enabled=!1}};C([b(le)],tI.prototype,"enabled",2);C([b(je)],tI.prototype,"tabIndex",2);var C4=["top","right","bottom","left"];function Che(e){return typeof e=="string"&&C4.includes(e)}function whe(e){let t=[],n=[],i=[...C4];for(let s of e)s instanceof gg&&(Che(s.position)?n.push(s.position):t.push(s));for(let s of t){let r;do r=i.pop();while(r&&n.includes(r));if(r==null)break;s.position=r}}var bhe=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function She(e,t,n){let i=(c,u,d)=>{let h=[c];for(let p of bhe)p in u&&u[p]!=null&&h.push(`${p}=${u[p]}`);return d?.seriesGrouping&&h.push(`seriesGrouping.groupId=${d?.seriesGrouping.groupId}`),h.join(";")},s=new Map,r=0;for(let c of e){let u=i(c.type,c.properties,n?.[r]);s.has(u)||s.set(u,[]),s.get(u)?.push([c,r++])}let o=new Map;r=0;for(let c of t){let u=i(c.type,c,c);o.has(u)||o.set(u,[]),o.get(u)?.push([c,r++])}if(![...s.keys()].some(c=>o.has(c)))return{status:"no-overlap",oldKeys:s.keys(),newKeys:o.keys()};let l=[];for(let[c,u]of o.entries())for(let[d,h]of u){let p=s.get(c);if(p==null||p.length<1){l.push({opts:d,targetIdx:h,idx:h,status:"add"}),s.delete(c);continue}let[g,f]=p.shift(),m=n?.[f]??{},v=No(m,d??{}),{groupIndex:y,stackIndex:w}=v?.seriesGrouping??{};y!=null||w!=null?l.push({opts:d,series:g,diff:v,targetIdx:h,idx:f,status:"series-grouping"}):v?l.push({opts:d,series:g,diff:v,targetIdx:h,idx:f,status:"update"}):l.push({opts:d,series:g,targetIdx:h,idx:f,status:"no-op"}),p.length===0&&s.delete(c)}for(let c of s.values())for(let[u,d]of c)l.push({series:u,idx:d,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}function Ho(e){let{series:t}=e;if(t)return t[0]?.type??"line"}function nI(e){let t=Ho(e);return t==null?!1:Mt.isCartesian(t)||rhe(t)}function w4(e){let t=Ho(e);return t==null?!1:Mt.isPolar(t)||ohe(t)}function xhe(e){let t=Ho(e);return t==null?!1:Mt.isHierarchy(t)||ahe(t)}function Dhe(e){let t=Ho(e);return t==null?!1:Mt.isTopology(t)||lhe(t)}function Mhe(e){let t=Ho(e);return t==null?!1:Mt.isFlowProportion(t)||che(t)}function b4(e){let t=Ho(e);return t==null?!1:Mt.isStandalone(t)||uhe(t)}function S4(e){let t=Ho(e);return t==null?!1:Mt.isGauge(t)||dhe(t)}function Ehe(e){let t=Ho(e);return w4(e)&&t!=="pie"&&t!=="donut"}function Ihe(e){return e==null?!1:Mt.has(e)}function Ahe(e){return e==null?!1:Ro.has(e)}var Rhe=class extends TE{applyOptions(e){for(let t of this.moduleMap.values())t.module.optionsKey in e&&_r(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(let{module:e,moduleInstance:t}of this.moduleMap.values())e.type==="legend"&&(yield{legendType:e.identifier,legend:t})}},YM="ag-charts-overlay",w3="ag-charts-dark-overlay",oc=class extends Se{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return e.t(this.text??this.defaultMessageId)}getElement(e,t,n){if(this.content?.remove(),this.focusBox=n,this.renderer){let i=this.renderer();if(i instanceof HTMLElement)this.content=i;else{let s=Ne("div");s.innerHTML=i,this.content=s.firstElementChild}}else{let i=Ne("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});i.innerText=this.getText(t),this.content=i,e?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(e=()=>this.content?.remove(),t){if(this.content){if(t){let{content:n}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(i){n.style.opacity=String(i)},onStop(){e?.()}})}else e?.();this.content=void 0,this.focusBox=void 0}}};C([b(le)],oc.prototype,"enabled",2);C([b(B,{optional:!0})],oc.prototype,"text",2);C([b(di,{optional:!0})],oc.prototype,"renderer",2);var yd=class extends Se{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new oc("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new oc("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new oc("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new oc("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(let t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(t.focusBox!==void 0)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};C([b(le)],yd.prototype,"darkTheme",2);C([b(K)],yd.prototype,"loading",2);C([b(K)],yd.prototype,"noData",2);C([b(K)],yd.prototype,"noVisibleSeries",2);C([b(K)],yd.prototype,"unsupportedBrowser",2);function The(e,t){let{animationDuration:n}=Bp.add,i=n*t,s=Ne("div",`${YM}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i}ms linear 50ms both`}),r=Ne("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Ne("p",{marginTop:"1em"});o.innerText=e;let a=Ne("div",`${YM}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=Ne("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(l,r,o,a),s}var x4=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(x4||{}),D4=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(D4||{}),M4=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(M4||{}),khe=.25,Lhe=.125,mg=class{constructor(e,t,{datum:n},i){this.type=e,this.event=t,this.datum=n,this.seriesId=i.id}},iI=class{constructor(e,t,n){this.series=e,this.seriesGrouping=t,this.oldGrouping=n,this.type="groupingChanged"}},XC=class extends VB{constructor(e){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=mg,this.internalId=As(this),this.contentGroup=new ui({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new ui({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new ui({name:`${this.internalId}-annotation`}),this.labelGroup=new ui({name:`${this.internalId}-series-labels`}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new TE,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new zo,this._pickNodeCache=new EE;let{moduleCtx:t,pickModes:n,directionKeys:i={},directionNames:s={},canHaveAxes:r=!1,usesPlacedLabels:o=!1}=e;this.ctx=t,this.directionKeys=i,this.directionNames=s,this.canHaveAxes=r,this.usesPlacedLabels=o,this.highlightGroup=new ui({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new ye({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ye({name:"highlightLabel",zIndex:10})),this.pickModes=n}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem({enabled:e,seriesId:this.id}),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled??!1}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){let{internalId:n,type:i,visible:s}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:n,type:i,visible:s,seriesGrouping:t}),this.fireEvent(new iI(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,n){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),n?.appendChild(this.annotationGroup)}detachSeries(e,t,n){e?.removeChild(this.contentGroup),t.removeChild(this.highlightGroup),t.removeChild(this.labelGroup),n?.removeChild(this.annotationGroup)}setSeriesIndex(e){return e===this._declarationOrder?!1:(this._declarationOrder=e,this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e,!0)}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){let n=this.resolveKeyDirection(e),i=t?.[n],s=[];if(!i)return s;let r=(...o)=>{for(let a of o)Array.isArray(a)?r(...a):typeof a=="object"?r(...Object.values(a)):s.push(a)};return r(...i.map(o=>this.properties[o])),s}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){return this.directionKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){let t=this.getSeriesDomain(e),n=this.moduleMap.mapModules(i=>i.getDomain(e)).flat();return n.length!==0?t.concat(n):t}getRange(e,t){return this.getSeriesRange(e,t)}getVisibleItems(e,t,n){return 1/0}getGradientFillOptions({bounds:e},t){let{axes:n}=this,i=n.x,s=n.y,r=i?.range??[0,1],o=s?.range??[0,1],[a,l]=Cn(r),[c,u]=Cn(o),d=l-a,h=u-c,p=[0,1];return e==="series"?p=this.getSeriesDomain("y"):e==="axes"&&(p=s?.scale.domain??[0,1]),{bbox:new Z(a,c,d,h),domain:p,defaultColorRange:t}}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){let{dimOpacity:t=1,enabled:n=!0}=this.properties.highlightStyle.series;if(!n||t===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return t}}getStrokeWidth(e){let{strokeWidth:t,enabled:n=!0}=this.properties.highlightStyle.series;if(!n||t===void 0)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){let e=this.ctx.highlightManager?.getActiveHighlight()?.series;return e==null?0:e!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNode(e,t,n=!1){let{pickModes:i,pickModeAxis:s,visible:r,contentGroup:o}=this;if(!r||!o.visible||t==="highlight"&&!this.properties.highlight.enabled||t==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let a=1/0;if(t==="tooltip"||t==="highlight-tooltip"){let{tooltip:h}=this.properties;a=typeof h.range=="number"?h.range:1/0,n||(n=h.range==="exact")}else if(t==="event"||t==="context-menu"){let{nodeClickRange:h}=this.properties;a=typeof h=="number"?h:1/0,n||(n=h==="exact")}let l=i.filter(h=>!n||h===0),{x:c,y:u}=e,d=JSON.stringify({x:c,y:u,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(d))return this._pickNodeCache.get(d);for(let h of l){let p;switch(h){case 0:p=this.pickNodeExactShape(e);break;case 1:p=this.pickNodeClosestDatum(e);break;case 2:p=s!=null?this.pickNodeMainAxisFirst(e,s==="main-category"):void 0;break}if(p&&p.distance<=a)return this._pickNodeCache.set(d,{pickMode:h,match:p.datum,distance:p.distance})}return this._pickNodeCache.set(d,void 0)}pickNodeExactShape(e){let t=this.contentGroup.pickNode(e.x,e.y);if(t&&t.datum.missing!==!0)return{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){let n=MC(e.x,e.y,t);if(n.nearest!==void 0&&n.nearest.datum.missing!==!0)return{datum:n.nearest.datum,distance:Math.sqrt(n.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeDoubleClick",e,t,this))}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){let{visible:n=!0,itemId:i,legendItemName:s}=t??{};this.toggleSeriesItem(n,e,i,s)}onLegendItemClick(e){let{enabled:t,itemId:n,series:i,legendType:s}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,o="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=r!=null&&r===e.legendItemName;(i.id===this.id||a||o!=null)&&this.toggleSeriesItem(t,s,n,r,e)}onLegendItemDoubleClick(e){let{enabled:t,itemId:n,series:i,numVisibleItems:s,legendType:r}=e,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=o!=null&&o===e.legendItemName;i.id===this.id||l||a!=null?this.toggleSeriesItem(!0,r,n,o,e):t&&s===1?this.toggleSeriesItem(!0,r,void 0,o):this.toggleSeriesItem(!1,r,void 0,o)}toggleSeriesItem(e,t,n,i,s){let r=this.id;(e||t!=="category")&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();let o={type:"seriesVisibilityChange",seriesId:r,itemId:n,legendItemName:s?.legendItemName??i,visible:e};this.fireEvent(o),this.ctx.legendManager.toggleItem({enabled:e,seriesId:r,itemId:n,legendItemName:i})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return R(S({},this.ctx),{series:this})}getLabelText(e,t,n=Fo){return e.formatter?this.ctx.callbackCache.call(e.formatter,S({seriesId:this.id},t))??n(t.value):n(t.value)}getMarkerStyle(e,t,n=e.getStyle()){let i={size:t.datum.point?.size??0},s=ke(i,n);if(e.itemStyler){let r=this.ctx.callbackCache.call(e.itemStyler,R(S(S({seriesId:this.id},s),t),{datum:t.datum.datum}));return ke(r,s)}return s}updateMarkerStyle(e,t,n,i=t.getStyle(),{applyTranslation:s=!0,selected:r=!0}={}){let{point:o}=n.datum,a=this.getMarkerStyle(t,n,i),l=this.visible&&a.size>0&&o&&!isNaN(o.x)&&!isNaN(o.y);if(s?e.setProperties(R(S({visible:l},a),{translationX:o?.x,translationY:o?.y})):e.setProperties(S({visible:l},a)),r||(e.fillOpacity*=khe,e.strokeOpacity*=Lhe),typeof t.shape=="function"&&!e.dirtyPath){e.path.clear(!0),e.updatePath(),e.checkPathDirty();let c=e.getBBox();if(o!==void 0&&c.isFinite()){let u=c.computeCenter(),[d,h]=["x","y"].map(p=>(a.strokeWidth??0)+Math.abs(u[p]-o[p]));o.focusSize=Math.max(c.width+d,c.height+h)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){let{width:t,height:n}=e??{width:NaN,height:NaN},i=e?{seriesRectWidth:t,seriesRectHeight:n}:void 0,s=No(this.nodeDataDependencies,i)!=null;return s&&(this._nodeDataDependencies=i,this.markNodeDataDirty()),s}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){let{datumCallbackCache:n}=this,i=n.get(e);if(i!=null)return i;let s=t();return n.set(e,s),s}};C([Ei({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],XC.prototype,"seriesGrouping",2);function Phe(e,t){let n=-t/e;return e!==0&&n>=0&&n<=1?[n]:[]}function Fhe(e,t,n){if(e===0)return Phe(t,n);let i=t*t-4*e*n,s=[];if(i===0){let r=-t/(2*e);r>=0&&r<=1&&s.push(r)}else if(i>0){let r=Math.sqrt(i),o=(-t-r)/(2*e),a=(-t+r)/(2*e);o>=0&&o<=1&&s.push(o),a>=0&&a<=1&&s.push(a)}return s}function Nhe(e,t,n,i){if(e===0)return Fhe(t,n,i);let s=t/e,r=n/e,o=i/e,a=(3*r-s*s)/9,l=(9*s*r-27*o-2*s*s*s)/54,c=a*a*a+l*l,u=1/3,d=[];if(c>=0){let h=Math.sqrt(c),p=Math.sign(l+h)*Math.pow(Math.abs(l+h),u),g=Math.sign(l-h)*Math.pow(Math.abs(l-h),u),f=Math.abs(Math.sqrt(3)*(p-g)/2),m=-u*s+(p+g);if(m>=0&&m<=1&&d.push(m),f===0){let v=-u*s-(p+g)/2;v>=0&&v<=1&&d.push(v)}}else{let h=Math.acos(l/Math.sqrt(-a*a*a)),p=u*s,g=2*Math.sqrt(-a),f=g*Math.cos(u*h)-p,m=g*Math.cos(u*(h+2*Math.PI))-p,v=g*Math.cos(u*(h+4*Math.PI))-p;f>=0&&f<=1&&d.push(f),m>=0&&m<=1&&d.push(m),v>=0&&v<=1&&d.push(v)}return d}function Zu(e,t,n,i,s,r,o,a){let l=(n-e)*(a-r)-(i-t)*(o-s);if(l===0)return 0;let c=((o-s)*(t-r)-(e-s)*(a-r))/l,u=((n-e)*(t-r)-(i-t)*(e-s))/l;return c>=0&&c<=1&&u>=0&&u<=1?1:0}function Ohe(e,t,n,i,s,r,o,a,l,c,u,d){let h=0,p=c-d,g=u-l,f=l*(d-c)-c*(u-l),m=b3(e,n,s,o),v=b3(t,i,r,a),y=p*m[0]+g*v[0],w=p*m[1]+g*v[1],x=p*m[2]+g*v[2],D=p*m[3]+g*v[3]+f,M=Nhe(y,w,x,D);for(let E of M){let A=E*E,I=E*A,T=m[0]*I+m[1]*A+m[2]*E+m[3],P=v[0]*I+v[1]*A+v[2]*E+v[3],O;l===u?O=(P-c)/(d-c):O=(T-l)/(u-l),O>=0&&O<=1&&h++}return h}function b3(e,t,n,i){return[-e+3*t-3*n+i,3*e-6*t+3*n,-3*e+3*t,e]}function E4(e,t,n,i,s,r,o,a,l,c){if(isNaN(e)||isNaN(t))return 0;r&&([s,i]=[i,s]);let u=(c-a)/(l-o),d=a-u*o,h=Math.pow(u,2)+1,p=2*(u*(d-t)-e),g=Math.pow(e,2)+Math.pow(d-t,2)-Math.pow(n,2),f=Math.pow(p,2)-4*h*g;if(f<0)return 0;let m=(-p+Math.sqrt(f))/2/h,v=(-p-Math.sqrt(f))/2/h,y=0;return[m,v].forEach(w=>{if(!(w>=Math.min(o,l)&&w<=Math.max(o,l)))return;let D=u*w+d,M=w-e,E=D-t,A=Math.atan2(E,M);Fa(A,i,s)&&y++}),y}function cC(e,t,n,i,s){return(1-s)**3*e+3*(1-s)**2*s*t+3*(1-s)*s**2*n+s**3*i}function uC(e,t,n,i,s){if(s<=Math.min(e,i))return e<i?0:1;if(s>=Math.max(e,i))return e<i?1:0;let r=0,o=1,a=NaN;for(let l=0;l<12;l+=1)a=(r+o)/2,cC(e,t,n,i,a)<s?r=a:o=a;return a}function dC(e,t,n,i,s,r,o,a,l){let c=(1-l)*e+l*n,u=(1-l)*t+l*i,d=(1-l)*n+l*s,h=(1-l)*i+l*r,p=(1-l)*s+l*o,g=(1-l)*r+l*a,f=(1-l)*c+l*d,m=(1-l)*u+l*h,v=(1-l)*d+l*p,y=(1-l)*h+l*g,w=(1-l)*f+l*v,x=(1-l)*m+l*y;return[[{x:e,y:t},{x:c,y:u},{x:f,y:m},{x:w,y:x}],[{x:w,y:x},{x:v,y},{x:p,y:g},{x:o,y:a}]]}function KM(e,t,n,i){let s=-e+3*t-3*n+i,r=3*e-6*t+3*n,o=-3*e+3*t;if(s===0){if(r!==0){let l=-o/r;if(l>0&&l<1)return[l]}return[]}let a=r*r-4*s*o;if(a>=0){let l=Math.sqrt(a),c=(-r+l)/(2*s),u=(-r-l)/(2*s);return[c,u].filter(d=>d>0&&d<1)}return[]}function I4(e,t,n,i,s,r,o,a){let l=KM(e,n,s,o),c=KM(t,i,r,a);return[...l,...c]}var Wp=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}rect(e,t,n,i){this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+i),this.lineTo(e,t+i),this.closePath()}roundRect(e,t,n,i,s){s=Math.min(s,n/2,i/2),this.moveTo(e,t+s),this.arc(e+s,t+s,s,Math.PI,1.5*Math.PI),this.lineTo(e+s,t),this.lineTo(e+n-s,t),this.arc(e+n-s,t+s,s,1.5*Math.PI,2*Math.PI),this.lineTo(e+n,t+s),this.lineTo(e+n,t+i-s),this.arc(e+n-s,t+i-s,s,0,Math.PI/2),this.lineTo(e+n-s,t+i),this.lineTo(e+s,t+i),this.arc(e+ +s,t+i-s,s,Math.PI/2,Math.PI),this.lineTo(e,t+i-s),this.closePath()}arc(e,t,n,i,s,r){this.openedPath=!0,this.path2d.arc(e,t,n,i,s,r),this.commands.push(2),this.params.push(e,t,n,i,s,r?1:0)}cubicCurveTo(e,t,n,i,s,r){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,n,i,s,r),this.commands.push(3),this.params.push(e,t,n,i,s,r)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){let n=this.commands,i=this.params,s=n.length,r=-1e4,o=-1e4,a=NaN,l=NaN,c=0,u=0,d=0;for(let h=0,p=0;h<s;h++)switch(n[h]){case 0:d+=Zu(a,l,c,u,r,o,e,t),c=i[p++],a=c,u=i[p++],l=u;break;case 1:d+=Zu(c,u,i[p++],i[p++],r,o,e,t),c=i[p-2],u=i[p-1];break;case 3:d+=Ohe(c,u,i[p++],i[p++],i[p++],i[p++],i[p++],i[p++],r,o,e,t),c=i[p-2],u=i[p-1];break;case 2:{let g=i[p++],f=i[p++],m=i[p++],v=i[p++],y=i[p++],w=!!i[p++];if(d+=E4(g,f,m,v,y,w,r,o,e,t),!isNaN(a)){let x=g+Math.cos(v)*m,D=f+Math.sin(v)*m;d+=Zu(c,u,x,D,r,o,e,t)}c=g+Math.cos(y)*m,u=f+Math.sin(y)*m;break}case 4:d+=Zu(a,l,c,u,r,o,e,t);break}return d%2===1}distanceSquared(e,t){let n=1/0,i=this.commands,s=this.params,r=i.length,o=NaN,a=NaN,l=0,c=0;for(let u=0,d=0;u<r;u++)switch(i[u]){case 0:l=o=s[d++],c=a=s[d++];break;case 1:{let h=s[d++],p=s[d++];n=Tp(e,t,l,c,h,p,n);break}case 3:G.error("Command.Curve distanceSquare not implemented");break;case 2:{let h=s[d++],p=s[d++],g=s[d++],f=s[d++],m=s[d++],v=h+Math.cos(f)*g,y=p+Math.sin(f)*g,w=!!s[d++];n=Tp(e,t,l,c,v,y,n),n=Gce(e,t,h,p,g,f,m,w,n),l=h+Math.cos(m)*g,c=p+Math.sin(m)*g;break}case 4:n=Tp(e,t,l,c,o,a,n);break}return n}toSVG(e=(t,n)=>({x:t,y:n})){let t=[],{commands:n,params:i}=this,s=(o,...a)=>{t.push(o);for(let l=0;l<a.length;l+=2){let{x:c,y:u}=e(a[l],a[l+1]);t.push(c,u)}},r=0;for(let o of n)switch(o){case 0:s("M",i[r++],i[r++]);break;case 1:s("L",i[r++],i[r++]);break;case 3:s("C",i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);break;case 2:{let a=i[r++],l=i[r++],c=i[r++],u=i[r++],d=i[r++],h=i[r++],p=h?u-d:d-u;p<0&&(p+=Math.ceil(-p/(2*Math.PI))*2*Math.PI),h&&(p=-p);let g=Math.max(Math.ceil(Math.abs(p)/(Math.PI/2)),1),f=p/g,m=4/3*Math.tan(f/4),v=t.length===0?"M":"L";s(v,a+Math.cos(u)*c,l+Math.sin(u)*c);for(let y=0;y<g;y+=1){let w=u+f*(y+0),x=u+f*(y+1),D=c*Math.sin(w),M=c*Math.cos(w),E=c*Math.sin(x),A=c*Math.cos(x);s("C",a+M-m*D,l+D+m*M,a+A+m*E,l+E-m*A,a+A,l+E)}break}case 4:t.push("Z");break}return t.join(" ")}computeBBox(){let{commands:e,params:t}=this,[n,i,s,r]=[1/0,1/0,-1/0,-1/0],[o,a]=[NaN,NaN],[l,c]=[NaN,NaN],u=(h,p,g)=>{n=Math.min(p,n),i=Math.min(h,i),s=Math.max(h,s),r=Math.max(p,r),g&&([o,a]=[h,p])},d=0;for(let h of e)switch(h){case 0:u(t[d++],t[d++],!0),[l,c]=[o,a];break;case 1:u(t[d++],t[d++],!0);break;case 3:{let p=t[d++],g=t[d++],f=t[d++],m=t[d++],v=t[d++],y=t[d++];u(v,y,!0),I4(o,a,p,g,f,m,v,y).forEach(x=>{let D=cC(o,p,f,v,x),M=cC(a,g,m,y,x);u(D,M)});break}case 2:{let p=t[d++],g=t[d++],f=t[d++],m=gt(t[d++]),v=gt(t[d++]);t[d++]&&([m,v]=[v,m]);let w=(D,M)=>{let E=p+f*Math.cos(D),A=g+f*Math.sin(D);u(E,A,M)};w(m),w(v,!0);let x=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(let D of x)(m<v&&m<=D&&D<=v||m>v&&(m<=D||D<=v))&&w(D);break}case 4:[o,a]=[l,c];break}return new Z(i,n,s-i,r-n)}};function we(e){let{changeCb:t,convertor:n}=e??{};return q({type:"path",convertor:n,changeCb:t})}var Ii=(()=>{let e=class extends Es{constructor(){super(...arguments),this.path=new Wp,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty())}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}isPointInPath(t,n){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,n)}distanceSquared(t,n){return this.distanceSquaredTransformedPoint(t,n)}svgPathData(t){return this.updatePathIfDirty(),this.path.toSVG(t)}distanceSquaredTransformedPoint(t,n){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,n)?0:this.path.distanceSquared(t,n)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(t){return t.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=t.devicePixelRatio,this.updatePathIfDirty(),super.preRender(t,this.path.commands.length)}render(t){let{ctx:n}=t;if(this.clip&&!isNaN(this._clipX)&&!isNaN(this._clipY)){n.save();let i=this.strokeWidth/2;this._clipPath??(this._clipPath=new Wp),this._clipPath.clear(),this._clipPath.rect(-i,-i,this._clipX+i,this._clipY+i+i),n.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(n),n.restore()}else this._clipPath=void 0,this.drawPath(n);this.fillShadow?.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}toSVG(){if(!this.visible)return;let t=Ds("path");return t.setAttribute("d",this.svgPathData()),this.applySvgFillAttributes(t),this.applySvgStrokeAttributes(t),{elements:[t]}}};return e.className="Path",e})();C([we()],Ii.prototype,"clip",2);C([we()],Ii.prototype,"clipX",1);C([we()],Ii.prototype,"clipY",1);var _he=class{constructor(e){this.swapChain=e,this.div=Ne("div"),this.svg=Ds("svg"),this.outerPath=Ds("path"),this.innerPath=Ds("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=Ne("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",t=>this.onSwap(t))}clear(){}update(e,t,n){if(t!=null)if(e instanceof Ii){let i=(r,o)=>{let{x:a,y:l}=Pt.toCanvasPoint(e,r,o);return a-=t.x??0,l-=t.y??0,{x:a,y:l}},s=e.svgPathData(i);this.outerPath.setAttribute("d",s),this.innerPath.setAttribute("d",s),this.show(this.svg)}else{let i;if(n){let s=Math.max(e.x-t.x,0),r=Math.max(e.y-t.y,0),o=Math.min(e.x+e.width-t.x,t.width),a=Math.min(e.y+e.height-t.y,t.height);i=new Z(s,r,o-s,a-r)}else i=new Z(e.x-t.x,e.y-t.y,e.width,e.height);oC(this.div,i),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;let t={true:"1",false:"0",undefined:""};this.element.parentElement?.style.setProperty("opacity",t[`${e}`])}isFocusVisible(){let e=this.element.parentElement;return e!=null&&ft().getComputedStyle(e).opacity==="1"}},Bhe=class{constructor(e,t,n,i){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=s=>(Qs(s.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",s)),this.onFocus=s=>(Qs(s.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",s)),ot(this.label1,"id",`${n}-label1`),ot(this.label2,"id",`${n}-label2`),Qs(this.label1,"display","none"),Qs(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),ot(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(e){let t=Ne("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(let e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){this.listeners[e].push(t),e==="swap"&&t(this.activeAnnouncer)}dispatch(e,t){e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),this.listeners[e].forEach(n=>n(t))}swap(e){let t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],dc(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),dc(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},Vhe={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function Ghe(e,t){for(let n of t)if("code"in n){if(n.code===e.code)return!0}else if(n.key===e.key&&(n.shift===void 0||n.shift===e.shiftKey)&&(n.ctrlOrMeta===void 0||n.ctrlOrMeta===e.ctrlKey||n.ctrlOrMeta===e.metaKey))return!0;return!1}function zhe(e){for(let[t,{activatesFocusIndicator:n=!0,bindings:i}]of Object.entries(Vhe))if(Ghe(e,i))return{name:t,activatesFocusIndicator:n}}function Hhe(e,t,n){let i=XE(e,n.datum);if(i!=null)return{x:i.canvasX,y:i.canvasY};let s=n.bounds;if(s!=null){if(s instanceof Z){let{x:r,y:o}=s.computeCenter();return{x:t.x+r,y:t.y+o}}return Pt.toCanvas(s).computeCenter()}}function jhe({bounds:e}){return e instanceof Z?e:e!=null?Pt.toCanvas(e):Z.NaN}function Whe(e,t,n){let{x:i,y:s}=Hhe(e,t,n)??{};if(i!==void 0&&s!==void 0)return{type:"keyboard",canvasX:i,canvasY:s}}function qM(e,t,n,i){let{top:s,right:r,bottom:o,left:a,width:l,height:c}=i;return a!=null?l!=null?r=n.width-a+l:r!=null&&(l=n.width-a-r):r!=null&&l!=null&&(a=n.width-r-l),s!=null?c!=null?o=n.height-s-c:o!=null&&(c=n.height-o-s):o!=null&&c!=null&&(s=n.height-o-c),l==null?c==null?(l=e,c=t):l=Math.ceil(e*c/t):c==null&&(c=Math.ceil(t*l/e)),a==null&&(r==null?a=Math.floor((n.width-l)/2):a=n.width-r-l),s==null&&(o==null?s=Math.floor((n.height-c)/2):s=n.height-c-o),{x:a,y:s,width:l,height:c}}var Ty=null;function ed(e){if(e!=null)return e===""?"":(Ty??(Ty=Ne("div")),Ty.textContent=String(e),Ty.innerHTML)}function Dp(e,t){let{path:n,size:i}=e,{x:s,y:r}=e;n.clear();let o=!1;for(let[a,l]of t){let c=s+(a-.5)*i,u=r+(l-.5)*i;o?n.lineTo(c,u):n.moveTo(c,u),o=!0}n.closePath()}var Uhe={circle({path:e,x:t,y:n,size:i}){let s=i/2;e.clear(),e.arc(t,n,s,0,Math.PI*2),e.closePath()},cross(e){Dp(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){Dp(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:e,x:t,y:n,size:i}){let s=i/4;n=n+s/2,e.clear(),e.arc(t-s,n-s,s,tn(130),tn(330)),e.arc(t+s,n-s,s,tn(220),tn(50)),e.lineTo(t,n+s),e.closePath()},pin({path:e,x:t,y:n,size:i}){e.moveTo(t+(.15625-.5)*i,n+(.34375-.5)*i),e.cubicCurveTo(t+(.15625-.5)*i,n+(.151491-.5)*i,t+(.307741-.5)*i,n+(0-.5)*i,t+(.5-.5)*i,n+(0-.5)*i),e.cubicCurveTo(t+(.692259-.5)*i,n+(0-.5)*i,t+(.84375-.5)*i,n+(.151491-.5)*i,t+(.84375-.5)*i,n+(.34375-.5)*i),e.cubicCurveTo(t+(.84375-.5)*i,n+(.493824-.5)*i,t+(.784625-.5)*i,n+(.600181-.5)*i,t+(.716461-.5)*i,n+(.695393-.5)*i),e.cubicCurveTo(t+(.699009-.5)*i,n+(.719769-.5)*i,t+(.681271-.5)*i,n+(.743104-.5)*i,t+(.663785-.5)*i,n+(.766105-.5)*i),e.cubicCurveTo(t+(.611893-.5)*i,n+(.834367-.5)*i,t+(.562228-.5)*i,n+(.899699-.5)*i,t+(.528896-.5)*i,n+(.980648-.5)*i),e.cubicCurveTo(t+(.524075-.5)*i,n+(.992358-.5)*i,t+(.512663-.5)*i,n+(1-.5)*i,t+(.5-.5)*i,n+(1-.5)*i),e.cubicCurveTo(t+(.487337-.5)*i,n+(1-.5)*i,t+(.475925-.5)*i,n+(.992358-.5)*i,t+(.471104-.5)*i,n+(.980648-.5)*i),e.cubicCurveTo(t+(.487337-.5)*i,n+(1-.5)*i,t+(.475925-.5)*i,n+(.992358-.5)*i,t+(.471104-.5)*i,n+(.980648-.5)*i),e.cubicCurveTo(t+(.437772-.5)*i,n+(.899699-.5)*i,t+(.388107-.5)*i,n+(.834367-.5)*i,t+(.336215-.5)*i,n+(.766105-.5)*i),e.cubicCurveTo(t+(.318729-.5)*i,n+(.743104-.5)*i,t+(.300991-.5)*i,n+(.719769-.5)*i,t+(.283539-.5)*i,n+(.695393-.5)*i),e.cubicCurveTo(t+(.215375-.5)*i,n+(.600181-.5)*i,t+(.15625-.5)*i,n+(.493824-.5)*i,t+(.15625-.5)*i,n+(.34375-.5)*i),e.closePath()},plus(e){Dp(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:e,x:t,y:n,size:i,pixelRatio:s}){let r=i/2;e.clear(),e.moveTo(bo(s,t-r),bo(s,n-r)),e.lineTo(bo(s,t+r),bo(s,n-r)),e.lineTo(bo(s,t+r),bo(s,n+r)),e.lineTo(bo(s,t-r),bo(s,n+r)),e.closePath()},star({path:e,x:t,y:n,size:i}){let r=i/2,o=r/2,a=Math.PI/2;for(let l=0;l<5*2;l++){let c=l%2===0?r:o,u=l*Math.PI/5-a,d=t+Math.cos(u)*c,h=n+Math.sin(u)*c;e.lineTo(d,h)}e.closePath()},triangle(e){Dp(e,[[.5,0],[1,.87],[0,.87]])}},vg=class extends Ii{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}updatePath(){let{path:e,shape:t,x:n,y:i,size:s}=this,r=this.layerManager?.canvas?.pixelRatio??1,o=pn.anchor(t),a={path:e,x:n-(o.x-.5)*s,y:i-(o.y-.5)*s,size:s,pixelRatio:r};e.clear(),typeof t=="string"?Uhe[t](a):typeof t=="function"&&t(a)}computeBBox(){let{x:e,y:t,size:n}=this,i=pn.anchor(this.shape);return new Z(e-n*i.x,t-n*i.y,n,n)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};C([we()],vg.prototype,"shape",2);C([we()],vg.prototype,"x",2);C([we()],vg.prototype,"y",2);C([we({convertor:Math.abs})],vg.prototype,"size",2);var pn=class extends gd(ME(gc(vg))){static anchor(e){return e==="pin"?{x:.5,y:1}:typeof e=="function"&&"anchor"in e?e.anchor:{x:.5,y:.5}}constructor(e){super(e),e?.shape!=null&&(this.shape=e.shape)}};function A4(e,t,n=t*(5/3)){let i=new ye,s=Math.min(e.marker.strokeWidth,2),r=Math.min(e.line?.strokeWidth??0,2),o=Math.max(e.marker.enabled===!1?0:t,e.line==null?0:n),a=Math.max(e.marker.enabled===!1?0:t,r);if(e.line!=null){let{stroke:l,strokeOpacity:c,lineDash:u}=e.line,d=new Zi;d.x1=0,d.y1=a/2,d.x2=o,d.y2=a/2,d.stroke=l,d.strokeOpacity=c,d.strokeWidth=r,d.lineDash=u,i.append(d)}if(e.marker.enabled!==!1){let{shape:l,fill:c,fillOpacity:u,stroke:d,strokeOpacity:h,lineDash:p,lineDashOffset:g}=e.marker,f=new pn;f.shape=l??"square",f.size=t,f.fill=c,f.fillOpacity=u,f.stroke=d,f.strokeOpacity=h,f.strokeWidth=s,f.lineDash=p,f.lineDashOffset=g;let m=pn.anchor(l),v=o/2+(m.x-.5)*t,y=a/2+(m.y-.5)*t,w=t/(t+s);f.x=0,f.y=0,f.translationX=v,f.translationY=y,f.scalingX=w,f.scalingY=w,i.append(f)}return ye.toSVG(i,o,a)}var S3=.1,x3=200,D3=12,$he=.5,Yhe=class extends zo{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=e,this.y1=t,this.t0=Date.now(),this.animationFrameHandle==null&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;let{x1:e,y1:t,t0:n}=this,i=Date.now(),s=i-n;this.t0=i;let r=.001,o=Math.ceil(s/(r*1e3))|0,{x:a,y:l,vx:c,vy:u}=this;for(let d=0;d<o;d+=1){let h=a-e,p=l-t,g=-(x3*h+D3*c)/S3,f=-(x3*p+D3*u)/S3;c+=g*r,u+=f*r,a+=c*r,l+=u*r}Math.hypot(a-e,l-t)<$he?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=c,this.vy=u,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}},zn="ag-charts-tooltip",R4="ag-charts-tooltip--dark";function T4(e){let t=[];return e.type==="raw"?"":(e.heading!=null&&t.push(e.heading),e.title!=null&&t.push(e.title),e.data?.forEach(n=>{t.push(n.label??n.fallbackLabel,n.value)}),t.join("; "))}function M3(e,t,n){let i="";e==null?i+=`<span class="${zn}-label">${ed(t)}</span>`:(i+=`<span class="${zn}-label">${ed(e)}</span>`,i+=" ",i+=`<span class="${zn}-value">${ed(t)}</span>`);let s=[`${zn}-row`];return n&&s.push(`${zn}-row--inline`),i=`<div class="${s.join(" ")}">${i}</div>`,i}function Khe(e){if(e.type==="raw")return e.rawHtmlString;let t="";if((e.heading==null||e.title==null)&&e.data?.length===1&&e.data[0].label==null&&e.data[0].value!=null){let n=e.data[0];t+=M3(e.heading??e.title,n.value,!1)}else{let n=e.title==null&&e.data?.length===1;e.heading!=null&&(t+=`<span class="${zn}-heading">${ed(e.heading)}</span>`,t+=" ");let i=e.symbol==null?void 0:A4(e.symbol,12);i!=null&&(e.title!=null||e.data?.length)&&(t+=`<span class="${zn}-symbol">${i}</span>`),e.title!=null&&(t+=`<span class="${zn}-title">${ed(e.title)}</span>`,t+=" "),e.data?.forEach(s=>{t+=M3(s.label??s.fallbackLabel,s.value,n),t+=" "})}return t=`<div class="${zn}-content">${t.trimEnd()}</div>`,t}var Cd=class extends Se{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};C([b(ut(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0},{value:"sparkline-",undocumented:!0}],"a position type"))],Cd.prototype,"type",2);C([b(je)],Cd.prototype,"xOffset",2);C([b(je)],Cd.prototype,"yOffset",2);var Hr=class extends Se{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new Cd,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new Yhe,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this._compact=!1,this._visible=!1,this.positionParams=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e){"togglePopover"in ft().HTMLElement.prototype&&(this.element=e.addChild("canvas-overlay",zn),this.element.setAttribute("popover","manual"),this.element.className=zn)}destroy(e){e.removeChild("canvas-overlay",zn),this.destroyFns.forEach(t=>t())}isVisible(){return this._visible}contains(e){return this.element?.contains(e)??!1}updateTooltipPosition(){let{element:e,positionParams:t}=this;if(e==null||t==null)return;let{canvasRect:n,relativeRect:i,meta:s}=t,{x:r,y:o}=this.springAnimation,a=s.position?.type??this.position.type,l=s.position?.xOffset??0,c=s.position?.yOffset??0,u=i.x,d=i.y,h=i.width-e.clientWidth-1+u,p=i.height-e.clientHeight+d,g=this.getTooltipBounds({positionType:a,canvasX:r,canvasY:o,yOffset:c,xOffset:l,canvasRect:n}),f=qM(e.clientWidth,e.clientHeight,i,g);a==="sparkline"&&(f.x<=u||f.x>=h)&&(g=this.getTooltipBounds({positionType:"sparkline-constrained",canvasX:r,canvasY:o,yOffset:c,xOffset:l,canvasRect:n}),f=qM(e.clientWidth,e.clientHeight,i,g));let m=De(u,f.x,h),v=De(d,f.y,p),y=m!==f.x||v!==f.y,w=(a==="node"||a==="pointer")&&!y&&!l&&!c,x=s.showArrow??this.showArrow??w;this.updateShowArrow(x),this.updateCompact(a==="sparkline"||a==="sparkline-constrained"),e.style.transform=`translate(${m}px, ${v}px)`}show(e,t,n,i,s=!1){let{element:r}=this;if(r!=null&&i!=null)r.innerHTML=Khe(i);else if(r==null||r.innerHTML===""){this.toggle(!1);return}let o={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};this.positionParams={canvasRect:t,relativeRect:o,meta:n},this.springAnimation.update(n.canvasX,n.canvasY),r.style.top=`${t.top}px`,r.style.left=`${t.left}px`,n.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",r.removeAttribute("aria-hidden")):(this.enableInteraction=!1,r.style.pointerEvents="none",r.setAttribute("aria-hidden","true")),this.delay>0&&!s?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}hide(){this.springAnimation.reset(),this.toggle(!1)}toggle(e){if(!this.element?.isConnected)return;this._visible=e;let{classList:t}=this.element,n=(i,s)=>t.toggle(`${zn}--${i}`,s);e||clearTimeout(this.showTimeout),n("no-interaction",!this.enableInteraction),n("arrow",this._showArrow),n("compact",this._compact),t.toggle(R4,this.darkTheme),this.element.togglePopover(e),e&&this.updateTooltipPosition();for(let i of this.wrapTypes)t.toggle(`${zn}--wrap-${i}`,i===this.wrapping)}updateShowArrow(e){this._showArrow=e}updateCompact(e){this._compact=e}getTooltipBounds(e){if(!this.element)return{};let{positionType:t,canvasX:n,canvasY:i,yOffset:s,xOffset:r,canvasRect:o}=e,{clientWidth:a,clientHeight:l}=this.element,c={width:a,height:l};switch(t){case"node":case"pointer":return c.top=i+s-l-8,c.left=n+r-a/2,c;case"top":return c.top=s,c.left=o.width/2-a/2+r,c;case"right":return c.top=o.height/2-l/2+s,c.left=o.width-a/2+r,c;case"left":return c.top=o.height/2-l/2+s,c.left=r,c;case"bottom":return c.top=o.height-l+s,c.left=o.width/2-a/2+r,c;case"top-left":return c.top=s,c.left=r,c;case"top-right":return c.top=s,c.left=o.width-a+r,c;case"bottom-right":return c.top=o.height-l+s,c.left=o.width-a+r,c;case"bottom-left":return c.top=o.height-l+s,c.left=r,c;case"sparkline":return c.top=i+s-l/2,c.left=n+r+8,c;case"sparkline-constrained":return c.top=i+s-l/2,c.left=n+r-8-a,c}}};C([b(le)],Hr.prototype,"enabled",2);C([b(le,{optional:!0})],Hr.prototype,"showArrow",2);C([b(j)],Hr.prototype,"delay",2);C([b(_C,{optional:!0})],Hr.prototype,"range",2);C([b(OC)],Hr.prototype,"wrapping",2);C([b(K)],Hr.prototype,"position",2);C([b(le)],Hr.prototype,"darkTheme",2);C([b(ut(["extended","canvas"]))],Hr.prototype,"bounds",2);var qhe=class extends Ka{constructor(e){super(),this.chart=e,this.id=As(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=bue(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=4){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}});let t=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),n=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new Bhe(t,n,this.id,"img"),this.swapChain.addListener("blur",()=>this.onBlur()),this.swapChain.addListener("focus",()=>this.onFocus()),this.focusIndicator=new _he(this.swapChain),this.focusIndicator.overrideFocusVisible(e.mode==="integrated"?!1:void 0);let{seriesDragInterpreter:i,seriesWidget:s,containerWidget:r}=e.ctx.widgets;s.setTabIndex(-1),this.destroyFns.push(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2"),s.addListener("focus",()=>this.swapChain.focus()),s.addListener("mousemove",o=>this.onHover(o)),s.addListener("wheel",o=>this.onWheel(o)),s.addListener("mouseleave",o=>this.onLeave(o)),s.addListener("keydown",o=>this.onKeyDown(o)),s.addListener("contextmenu",(o,a)=>this.onContextMenu(o,a)),i.addListener("drag-move",o=>this.onDragMove(o)),i.addListener("click",o=>this.onClick(o,s)),i.addListener("dblclick",o=>this.onClick(o,s)),r.addListener("contextmenu",(o,a)=>this.onContextMenu(o,a)),r.addListener("click",(o,a)=>this.onClick(o,a)),r.addListener("dblclick",(o,a)=>this.onClick(o,a)),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.domManager.addListener("resize",()=>this.clearAll()),e.ctx.highlightManager.addListener("highlight-change",o=>this.changeHighlightDatum(o)),e.ctx.layoutManager.addListener("layout:complete",o=>this.layoutComplete(o)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),e.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),e.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return!(e.device!=="touch"||e.type==="click"||this.chart.ctx.chartService.touch.dragAction==="hover"||this.chart.ctx.chartService.touch.dragAction==="drag"&&this.isState(9))}dataChanged(){var e;(e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator.clear(),this.clearHighlight()}preSceneRender(){this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.focusIndicator.isFocusVisible()&&this.isState(34)&&this.handleSeriesFocus(0,0,!0)}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((t,n)=>{let i=t.properties.focusPriority??1/0,s=n.properties.focusPriority??1/0;return i===s&&([i,s]=[t._declarationOrder,n._declarationOrder]),i<s?-1:i>s?1:0}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.paddedRect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.paddedRect),this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){let{sourceEvent:n}=e;if(n.currentTarget!=t.getElement())return;if(n.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){let{currentX:l,currentY:c}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:n,canvasX:l,canvasY:c},{})}return}let i,s;if(this.focusIndicator.isFocusVisible())i=this.chart.ctx.highlightManager.getActiveHighlight(),i&&this.seriesRect&&i.midPoint&&(s=Pt.toCanvasPoint(i.series.contentGroup,i.midPoint.x,i.midPoint.y));else if(this.isState(36)){let l=this.pickNode({x:e.currentX,y:e.currentY},"context-menu");l&&(this.chart.ctx.highlightManager.updateHighlight(this.id),i=l.datum)}let r=i?.series;this.clearAll();let o=e.currentX+t.cssLeft(),a=e.currentY+t.cssTop();this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{sourceEvent:n,canvasX:o,canvasY:a},{pickedSeries:r,pickedNode:i},s)}onLeave(e){!this.isState(41)||e.sourceEvent.relatedTarget?.className==="ag-charts-text-input__textarea"||this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(e)||(this.chart.ctx.domManager.updateCursor(this.id),this.focusIndicator.isFocusVisible()||this.clearAll())}onWheel(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e))}onHover(e){this.isState(41)&&this.onHoverLikeEvent(e)}onHoverLikeEvent(e){if(!this.isIgnoredTouch(e)&&((e.device==="touch"||Zhe(e,"drag-move"))&&(this.tooltip.lastHover=e),e.device==="touch"&&this.chart.ctx.chartService.touch.dragAction==="hover"&&e.sourceEvent.preventDefault(),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),this.isState(32))){let{currentX:t,currentY:n}=e,i=this.pickNode({x:t,y:n},"event");i?.series.hasEventListener("nodeClick")||i?.series.hasEventListener("nodeDoubleClick")?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(e,t){if(e.device==="touch"&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;if(this.focusIndicator.overrideFocusVisible(!1),this.onHoverLikeEvent(e),!this.isState(32))return;if(t==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(e)){this.update(4),e.sourceEvent.preventDefault();return}let n={type:e.type==="click"?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(n)}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator.isFocusVisible()?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(){this.isState(34)&&(this.hoverDevice="pointer",this.clearAll(),this.focusIndicator.overrideFocusVisible(void 0))}onKeyDown(e){if(!this.isState(43))return;let t=zhe(e.sourceEvent);switch(t?.activatesFocusIndicator===!1&&this.focusIndicator.overrideFocusVisible(this.previousInputDevice==="keyboard"),t?.name){case"redo":return this.chart.ctx.chartEventManager.seriesEvent("series-redo");case"undo":return this.chart.ctx.chartEventManager.seriesEvent("series-undo");case"zoomin":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(1,e);case"zoomout":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(-1,e);case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,n){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),n.sourceEvent.preventDefault(),this.chart.ctx.chartEventManager.seriesEvent("series-focus-change"))}onSubmit(e){if(!this.isState(34))return;let{series:t,datum:n}=this.focus,i=e.sourceEvent;t!==void 0&&n!==void 0?t.fireNodeClickEvent(i,n):this.chart.fireEvent({type:"click",event:i}),i.preventDefault()}checkSeriesNodeClick(e){let t=this.pickNode({x:e.currentX,y:e.currentY},"event");return t==null?!1:e.type==="click"?(t.series.fireNodeClickEvent(e.sourceEvent,t.datum),!0):e.type==="dblclick"?(e.preventZoomDblClick=t.distance===0,t.series.fireNodeDoubleClickEvent(e.sourceEvent,t.datum),!0):!1}handleFocus(e,t){let n=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);n==null?this.handleSeriesFocus(e,t):this.focusIndicator.update(n.rect,this.seriesRect,!1)}handleSeriesFocus(e,t,n=!1){if(this.chart.chartType==="hierarchy"||this.chart.chartType==="gauge"){this.handleSoloSeriesFocus(e,t,n);return}let{focus:i,seriesRect:s}=this,r=i.sortedSeries.filter(u=>u.visible&&u.focusable);if(r.length===0)return;let o={datumIndex:i.datumIndex-t,otherIndex:i.seriesIndex-e};i.seriesIndex=De(0,i.seriesIndex,r.length-1),i.series=r[i.seriesIndex];let{datumIndex:a,seriesIndex:l}=i,c=i.series.pickFocus({datumIndex:a,datumIndexDelta:t,otherIndex:l,otherIndexDelta:e,seriesRect:s});this.updatePickedFocus(e,t,o,c,n)}handleSoloSeriesFocus(e,t,n){this.focus.series=this.focus.sortedSeries[0];let{focus:{series:i,seriesIndex:s,datumIndex:r},seriesRect:o}=this;if(i==null)return;let a={datumIndex:this.focus.datumIndex-t,otherIndex:this.focus.seriesIndex-e},l=i.pickFocus({datumIndex:r,datumIndexDelta:t,otherIndex:s,otherIndexDelta:e,seriesRect:o});this.updatePickedFocus(e,t,a,l,n)}updatePickedFocus(e,t,n,i,s){let{focus:r,hoverRect:o}=this;if(i===void 0||r.series===void 0||o===void 0)return;let{datum:a,datumIndex:l,otherIndex:c}=i;if(c!==void 0&&(r.seriesIndex=c),r.datumIndex=l,r.datum=a,this.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator.isFocusVisible()){let d=jhe(i),{x:h,y:p}=d.computeCenter();if(!o.containsPoint(h,p)&&this.chart.ctx.zoomManager.panToBBox(this.id,o,d))return}this.focusIndicator.update(i.bounds,this.seriesRect,i.clipFocusBox);let u=Whe(r.series,o,i);if(u!==void 0&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;let d=r.series.getTooltipContent(a),h=aC.makeTooltipMeta(u,r.series,a);this.chart.ctx.highlightManager.updateHighlight(this.id,a),this.chart.tooltip.enabled&&r.series.tooltipEnabled?this.chart.ctx.tooltipManager.updateTooltip(this.id,h,d):this.chart.ctx.tooltipManager.removeTooltip(this.id),s||(t===0&&e===0||n.datumIndex!==i.datumIndex||n.otherIndex!==(i.otherIndex??r.seriesIndex))&&this.swapChain.update(this.getDatumAriaText(a,d))}}getDatumAriaText(e,t){let n=t==null?"":T4(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:e.series.getDatumAriaText?.(e,n)??n})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator.clear()}handleHoverHighlight(e){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;let t=this.highlight.appliedHoverEvent;if(!t||!this.isState(41))return;let{currentX:n,currentY:i}=t,s=t.currentX+(this.hoverRect?.x??0),r=t.currentY+(this.hoverRect?.y??0);if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,r)){this.clearHighlight();return}let{range:o}=this.chart.highlight,a=o==="tooltip"?"highlight-tooltip":"highlight",l=this.pickNode({x:n,y:i},a);if(l){this.chart.ctx.highlightManager.updateHighlight(this.id,l.datum),this.hoverDevice="pointer";return}this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(e,t){if(!this.isState(41))return;let{currentX:n,currentY:i}=e,s=n+(this.hoverRect?.x??0),r=i+(this.hoverRect?.y??0),o=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,r)){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(o&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(o,"canvas-overlay",zn))return;let a=this.pickNode({x:e.currentX,y:e.currentY},"tooltip");if(!a){this.hoverDevice=="pointer"&&this.clearTooltip();return}this.hoverDevice="pointer";let l=a.series.getTooltipContent(a.datum);if(this.chart.tooltip.enabled&&a.series.tooltipEnabled&&l!=null){let d=aC.makeTooltipMeta({type:"pointermove",canvasX:s,canvasY:r},a.series,a.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,d,l)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}changeHighlightDatum(e){let t=new Set,{series:n=void 0,datum:i}=e.currentHighlight??{},{series:s=void 0,datum:r}=e.previousHighlight??{};s&&t.add(s),n&&t.add(n),s?.properties.cursor&&r&&this.chart.ctx.domManager.updateCursor(s.id),n?.properties.cursor&&n?.properties.cursor!=="default"&&i&&this.chart.ctx.domManager.updateCursor(n.id,n.properties.cursor),n==null||s==null?this.update(4):this.update(4,{seriesToUpdate:t})}pickNode(e,t,n){let i=[...this.series].reverse(),s;for(let r of i){if(!r.visible||!r.contentGroup.visible)continue;let{match:o,distance:a}=r.pickNode(e,t,n)??{};if(!(!o||a==null)&&((!s||s.distance>a)&&(s={series:r,distance:a,datum:o}),a===0))break}return s}};function Zhe(e,t){return e.type!==t}var E3=30,Xhe=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){let{internalId:t,type:n,contentGroup:i,seriesGrouping:s}=e,{groupIndex:r=t}=s??{},o=this.series.get(t);if(o!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(o)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=E3?"aggressive-grouping":"normal");let a=this.groups.get(n);a==null&&(a=new Map,this.groups.set(n,a));let l=this.lookupIdx(r),c=a.get(l);return c==null&&(c={type:n,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new ye({name:`${e.contentGroup.name??n}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,c)),this.series.set(t,{layerState:c,seriesConfig:e}),c.seriesIds.push(t),c.group.appendChild(i),c.group}changeGroup(e){let{internalId:t,seriesGrouping:n,type:i,contentGroup:s,oldGrouping:r}=e,{groupIndex:o=t}=n??{};this.groups.get(i)?.get(o)?.seriesIds.includes(t)||(this.series.has(t)&&this.releaseGroup({internalId:t,seriesGrouping:r,type:i,contentGroup:s}),this.requestGroup(e))}releaseGroup(e){let{internalId:t,contentGroup:n,type:i}=e;if(!this.series.has(t))throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);let s=this.series.get(t)?.layerState;s&&(s.seriesIds=s.seriesIds.filter(r=>r!==t),s.group.removeChild(n)),s?.seriesIds.length===0?(this.seriesRoot.removeChild(s.group),this.groups.get(s.type)?.delete(s.id),this.groups.get(i)?.delete(t)):s!=null&&s.seriesIds.length>0&&(s.group.zIndex=this.getLowestSeriesZIndex(s.seriesIds)),this.series.delete(t)}updateLayerCompositing(){this.groups.forEach(e=>{e.forEach(t=>{let{group:n,seriesIds:i}=t,s;i.length===0?s=!1:i.length>1?s=!0:s=this.series.get(i[0])?.seriesConfig.renderToOffscreenCanvas()===!0,n.renderToOffscreenCanvas=s,n.zIndex=this.getLowestSeriesZIndex(i)})})}lookupIdx(e){return this.mode==="normal"?e:typeof e=="string"&&(e=Number(e.split("-").at(-1)),!e)?0:Math.floor(De(0,e/this.expectedSeriesCount,1)*E3)}destroy(){this.groups.forEach(e=>{e.forEach(t=>{this.seriesRoot.removeChild(t.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){return e.reduce((n,i)=>{let r=this.series.get(i)?.seriesConfig.contentGroup.zIndex;return n==null||r==null?r:J_(n,r)<=0?n:r},void 0)??1}},k4=class extends Se{constructor(){super(...arguments),this.dragAction="drag"}};C([b(ut(["none","drag","hover"]))],k4.prototype,"dragAction",2);var Qhe=class{constructor(e,t,n,i,s){this.chart=e,this.dataService=t,this.updateService=n,this.zoomManager=i,this.animationManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(e=>e())}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){if(!this.dataService.isLazy())return;let e=this.getValidAxis(),t,n=!0;if(e){let i=this.zoomManager.getAxisZoom(e.id);t=this.getAxisWindow(e,i),n=this.shouldRefresh(e,i)}this.dirtyZoom=!1,this.dirtyDataSource=!1,n&&this.dataService.load({windowStart:t?.min,windowEnd:t?.max})}getValidAxis(){return this.chart.axes.find(e=>e.type==="time")}shouldRefresh(e,t){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;let n=this.lastAxisZooms.get(e.id);return n&&t.min===n.min&&t.max===n.max?!1:(this.lastAxisZooms.set(e.id,t),!0)}getAxisWindow(e,t){let{domain:n}=e.scale;if(!t||n.length===0||isNaN(Number(n[0])))return;let i=Number(n[1])-Number(n[0]),s=new Date(Number(n[0])+i*t.min),r=new Date(Number(n[0])+i*t.max);return{min:s,max:r}}},Jhe=/^((?!chrome|android).)*safari/i,epe=/Version\/(\d+(\.\d+)?)/,tpe=/Chrome/,npe=/Chrome\/(\d+)/,ipe=/Edg/,spe=/OPR/;function rpe(){let{userAgent:e}=ft("navigator");if(Jhe.test(e)){let t=parseFloat(epe.exec(e)?.[1]??"0"),n=Math.floor(t)>16;return n||G.warnOnce(`Unsupported Safari version: ${t}; ${e}`),!n}else if(tpe.test(e)&&!ipe.test(e)&&!spe.test(e)){let t=parseInt(npe.exec(e)?.[1]??"0",10),n=t>126;return n||G.warnOnce(`Unsupported Chrome version: ${t}; ${e}`),!n}return!1}var ope=new Set(["map-shape-background","map-line-background"]),ape=class{constructor(e,t,n,i,s,r,o){this.chartLike=e,this.overlays=t,this.dataService=n,this.layoutManager=i,this.localeManager=s,this.animationManager=r,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(YM),this.destroyFns.push(this.layoutManager.addListener("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.destroyFns.forEach(e=>e()),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:e}}){let t=this.dataService.isLoading(),n=this.chartLike.series.some(c=>c.hasData),i=this.chartLike.series.some(c=>c.visible&&!ope.has(c.type));this.overlays.darkTheme?this.overlayElem.classList.add(w3):this.overlayElem.classList.remove(w3),this.overlayElem.style.left=`${e.x}px`,this.overlayElem.style.top=`${e.y}px`,this.overlayElem.style.width=`${e.width}px`,this.overlayElem.style.height=`${e.height}px`;let s=t,r=!t&&!n,o=n&&!i,a=this.overlays.unsupportedBrowser.enabled&&rpe();s?this.showOverlay(this.overlays.loading,e):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,e):this.hideOverlay(this.overlays.noData),o?this.showOverlay(this.overlays.noVisibleSeries,e):this.hideOverlay(this.overlays.noVisibleSeries),a?this.showOverlay(this.overlays.unsupportedBrowser,e):this.hideOverlay(this.overlays.unsupportedBrowser);let l=s||r||o||a;ot(this.overlayElem,"aria-hidden",!l)}showOverlay(e,t){if(!e.enabled)return;let n=e.getElement(this.animationManager,this.localeManager,t);this.overlayElem.appendChild(n)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText="\xA0"},this.animationManager)}},Ks=ct.create(!0,"opts"),sI=class extends Se{constructor(){super(...arguments),this.padding=new Ya(0)}};C([b(le,{optional:!0})],sI.prototype,"clip",2);C([b(K)],sI.prototype,"padding",2);var nn=(()=>{let e=class L4 extends VB{constructor(n,i){var s;super(),this.id=As(this),this.seriesRoot=new ui({name:`${this.id}-series-root`,zIndex:5}),this.annotationRoot=new ui({name:`${this.id}-annotation-root`,zIndex:9}),this.titleGroup=new ye({name:"titles",zIndex:13}),this.debug=ct.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new q2,this.padding=new Ya(20),this.seriesArea=new sI,this.keyboard=new tI,this.touch=new k4,this.mode="standalone",this.chartCaptions=new YC,this.suppressFieldDotNotation=!1,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new Rhe,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new q2,this.performUpdateType=7,this.runningUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new wue,this.updateRequestors={},this.performUpdateTrigger=Sue(({count:d})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(d)}catch(h){G.error("update error",h)}}).catch(h=>G.errorOnce(h))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=d=>{this.fireEvent(R(S({},d),{type:"seriesNodeClick"}))},this.onSeriesNodeDoubleClick=d=>{this.fireEvent(R(S({},d),{type:"seriesNodeDoubleClick"}))},this.onSeriesVisibilityChange=d=>{this.fireEvent(d)},this.seriesGroupingChanged=d=>{if(!(d instanceof iI))return;let{series:h,seriesGrouping:p,oldGrouping:g}=d;h.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:h.internalId,type:h.type,contentGroup:h.contentGroup,renderToOffscreenCanvas:()=>h.renderToOffscreenCanvas(),seriesGrouping:p,oldGrouping:g})},this.chartOptions=n;let r=i?.scene,o=i?.container??n.processedOptions.container??void 0,a=i?.styleContainer??n.specialOverrides.styleContainer,l=new ye({name:"root"});l.visible=!1,l.append(this.seriesRoot),l.append(this.annotationRoot),l.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new Hr,this.seriesLayerManager=new Xhe(this.seriesRoot),this.mode=n.userOptions.mode??this.mode;let c=this.ctx=new Ude(this,{chartType:this.getChartType(),scene:r,root:l,container:o,styleContainer:a,syncManager:new yhe(this),fireEvent:d=>this.fireEvent(d),updateCallback:(d,h)=>this.update(d,h),updateMutex:this.updateMutex});this._destroyFns.push(c.domManager.addListener("resize",()=>this.parentResize(c.domManager.containerSize))),this.overlays=new yd,(s=this.overlays.loading).renderer??(s.renderer=()=>The(this.overlays.loading.getText(c.localeManager),c.animationManager.defaultDuration)),this.processors=[new Qhe(this,c.dataService,c.updateService,c.zoomManager,c.animationManager),new ape(this,this.overlays,c.dataService,c.layoutManager,c.localeManager,c.animationManager,c.domManager)],this.highlight=new d4,this.container=o;let u=this.getModuleContext();c.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new qhe(this.initSeriesAreaDependencies()),this._destroyFns.push(c.layoutManager.registerElement(0,d=>{d.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(d)}),c.layoutManager.addListener("layout:complete",d=>this.chartCaptions.positionAbsoluteCaptions(d)),c.dataService.addListener("data-load",d=>{this.data=d.data}),this.title.registerInteraction(u,"beforebegin"),this.subtitle.registerInteraction(u,"beforebegin"),this.footnote.registerInteraction(u,"afterend"),zr.addWindowEvent("page-left",()=>this.destroy()),c.animationManager.addListener("animation-frame",()=>{this.update(6)}),c.animationManager.addListener("animation-start",()=>c.domManager.setDataBoolean("animating",!0)),c.animationManager.addListener("animation-stop",()=>c.domManager.setDataBoolean("animating",!1)),c.zoomManager.addListener("zoom-change",()=>{this.series.forEach(h=>h.animationState?.transition("updateData"));let d=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:d})})),this.parentResize(c.domManager.containerSize)}static getInstance(n){return L4.chartsInstances.get(n)}get canvasElement(){return this.ctx.scene.canvas.element}download(n,i){this.ctx.scene.download(n,i)}getCanvasDataURL(n){return this.ctx.scene.getDataURL(n)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(n){this.seriesAreaManager.focusIndicator.overrideFocusVisible(n)}initSeriesAreaDependencies(){let{ctx:n,tooltip:i,highlight:s,overlays:r,seriesRoot:o,mode:a}=this,l=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:l,ctx:n,tooltip:i,highlight:s,overlays:r,seriesRoot:o,mode:a}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(n=>n.enabled&&n.text).map(n=>n.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(let n of this.series)n.resetAnimation(this.chartAnimationPhase);for(let n of this.axes)n.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clear()}destroy(n){if(this.destroyed)return;let i=n?.keepTransferableResources,s;return this.performUpdateType=7,this._destroyFns.forEach(r=>r()),this.processors.forEach(r=>r.destroy()),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(r=>r.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),s}requestFactoryUpdate(n){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await n(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>G.errorOnce(i)))}update(n=0,i){if(this.destroyed)return;let{forceNodeDataRefresh:s=!1,skipAnimations:r,seriesToUpdate:o=this.series,newAnimationBatch:a}=i??{};this.ctx.widgets.seriesWidget.setDragTouchEnabled(this.touch.dragAction!=="none"),s&&this.series.forEach(l=>l.markNodeDataDirty());for(let l of o)this.seriesToUpdate.add(l);if(r&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=i?.skipSync??!1,this.debug.check()){let l=new Error().stack??"<unknown>";l=l.replace(/\([^)]*/g,""),this.updateRequestors[l]=n}n<this.performUpdateType&&(this.performUpdateType=n,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i?.backOffMs))}async performUpdate(n){let{performUpdateType:i,extraDebugStats:s,_performUpdateSplits:r,ctx:o}=this,a=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<6&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",Lp[i]);let l=performance.now();r.start??(r.start=l);let c=d=>{r[d]??(r[d]=0),r[d]+=performance.now()-l,l=performance.now()};switch(i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),c("\u2B07\uFE0F");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),c("\u{1F3ED}");case 3:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(3))break;await this.processLayout(),c("\u2316");case 4:{if(this.checkUpdateShortcut(4))break;await this.updateSeries(a),c("\u{1F914}"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing()}case 5:if(this.checkUpdateShortcut(5))break;o.updateService.dispatchPreSceneRender(),c("\u2196");case 6:if(this.checkUpdateShortcut(6))break;o.animationManager.endBatch(),s.updateShortcutCount=this.updateShortcutCount,o.scene.render({debugSplitTimes:r,extraDebugStats:s,seriesRect:this.seriesRect}),this.extraDebugStats={};for(let d of Object.keys(r))delete r[d];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}this.destroyed||(o.updateService.dispatchUpdateComplete(),this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=7),this._performUpdateNotify.notify();let u=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((u-r.start)*100)/100,count:n,performUpdateType:Lp[i]})}updateThemeClassName(){let n="ag-charts-theme-",i=[`${n}default`,`${n}default-dark`],s=i[0],r=!1,{theme:o}=this.chartOptions.processedOptions;for(;typeof o!="string"&&o!=null;)o=o.baseTheme;typeof o=="string"&&(s=o.replace("ag-",n),r=o.includes("-dark")),i.includes(s)||(s=r?i[1]:i[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();let{enabled:n,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(n?i??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(n){return this.destroyed?!0:this.updateShortcutCount>3?(G.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=n?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(n,i){i==null&&n.length===0||this.ctx.axisManager.updateAxes(i??[],n)}onSeriesChange(n,i){let s=i?.filter(r=>!n.includes(r))??[];this.destroySeries(s),this.seriesLayerManager?.setSeriesCount(n.length);for(let r of n){if(i?.includes(r))continue;let o=this.seriesLayerManager.requestGroup(r);r.attachSeries(o,this.seriesRoot,this.annotationRoot);let a=this;r.chart={get mode(){return a.mode},get isMiniChart(){return!1},get seriesRect(){return a.seriesRect}},r.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(r),r.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(n)}destroySeries(n){n?.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0})}addSeriesListeners(n){this.hasEventListener("seriesNodeClick")&&n.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&n.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&n.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),n.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(let n of this.axes)n.boundSeries=this.series.filter(i=>i.axes[n.direction]===n)}assignAxesToSeries(){let n=lE(this.axes,i=>i.direction);for(let i of this.series)for(let s of i.directions){let r=n[s];if(!r){G.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}let o=i.getKeys(s),a=r.find(l=>!l.keys.length||o.some(c=>l.keys.includes(c)));if(!a){G.warnOnce(`no matching axis for direction [${s}] and keys [${o}]; check series and axes configuration.`);return}i.axes[s]=a}}parentResize(n){if(n==null||this.width!=null&&this.height!=null)return;let{width:i,height:s}=n,{pixelRatio:r}=n;if(i=Math.floor(i),s=Math.floor(s),i===0&&s===0)return;let[o=0,a=0,l=1]=this._lastAutoSize??[];o===i&&a===s&&l===r||(this._lastAutoSize=[i,s,r],this.resize("SizeMonitor",{}))}resize(n,i){let{scene:s,animationManager:r}=this.ctx,{inWidth:o,inHeight:a,inMinWidth:l,inMinHeight:c,inOverrideDevicePixelRatio:u}=i;this.ctx.domManager.setSizeOptions(l??this.minWidth,c??this.minHeight,o??this.width,a??this.height);let d=o??this.width??this._lastAutoSize?.[0],h=a??this.height??this._lastAutoSize?.[1],p=u??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${n}`,{width:d,height:h,pixelRatio:p,stack:new Error().stack}),!(d==null||h==null||!We(d)||!We(h))&&s.resize(d,h,p)){r.reset();let g=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(g=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:g}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(i=>i.setChartData(this.data));let n=this.modulesManager.mapModules(i=>i.updateData?.(this.data));await Promise.all(n)}async processData(){this.series.some(r=>r.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());let n=new m4(this.mode,this.suppressFieldDotNotation),i=this.series.map(r=>(r.resetDatumCallbackCache(),r.processData(n))),s=this.modulesManager.mapModules(r=>r.processData?.(n));this._cachedData=n.execute(this._cachedData),await Promise.all([...i,...s]);for(let r of this.axes)r.processData();this.updateLegends()}updateLegends(n){for(let{legend:i,legendType:s}of this.modulesManager.legends())s==="category"?this.setCategoryLegendData(n):this.setLegendData(s,i)}setCategoryLegendData(n){var i;let{ctx:{legendManager:s,stateManager:r}}=this;n&&this.series.forEach(a=>{let l=n.find(c=>c.seriesId===a.id);a.onLegendInitialState("category",l)});let o=this.series.flatMap(a=>{let l=a.getLegendData("category");return s.updateData(a.id,l),l});if(n){r.setStateAndRestore(s,n);return}if(this.mode!=="integrated"){let a={},l=new Map(this.series.map(c=>[c.id,c.type]));for(let{seriesId:c,symbol:{marker:u},label:d}of o.filter(h=>!h.hideInLegend)){if(u.fill==null)continue;let h=l.get(c),p=a[h]??(a[h]={});p[i=d.text]??(p[i]=u.fill),p[d.text]!==u.fill&&G.warnOnce(`legend item '${d.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}s.update()}setLegendData(n,i){i.data=this.series.filter(s=>s.properties.showInLegend).flatMap(s=>s.getLegendData(n))}async processLayout(){let n=this.animationRect,{width:i,height:s}=this.ctx.scene,r=this.ctx.layoutManager.createContext(i,s);await this.performLayout(r),n&&!this.animationRect?.equals(n)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(n){let{seriesRect:i}=this;await Promise.all(n.map(s=>s.update({seriesRect:i}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(s=>s.visible&&s.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(n=1e4,i=!1){let s=performance.now();for(;(this._pendingFactoryUpdatesCount>0||this.performUpdateType!==7||this.runningUpdateType!==7)&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==7||this.runningUpdateType!==7)&&await this._performUpdateNotify.await(),performance.now()-s>n){let r=`Chart.waitForUpdate() timeout of ${n} reached - first chart update taking too long.`;if(i)throw new Error(r);G.warnOnce(r)}PB()&&await gue()}}filterMiniChartSeries(n){return n?.filter(i=>i.showInMiniChart!==!1)}applyOptions(n){let i=this.firstApply?n.processedOptions:n.diffOptions(this.chartOptions);if(i==null||Object.keys(i).length===0)return;let s=this.firstApply?{}:this.chartOptions.processedOptions,r=n.processedOptions;Ks("Chart.applyOptions() - applying delta",i);let o=this.applyModules(r),a=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"];i.listeners&&this.registerListeners(this,i.listeners),kp(this,i,{skip:a});let l=!1,c="no-op";i.series!=null&&(c=this.applySeries(this,i.series,s?.series),l=!0),c==="replaced"&&this.resetAnimations(),this.applyAxes(this,r,s,c,[])&&(l=!0),i.data&&(this.data=i.data),i.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,i.legend.listeners),i.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=i.locale?.localeText),this.chartOptions=n;let u=this.modulesManager.getModule("navigator"),d=this.modulesManager.getModule("zoom");!u?.enabled&&!d?.enabled&&this.ctx.zoomManager.updateZoom("chart");let h=u?.miniChart,p=r.navigator?.miniChart?.series??r.series;h?.enabled===!0&&p!=null?this.applyMiniChartOptions(h,p,r,s):h?.enabled===!1&&(h.series=[],h.axes=[]),this.ctx.annotationManager.setAnnotationStyles(n.annotationThemes),l||(l=this.shouldForceNodeDataRefresh(i,c));let f=l||o?0:3;this.maybeResetAnimations(c),this.shouldClearLegendData(r,s,c)&&this.ctx.legendManager.clearData(),this.applyInitialState(r),Ks("Chart.applyOptions() - update type",Lp[f],{seriesStatus:c,forceNodeDataRefresh:l}),this.update(f,{forceNodeDataRefresh:l,newAnimationBatch:!0}),this.firstApply=!1}applyInitialState(n){let{annotationManager:i,chartTypeOriginator:s,historyManager:r,stateManager:o,zoomManager:a}=this.ctx,{initialState:l}=n;if("annotations"in n&&n.annotations?.enabled&&l?.annotations!=null){let c=l.annotations.map(u=>{let d=i.getAnnotationTypeStyles(u.type);return ke(u,d)});o.setState(i,c)}l?.chartType!=null&&o.setState(s,l.chartType),(n.navigator?.enabled||n.zoom?.enabled)&&l?.zoom!=null&&o.setState(a,l.zoom),l?.legend!=null&&this.updateLegends(l.legend),l!=null&&r.clear()}maybeResetAnimations(n){if(this.mode==="standalone")switch(n){case"series-grouping-change":case"replaced":this.resetAnimations();break;default:}}shouldForceNodeDataRefresh(n,i){let s=!!n.data||i==="data-change"||i==="replaced",r=JE.getKeys(),o=Object.values(r).some(l=>n[l]!=null),a=n.title!=null&&n.subtitle!=null;return s||o||a}shouldClearLegendData(n,i,s){let r=s==="replaced"||s==="series-grouping-change"||s==="updated",o=i.legend!=null&&n.legend==null;return r||o}applyMiniChartOptions(n,i,s,r){let o=r?.navigator?.miniChart?.series??r?.series,a=this.applySeries(n,this.filterMiniChartSeries(i),this.filterMiniChartSeries(o));this.applyAxes(n,s,r,a,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);let l=n.series;for(let d of l)d.properties.id=void 0;let c=n.axes,u=c.find(d=>d.direction==="x");for(let d of c)d.nice=!1,d.gridLine.enabled=!1,d.label.enabled=d===u,d.tick.enabled=!1,d.interactionEnabled=!1;if(u!=null){let d=s.navigator?.miniChart,h=d?.label,p=d?.label?.interval;if(u.line.enabled=!1,u.label.set(kM(h,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),u.tick.set(kM(p,["enabled","width","size","color","interval","step"])),u.type==="grouped-category"){u.label.enabled=!1,u.label.rotation=0;let{depthOptions:f}=u;if(f.length===0)f.set([{label:{enabled:!0}}]);else for(let m=1;m<f.length;m++)f[m].label.enabled=!1}let g=p?.step;g!=null&&(u.interval.step=g)}}applyModules(n){let{type:i}=this.constructor,s=!1;for(let r of Nr.byType("root","legend")){let a=n[r.optionsKey]!=null&&r.chartTypes.includes(i);a!==this.modulesManager.isEnabled(r)&&(a?(this.modulesManager.addModule(r,l=>l.moduleFactory(this.getModuleContext())),r.type==="legend"&&this.modulesManager.getModule(r)?.attachLegend(this.ctx.scene),this[r.optionsKey]=this.modulesManager.getModule(r)):(this.modulesManager.removeModule(r),delete this[r.optionsKey]),s=!0)}return s}initSeriesDeclarationOrder(n){for(let i=0;i<n.length;i++)n[i].setSeriesIndex(i)}applySeries(n,i,s){if(!i)return"no-change";let r=She(n.series,i,s);if(r.status==="no-overlap"){Ks(`Chart.applySeries() - creating new series instances, status: ${r.status}`,r);let d=i.map(h=>this.createSeries(h));return this.initSeriesDeclarationOrder(d),n.series=d,"replaced"}Ks("Chart.applySeries() - matchResult",r);let o=[],a=!1,l=!1,c=!1,u=r.changes.toSorted((d,h)=>d.targetIdx-h.targetIdx);for(let d of u)switch(l||(l=d.status==="series-grouping"),a||(a=d.diff?.data!=null),c||(c=d.status!=="no-op"),d.status){case"add":{let h=this.createSeries(d.opts);o.push(h),Ks("Chart.applySeries() - created new series",h);break}case"remove":Ks(`Chart.applySeries() - removing series at previous idx ${d.idx}`,d.series);break;case"no-op":o.push(d.series),Ks(`Chart.applySeries() - no change to series at previous idx ${d.idx}`,d.series);break;case"series-grouping":case"update":default:{let{series:h,diff:p,idx:g}=d;Ks(`Chart.applySeries() - applying series diff previous idx ${g}`,p,h),this.applySeriesValues(h,p),h.markNodeDataDirty(),o.push(h)}}return this.initSeriesDeclarationOrder(o),Ks("Chart.applySeries() - final series instances",o),n.series=o,l?"series-grouping-change":a?"data-change":c?"updated":"no-op"}applyAxes(n,i,s,r,o=[]){if(!("axes"in i)||!i.axes)return!1;o=["axes[].type",...o];let{axes:a}=i;return!(r==="replaced")&&n.axes.length===a.length&&n.axes.every((u,d)=>u.type===a[d].type)&&nI(s)?(n.axes.forEach((u,d)=>{let h=s.axes?.[d]??{},p=No(h,a[d]);Ks(`Chart.applyAxes() - applying axis diff idx ${d}`,p);let g=`axes[${d}]`;kp(u,p,{path:g,skip:o})}),!0):(Ks(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${r}`),n.axes=this.createAxis(a,o),!0)}createSeries(n){let i=Si.create(n.type,this.getModuleContext());return this.applySeriesOptionModules(i,n),this.applySeriesValues(i,n),i}applySeriesOptionModules(n,i){let s=n.createModuleContext(),r=n.getModuleMap();for(let o of Nr.byType("series-option"))o.optionsKey in i&&o.seriesTypes.includes(n.type)&&r.addModule(o,a=>a.moduleFactory(s))}applySeriesValues(n,i){let s=n.getModuleMap(),d=i,{type:r,data:o,listeners:a,seriesGrouping:l,showInMiniChart:c}=d,u=He(d,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(let h of vd)if(h.type==="series-option"&&h.optionsKey in u){let p=s.getModule(h.optionsKey);if(p){let g=u[h.optionsKey];delete u[h.optionsKey],p.properties.set(g)}}n.properties.set(u),"data"in i&&n.setOptionsData(o),a&&this.registerListeners(n,a),"seriesGrouping"in i&&(l==null?n.seriesGrouping=void 0:n.seriesGrouping=S(S({},n.seriesGrouping),l))}createAxis(n,i){let s=[],r=this.getModuleContext();for(let o=0;o<n.length;o++){let a=n[o],l=Ro.create(a.type,r);this.applyAxisModules(l,a),kp(l,a,{path:`axes[${o}]`,skip:i}),s.push(l)}return whe(s),s}applyAxisModules(n,i){let s=n.createModuleContext(),r=n.getModuleMap();for(let o of Nr.byType("axis-option")){let a=i[o.optionsKey]!=null;a!==r.isEnabled(o)&&(a?(r.addModule(o,l=>l.moduleFactory(s)),n[o.optionsKey]=r.getModule(o)):(r.removeModule(o),delete n[o.optionsKey]))}}registerListeners(n,i){n.clearEventListeners();for(let[s,r]of Object.entries(i))hc(r)&&n.addEventListener(s,r)}};return e.chartsInstances=new WeakMap,e})();C([Ei({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),nn.chartsInstances.set(e,this))},oldValue(e){nn.chartsInstances.delete(e)}})],nn.prototype,"container",2);C([Ei({newValue(e){this.resize("width option",{inWidth:e})}})],nn.prototype,"width",2);C([Ei({newValue(e){this.resize("height option",{inHeight:e})}})],nn.prototype,"height",2);C([Ei({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],nn.prototype,"minWidth",2);C([Ei({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],nn.prototype,"minHeight",2);C([Ei({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],nn.prototype,"overrideDevicePixelRatio",2);C([b(K)],nn.prototype,"padding",2);C([b(K)],nn.prototype,"seriesArea",2);C([b(K)],nn.prototype,"keyboard",2);C([b(K)],nn.prototype,"touch",2);C([b(ut(["standalone","integrated"],"a chart mode"))],nn.prototype,"mode",2);C([wt("chartCaptions.title")],nn.prototype,"title",2);C([wt("chartCaptions.subtitle")],nn.prototype,"subtitle",2);C([wt("chartCaptions.footnote")],nn.prototype,"footnote",2);C([b(le)],nn.prototype,"suppressFieldDotNotation",2);C([Ei({changeValue(e,t){this.onAxisChange(e,t)}})],nn.prototype,"axes",2);C([Ei({changeValue(e,t){this.onSeriesChange(e,t)}})],nn.prototype,"series",2);var QC=nn,lpe={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},cpe=(e,t)=>Math.log(t)/Math.log(e);function hM(e,t,n){let i=Math.min(...t),s=lpe[e]??cpe;return i>=0?s(e,n):-s(e,-n)}var upe={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},dpe=(e,t)=>e**t;function pM(e,t,n){let i=Math.min(...t),s=upe[e]??dpe;return i>=0?s(e,n):-s(e,-n)}var rI=class extends Xe{constructor(e=[1,10],t=[0,1]){super(e,t),this.type="log",this.defaultClamp=!0,this.base=10,this.log=n=>hM(this.base,this.domain,n),this.pow=n=>pM(this.base,this.domain,n)}toDomain(e){return e}transform(e){let[t,n]=Cn(this.domain);return t>=0!=n>=0?NaN:t>=0?Math.log(e):-Math.log(-e)}transformInvert(e){let[t,n]=Cn(this.domain);return t>=0!=n>=0?NaN:t>=0?Math.exp(e):-Math.exp(-e)}niceDomain(e,t=this.domain){if(t.length<2)return[];let{base:n}=this,[i,s]=t,r=i>s?Math.ceil:Math.floor,o=i>s?Math.floor:Math.ceil,a=pM(n,t,r(hM(n,t,i))),l=pM(n,t,o(hM(n,t,s)));return[a,l]}ticks({interval:e,tickCount:t=Xe.defaultTickCount},n=this.domain,i){if(!n||n.length<2||t<1)return[];let s=this.base,[r,o]=n,a=Math.min(r,o),l=Math.max(r,o),c=this.log(a),u=this.log(l);if(e){let f=y=>y>=a&&y<=l,m=Math.min(Math.abs(e),Math.abs(u-c)),v=zp(c,u,m).map(this.pow).filter(f);if(!Hp(v.length,this.getPixelRange()))return v}if(!d_(s)||u-c>=t)return LE(c,u,Math.min(u-c,t)).map(this.pow);let d=[],h=a>0;c=Math.floor(c)-1,u=Math.round(u)+1;let p=sd(this.range)/t,g=1/0;for(let f=c;f<=u;f++){let m=this.convert(this.pow(f+1));for(let v=1;v<s;v++){let y=h?v:s-v+1,w=this.pow(f)*y,x=this.convert(w),D=Math.abs(g-x),M=Math.abs(x-m),E=D>=p&&M>=p;w>=a&&w<=l&&(v===1||E||d.length===0)&&(d.push(w),g=x)}}return d=T_(d,h,i),d}tickFormatter({specifier:e}){return e!=null?oB(e):String}datumFormatter(e){return this.tickFormatter(e)}},hpe=class{constructor(e,t,n){this.root=new fpe(e,t,n)}clear(e){this.root.clear(e)}addValue(e,t){let n={hitTester:e,value:t,distanceSquared:(i,s)=>e.distanceSquared(i,s)};this.root.addElem(n)}find(e,t){let n={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,n),n.best}},ppe=class{constructor(e,t,n,i){this.nw=e,this.ne=t,this.sw=n,this.se=i}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,n){this.nw.find(e,t,n),this.ne.find(e,t,n),this.sw.find(e,t,n),this.se.find(e,t,n)}},gpe=class{constructor(e,t,n){this.capacity=e,this.maxdepth=t,this.boundary=n??Z.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,n){this.findCondition(e,t,n)&&(this.subdivisions===void 0?this.findAction(e,t,n):this.subdivisions.find(e,t,n))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(let t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){let{x:e,y:t,width:n,height:i}=this.boundary,{capacity:s}=this,r=this.maxdepth-1,o=n/2,a=i/2,l=new Z(e,t,o,a),c=new Z(e+o,t,o,a),u=new Z(e,t+a,o,a),d=new Z(e+o,t+a,o,a);return new ppe(this.child(s,r,l),this.child(s,r,c),this.child(s,r,u),this.child(s,r,d))}},fpe=class P4 extends gpe{addCondition(t){let{x:n,y:i}=t.hitTester.midPoint;return this.boundary.containsPoint(n,i)}findCondition(t,n,i){let{best:s}=i;return s.distanceSquared!==0&&this.boundary.distanceSquared(t,n)<s.distanceSquared}findAction(t,n,i){let s=MC(t,n,this.elems,i.best.distanceSquared);s.nearest!==void 0&&s.distanceSquared<i.best.distanceSquared&&(i.best=s)}child(t,n,i){return new P4(t,n,i)}},er=class F4 extends Xe{constructor(){super([0,1],[0,1]),this.type="number"}static getTickStep(t,n,i){let{interval:s,tickCount:r=Xe.defaultTickCount,minTickCount:o,maxTickCount:a}=i;return s??Gp(t,n,r,o,a)}toDomain(t){return t}ticks({interval:t,tickCount:n=Xe.defaultTickCount,minTickCount:i,maxTickCount:s},r=this.domain,o){if(!r||r.length<2||n<1||!r.every(isFinite))return[];let[a,l]=r;if(t){let c=Math.abs(t);if(!Hp((l-a)/c,this.getPixelRange()))return zp(a,l,c)}return LE(a,l,n,i,s,o)}niceDomain(t,n=this.domain){if(n.length<2)return[];let{tickCount:i=Xe.defaultTickCount}=t,[s,r]=n;if(i===1)[s,r]=_ce(s,r);else if(i>1){let o=s>r?Math.ceil:Math.floor,a=s>r?Math.floor:Math.ceil,l=4;for(let c=0;c<l;c++){let u=s,d=r,h=F4.getTickStep(s,r,t),[p,g]=n;if(s=o(p/h)*h,r=a(g/h)*h,s===u&&r===d)break}}return[s,r]}tickFormatter({ticks:t,fractionDigits:n,specifier:i}){return i!=null?B2(t,i):s=>Fo(s,n)}datumFormatter({ticks:t,fractionDigits:n,specifier:i}){return i!=null?B2(t,i):s=>Fo(s,n+1)}};function jo(e){if(e.length===0)return null;let t=1/0,n=-1/0;for(let s of e){let r=s instanceof Date?s.getTime():s;typeof r=="number"&&(r<t&&(t=r),r>n&&(n=r))}let i=[t,n];return i.every(isFinite)?i:null}function oI(e,t,n){let i=!1;return e.length>2&&(e=jo(e)??[NaN,NaN]),isNaN(t)||(i||(i=t>e[0]),e=[t,e[1]]),isNaN(n)||(i||(i=n<e[1]),e=[e[0],n]),e[0]>e[1]&&(e=[]),{extent:e,clipped:i}}var wd=(()=>{let e=class extends gg{constructor(t,n=new er){super(t,n),this.min=NaN,this.max=NaN}normaliseDataDomain(t){let{min:n,max:i}=this,{extent:s,clipped:r}=oI(t,n,i);return{domain:s,clipped:r}}};return e.className="NumberAxis",e.type="number",e})();C([b(Vr(pd,ug("max"))),$a(NaN)],wd.prototype,"min",2);C([b(Vr(pd,dg("min"))),$a(NaN)],wd.prototype,"max",2);var yg=(()=>{let e=class extends gg{constructor(t){super(t,new pB),this.min=void 0,this.max=void 0}normaliseDataDomain(t){let{min:n,max:i}=this,s=!1;return typeof n=="number"&&(n=new Date(n)),typeof i=="number"&&(i=new Date(i)),t.length>2&&(t=jo(t)?.map(r=>new Date(r))??[]),n instanceof Date&&(s||(s=n>t[0]),t=[n,t[1]]),i instanceof Date&&(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{domain:t,clipped:s}}};return e.className="TimeAxis",e.type="time",e})();C([b(Vr(yE,ug("max")),{optional:!0})],yg.prototype,"min",2);C([b(Vr(yE,dg("min")),{optional:!0})],yg.prototype,"max",2);var aI=class extends XC{constructor(){super(...arguments),this.clipFocusBox=!0}getScaleInformation({xScale:e,yScale:t}){let n=Xe.is(e),i=Xe.is(t);return{isContinuousX:n,isContinuousY:i,xScaleType:e?.type,yScaleType:t?.type}}getModulePropertyDefinitions(){let e=this.axes.x?.scale,t=this.axes.y?.scale;return this.moduleMap.mapModules(n=>n.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t}))).flat()}async requestDataModel(e,t,n){n.props.push(...this.getModulePropertyDefinitions());let{dataModel:i,processedData:s}=await e.request(this.id,t??[],n);return this.dataModel=i,this.processedData=s,this.dispatch("data-processed",{dataModel:i,processedData:s}),{dataModel:i,processedData:s}}isProcessedDataAnimatable(){let e=this.processedData?.reduced?.animationValidation;if(!e)return!0;let{orderedKeys:t,uniqueKeys:n}=e;return t&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){let t=this.getNodeData();if(t===void 0||t.length===0)return;let n=this.computeFocusDatumIndex(e,t);if(n===void 0)return;let{clipFocusBox:i}=this,s=t[n],r=R(S({},e),{datumIndex:n}),o=this.computeFocusBounds(r);if(o!==void 0)return{bounds:o,clipFocusBox:i,datum:s,datumIndex:n}}computeFocusDatumIndex(e,t){let n=a=>{let{missing:l=!1,enabled:c=!0,focusable:u=!0}=t[a];return!l&&c&&u},i=(a,l)=>{for(;a>=0&&!n(a);)a+=l;return a===-1?void 0:a},s=(a,l)=>{for(;a<t.length&&!n(a);)a+=l;return a===t.length?void 0:a},r,o=De(0,e.datumIndex,t.length-1);return e.datumIndexDelta<0?r=i(o,e.datumIndexDelta):e.datumIndexDelta>0?r=s(o,e.datumIndexDelta):r=s(o,1)??i(o,-1),r===void 0?e.datumIndexDelta===0?void 0:e.datumIndex-e.datumIndexDelta:r}},Wo=class extends Se{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};C([b(qe,{optional:!0})],Wo.prototype,"fill",2);C([b(Qe,{optional:!0})],Wo.prototype,"fillOpacity",2);C([b(qe,{optional:!0})],Wo.prototype,"stroke",2);C([b(j,{optional:!0})],Wo.prototype,"strokeWidth",2);C([b(Qe,{optional:!0})],Wo.prototype,"strokeOpacity",2);C([b(Gr,{optional:!0})],Wo.prototype,"lineDash",2);C([b(j,{optional:!0})],Wo.prototype,"lineDashOffset",2);var JC=class extends Se{};C([b(j,{optional:!0})],JC.prototype,"strokeWidth",2);C([b(Qe,{optional:!0})],JC.prototype,"dimOpacity",2);C([b(le,{optional:!0})],JC.prototype,"enabled",2);var N4=class extends Se{constructor(){super(...arguments),this.color="black"}};C([b(qe,{optional:!0})],N4.prototype,"color",2);var lI=class extends Se{constructor(){super(...arguments),this.enabled=!0}};C([b(le,{optional:!0})],lI.prototype,"enabled",2);var Cg=class extends Se{constructor(){super(...arguments),this.item=new Wo,this.series=new JC,this.text=new N4}};C([b(K)],Cg.prototype,"item",2);C([b(K)],Cg.prototype,"series",2);C([b(K)],Cg.prototype,"text",2);var Xi=class extends Se{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new lI,this.highlightStyle=new Cg}};C([b(B,{optional:!0})],Xi.prototype,"id",2);C([b(le)],Xi.prototype,"visible",2);C([b(F_,{optional:!0})],Xi.prototype,"focusPriority",2);C([b(le)],Xi.prototype,"showInLegend",2);C([b(B)],Xi.prototype,"cursor",2);C([b(_C)],Xi.prototype,"nodeClickRange",2);C([b(K)],Xi.prototype,"highlight",2);C([b(K)],Xi.prototype,"highlightStyle",2);var yc={x:["xKey"],y:["yKey"]},Cc={x:["xName"],y:["yName"]},cI=class extends mg{constructor(e,t,n,i){super(e,t,n,i),this.xKey=i.properties.xKey,this.yKey=i.properties.yKey}},Uo=class extends Xi{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};C([b(B,{optional:!0})],Uo.prototype,"legendItemName",2);C([b(le,{optional:!0})],Uo.prototype,"pickOutsideVisibleMinorAxis",2);var hC=100,qa=class extends aI{constructor(d){var h=d,{pathsPerSeries:e=["path"],hasMarkers:t=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:i=[],datumSelectionGarbageCollection:s=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:o=!1,animationResetFns:a,directionKeys:l,directionNames:c}=h,u=He(h,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(S({directionKeys:l,directionNames:c,canHaveAxes:!0},u)),this.NodeEvent=cI,this.dataNodeGroup=this.contentGroup.appendChild(new ye({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new ye({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new ui({name:`${this.id}-series-labels`})),this.labelSelection=Kt.select(this.labelGroup,hn),this.highlightSelection=Kt.select(this.highlightNode,()=>this.opts.hasMarkers?new pn:this.nodeFactory()),this.highlightLabelSelection=Kt.select(this.highlightLabel,hn),this.annotationSelections=new Set,this.debug=ct.create(),!l||!c)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:e,hasMarkers:t,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:i,directionKeys:l,directionNames:c,animationResetFns:a,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:s,markerSelectionGarbageCollection:r},this.paths=e.map(p=>new Ii({name:`${this.id}-${p}`})),this.datumSelection=Kt.select(this.dataNodeGroup,()=>this.nodeFactory(),s),this.markerSelection=Kt.select(this.markerGroup,pn,r),this.animationState=new pg("empty",{empty:{update:{target:"ready",action:p=>this.animateEmptyUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:p=>this.animateReadyHighlight(p),highlightMarkers:p=>this.animateReadyHighlightMarkers(p),resize:p=>this.animateReadyResize(p),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:p=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(p):this.animateWaitingUpdateReady(p)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:p=>this.resetAllAnimation(p),reset:"empty"},clearing:{update:{target:"empty",action:p=>this.animateClearingUpdateEmpty(p)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(e,t,n){super.attachSeries(e,t,n),this.attachPaths(this.paths,t,n)}detachSeries(e,t,n){super.detachSeries(e,t,n),this.detachPaths(this.paths,t,n)}attachPaths(e,t,n){for(let i of e)this.contentGroup.appendChild(i)}detachPaths(e,t,n){for(let i of e)this.contentGroup.removeChild(i)}renderToOffscreenCanvas(){let e=this.getNodeData();return e!=null&&e.length>hC}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"?this.animationState.transition("skip"):e==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:e}){let{visible:t,_contextNodeData:n}=this,s=this.ctx.highlightManager?.getActiveHighlight()?.series===this,r=this.checkResize(e),o=this.updateHighlightSelection(s);this.updateSelections(t),this.updateNodes(o,s,t);let a=this.getAnimationData(e,n);a&&(r&&this.animationState.transition("resize",a),this.animationState.transition("update",a))}updateSelections(e){var t;let n=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!e&&n)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();let i=this.isProcessedDataAnimatable();this._contextNodeData&&((t=this._contextNodeData).animationValid??(t.animationValid=i));let{dataModel:s,processedData:r}=this;s!==void 0&&r!==void 0&&this.dispatch("data-update",{dataModel:s,processedData:r})}this.updateSeriesSelections()}}updateSeriesSelections(e){let{datumSelection:t,labelSelection:n,markerSelection:i,paths:s}=this,r=this._contextNodeData;if(!r)return;let{nodeData:o,labelData:a,itemId:l}=r;this.updatePaths({seriesHighlighted:e,itemId:l,contextData:r,paths:s}),this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:n})??n,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:o,markerSelection:i}))}updateNodes(e,t,n){let{highlightSelection:i,highlightLabelSelection:s,opts:{hasMarkers:r,hasHighlightedLabels:o}}=this,a=!this.ctx.animationManager.isSkipped(),l=this.visible&&this._contextNodeData!=null&&n;this.contentGroup.visible=a||l,this.highlightGroup.visible=(a||l)&&t;let c=this.getOpacity();r?(this.updateMarkerNodes({markerSelection:i,isHighlight:!0}),this.animationState.transition("highlightMarkers",i)):(this.updateDatumNodes({datumSelection:i,isHighlight:!0}),this.animationState.transition("highlight",i)),o&&this.updateLabelNodes({labelSelection:s});let{dataNodeGroup:u,markerGroup:d,datumSelection:h,labelSelection:p,markerSelection:g,paths:f,labelGroup:m}=this,{itemId:v}=this.contextNodeData??{};u.opacity=c,u.visible=a||l,m.visible=l,r&&(d.opacity=c,d.visible=l),m&&(m.opacity=c),this.updatePathNodes({seriesHighlighted:t,itemId:v,paths:f,opacity:c,visible:l,animationEnabled:a}),u.visible&&(this.updateDatumNodes({datumSelection:h,highlightedItems:e,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:p}),r&&this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(e,t){let n=e.filter(i=>i.datum===t.datum&&i.itemId===t.itemId);return n.length===0?void 0:n}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){let{highlightSelection:t,highlightLabelSelection:n,_contextNodeData:i}=this;if(!i)return;let s=this.ctx.highlightManager?.getActiveHighlight(),r=e&&s?.datum?s:void 0,o,a;if(r!=null){let l=this.isLabelEnabled(),{labelData:c,nodeData:u}=i;a=this.getHighlightData(u,r),o=l?this.getHighlightLabelData(c,r):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:a,highlightSelection:t}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:n}),a}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(let{node:e}of this.datumSelection)e.datum.missing!==!0&&(yield e)}getQuadTree(){if(this.quadtree===void 0){let{width:e,height:t}=this.ctx.scene.canvas,n=new Z(0,0,e,t);this.quadtree=new hpe(100,10,n),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeExactShape(e){let t=super.pickNodeExactShape(e);if(t)return t;let{x:n,y:i}=e,{opts:{hasMarkers:s}}=this,r,{dataNodeGroup:o,markerGroup:a}=this;if(r=o.pickNode(n,i),!r&&s&&(r=a?.pickNode(n,i)),r&&r.datum.missing!==!0)return{datum:r.datum,distance:0};for(let l of this.moduleMap.modules()){let{datum:c}=l.pickNodeExact(e)??{};if(c!=null&&c?.missing!==!0)return{datum:c,distance:0}}}pickNodeClosestDatum(e){let{x:t,y:n}=e,{axes:i,_contextNodeData:s}=this;if(!s)return;let r=i.x,o=i.y,a={x:t,y:n},l=1/0,c;for(let u of s.nodeData){let{point:{x:d=NaN,y:h=NaN}={}}=u;if(isNaN(d)||isNaN(h)||!(r?.inRange(d)&&o?.inRange(h)))continue;let g=Math.max((a.x-d)**2+(a.y-h)**2,0);g<l&&(l=g,c=u)}for(let u of this.moduleMap.modules()){let d=u.pickNodeNearest(e);if(d!==void 0&&d.distanceSquared<l){l=d.distanceSquared,c=d.datum;break}}if(c){let u=Math.max(Math.sqrt(l)-(c.point?.size??0),0);return{datum:c,distance:u}}}pickNodeMainAxisFirst(e,t){let{x:n,y:i}=e,{axes:s,_contextNodeData:r}=this,{pickOutsideVisibleMinorAxis:o}=this.properties;if(!r)return;let a=s.x,l=s.y,c=[a,l].filter(md.is).map(g=>g.direction);if(t&&c.length===0)return;let[u="x"]=c,d=[n,i];u!=="x"&&d.reverse();let h=[1/0,1/0],p;for(let g of r.nodeData){let{x:f=NaN,y:m=NaN}=g.point??g.midPoint??{};if(isNaN(f)||isNaN(m)||g.missing===!0)continue;let v=[a?.inRange(f),l?.inRange(m)];if(u!=="x"&&v.reverse(),!v[0]||!o&&!v[1])continue;let y=[f,m];u!=="x"&&y.reverse();let w=!0;for(let x=0;x<y.length;x++){let D=Math.abs(y[x]-d[x]);if(D>h[x]){w=!1;break}else D<h[x]&&(h[x]=D,h.fill(1/0,x+1,h.length))}w&&(p=g)}if(p){let g=Math.max(h[0]**2+h[1]**2-(p.point?.size??0),0);for(let f of this.moduleMap.modules()){let m=f.pickNodeMainAxisFirst(e);if(m!==void 0&&m.distanceSquared<g){p=m.datum,g=m.distanceSquared;break}}return{datum:p,distance:Math.sqrt(g)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}keysOrValues(e){let t=this.dataModel.resolveProcessedDataIndexById(this,e);return this.processedData?.keys[t]?.get(this.id)??this.processedData?.columns[t]??[]}visibleRange(e,t,n){let i=this.keysOrValues(e),s=0;return o4(n?.length??i.length,t,r=>{let o=n?.[r]??r;return this.xCoordinateRange(i[o],s,o)})}domainForVisibleRange(e,t,n,i,s,r){let{processedData:o,dataModel:a}=this,[l,c]=i,u=this.keysOrValues(n);if(s){let g=this.visibleRange(n,i,r);return a.getDomainBetweenRange(this,t,g,o)}let d=t.map(g=>this.keysOrValues(g)),h=1/0,p=-1/0;return u.forEach((g,f)=>{let[m,v]=this.xCoordinateRange(g,0,f);if(!(v<l||m>c))for(let y=0;y<t.length;y++){let w=d[y][f];h=Math.min(h,w),p=Math.max(p,w)}}),h>p?[NaN,NaN]:[h,p]}domainForClippedRange(e,t,n,i){let{processedData:s,dataModel:r,axes:o}=this,l=mpe(o[e==="x"?"y":"x"]);if(!l)return t.flatMap(g=>r.getDomain(this,g,"value",s));let c=this.keysOrValues(n);if(i){let g=vpe(c.length,l,f=>c[f]);return r.getDomainBetweenRange(this,t,g,s)}let u=t.map(g=>this.keysOrValues(g)),d=l[0].valueOf(),h=l[1].valueOf(),p=[];return c.forEach((g,f)=>{let m=g.valueOf();if(m<d||m>h)return;let v=u.map(y=>y[f]);m>=d&&p.push(...v),m<=h&&p.push(...v)}),p}countVisibleItems(e,t,n,i,s){let{dataModel:r,processedData:o}=this;if(!r||!o)return 1/0;let a=this.keysOrValues(e),l=t.map(D=>r.resolveColumnById(this,D,o)),c=this.axes.x,u=this.axes.y,d=this.shouldFlipXY(),h=c.range,p=u.range,g=(D,M,E)=>D[0]+(E-M[0])/(M[1]-M[0])*(D[1]-D[0]),f=g(h,c.visibleRange,n[0]),m=g(h,c.visibleRange,n[1]),v=g(p,u.visibleRange,d?i[0]:i[1]),y=g(p,u.visibleRange,d?i[1]:i[0]),w=Math.round((n[0]+(n[1]-n[0])/2)*a.length),x=0;return a4(0,a.length-1,w,s,D=>{let[M,E]=this.xCoordinateRange(a[D],x,D),[A,I]=this.yCoordinateRange(l.map(T=>T[D]),x,D);return!We(M)||!We(E)||!We(A)||!We(I)?!1:(d&&([M,E,A,I]=[A,I,M,E]),M>=f&&E<=m&&A>=v&&I<=y)})}updateHighlightSelectionItem(e){let{opts:{hasMarkers:t}}=this,{items:n,highlightSelection:i}=e,s=n??[];if(t){let r=i;return this.updateMarkerSelection({nodeData:s,markerSelection:r})}else return this.updateDatumSelection({nodeData:s,datumSelection:i})}updateHighlightSelectionLabel(e){return this.updateLabelSelection({labelData:e.items??[],labelSelection:e.highlightLabelSelection})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateMarkerSelection(e){return e.markerSelection}updateMarkerNodes(e){}updatePaths(e){e.paths.forEach(t=>t.visible=!1)}updatePathNodes(e){let{paths:t,opacity:n,visible:i}=e;for(let s of t)s.opacity=n,s.visible=i}resetPathAnimation(e){let{path:t}=this.opts?.animationResetFns??{};t&&e.paths.forEach(n=>{vn([n],t)})}resetDatumAnimation(e){let{datum:t}=this.opts?.animationResetFns??{};t&&vn([e.datumSelection],t)}resetLabelAnimation(e){let{label:t}=this.opts?.animationResetFns??{};t&&vn([e.labelSelection],t)}resetMarkerAnimation(e){let{marker:t}=this.opts?.animationResetFns??{};t&&this.opts.hasMarkers&&vn([e.markerSelection],t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),this.resetMarkerAnimation(e),e.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){let{datum:t}=this.opts?.animationResetFns??{};t&&vn([e],t)}animateReadyHighlightMarkers(e){let{marker:t}=this.opts?.animationResetFns??{};t&&vn([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){let{_contextNodeData:n}=this;return n?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:n,previousContextData:t,paths:this.paths,seriesRect:e}:void 0}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof rI){let{range:t,domain:n}=e;return{type:"log",convert:i=>e.convert(i),domain:[n[0],n[1]],range:[t[0],t[1]]}}else if(e instanceof Xe){let{range:t,domain:n}=e;return{type:"continuous",domain:[n[0],n[1]],range:[t[0],t[1]]}}else if(e instanceof og){let{domain:t}=e;return{type:"category",domain:t,inset:e.inset,step:e.step}}}calculateScaling(){let e={};for(let t of Object.values(RE)){let n=this.axes[t];if(!n)continue;let i=this.getScaling(n.scale);i!=null&&(e[t]=i)}return e}};function mpe(e){let t,n;if(e instanceof wd&&(Number.isFinite(e.min)||Number.isFinite(e.max))?(t=Number.isFinite(e.min)?e.min:void 0,n=Number.isFinite(e.max)?e.max:void 0):e instanceof yg&&(e.min!=null||e.max!=null)&&({min:t,max:n}=e),!(t==null&&n==null))return t??(t=-1/0),n??(n=1/0),[t,n]}function vpe(e,t,n){let i=t[0].valueOf(),s=t[1].valueOf(),r=s_(0,e-1,a=>{let l=n(a)?.valueOf();return!Number.isFinite(l)||l>=i}),o=i_(0,e-1,a=>{let l=n(a)?.valueOf();return!Number.isFinite(l)||l<=s});return r==null||o==null?[0,0]:(o=Math.min(o+1,e),[r,o])}var ype=["top","right","bottom","left"],Cpe=(()=>{let e=class O4 extends QC{constructor(n,i){super(n,i),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(n,i){super.onAxisChange(n,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(n)}destroySeries(n){super.destroySeries(n),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(n){let{seriesRoot:i,annotationRoot:s}=this;i.setClipRect(n),s.setClipRect(n)}async processData(){await super.processData();for(let n of this.axes){let i=this.getSyncedDomain(n);i!=null&&n.setDomains(i)}this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}performLayout(n){let{seriesRoot:i,annotationRoot:s}=this,{clipSeries:r,seriesRect:o,visible:a}=this.updateAxes(n.layoutBox);this.seriesRoot.visible=a,this.seriesRect=o,this.animationRect=n.layoutBox;let{x:l,y:c}=o;if(n.width!==this.lastLayoutWidth||n.height!==this.lastLayoutHeight)for(let p of[i,s])p.translationX=Math.floor(l),p.translationY=Math.floor(c);else{let{translationX:p,translationY:g}=i;Oo(this.id,"seriesRect",this.ctx.animationManager,[i,s],{translationX:p,translationY:g},{translationX:Math.floor(l),translationY:Math.floor(c)},{phase:"update"})}this.lastLayoutWidth=n.width,this.lastLayoutHeight=n.height;let u=o.clone().grow(this.seriesArea.padding),d=this.seriesArea.clip||r?u:void 0,{lastUpdateClipRect:h}=this;this.lastUpdateClipRect=d,this.ctx.animationManager.isActive()&&h!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:h,to:u,onUpdate:p=>this.setRootClipRects(p),onComplete:()=>this.setRootClipRects(d)}):this.setRootClipRects(d),this.ctx.layoutManager.emitLayoutComplete(n,{axes:this.axes.map(p=>p.getLayoutState()),series:{visible:a,rect:o,paddedRect:u},clipSeries:r})}updateAxes(n){let{clipSeries:i,seriesRect:s,overflows:r}=this.resolveAxesLayout(n);for(let o of this.axes)o.update(),o.setCrossLinesVisible(!r),this.clipAxis(o,s,n);return{clipSeries:i,seriesRect:s,visible:!r}}resolveAxesLayout(n){let i,s,r=0,o=10;do if(s=i??this.getDefaultState(),i=this.updateAxesPass(new Map(s.axisAreaWidths),n.clone()),r++>o){G.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,s));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(n,i){let s=new Map,r={},o=!1,a=!1;for(let y of ype){let w=this.seriesArea.padding[y],x=this.axes.findLast(D=>D.position===y);x?x.seriesAreaPadding=w:i.shrink(w,y)}let l=(n.get("left")??0)+(n.get("right")??0),c=(n.get("top")??0)+(n.get("bottom")??0),u=this.buildCrossLinePadding(n);i.width<=l+u.hPadding||i.height<=c+u.vPadding?o=!0:i.shrink(u);let d=i.clone().shrink(Object.fromEntries(n));for(let y of this.axes){let{position:w="left",direction:x}=y;this.sizeAxis(y,d,w);let D=x==="y",{primaryTickCount:M,bbox:E}=y.calculateLayout(y.nice?r[x]:void 0);r[x]??(r[x]=M),a||(a=y.dataDomain.clipped||y.visibleRange[0]>0||y.visibleRange[1]<1),s.set(y.id,Math.ceil(y.thickness??(D?E?.width:E?.height)??0))}let h=Object.entries(lE(this.axes,y=>y.position??"left")),{width:p,height:g,pixelRatio:f}=this.ctx.scene,m=new Map,v=new Map;for(let[y,w]of h){let D=y==="left"||y==="right"?g%f:p%f,M=0;for(let E of w){v.set(E.id,D);let A=s.get(E.id)??0;M=Math.max(M,D+A),E.layoutConstraints.stacked&&(D+=A+O4.AxesPadding)}m.set(y,Math.ceil(M))}for(let[y,w]of h)this.positionAxes({axes:w,position:y,axisWidths:s,axisOffsets:v,axisAreaWidths:m,axisBound:i,seriesRect:d});return{clipSeries:a,seriesRect:d,axisAreaWidths:m,overflows:o}}buildCrossLinePadding(n){let i={top:0,right:0,bottom:0,left:0,hPadding:0,vPadding:0};this.axes.forEach(s=>{s.crossLines?.forEach(r=>{r.calculatePadding?.(i)})});for(let[s,r=0]of Object.entries(i))i[s]=Math.max(r-(n.get(s)??0),0);return i.hPadding=i.left+i.right,i.vPadding=i.top+i.bottom,i}clampToOutsideSeriesRect(n,i,s,r){let o=s==="x"?n.x:n.y,a=s==="x"?n.width:n.height;return r===1?Math.min(i,o+a):Math.max(i,o)}getSyncedDomain(n){let i=this.modulesManager.getModule("sync");if(!i?.enabled)return;let s=i.getSyncedDomain(n);if(s&&n.dataDomain.domain.length){let r,{domain:o}=n.scale;if(Xe.is(n.scale)){let[a,l]=Cn(s);r=a!==o[0]||l!==o[1]}else r=!Pr(s,o);r&&!this.skipSync&&i.updateSiblings()}return s}sizeAxis(n,i,s){let r=n instanceof md,o=s==="left"||s==="right",{width:a,height:l}=i,c=o?l:a,u=0,d=c,{min:h,max:p}=this.ctx.zoomManager.getAxisZoom(n.id),{width:g,unit:f,align:m}=n.layoutConstraints;f==="px"?d=u+g:d=d*g/100,m==="end"&&(u=c-(d-u),d=c),o&&(r?[h,p]=[1-p,1-h]:[u,d]=[d,u]),n.range=[u,d],n.visibleRange=[h,p],n.gridLength=o?a:l}positionAxes(n){let{axes:i,axisBound:s,axisWidths:r,axisOffsets:o,axisAreaWidths:a,seriesRect:l,position:c}=n,u=a.get(c)??0,d="x",h="y",p=1;(c==="top"||c==="bottom")&&(d="y",h="x");let g=s[d];(c==="right"||c==="bottom")&&(p=-1,g+=d==="x"?s.width:s.height);for(let f of i){let m=a.get(h==="x"?"left":"top")??0,v=r.get(f.id)??0,y=o.get(f.id)??0;f.gridPadding=u-y-v,f.translation[h]=s[h]+m,f.translation[d]=this.clampToOutsideSeriesRect(l,g+p*(y+v),d,p)}}shouldFlipXY(){return this.series.every(n=>n instanceof qa&&n.shouldFlipXY())}getDefaultState(){let n=new Map;if(this.lastAreaWidths)for(let{position:i="left"}of this.axes){let s=this.lastAreaWidths.get(i);s!=null&&n.set(i,s)}return{axisAreaWidths:n,clipSeries:!1,overflows:!1}}isLayoutStable(n,i){if(i.overflows!==n.overflows||i.clipSeries!==n.clipSeries)return!1;for(let s of n.axisAreaWidths.keys())if(!i.axisAreaWidths.has(s))return!1;for(let[s,r]of i.axisAreaWidths.entries()){let o=n.axisAreaWidths.get(s);if((r!=null||o!=null)&&r!==o)return!1}return!0}clipAxis(n,i,s){let r=Math.ceil(n.gridLine?.width??0),o=Math.ceil(n.line?.width??0),{width:a,height:l}=i;switch(a+=n.direction==="x"?r:o,l+=n.direction==="y"?r:o,n.clipGrid(i.x,i.y,a,l),n.position){case"left":case"right":n.clipTickLines(s.x,i.y-r,s.width+r,i.height+r*2);break;case"top":case"bottom":n.clipTickLines(i.x-r,s.y,i.width+r*2,s.height+r);let{label:c,labelNodes:u,scale:d}=n;if(Xe.is(d)&&c.enabled&&c.avoidCollisions&&u.length>1){let h=u.toSorted((m,v)=>m.translationY-v.translationY),p=h.at(-1),g=p.getBBox(),f=i.x+g.y+g.height<=s.x+s.width+this.padding.right;if(p.visible=f,f||n.visibleRange[0]>0||n.visibleRange[1]<1)h[0].visible=!0;else{let m=h[0].getBBox();h[0].visible=m.y>=0}}break}}};return e.className="CartesianChart",e.type="cartesian",e.AxesPadding=15,e})(),wpe=Cpe,bpe={type:"chart",name:"cartesian",detect:nI,create(e,t){return new wpe(e,t)}},I3=ct.create(!0,"opts"),Wy=(()=>{let e=class{constructor(n,i,s){this.factoryApi=i,this.licenseManager=s,this.chart=n}async update(n){return I3.group("AgChartInstance.update()",async()=>{this.factoryApi.update(n,this),await this.chart.waitForUpdate()})}async updateDelta(n){return I3.group("AgChartInstance.updateDelta()",async()=>{this.factoryApi.updateUserDelta(this,n),await this.chart.waitForUpdate()})}getOptions(){let n=Jt(this.chart.getOptions());for(let i of Object.keys(n))i.startsWith("_")&&delete n[i];return n}waitForUpdate(){return this.chart.waitForUpdate()}async download(n){let i=await this.prepareResizedChart(this,n);try{i.chart.download(n?.fileName,n?.fileFormat)}finally{i.destroy()}}async __toSVG(n){let i=await this.prepareResizedChart(this,S({width:600,height:300},n));try{return i.chart.toSVG()}finally{i.destroy()}}async getImageDataURL(n){let i=await this.prepareResizedChart(this,n);try{return i.chart.getCanvasDataURL(n?.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(n){let i=this.getEnabledOriginators();if(!i.includes(this.chart.ctx.legendManager)){await this.setStateOriginators(n,i);return}await this.setStateOriginators(n,i.filter(s=>s!==this.chart.ctx.zoomManager)),await this.setStateOriginators(n,[this.chart.ctx.zoomManager])}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=null}async prepareResizedChart(n,i={}){let{chart:s}=n,r=i.width??s.width??s.ctx.scene.canvas.width,o=i.height??s.height??s.ctx.scene.canvas.height,a=n.getState(),l=Nr.hasEnterpriseModules(),c=R(S({},s.chartOptions.processedOverrides),{container:document.createElement("div"),width:r,height:o});i.width!=null&&i.height!=null&&(c.overrideDevicePixelRatio=1);let u=s.getOptions();l&&(c.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(c.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));let d=S({},s.chartOptions.specialOverrides),h=S({},s.chartOptions.optionMetadata),p=this.factoryApi.create(u,c,d,h);await p.setState(a),p.chart.ctx.zoomManager.updateZoom("chartProxy",s.ctx.zoomManager.getZoom()),p.chart.ctx.legendManager.clearData(),p.chart.ctx.legendManager.update(s.ctx.legendManager.getData()),s.series.forEach((f,m)=>{f.visible||(p.chart.series[m].visible=!1)});let g=[];for(let f of s.modulesManager.legends())g.push(f.legend.pagination?.currentPage??0);for(let f of p.chart.modulesManager.legends()){let m=g.shift()??0;f.legend.pagination&&f.legend.pagination.setPage(m)}return p.chart.update(0,{forceNodeDataRefresh:!0}),await p.waitForUpdate(),p}getEnabledOriginators(){let{chartOptions:{processedOptions:n,optionMetadata:i},ctx:{annotationManager:s,chartTypeOriginator:r,zoomManager:o,legendManager:a}}=this.chart,l=[];return"annotations"in n&&n.annotations?.enabled&&l.push(s),i.presetType==="price-volume"&&l.push(r),(n.navigator?.enabled||n.zoom?.enabled)&&l.push(o),"legend"in this.chart&&l.push(a),l}async setStateOriginators(n,i){this.factoryApi.caretaker.restore(n,...i),this.chart.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart.waitForUpdate()}};return e.chartInstances=new WeakMap,e})();C([Ei({oldValue(e){e.destroyed||(e.publicApi=void 0),Wy.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,Wy.chartInstances.set(e,this))}})],Wy.prototype,"chart",2);var A3=Wy,uI=class extends WC{constructor(e){super(),this.ctx=e,this.localeText=void 0}};C([Ua(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),b(P_,{optional:!0})],uI.prototype,"localeText",2);C([Ua(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),b(di,{optional:!0})],uI.prototype,"getLocaleText",2);var Spe={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new uI(e)},R3=class extends ag{getIndex(e){return super.getIndex(e)??this.getMatchIndex(e)}getMatchIndex(e){let t=JSON.stringify(e),n=this._domain.find(i=>JSON.stringify(i)===t);if(n!=null)return super.getIndex(n)}},Cp=new WeakMap;function pC(e,t){let n=JSON.stringify(e,null,0);return Cp.has(t)||Cp.set(t,new Map),Cp.get(t)?.has(n)||Cp.get(t)?.set(n,t(e)),Cp.get(t)?.get(n)}function li(e){let t=new Map,n=(...r)=>r.map(o=>typeof o=="object"||typeof o=="symbol"?o:(t.has(o)||t.set(o,{v:o}),t.get(o))),i={},s=new WeakMap;return(...r)=>{let o=r.length===0?[i]:n(...r),a=s;for(let u of o.slice(0,-1))a.has(u)||a.set(u,new WeakMap),a=a.get(u);let l=o.at(-1),c=a.get(l);return c||(c=e(...r),a.set(l,c)),c}}function ew(e,t=[0,0]){for(let n of e)typeof n=="number"&&(n<0&&(t[0]+=n),n>0&&(t[1]+=n));return t}function xpe(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:i=>ew(i)}}function _4(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:n=>ew(n),groupAggregateFunction:(n,i=[0,0])=>(i[0]+=n?.[0]??0,i[1]+=n?.[1]??0,i),round:!0}}function Dpe(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:i=>ka.extendDomain(i)}}function ZM(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,n=[0,0])=>(n[0]+=t?.[0]??0,n[1]+=t?.[1]??0,n)}}function B4(e,t){return{id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:i=>ew(i),groupAggregateFunction:(i,s=[0,0,-1])=>(s[0]+=i?.[0]??0,s[1]+=i?.[1]??0,s[2]++,s),finalFunction:(i=[0,0,0])=>{let s=i[0]+i[1];return s>=0?[0,s/i[2]]:[s/i[2],0]},round:!0}}function XM(e,t,n){let i={id:e,matchGroupIds:n?[n]:void 0,type:"aggregate",aggregateFunction:(s,r=[])=>{let o=r[1]-r[0];return t.aggregateFunction(s).map(a=>a/o)},round:!0};return t.groupAggregateFunction&&(i.groupAggregateFunction=t.groupAggregateFunction),i}function V4(e){return()=>{let t=0;return n=>We(n)?(t+=e?Math.max(0,n):n,t):n}}function G4(){return()=>{let e=0;return t=>{if(!We(t))return t;let n=e;return e+=t,n}}}function z4(e){return e!=null&&GC(e)}function Mpe(e){return e!=null}function H4(e){switch(e){case"number":case"log":case"ordinal-time":case"time":case"color":return z4;default:return Mpe}}function j4(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function tr(e,t,n={}){return S({property:e,type:"key",valueType:j4(t),validation:H4(t)},n)}function Le(e,t,n={}){return S({property:e,type:"value",valueType:j4(t),validation:H4(t)},n)}function W4(e,t={}){return S({property:e,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1},t)}function dI(e,t={}){let r=t,{min:n=-1/0,max:i=1/0}=r,s=He(r,["min","max"]);return S({type:"value",property:e,valueType:"range",validation:z4,processor:()=>o=>We(o)?De(n,o,i):o},s)}function Up(e,t,n={}){let o=n,{onlyPositive:i}=o,s=He(o,["onlyPositive"]);return R(S({},Le(e,t,s)),{processor:V4(i)})}function Epe(e,t,n={}){return R(S({},Le(e,t,n)),{processor:G4()})}function Ga(e,t,n,i,s){return[Le(e,s,i),q4(i.groupId,t,n,i.separateNegative),...i.rangeId!=null?[Dpe(i.rangeId,i.groupId)]:[]]}function U4(e,t,n){return[Le(e,t,n),Z4(n.groupId)]}var $4={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return(t=1/0,n)=>{let i=typeof n[0]=="number"?n[0]:Number(n[0]),s=Math.abs(i-e);return e=i,!isNaN(s)&&s>0&&s<t?s:t}}},Y4={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return(t=-1/0,n)=>{let i=typeof n[0]=="number"?n[0]:Number(n[0]),s=Math.abs(i-e);return e=i,!isNaN(s)&&s>0&&s>t?s:t}}},K4={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>e?.slice().sort((t,n)=>{for(let i=0;i<t.length;i++){let s=t[i]-n[i];if(s!==0)return s}return 0})};function Ipe({normaliseTo:e}){let t=(n,i)=>{if(i===0)return null;let s=(n??0)*e/i;return s>=0?Math.min(e,s):Math.max(-e,s)};return()=>()=>(n,i,s)=>{let r=Ape(n,i,s);for(let o of i)for(let a of s.datumIndices[o]){let l=n[o],c=l[a];if(c==null){l[a]=void 0;continue}l[a]=typeof c=="number"?t(c,r):c.map(u=>t(u,r))}}}function Ape(e,t,n){let i=[0,0];for(let s of t){let r=e[s];for(let o of n.datumIndices[s]){let a=r[o];if(a==null)continue;let l=typeof a=="number"?a:Math.max(...a.map(u=>u??0)),c=l<0?0:1;c===0?i[c]=Math.min(i[c],l):i[c]=Math.max(i[c],l)}}return Math.max(Math.abs(i[0]),i[1])}function tw(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:pC({normaliseTo:t},Ipe)}}function Rpe({normaliseTo:e,zeroDomain:t,rangeMin:n,rangeMax:i}){let s=e[1]-e[0],r=(o,a,l)=>{let c=e[0]+(o-a)/l*s;return l===0?t:c>=e[1]?e[1]:c<e[0]?e[0]:c};return()=>(o,a)=>{let[l,c]=o.domain.values[a];n!=null&&(l=n),i!=null&&(c=i);let u=c-l;o.domain.values[a]=[e[0],e[1]];let d=o.columns[a];for(let h=0;h<d.length;h+=1)d[h]=r(d[h],l,u)}}function lc(e,t,n,i,s){return{type:"property-value-processor",property:e,adjust:pC({normaliseTo:t,rangeMin:i,rangeMax:s,zeroDomain:n},Rpe)}}var Pp=1,gC=2,T3=(e,t,n,i)=>{let s=Pp|gC;if(t.valueType==="category")return n.length!==e&&(s&=~Pp),s;let r=i[0]?.valueOf();for(let o=1;s!==0&&o<i.length;o++){let a=i[o]?.valueOf();(!Number.isFinite(a)||r>a)&&(s&=~gC),Number.isFinite(a)&&r===a&&(s&=~Pp),r=a}return s};function bd(e){return{type:"processor",property:"animationValidation",calculate(t){let{keys:n,values:i}=t.defs,{input:{count:s},domain:{keys:r,values:o},keys:a,columns:l}=t,c=Pp|gC;if(s!==0){for(let u=0;c!==0&&u<n.length;u++)for(let d of n[u].scopes)c&=T3(s,n[u],r[u],a[u].get(d));for(let u=0;c!==0&&u<i.length;u++){let d=i[u];e?.includes(d.id)&&(c&=T3(s,d,o[u],l[u]))}}return{uniqueKeys:(c&Pp)!==0,orderedKeys:(c&gC)!==0}}}}function Tpe({mode:e,separateNegative:t}){return()=>()=>(n,i,s)=>{let r=[0,0];for(let o of i)for(let a of s.datumIndices[o]??[]){let l=n[o],c=l[a],u=EC(c)&&t?0:1;We(c)&&(e==="normal"&&(r[u]+=c),l[a]=r[u],e==="trailing"&&(r[u]+=c))}}}function kpe({mode:e,sum:t}){return()=>{let n=[],i=!0;return()=>(s,r,o)=>{let a=0;for(let l of r){let c=s[l];for(let u of o.datumIndices[l]??[]){let d=c[u],h=i&&t==="current"?0:n[l];n[l]=d;let p=t==="current"?d:h;if(!We(d)||!We(h)){c[u]=a;continue}e==="normal"&&(a+=p),c[u]=a,e==="trailing"&&(a+=p)}}i=!1}}}function q4(e,t,n,i=!1){let s;if(t.startsWith("window")){let r=t.endsWith("-trailing")?"trailing":"normal";s=pC({mode:r,sum:n},kpe)}else s=pC({mode:t,separateNegative:i},Tpe);return{type:"group-value-processor",matchGroupIds:[e],adjust:s}}function Lpe(){return()=>(e,t,n)=>{let i=new Float64Array(t.length),s=0;for(let r of t){let o=e[r];for(let a of n.datumIndices[r]??[]){let l=o[a];i[s]=Number.isFinite(l)?l:NaN,s+=1,o[a]=i.subarray(0,s)}}}}function Z4(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:Lpe}}function k3(e){return e.id??e.property}function Ppe(e,t,n){let i=new Map,s=t.defs.values;for(let a=0;a<s.length;a+=1){let l=s[a];if(l.scopes?.includes(e)===!1)continue;let c=k3(l);if(i.has(c))return;i.set(c,a)}let r=[],o=n.defs.values;for(let a=0;a<o.length;a+=1){let l=o[a];if(l.scopes?.includes(e)===!1)continue;let c=k3(l),u=i.get(c);if(u==null)return;i.delete(c),r.push({previousIndex:u,nextIndex:a})}if(i.size===0)return r}function gM(e,t,n,i,s){for(let{previousIndex:r,nextIndex:o}of n){let a=e[r],l=t[o],c=a[i],u=l[s];if(c!==u)return!1}return!0}function Sd(e,t,n=!0){return{type:"processor",property:"diff",calculate(i,s){let r=new Map,o=new Map,a=new Map,l=new Map,c=t.keys,u=i.keys,d=t.columns,h=i.columns,p=Ppe(e,t,i);if(p==null)return s;let g=Math.max(t.input.count,i.input.count);for(let v=0;v<g;v++){let y=v<t.input.count,w=v<i.input.count,x=y?lC(c,e,v):void 0,D=x!=null?qt(x):"",M=w?lC(u,e,v):void 0,E=M!=null?qt(M):"";if(w&&y&&D===E){gM(d,h,p,v,v)||a.set(E,v);continue}let A=l.get(E);A!=null?((n||!gM(d,h,p,A,v))&&(a.set(E,v),r.set(E,v)),l.delete(E)):w&&o.set(E,v);let I=o.get(D);I!=null?((n||!gM(d,h,p,I,v))&&(a.set(D,v),r.set(D,v)),o.delete(D)):y&&(a.delete(D),l.set(D,v))}let m={changed:o.size>0||a.size>0||l.size>0,added:new Set(o.keys()),updated:new Set(a.keys()),removed:new Set(l.keys()),moved:new Set(r.keys())};return R(S({},s),{[e]:m})}}}function qt(e,...t){let n;return mt(e)?n=e.map(s=>BM(s)).join("___"):n=BM(e),(typeof n=="string"||typeof n=="number"||typeof n=="boolean"||n instanceof Date)&&t.length>0&&(n+=`___${t.join("___")}`),n}var Fpe=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},Npe=class X4{constructor(t="",n,i){this.label=t,this.parent=n,this.refId=i,this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screenX=0,this.depth=n?n.depth+1:0}insertTick(t,n){let i=this;for(let s=0;s<t.length;s++){let r=t[s],o=s!==t.length-1,{children:a}=i,l=a.find(c=>c.label===r);if(l&&o)i=l;else{let c=new X4(r,i,n);c.index=a.length,a.push(c),o&&(i=c)}}}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((t,n)=>n!==this.index)??[]}};function Ope(e){let t=e.reduce((i,s)=>i<s.length?s.length:i,0),n=new Npe;for(let i=0;i<e.length;i++){let s=e[i];for(;s.length<t;)s.push("");n.insertTick(s,i)}return n}function _pe(e,t,n){let i=t.index-e.index,s=n/i;t.change-=s,t.shift+=n,e.change+=s,t.prelim+=n,t.mod+=n}function Bpe(e,t,n){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:n}function Vpe({children:e}){let t=0,n=0;for(let i=e.length-1;i>=0;i--){let s=e[i];s.prelim+=t,s.mod+=t,n+=s.change,t+=s.shift+n}}function Gpe(e,t){let n=e.getLeftSibling();if(n){let i=e,s=e,r=n,o=s.getLeftmostSibling(),a=s.mod,l=i.mod,c=r.mod,u=o.mod;for(;r.nextRight()&&s.nextLeft();){r=r.nextRight(),s=s.nextLeft(),o=o.nextLeft(),i=i.nextRight(),i.ancestor=e;let d=r.prelim+c-(s.prelim+a)+1;d>0&&(_pe(Bpe(r,e,t),e,d),a+=d,l+=d),c+=r.mod,a+=s.mod,u+=o.mod,l+=i.mod}r.nextRight()&&!i.nextRight()?i.mod+=c-l:(s.nextLeft()&&!o.nextLeft()&&(o.mod+=a-u),t=e)}return t}function Q4(e){let{children:t}=e;if(t.length){let[n]=t;for(let r of t)Q4(r),n=Gpe(r,n);Vpe(e);let i=(t[0].prelim+t.at(-1).prelim)/2,s=e.getLeftSibling();s?(e.prelim=s.prelim+1,e.mod=e.prelim-i):e.prelim=i}else{let n=e.getLeftSibling();e.prelim=n?n.prelim+1:0}}function J4(e,t,n){e.x=e.prelim+t,e.y=e.depth,n.insertNode(e);for(let i of e.children)J4(i,t+e.mod,n)}function eV(e){let{children:t}=e,n=0;for(let i of t)eV(i),i.children.length?n+=i.leafCount:n++;e.leafCount=n,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[t.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}function zpe(e){let t=new Hpe,n=Ope(e);return Q4(n),J4(n,-n.prelim,t),eV(n),t}var Hpe=class{constructor(){this.dimensions=new Fpe,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.x,e.y),this.nodes.push(e)}scalingX(e,t){let n=1;if(e>0){let{left:i,right:s}=this.dimensions;n=e/(s-i)}return t&&(n*=-1),n}},$o=class extends Se{constructor(){super(...arguments),this.enabled=!0}};C([b(le)],$o.prototype,"enabled",2);C([b(le,{optional:!0})],$o.prototype,"avoidCollisions",2);C([b(qe,{optional:!0})],$o.prototype,"color",2);C([b(j,{optional:!0})],$o.prototype,"spacing",2);C([b(Bo,{optional:!0})],$o.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],$o.prototype,"fontWeight",2);C([b(je.restrict({min:1}),{optional:!0})],$o.prototype,"fontSize",2);C([b(B,{optional:!0})],$o.prototype,"fontFamily",2);var nw=class extends Se{constructor(){super(...arguments),this.enabled=!0}};C([b(le)],nw.prototype,"enabled",2);C([b(j,{optional:!0})],nw.prototype,"width",2);C([b(qe,{optional:!0})],nw.prototype,"stroke",2);var hI=class extends Se{constructor(){super(...arguments),this.label=new $o,this.tick=new nw}};C([b(K)],hI.prototype,"label",2);C([b(K)],hI.prototype,"tick",2);var iw=(()=>{let e=class extends md{constructor(t){super(t,new R3),this.tickScale=new R3,this.depthOptions=new lg(hI),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;let{nodes:t}=this.tickTreeLayout,{range:n,step:i,inset:s,bandwidth:r}=this.scale,o=Math.abs(n[1]-n[0])-i,a=this.tickTreeLayout.scalingX(o,n[0]>n[1]),l=s+r/2,c=0;for(let u of t){let d=u.x*a;c>d&&(c=d),u.screenX=d+l}for(let u of t)u.screenX-=c}getDepthOptionsMap(t){let n=[],{depthOptions:i,label:s}=this;for(let r=0;r<t;r++)n.push(i[r]?.label.enabled??s.enabled?{enabled:!0,spacing:i[r]?.label.spacing??s.spacing,lineHeight:Yt.getLineHeight(i[r]?.label.fontSize??s.fontSize??10),avoidCollisions:i[r]?.label.avoidCollisions??s.avoidCollisions}:{enabled:!1,spacing:0,lineHeight:0,avoidCollisions:!1});return n}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((t,n)=>t.setProperties(n))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){if(this.updateDirection(),this.updateScale(),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:Z.zero,separatorLayout:[],tickLabelLayout:[]};let{step:t}=this.scale,{title:n,label:i,range:s,depthOptions:r}=this,{depth:o,nodes:a}=this.tickTreeLayout,l=Math.ceil(i.fontSize/t),c=tn(this.rotation),u=this.position==="top"||this.position==="bottom",d=i.getSideFlag(),h=[],p=new Map,g=new ad,{defaultRotation:f,configuredRotation:m}=nC({rotation:i.rotation,parallel:i.parallel,regularFlipRotation:gt(c-Math.PI/2),parallelFlipRotation:gt(c)}),v=f+m,y=this.getDepthOptionsMap(o),w=(Q,he)=>{let ge=o-Q.depth;if(!y[ge]?.enabled||he%l!==0||!u_(Q.screenX,s))return!1;let J=this.formatTick(Q.label,he-1),de=this.getLabelStyles({value:J,depth:ge},r[ge]?.label);return g.setProperties(R(S({},de),{text:J,textAlign:"center",textBaseline:i.parallel?"hanging":"bottom",rotation:0,translationX:0,translationY:Q.screenX})),!0},x=0,D={};a.forEach((Q,he)=>{let ge=o-Q.depth,J=Iae(Q.label);if(D[ge]??(D[ge]=1),D[ge]<J&&(D[ge]=J),!(!w(Q,he)||!g.getBBox())&&(p.set(he,g.getBBox()),!Q.leafCount)){g.rotation=v;let{width:Y}=g.getBBox();x<Y&&(x=Y)}});let M=BE(),E=d*y[0].spacing,A=new Map,I=Q=>{let he=x;for(let ge=1;ge<=Q;ge++)he+=y[ge].spacing,(i.mirrored||ge!==Q)&&(he+=D[ge]*y[ge].lineHeight);return he};a.forEach((Q,he)=>{if(he===0)return;let ge=w(Q,he),J=!Q.children.length,de=o-Q.depth;if(Q.parent){let te=J?Q.x:Q.x-(Q.leafCount-1)/2;if(!A.has(te)){let ee=this.depthOptions[de]?.tick,Ce=x;for(let me=0;me<=de;me++)Ce+=y[me].spacing,me!==0&&(Ce+=D[me]*y[me].lineHeight);A.set(te,{tickSize:Ce,tickStroke:ee?.stroke,tickWidth:ee?.enabled!==!1?ee?.width:0})}}if(!ge)return;if(g.x=E,g.y=0,J){let{width:te}=p.get(he),ee=$_(v);g.rotation=v,g.textAlign="end",g.textBaseline="middle",g.rotationCenterX=E-te/2,g.translationX=(y[de].spacing-te)/2*ee*d,i.mirrored&&(g.translationX+=te)}else g.rotation=u?f:-Math.PI/2,g.rotationCenterX=E,g.translationX=d*I(de);if(y[de].avoidCollisions){let te=J?t:Q.leafCount*t;if(g.getBBox().height>te){p.delete(he);return}}let{text:Y=""}=g;h.push({text:Y,visible:!0,range:this.scale.range,tickId:M(Y),fill:g.fill,fontFamily:g.fontFamily,fontSize:g.fontSize,fontStyle:g.fontStyle,fontWeight:g.fontWeight,rotation:g.rotation,rotationCenterX:g.rotationCenterX,textAlign:g.textAlign,textBaseline:g.textBaseline,translationX:g.translationX,translationY:g.translationY,x:g.x,y:g.y}),p.set(he,Pt.toCanvas(g))});let{enabled:T,stroke:P,width:O}=this.line;this.lineNode.datum={x:0,y1:s[0],y2:s[1]},this.lineNode.setProperties({stroke:P,strokeWidth:T?O:0});let $=[...A.values()];$.push($[0]);let ae=[this.lineNode.getBBox(),new Z(0,0,$[0].tickSize*d,0)];n.enabled&&(this.updateTitle(!1,$[0].tickSize),ae.push(n.caption.node.getBBox()));let ue=Z.merge(sc(p.values(),ae));return{bbox:this.getTransformBox(ue),separatorLayout:$,tickLabelLayout:h}}update(){if(!this.computedLayout)return;let{tickScale:t,gridLine:n,gridLength:i}=this,{separatorLayout:s}=this.computedLayout,r=t.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}).map((o,a)=>R(S({},s[a]),{tick:o,tickId:qt(o,a),tickLabel:o.filter(Boolean).join(" - "),translationY:Math.round(t.convert(o))}));this.gridLineGroupSelection.update(n.enabled&&i?r:[]),this.tickLineGroupSelection.update(this.tick.enabled?r:[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(),this.resetSelectionNodes()}calculateLayout(){let{separatorLayout:t,tickLabelLayout:n,bbox:i}=this.computeLayout();return this.computedLayout={separatorLayout:t,tickLabelLayout:n},{bbox:i,primaryTickCount:void 0,niceDomain:this.scale.domain}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){let{direction:t}=this,n=this.boundSeries.filter(r=>r.visible).flatMap(r=>r.getDomain(t));this.dataDomain={domain:jo(n)??this.filterDuplicateArrays(n),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();let i=this.dataDomain.domain.map(r=>qy(yn(r)&&"value"in r?r.value:r));this.tickTreeLayout=zpe(i);let s=[];for(let r of this.tickTreeLayout.nodes)r.leafCount||r.refId==null||s.push(this.dataDomain.domain[r.refId]);return this.scale.domain=Sae(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]]),{animatable:!0}}updateGridLines(){if(!this.gridLength)return;let{width:t,style:n}=this.gridLine,i=this.gridLength*-this.label.getSideFlag();this.gridLineGroupSelection.each((s,r,o)=>{let{stroke:a,lineDash:l}=n[o%n.length],c=r.translationY;s.visible=this.inRange(c),s.x1=0,s.x2=i,s.y=c,s.stroke=a,s.strokeWidth=t,s.lineDash=l})}filterDuplicateArrays(t){let n=new Set;return t.filter(i=>{let s=mt(i)?JSON.stringify(i):i;return n.has(s)?!1:(n.add(s),!0)})}};return e.className="GroupedCategoryAxis",e.type="grouped-category",e})();C([b(CE)],iw.prototype,"depthOptions",2);var tV=et(e=>bs(e)&&e!==0,"a non-zero number"),wg=(()=>{let e=class extends wd{constructor(t){super(t,new rI),this.min=NaN,this.max=NaN}normaliseDataDomain(t){let{min:n,max:i}=this,{extent:s,clipped:r}=oI(t,n,i);return s[0]<0&&s[1]>0||t[0]<0&&t[1]>0?(G.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:r}):s[0]===0||s[1]===0||t[0]===0||t[1]===0?(G.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:r}):{domain:s,clipped:r}}set base(t){this.scale.base=t}get base(){return this.scale.base}defaultDatumFormatter(t,n){return String(t)}defaultLabelFormatter(t,n){return String(t)}};return e.className="LogAxis",e.type="log",e})();C([b(Vr(pd,tV,ug("max"))),$a(NaN)],wg.prototype,"min",2);C([b(Vr(pd,tV,dg("min"))),$a(NaN)],wg.prototype,"max",2);var Mp=(e,{x0:t,y0:n,x1:i,y1:s,cx:r,cy:o},a,l)=>{if(l&&e.moveTo(t,n),t!==i||n!==s){let c=Math.atan2(n-o,t-r),u=Math.atan2(s-o,i-r);e.arc(r,o,a,c,u)}else e.lineTo(t,n)},L3=1e-6,ky=(e,t,n,i,s)=>{let r=!1,o=!1,a=i-Math.sqrt(Math.max(s**2-n**2,0)),l=0,c=0,u=n-Math.sqrt(Math.max(s**2-i**2,0));return a>e?(r=!0,a=e,l=n-Math.sqrt(Math.max(s**2-(i-e)**2))):a<L3&&(a=0),u>t?(o=!0,c=i-Math.sqrt(Math.max(s**2-(n-t)**2)),u=t):u<L3&&(u=0),{leading0:a,leading1:l,trailing0:c,trailing1:u,leadingClipped:r,trailingClipped:o}},Uy=(e,t,n,i,s,r,o)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:u}=r,d=Math.max(a+u,l+c),h=Math.max(a+l,u+c);if(d<=0&&h<=0){o==null?e.rect(t,n,i,s):e.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&a===l&&a===c&&a===u){e.roundRect(t,n,i,s,a);return}if(i<0&&(t+=i,i=Math.abs(i)),s<0&&(n+=s,s=Math.abs(s)),i<=0||s<=0)return;if(o==null)o=new Z(t,n,i,s);else{let E=Math.max(t,o.x),A=Math.min(t+i,o.x+o.width),I=Math.max(n,o.y),T=Math.min(n+s,o.y+o.height);o=new Z(E,I,A-E,T-I)}let p=Math.max(d/s,h/i,1);p>1&&(a/=p,l/=p,c/=p,u/=p);let g=!0,f=!0,m=!0,v=!0,y,w,x,D;if(g){let E=ky(o.height,o.width,Math.max(t+a-o.x,0),Math.max(n+a-o.y,0),a);E.leadingClipped&&(v=!1),E.trailingClipped&&(f=!1);let A=Math.max(o.x+E.leading1,o.x),I=Math.max(o.y+E.leading0,o.y),T=Math.max(o.x+E.trailing1,o.x),P=Math.max(o.y+E.trailing0,o.y),O=t+a,$=n+a;y={x0:A,y0:I,x1:T,y1:P,cx:O,cy:$}}if(f){let E=ky(o.width,o.height,Math.max(n+l-o.y,0),Math.max(o.x+o.width-(t+i-l),0),l);E.leadingClipped&&(g=!1),E.trailingClipped&&(m=!1);let A=Math.min(o.x+o.width-E.leading0,o.x+o.width),I=Math.max(o.y+E.leading1,o.y),T=Math.min(o.x+o.width-E.trailing0,o.x+o.width),P=Math.max(o.y+E.trailing1,o.y),O=t+i-l,$=n+l;w={x0:A,y0:I,x1:T,y1:P,cx:O,cy:$}}if(m){let E=ky(o.height,o.width,Math.max(o.x+o.width-(t+i-c),0),Math.max(o.y+o.height-(n+s-c),0),c);E.leadingClipped&&(f=!1),E.trailingClipped&&(v=!1);let A=Math.min(o.x+o.width-E.leading1,o.x+o.width),I=Math.min(o.y+o.height-E.leading0,o.y+o.height),T=Math.min(o.x+o.width-E.trailing1,o.x+o.width),P=Math.min(o.y+o.height-E.trailing0,o.y+o.height),O=t+i-c,$=n+s-c;x={x0:A,y0:I,x1:T,y1:P,cx:O,cy:$}}if(v){let E=ky(o.width,o.height,Math.max(o.y+o.height-(n+s-u),0),Math.max(t+u-o.x,0),u);E.leadingClipped&&(m=!1),E.trailingClipped&&(g=!1);let A=Math.max(o.x+E.leading0,o.x),I=Math.min(o.y+o.height-E.leading1,o.y+o.height),T=Math.max(o.x+E.trailing0,o.x),P=Math.min(o.y+o.height-E.trailing1,o.y+o.height),O=t+u,$=n+s-u;D={x0:A,y0:I,x1:T,y1:P,cx:O,cy:$}}let M=!1;g&&y!=null&&(Mp(e,y,a,!M),M||(M=!0)),f&&w!=null&&(Mp(e,w,l,!M),M||(M=!0)),m&&x!=null&&(Mp(e,x,c,!M),M||(M=!0)),v&&D!=null&&Mp(e,D,u,!M),e.closePath()},hi=(()=>{let e=class extends Ii{constructor(){super(...arguments),this.borderPath=new Wp,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Es.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Es.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){let{path:t,borderPath:n,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:r,bottomRightCornerRadius:o,bottomLeftCornerRadius:a}=this,{x:l,y:c,width:u,height:d,strokeWidth:h,clipBBox:p}=this,f=1/(this.layerManager?.canvas.pixelRatio??1),m=1;if(t.clear(!0),n.clear(!0),i&&(u<=f&&(m*=u/f),d<=f&&(m*=d/f),u=this.align(l,u),d=this.align(c,d),l=this.align(l),c=this.align(c),p=p!=null?new Z(this.align(p.x),this.align(p.y),this.align(p.x,p.width),this.align(p.y,p.height)):void 0),h)if(u<f){let v=l+f/2;n.moveTo(v,c),n.lineTo(v,c+d),h=f,this.borderClipPath=void 0}else if(d<f){let v=c+f/2;n.moveTo(l,v),n.lineTo(l+u,v),h=f,this.borderClipPath=void 0}else if(h<u&&h<d){let v=h/2;l+=v,c+=v,u-=h,d-=h;let y=p?.clone().shrink(v),w={topLeft:s>0?s-h:0,topRight:r>0?r-h:0,bottomRight:o>0?o-h:0,bottomLeft:a>0?a-h:0};this.borderClipPath=void 0,u>0&&d>0&&(y==null||y?.width>0&&y?.height>0)&&(Uy(t,l,c,u,d,w,y),Uy(n,l,c,u,d,w,y))}else this.borderClipPath=this.borderClipPath??new Wp,this.borderClipPath.clear(!0),this.borderClipPath.rect(l,c,u,d),n.rect(l,c,u,d);else{let v={topLeft:s,topRight:r,bottomRight:o,bottomLeft:a};this.borderClipPath=void 0,Uy(t,l,c,u,d,v,p)}if([s,r,o,a].every(v=>v===0)){let v=this.getBBox();this.hittester=v.containsPoint.bind(v),this.distanceSquared=(y,w)=>this.getBBox().distanceSquared(y,w)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=h,this.lastUpdatePathStrokeWidth=h,this.microPixelEffectOpacity=m}computeBBox(){let{x:t,y:n,width:i,height:s,clipBBox:r}=this;return r?.clone()??new Z(t,n,i,s)}isPointInPath(t,n){return this.hittester(t,n)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,n){return this.distanceCalculator(t,n)}applyFillAlpha(t){let{fillOpacity:n,microPixelEffectOpacity:i,opacity:s}=this;t.globalAlpha*=s*n*i}renderStroke(t){let{stroke:n,effectiveStrokeWidth:i}=this;if(n&&i){let{globalAlpha:s}=t,{strokeOpacity:r,lineDash:o,lineDashOffset:a,lineCap:l,lineJoin:c,borderPath:u,borderClipPath:d,opacity:h,microPixelEffectOpacity:p}=this;d&&t.clip(d.getPath2D()),this.applyStroke(t),t.globalAlpha*=h*r*p,t.lineWidth=i,o&&t.setLineDash(o),a&&(t.lineDashOffset=a),l&&(t.lineCap=l),c&&(t.lineJoin=c),t.stroke(u.getPath2D()),t.globalAlpha=s}}};return e.className="Rect",e})();C([we()],hi.prototype,"x",2);C([we()],hi.prototype,"y",2);C([we()],hi.prototype,"width",2);C([we()],hi.prototype,"height",2);C([we()],hi.prototype,"topLeftCornerRadius",2);C([we()],hi.prototype,"topRightCornerRadius",2);C([we()],hi.prototype,"bottomRightCornerRadius",2);C([we()],hi.prototype,"bottomLeftCornerRadius",2);C([we()],hi.prototype,"clipBBox",2);C([we()],hi.prototype,"crisp",2);var xd=class extends WC{constructor(e){super(),this.ctx=e,this.rectNode=new hi,this.textNode=new hn,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(e.scene.attachNode(this.node),e.layoutManager.addListener("layout:complete",t=>this.onLayoutComplete(t)))}createNode(){return new ye({name:"background",zIndex:0})}onLayoutComplete(e){let{width:t,height:n}=e.chart;this.rectNode.width=t,this.rectNode.height=n}};C([b(le),wn("node","visible")],xd.prototype,"visible",2);C([b(qe,{optional:!0}),wn("rectNode","fill")],xd.prototype,"fill",2);C([b(K,{optional:!0})],xd.prototype,"image",2);C([b(B,{optional:!0}),wn("textNode")],xd.prototype,"text",2);var nV={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new xd(e)};function jpe({orientation:e,bboxes:t,maxHeight:n,maxWidth:i,itemPaddingY:s=0,itemPaddingX:r=0,forceResult:o=!1}){let a=e==="horizontal",l={max:a?i:n,fn:a?h=>h.width:h=>h.height,padding:a?r:s},c={max:a?n:i,fn:a?h=>h.height:h=>h.width,padding:a?s:r},u=0,d=[];for(;u<t.length;){let h=t.slice(u),p=Wpe(h,u,l,c,o);if(!p)return;u+=p.processedBBoxCount,d.push(p.pageIndices)}return $pe(d,e,t,s,r)}function Wpe(e,t,n,i,s){let o=Kpe(e,n);if(o<1){if(!s)return;o=1}let a=o;for(;a>=1;){let l=Upe(e,t,a,n,i,s);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function Upe(e,t,n,i,s,r){let o=[],a=0,l=0,c=[],u=[];for(let d=0;d<e.length;d++){let h=(d+n)%n;h===0&&(a+=l,l=0,c.length>0&&o.push(c),c=[]);let p=i.fn(e[d])+i.padding;u[h]=Math.max(u[h]??0,p),l=Math.max(l,s.fn(e[d])+s.padding);let g=a+l,f=!r||o.length>0;if(g>s.max&&f){c=[];break}if(u.reduce((v,y)=>v+y,0)>i.max&&!r)return u.length<n?u.length:void 0;c.push(d+t)}return c.length>0&&o.push(c),o.length>0?o:void 0}function $pe(e,t,n,i,s){let r=0,o=0;return{pages:e.map(l=>{t==="horizontal"&&(l=Ype(l));let c=0,u=l.map(p=>{let g=p.map(v=>(c=Math.max(v,c),n[v])),f=0,m=0;return g.forEach(v=>{f+=v.height+i,m=Math.max(m,v.width+s)}),{indices:p,bboxes:g,columnHeight:Math.ceil(f),columnWidth:Math.ceil(m)}}),d=0,h=0;return u.forEach(p=>{d+=p.columnWidth,h=Math.max(h,p.columnHeight)}),r=Math.max(d,r),o=Math.max(h,o),{columns:u,startIndex:l[0][0],endIndex:c,pageWidth:d,pageHeight:h}}),maxPageWidth:r,maxPageHeight:o}}function Ype(e){let t=[];for(let n of e[0])t.push([]);return e.forEach((n,i)=>{n.forEach((s,r)=>{t[r][i]=s})}),t}function Kpe(e,t){let n=e.length,i=0;for(let s=0;s<n;s++)if(i+=t.fn(e[s])+t.padding,i>t.max)return n/s<2?Math.ceil(n/2):s;return n}var Dd=class extends Se{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};C([b(qe)],Dd.prototype,"color",2);C([b(Bo,{optional:!0})],Dd.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],Dd.prototype,"fontWeight",2);C([b(j)],Dd.prototype,"fontSize",2);C([b(B)],Dd.prototype,"fontFamily",2);var To=class extends Se{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};C([b(j)],To.prototype,"size",2);C([b(qe,{optional:!0})],To.prototype,"fill",2);C([b(Qe,{optional:!0})],To.prototype,"fillOpacity",2);C([b(qe,{optional:!0})],To.prototype,"stroke",2);C([b(j)],To.prototype,"strokeWidth",2);C([b(Qe)],To.prototype,"strokeOpacity",2);var sw=class extends Se{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};C([Ei({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],sw.prototype,"shape",2);C([b(j)],sw.prototype,"size",2);C([b(j)],sw.prototype,"padding",2);var Md=(()=>{let e=class extends Se{constructor(t,n){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=n,this.id=As(this),this.marker=new sw(this),this.activeStyle=new To,this.inactiveStyle=new To,this.highlightStyle=new To,this.label=new Dd,this.group=new ui({name:"pagination"}),this.labelNode=new hn,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new pn,this.previousButton=new pn,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:t,padding:n}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+n}updateNextButtonPosition(){let t=this.labelNode.getBBox();this.nextButton.translationX=t.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){let{currentPage:t,totalPages:n,labelNode:i,label:{color:s,fontStyle:r,fontWeight:o,fontSize:a,fontFamily:l}}=this;i.text=`${t+1} / ${n}`,i.fill=s,i.fontStyle=r,i.fontWeight=o,i.fontSize=a,i.fontFamily=l}updateMarkers(){let{nextButton:t,previousButton:n,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:r,inactiveStyle:o,highlightStyle:a,highlightActive:l}=this,c=(u,d)=>d?o:u===l?a:r;this.updateMarker(t,c("next",i)),this.updateMarker(n,c("previous",s))}updateMarker(t,n){let{shape:i,size:s}=this.marker;t.shape=i,t.size=s,t.fill=n.fill,t.fillOpacity=n.fillOpacity??1,t.stroke=n.stroke,t.strokeWidth=n.strokeWidth,t.strokeOpacity=n.strokeOpacity}enableOrDisableButtons(){let{currentPage:t,totalPages:n}=this,i=n===0,s=t===n-1,r=t===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=r||i}setPage(t){t=De(0,t,Math.max(0,this.totalPages-1)),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}getCursor(t){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[t]?void 0:"pointer"}onClick(t,n){t.preventDefault(),n==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):n==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(t){this.highlightActive=t,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){let t=Pt.toCanvas(this.previousButton),n=Pt.toCanvas(this.nextButton);return{prev:t,next:n}}};return e.className="Pagination",e})();C([b(K)],Md.prototype,"marker",2);C([b(K)],Md.prototype,"activeStyle",2);C([b(K)],Md.prototype,"inactiveStyle",2);C([b(K)],Md.prototype,"highlightStyle",2);C([b(K)],Md.prototype,"label",2);var pI=class extends Se{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}},qpe=new Set(["circle","cross","diamond","heart","pin","plus","square","star","triangle"]);function Zpe(e){return typeof e=="string"&&qpe.has(e)}var gI=et(e=>Zpe(e)||typeof e=="function","a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Wn=class extends pI{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){let{size:e,shape:t,fill:n,fillOpacity:i,stroke:s,strokeWidth:r,strokeOpacity:o,lineDash:a,lineDashOffset:l}=this;return{size:e,shape:t,fill:n,fillOpacity:i,stroke:s,strokeWidth:r,strokeOpacity:o,lineDash:a,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}};C([b(le),q()],Wn.prototype,"enabled",2);C([b(gI),q()],Wn.prototype,"shape",2);C([b(j),q()],Wn.prototype,"size",2);C([b(qe,{optional:!0}),q()],Wn.prototype,"fill",2);C([b(Qe),q()],Wn.prototype,"fillOpacity",2);C([b(qe,{optional:!0}),q()],Wn.prototype,"stroke",2);C([b(j),q()],Wn.prototype,"strokeWidth",2);C([b(Qe),q()],Wn.prototype,"strokeOpacity",2);C([b(Gr)],Wn.prototype,"lineDash",2);C([b(j)],Wn.prototype,"lineDashOffset",2);C([b(di,{optional:!0}),q()],Wn.prototype,"itemStyler",2);function $p(e,t,n){e.fill=n?.fill??t.fill,e.fillOpacity=n?.fillOpacity??t.fillOpacity??1,e.stroke=n?.stroke??t.stroke,e.strokeOpacity=n?.strokeOpacity??t.strokeOpacity??1,e.strokeWidth=n?.strokeWidth??t.strokeWidth??0,e.lineDash=n?.lineDash??t.lineDash,e.lineDashOffset=n?.lineDashOffset??t.lineDashOffset??0}var Xpe=class{constructor(e,t){this.idPrefix=t,this.dirty=!0,this.destroyFns=new HB,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=Ne("p"),this.itemDescription.style.display="none",this.itemDescription.id=`${t}-ariaDescription`,this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(e){if(!this.dirty)return;let{ctx:t,itemSelection:n,datumReader:i,itemListener:s}=e,r=t.localeManager,o=n.length;n.each((a,l,c)=>{a.proxyButton?.destroy(),a.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(r,i.getItemLabel(l),c,o),ariaChecked:!!a.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});let u=a.proxyButton;u.addListener("click",d=>s.onClick(d.sourceEvent,a.datum,u)),u.addListener("dblclick",d=>s.onDoubleClick(d.sourceEvent,a.datum)),u.addListener("mouseenter",d=>s.onHover(d.sourceEvent,a)),u.addListener("mouseleave",()=>s.onLeave()),u.addListener("contextmenu",d=>s.onContextClick(d.sourceEvent,a)),u.addListener("blur",()=>s.onLeave()),u.addListener("focus",d=>s.onHover(d.sourceEvent,a)),u.addListener("drag-start",()=>{})}),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons({itemSelection:e,group:t,pagination:n,interactive:i}){let s=Pt.toCanvas(t);this.itemList.setBounds(s);let r=Math.max(...e.nodes().map(o=>o.getBBox().height));e.each((o,a)=>{if(o.proxyButton){let l=o.pageIndex===n.currentPage,{x:c,y:u,height:d,width:h}=Pt.toCanvas(o),p=(r-d)/2,g={x:c-s.x,y:u-p-s.y,height:r,width:h};o.proxyButton.setCursor("pointer"),o.proxyButton.setEnabled(i&&l),o.proxyButton.setBounds(g)}})}updatePaginationProxyButtons(e,t){let{pagination:n}=e;if(this.paginationGroup.setHidden(!n.visible),t&&"ctx"in e){let{ctx:r,oldPages:o,newPages:a}=e,l=(o?.length??a.length)>1,c=a.length>1;l!==c&&(c?(this.prevButton=r.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",u=>this.onPageButton(e,u,"previous")),this.prevButton.addListener("mouseenter",()=>n.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>n.onMouseHover(void 0)),this.nextButton??(this.nextButton=r.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",u=>this.onPageButton(e,u,"next")),this.nextButton.addListener("mouseenter",()=>n.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>n.onMouseHover(void 0))):(this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0))}let{prev:i,next:s}=n.computeCSSBounds();this.prevButton?.setBounds(i),this.nextButton?.setBounds(s),this.prevButton?.setEnabled(n.currentPage!==0),this.nextButton?.setEnabled(n.currentPage!==n.totalPages-1),this.nextButton?.setCursor(n.getCursor("next")),this.prevButton?.setCursor(n.getCursor("previous"))}onPageButton(e,t,n){e.pagination.onClick(t.sourceEvent,n),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((n,i,s)=>{let[r,o]=[t[i],e[i]];return r.id!==o.id})}onLocaleChanged(e,t,n){let i=t.length;t.each(({proxyButton:s},r,o)=>{let a=s?.getElement();if(a!=null){let l=n.getItemLabel(r);a.textContent=this.getItemAriaText(e,l,o,i)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,n,i){return n>=0&&t?(n++,e.t("ariaLabelLegendItem",{label:t,index:n,count:i})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function P3(e,t,n,i){let s={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:n,event:i,preventDefault:()=>s.defaultPrevented=!0}};return s}var rr=(()=>{let e=class extends gc(ye){constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new ye({name:"legend-markerLabel-symbols"})),this.label=this.appendChild(new hn),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new pn({zIndex:1})),this.line=this.symbolsGroup.appendChild(new Zi({zIndex:0}));let{label:t,line:n,symbolsGroup:i}=this;n.visible=!1,i.renderToOffscreenCanvas=!0,i.optimizeForInfrequentRedraws=!0,t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(t){this.enabled=t,this.refreshVisibilities()}refreshVisibilities(){let t=this.enabled?1:.5;this.label.opacity=t,this.opacity=t}layout(){let{marker:t,line:n,length:i,isCustomMarker:s}=this,r=0,o=0;if(t.visible){let{size:a}=t,l=pn.anchor(t.shape);r=(l.x-.5)*a+i/2,o=(l.y-.5)*a,s?(t.x=0,t.y=0,t.translationX=r,t.translationY=o):(t.x=r,t.y=o,t.translationX=0,t.translationY=0)}n.visible&&(n.x1=0,n.x2=i,n.y1=0,n.y2=0)}preRender(t){let n=super.preRender(t);return this.layout(),n}layoutLabel(){let{length:t,spacing:n}=this;this.label.x=t+n}computeBBox(){return this.layout(),super.computeBBox()}};return e.className="MarkerLabel",e})();C([wn("label")],rr.prototype,"text",2);C([wn("label")],rr.prototype,"fontStyle",2);C([wn("label")],rr.prototype,"fontWeight",2);C([wn("label")],rr.prototype,"fontSize",2);C([wn("label")],rr.prototype,"fontFamily",2);C([wn("label","fill")],rr.prototype,"color",2);C([Ua(e=>e.layoutLabel())],rr.prototype,"spacing",2);C([Ua(e=>e.layoutLabel())],rr.prototype,"length",2);C([q()],rr.prototype,"isCustomMarker",2);var Za=class extends Se{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};C([b(j,{optional:!0})],Za.prototype,"maxLength",2);C([b(qe)],Za.prototype,"color",2);C([b(Bo,{optional:!0})],Za.prototype,"fontStyle",2);C([b(Vo,{optional:!0})],Za.prototype,"fontWeight",2);C([b(j)],Za.prototype,"fontSize",2);C([b(B)],Za.prototype,"fontFamily",2);C([b(di,{optional:!0})],Za.prototype,"formatter",2);var Ed=class extends Se{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};C([b(gI,{optional:!0})],Ed.prototype,"shape",2);C([b(j)],Ed.prototype,"size",2);C([b(j)],Ed.prototype,"padding",2);C([b(j,{optional:!0})],Ed.prototype,"strokeWidth",2);C([b(le)],Ed.prototype,"enabled",2);var fI=class extends Se{};C([b(j,{optional:!0})],fI.prototype,"strokeWidth",2);C([b(j,{optional:!0})],fI.prototype,"length",2);var Xa=class extends Se{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new Ed,this.label=new Za,this.line=new fI}};C([b(j,{optional:!0})],Xa.prototype,"maxWidth",2);C([b(j)],Xa.prototype,"paddingX",2);C([b(j)],Xa.prototype,"paddingY",2);C([b(le)],Xa.prototype,"showSeriesStroke",2);C([b(K)],Xa.prototype,"marker",2);C([b(K)],Xa.prototype,"label",2);C([b(K)],Xa.prototype,"line",2);var mI=class extends Se{};C([b(di,{optional:!0})],mI.prototype,"legendItemClick",2);C([b(di,{optional:!0})],mI.prototype,"legendItemDoubleClick",2);var wp="legend-visibility",fM="legend-other-series",Qi=(()=>{let e=class extends Se{constructor(t){super(),this.ctx=t,this.id=As(this),this.group=new ui({name:"legend",zIndex:14}),this.itemSelection=Kt.select(this.group,rr),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new Xa,this.listeners=new mI,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.pagination=new Md(n=>t.updateService.update(n),n=>this.updatePageNumber(n)),this.pagination.attachPagination(this.group),this.destroyFns.push(t.contextMenuRegistry.registerDefaultAction({id:wp,type:"legend",label:"contextMenuToggleSeriesVisibility",action:n=>this.contextToggleVisibility(n)}),t.contextMenuRegistry.registerDefaultAction({id:fM,type:"legend",label:"contextMenuToggleOtherSeries",action:n=>this.contextToggleOtherSeries(n)}),t.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(t.layoutManager.registerElement(1,n=>this.positionLegend(n)),t.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.domProxy=new Xpe(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(t.legendManager)}set data(t){uc(t,this._data)||(this.domProxy.onDataUpdate(this._data,t),this._data=t,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:t=[]}){this.enabled&&(this.data=t.filter(n=>!n.hideInLegend))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(t=>t()),this.itemSelection.clear(),this.domProxy.destroy()}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}getItemLabel(t){let{ctx:{callbackCache:n}}=this,{formatter:i}=this.item.label;if(i){let s=t.datum;return n.call(i,S({itemId:t.itemId,value:t.label.text,seriesId:t.seriesId},s&&{datum:s}))}return t.label.text}calcLayout(t,n){let{paddingX:i,paddingY:s,label:r,maxWidth:o,label:{maxLength:a=1/0,fontStyle:l,fontWeight:c,fontSize:u,fontFamily:d}}=this.item,h=[...this.data];this.reverseOrder&&h.reverse(),this.itemSelection.update(h);let p=[],g=Yt.toFontString(r),m=o??t*.8,v=this.calculateMarkerWidth();if(this.itemSelection.each((T,P)=>{T.fontStyle=l,T.fontWeight=c,T.fontSize=u,T.fontFamily=d;let O=this.updateMarkerLabel(T,P,v),$=P.itemId??P.id,ue=(this.getItemLabel(P)??"<unknown>").replace(/\r?\n/g," ");T.text=this.truncate(ue,a,m,O,g,$),p.push(T.getBBox())}),t=Math.max(1,t),n=Math.max(1,n),!isFinite(t))return{};let y=this.size,w=this.oldSize;y[0]=t,y[1]=n,(y[0]!==w[0]||y[1]!==w[1])&&(w[0]=y[0],w[1]=y[1]);let{pages:x,maxPageHeight:D,maxPageWidth:M}=this.updatePagination(p,t,n),E=this.pages;this.pages=x,this.maxPageSize=[M-i,D-s];let A=this.pagination.currentPage,I=this.pages[A];return this.pages.length<1||!I?(this.visible=!1,{oldPages:E}):(this.visible=!0,this.updatePositions(A),this.update(),{oldPages:E})}isCustomMarker(t,n){return t&&n!==void 0&&typeof n!="string"}calcSymbolsEnabled(t){let{showSeriesStroke:n,marker:i}=this.item,s=!!i.enabled||!n||(t.marker.enabled??!0),r=!!(t.line&&n),o=this.isCustomMarker(s,t.marker.shape);return{markerEnabled:s,lineEnabled:r,isCustomMarker:o}}calcSymbolsLengths(t){let{marker:n,line:i}=this.item,{markerEnabled:s,lineEnabled:r}=this.calcSymbolsEnabled(t),{strokeWidth:o}=this.getMarkerStyles(t),{strokeWidth:a}=r?this.getLineStyles(t):{strokeWidth:0},l,{shape:c}=t.marker;if(this.isCustomMarker(s,c)){let h=new pn;h.shape=c,h.updatePath();let p=h.getBBox();l=Math.max(p.width,p.height)}let u=s?n.size:0,d=r?i.length??25:0;return{markerLength:u,markerStrokeWidth:o,lineLength:d,lineStrokeWidth:a,customMarkerSize:l}}calculateMarkerWidth(){let t=0;return this.itemSelection.each((n,i)=>{let{symbol:s}=i,{markerLength:r,lineLength:o,customMarkerSize:a=-1/0}=this.calcSymbolsLengths(s);t=Math.max(t,o,a,r)}),t}updateMarkerLabel(t,n,i){let{marker:s,paddingX:r}=this.item,{symbol:o}=n,a=r,{markerEnabled:l,lineEnabled:c,isCustomMarker:u}=this.calcSymbolsEnabled(o),d=s.padding;(l||c)&&(a+=d+i);let{marker:h,line:p}=t;return h.visible=l,h.visible&&(h.shape=s.shape??o.marker.shape??"square",h.size=s.size,$p(h,this.getMarkerStyles(o))),p.visible=c,p.visible&&$p(p,this.getLineStyles(o)),t.length=i,t.spacing=d,t.isCustomMarker=u,a}truncate(t,n,i,s,r,o){let a=!1;t.length>n&&(t=t.substring(0,n),a=!0);let l=Go.getMeasurer({font:r}),c=AE.truncateLine(t,l,i-s,a);return c.endsWith(Yt.EllipsisChar)?this.truncatedItems.add(o):this.truncatedItems.delete(o),c}updatePagination(t,n,i){let s=this.getOrientation(),r=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:o,maxPageHeight:a,maxPageWidth:l,paginationBBox:c,paginationVertical:u}=this.calculatePagination(t,n,i),d=o.findIndex(x=>x.endIndex>=r);this.pagination.currentPage=De(0,d,o.length-1);let{paddingX:h,paddingY:p}=this.item,g=8,f=l-h,m=a-p,v=0,y=-c.y-this.item.marker.size/2;u?y+=m+g:(v+=-c.x+f+g,y+=(m-c.height)/2),this.pagination.translationX=v,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers();let w=0;return this.itemSelection.each((x,D,M)=>{M>(o[w]?.endIndex??1/0)&&w++,x.pageIndex=w}),{maxPageHeight:a,maxPageWidth:l,pages:o}}calculatePagination(t,n,i){let{paddingX:s,paddingY:r}=this.item,o=this.getOrientation(),a=["left","right"].includes(this.position),l=this.pagination.getBBox(),c=new Z(0,0,0,0),u=[],d=0,h=0,p=0,g=m=>m.width===l.width&&m.height===l.height,f=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(p++>10){G.warn("unable to find stable legend layout.");break}l=c;let m=n-(a?0:l.width),v=i-(a?l.height:0),y=jpe({orientation:o,bboxes:t,maxHeight:v,maxWidth:m,itemPaddingY:r,itemPaddingX:s,forceResult:f});u=y?.pages??[],d=y?.maxPageWidth??0,h=y?.maxPageHeight??0;let w=u.length;if(this.pagination.visible=w>1,this.pagination.totalPages=w,this.pagination.update(),this.pagination.updateMarkers(),c=this.pagination.getBBox(),!this.pagination.visible)break}while(!g(c));return{maxPageWidth:d,maxPageHeight:h,pages:u,paginationBBox:c,paginationVertical:a}}updatePositions(t=0){let{item:{paddingY:n},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;let{columns:r,startIndex:o,endIndex:a}=s[t],l=0,c=0,u=r.length,d=r[0].indices.length,h=this.getOrientation()==="horizontal",p=r[0].bboxes[0].height+n,g=[];i.each((f,m,v)=>{if(v<o||v>a){f.visible=!1;return}let y=v-o,w,x;h?(w=y%u,x=Math.floor(y/u)):(w=Math.floor(y/d),x=y%d),f.visible=!0;let D=r[w];D&&(c=Math.floor(p*x),l=Math.floor(g[x]??0),g[x]=(g[x]??0)+D.columnWidth,f.translationX=l,f.translationY=c)})}updatePageNumber(t){let{itemSelection:n,group:i,pagination:s,pages:r,toggleSeries:o}=this,{startIndex:a,endIndex:l}=r[t];a===0?this.paginationTrackingIndex=0:t===r.length-1?this.paginationTrackingIndex=l:this.paginationTrackingIndex=Math.floor((a+l)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.domProxy.onPageChange({itemSelection:n,group:i,pagination:s,interactive:o}),this.ctx.updateService.update(6)}update(){let{label:{color:t}}=this.item;this.itemSelection.each((n,i)=>{n.setEnabled(i.enabled),n.color=t}),this.updateContextMenu()}updateContextMenu(){let{toggleSeries:t,ctx:{contextMenuRegistry:n}}=this;t?(n.hideAction(wp),n.hideAction(fM)):(n.showAction(wp),n.showAction(fM))}getLineStyles(t){let{stroke:n,strokeOpacity:i=1,strokeWidth:s,lineDash:r}=t.line??{},o=Math.min(2,s??1);return{stroke:n,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:r}}getMarkerStyles(t){let{fill:n,stroke:i,strokeOpacity:s=1,fillOpacity:r=1,strokeWidth:o,lineDash:a,lineDashOffset:l}=t.marker,c=Math.min(2,o??1);return{fill:n,stroke:i,strokeOpacity:s,fillOpacity:r,strokeWidth:this.item.marker.strokeWidth??c,lineDash:a,lineDashOffset:l}}computePagedBBox(){let t=ye.computeChildrenBBox(this.group.children());if(this.pages.length>1){let[n,i]=this.maxPageSize;t.height=Math.max(i,t.height),t.width=Math.max(n,t.width)}return t}findNode(t){let{datum:n,proxyButton:i}=this.itemSelection.select(s=>s.datum?.itemId===t.itemId)[0]??{};if(n===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${n}, proxyButton: ${JSON.stringify(i)} }`);return{datum:n,proxyButton:i}}contextToggleVisibility(t){let{datum:n,proxyButton:i}=this.findNode(t);this.doClick(t.event,n,i)}contextToggleOtherSeries(t){this.doDoubleClick(t.event,this.findNode(t).datum)}onContextClick(t,n){let i=n.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(wp):this.ctx.contextMenuRegistry.enableAction(wp);let{offsetX:s,offsetY:r}=t,{x:o,y:a}=Pt.toCanvasPoint(n,s,r);this.ctx.contextMenuRegistry.dispatchContext("legend",{sourceEvent:t,canvasX:o,canvasY:a},{legendItem:i})}onClick(t,n,i){this.doClick(t,n,i)&&t.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(t=>t.getLegendData("category")).filter(t=>t.enabled).length}doClick(t,n,i){let{listeners:{legendItemClick:s},ctx:{chartService:r,highlightManager:o},preventHidingAll:a,toggleSeries:l}=this;if(!n)return!1;let{legendType:c,seriesId:u,itemId:d,enabled:h}=n,p=r.series.find(m=>m.id===u);if(!p)return!1;let g=h,f=P3("click",d,p.id,t);return s?.(f.apiEvent),f.defaultPrevented||(l&&(g=!h,a&&!g&&this.getVisibleItemCount()<2&&(g=!0),i.setChecked(g),this.ctx.chartEventManager.legendItemClick(c,p,d,g,n.legendItemName)),g?o.updateHighlight(this.id,{series:p,itemId:d,datum:void 0,datumIndex:void 0}):o.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:n.skipAnimations??!1})),!0}onDoubleClick(t,n){this.doDoubleClick(t,n)&&t.preventDefault()}doDoubleClick(t,n){let{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:r}=this;if(s.mode==="integrated"||!n)return!1;let{legendType:o,id:a,itemId:l,seriesId:c}=n,u=s.series.find(h=>h.id===a);if(!u)return!1;let d=P3("dblclick",l,u.id,t);if(i?.(d.apiEvent),d.defaultPrevented)return!0;if(r){let h=s.series.flatMap(f=>f.getLegendData("category")),p=h.filter(f=>f.enabled).length,g=h.find(f=>f.itemId===l&&f.seriesId===c);this.ctx.chartEventManager.legendItemDoubleClick(o,u,l,g?.enabled??!1,p,g?.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(t,n){let i;if(t instanceof FocusEvent){let{x:o,y:a}=Pt.toCanvas(n).computeCenter();i={type:"keyboard",canvasX:o,canvasY:a}}else{t.preventDefault();let{x:o,y:a}=Pt.toCanvasPoint(n,t.offsetX,t.offsetY);i={type:"pointermove",canvasX:o,canvasY:a}}let{canvasX:s,canvasY:r}=i;return{canvasX:s,canvasY:r,lastPointerEvent:i,showArrow:!1}}onHover(t,n){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(n.pageIndex);let i=n.datum,s=i?this.ctx.chartService.series.find(r=>r.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){let r=this.toTooltipMeta(t,n);this.ctx.tooltipManager.updateTooltip(this.id,r,{type:"structured",title:this.getItemLabel(i)})}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&s?this.updateHighlight({series:s,itemId:i?.itemId,datum:void 0,datumIndex:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(t){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,t):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=t,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(t){let n=this.positionLegendScene(t);this.positionLegendDOM(n)}positionLegendScene(t){if(!this.enabled||!this.data.length)return;let{layoutBox:n}=t,{x:i,y:s,width:r,height:o}=n,[a,l]=this.calculateLegendDimensions(n),{oldPages:c}=this.calcLayout(a,l),u=this.computePagedBBox(),d=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return o-u.height;case"right":default:return r-u.width}};if(this.visible){let h=this.spacing,p,g;switch(this.position){case"top":case"bottom":p=(r-u.width)/2,g=d(),n.shrink(u.height+h,this.position);break;case"left":case"right":default:p=d(),g=(o-u.height)/2,n.shrink(u.width+h,this.position)}this.group.translationX=Math.floor(i+p-u.x),this.group.translationY=Math.floor(s+g-u.y)}return c}positionLegendDOM(t){let{ctx:n,itemSelection:i,pagination:s,pages:r,toggleSeries:o,group:a,listeners:{legendItemClick:l,legendItemDoubleClick:c}}=this,u=this.visible&&this.enabled,d=o||c!=null||l!=null;this.domProxy.update({visible:u,interactive:d,ctx:n,itemSelection:i,group:a,pagination:s,oldPages:t,newPages:r,datumReader:this,itemListener:this})}calculateLegendDimensions(t){let{width:n,height:i}=t,s=n/i,r=.5,o=.2,a=.25,l,c;switch(this.position){case"top":case"bottom":{let u=s<1?Math.min(r,o*(1/s)):o;l=this.maxWidth?Math.min(this.maxWidth,n):n,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*u);break}case"left":case"right":default:{let u=s>1?Math.min(r,a*s):a;l=this.maxWidth?Math.min(this.maxWidth,n):Math.round(n*u),c=this.maxHeight?Math.min(this.maxHeight,i):i}}return[l,c]}};return e.className="Legend",e})();C([b(le)],Qi.prototype,"toggleSeries",2);C([b(K)],Qi.prototype,"pagination",2);C([b(K)],Qi.prototype,"item",2);C([b(K)],Qi.prototype,"listeners",2);C([Ua((e,t,n)=>{if(e.updateGroupVisibility(),t===n)return;let{ctx:{legendManager:i,stateManager:s}}=e;n===!1&&t===!0&&s.restoreState(i)}),b(le)],Qi.prototype,"enabled",2);C([b(wE)],Qi.prototype,"position",2);C([b(j,{optional:!0})],Qi.prototype,"maxWidth",2);C([b(j,{optional:!0})],Qi.prototype,"maxHeight",2);C([b(le,{optional:!0})],Qi.prototype,"reverseOrder",2);C([b(ut(["horizontal","vertical"],"an orientation"),{optional:!0})],Qi.prototype,"orientation",2);C([b(le,{optional:!0})],Qi.prototype,"preventHidingAll",2);C([b(j)],Qi.prototype,"spacing",2);var Qpe={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new Qi(e),packageType:"community",removable:"standalone-only"},iV={};Is(iV,{CARTESIAN_AXIS_TYPE:()=>oV,CARTESIAN_POSITION:()=>rV,FONT_SIZE:()=>sV,FONT_SIZE_RATIO:()=>vI,POLAR_AXIS_SHAPE:()=>lV,POLAR_AXIS_TYPE:()=>aV});var sV=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(sV||{}),vI=(e=>(e[e.SMALLEST=.6666666666666666]="SMALLEST",e[e.SMALLER=.8333333333333334]="SMALLER",e[e.SMALL=1]="SMALL",e[e.MEDIUM=1.0833333333333333]="MEDIUM",e[e.LARGE=1.1666666666666667]="LARGE",e[e.LARGEST=1.4166666666666667]="LARGEST",e))(vI||{}),rV=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(rV||{}),oV=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.NUMBER="number",e.TIME="time",e.LOG="log",e))(oV||{}),aV=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(aV||{}),lV=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(lV||{}),yI={};Is(yI,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>Mg,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Ag,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Rg,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Kp,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>qp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Eg,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Ig,DEFAULT_BACKGROUND_COLOUR:()=>rw,DEFAULT_CAPTION_ALIGNMENT:()=>Oa,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Na,DEFAULT_COLOR_RANGE:()=>dw,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>Ai,DEFAULT_FIBONACCI_STROKES:()=>Yp,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>en,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Lt,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>jr,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>Ts,DEFAULT_GRIDLINE_ENABLED:()=>kr,DEFAULT_HIERARCHY_FILLS:()=>pw,DEFAULT_HIERARCHY_STROKES:()=>gw,DEFAULT_POLAR_SERIES_STROKE:()=>uw,DEFAULT_SEPARATION_LINES_COLOUR:()=>bg,DEFAULT_SHADOW_COLOUR:()=>Qa,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>hw,DEFAULT_TEXTBOX_COLOR:()=>Lg,DEFAULT_TEXTBOX_FILL:()=>Tg,DEFAULT_TEXTBOX_STROKE:()=>kg,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Dg,DEFAULT_TOOLBAR_POSITION:()=>Pg,IS_COMMUNITY:()=>CI,IS_DARK_THEME:()=>td,IS_ENTERPRISE:()=>wI,PALETTE_ALT_DOWN_FILL:()=>DI,PALETTE_ALT_DOWN_STROKE:()=>SI,PALETTE_ALT_NEUTRAL_FILL:()=>MI,PALETTE_ALT_NEUTRAL_STROKE:()=>cw,PALETTE_ALT_UP_FILL:()=>xI,PALETTE_ALT_UP_STROKE:()=>bI,PALETTE_DOWN_FILL:()=>xg,PALETTE_DOWN_STROKE:()=>aw,PALETTE_NEUTRAL_FILL:()=>lw,PALETTE_NEUTRAL_STROKE:()=>Id,PALETTE_UP_FILL:()=>Sg,PALETTE_UP_STROKE:()=>ow});var td=Symbol("is-dark-theme"),CI=Symbol("is-community"),wI=Symbol("is-enterprise"),bg=Symbol("default-separation-lines-colour"),rw=Symbol("default-background-colour"),Qa=Symbol("default-shadow-colour"),Na=Symbol("default-caption-layout-style"),Oa=Symbol("default-caption-alignment"),ow=Symbol("palette-up-stroke"),aw=Symbol("palette-down-stroke"),Sg=Symbol("palette-up-fill"),xg=Symbol("palette-down-fill"),Id=Symbol("palette-neutral-stroke"),lw=Symbol("palette-neutral-fill"),bI=Symbol("palette-alt-up-stroke"),SI=Symbol("palette-alt-down-stroke"),xI=Symbol("palette-alt-up-fill"),DI=Symbol("palette-alt-down-fill"),MI=Symbol("palette-gray-fill"),cw=Symbol("palette-gray-stroke"),uw=Symbol("default-polar-series-stroke"),Ai=Symbol("default-diverging-series-colour-range"),dw=Symbol("default-colour-range"),hw=Symbol("default-sparkline-crosshair-stroke"),Ts=Symbol("default-gauge-series-colour-range"),jr=Symbol("default-funnel-series-colour-range"),pw=Symbol("default-hierarchy-fills"),gw=Symbol("default-hierarchy-strokes"),Lt=Symbol("default-financial-charts-annotation-stroke"),Yp=Symbol("default-hierarchy-strokes"),Dg=Symbol("default-text-annotation-color"),en=Symbol("default-financial-charts-annotation-background-fill"),Mg=Symbol("default-annotation-handle-fill"),Eg=Symbol("default-annotation-statistics-fill"),Ig=Symbol("default-annotation-statistics-stroke"),Ag=Symbol("default-annotation-statistics-color"),Rg=Symbol("default-annotation-statistics-divider-stroke"),Kp=Symbol("default-annotation-statistics-fill"),qp=Symbol("default-annotation-statistics-stroke"),Tg=Symbol("default-textbox-fill"),kg=Symbol("default-textbox-stroke"),Lg=Symbol("default-textbox-color"),Pg=Symbol("default-toolbar-position"),kr=Symbol("default-gridline-enabled");function cV(e,t){return n=>t(n)?[R(S({},e[0]),{position:e[1].position}),R(S({},e[1]),{position:e[0].position})]:e}function Fg({takeColors:e}){let{fills:[t],strokes:[n]}=e(1);return{fill:t,stroke:n}}function EI(e){return{marker:Fg(e)}}function fC(e,t,n,i,s){let{addPhaseFn:r,updatePhaseFn:o,removePhaseFn:a}=s,l=(c,u,d)=>{n.animate({id:`${e}_${t}_${u.id}_${c}`,groupId:e,from:0,to:1,ease:_p,collapsable:!1,onUpdate(h,p){p&&c!=="removed"||(u.path.clear(!0),d(h,u),u.checkPathDirty())},onStop(){c==="added"&&(u.path.clear(!0),d(1,u),u.checkPathDirty())},phase:Xs[c]})};for(let c of i)n.isSkipped()||(l("removed",c,a),l("updated",c,o)),l("added",c,r)}function Ke({id:e},t,n,...i){Oo(e,t,n,i,{opacity:0},{opacity:1},{phase:"trailing"})}function _a({id:e},t,n,...i){Oo(e,t,n,i,{opacity:1},{opacity:0},{phase:"remove"})}function Yo(e){return{opacity:1}}var or=class extends pI{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};C([b(le),q()],or.prototype,"enabled",2);C([b(qe),q()],or.prototype,"color",2);C([b(je),q()],or.prototype,"xOffset",2);C([b(je),q()],or.prototype,"yOffset",2);C([b(j),q()],or.prototype,"blur",2);var uV=class extends Se{constructor(){super(...arguments),this.enabled=!1}};C([b(le)],uV.prototype,"enabled",2);var Un=class extends Se{constructor(){super(...arguments),this.enabled=!0,this.interaction=new uV,this.position=new Cd,this.range=void 0,this.class=void 0}formatTooltip(e,t){let n=this.renderer?.(t);return typeof n=="string"?{type:"raw",rawHtmlString:n}:n!=null?S(S({type:"structured"},e),n):S({type:"structured"},e)}};C([b(le)],Un.prototype,"enabled",2);C([b(le,{optional:!0})],Un.prototype,"showArrow",2);C([b(di,{optional:!0})],Un.prototype,"renderer",2);C([b(K)],Un.prototype,"interaction",2);C([b(K)],Un.prototype,"position",2);C([b(_C,{optional:!0})],Un.prototype,"range",2);C([b(B,{optional:!0})],Un.prototype,"class",2);var dV=ut(["linear","smooth","step"],"a line style"),hV=ut(["start","middle","end"]),Ad=class extends Se{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};C([b(dV)],Ad.prototype,"type",2);C([b(Qe)],Ad.prototype,"tension",2);C([b(hV)],Ad.prototype,"position",2);var Zt=class extends Uo{constructor(){super(...arguments),this.xName=void 0,this.defaultColorRange=[],this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ad,this.shadow=new or,this.marker=new Wn,this.label=new gn,this.tooltip=new Un,this.connectMissingData=!1}};C([b(B)],Zt.prototype,"xKey",2);C([b(B,{optional:!0})],Zt.prototype,"xName",2);C([b(B)],Zt.prototype,"yKey",2);C([b(B,{optional:!0})],Zt.prototype,"yName",2);C([b(B,{optional:!0})],Zt.prototype,"yFilterKey",2);C([b(j,{optional:!0})],Zt.prototype,"normalizedTo",2);C([b(Ki)],Zt.prototype,"defaultColorRange",2);C([b(ja(O_,qe))],Zt.prototype,"fill",2);C([b(Qe)],Zt.prototype,"fillOpacity",2);C([b(qe)],Zt.prototype,"stroke",2);C([b(j)],Zt.prototype,"strokeWidth",2);C([b(Qe)],Zt.prototype,"strokeOpacity",2);C([b(Gr)],Zt.prototype,"lineDash",2);C([b(j)],Zt.prototype,"lineDashOffset",2);C([b(K)],Zt.prototype,"interpolation",2);C([b(K)],Zt.prototype,"shadow",2);C([b(K)],Zt.prototype,"marker",2);C([b(K)],Zt.prototype,"label",2);C([b(K)],Zt.prototype,"tooltip",2);C([b(le)],Zt.prototype,"connectMissingData",2);function Br(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function Jpe(e){let t=Br(e);return t[0].x>t[1].x&&t.reverse(),t}function ege(e,t){let{x:n,y:i}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:n,y0:i,x1:n,y1:i};case"step":return{type:"step",moveTo:e.moveTo,x0:n,y0:i,x1:n,y1:i,stepX:n};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:n,cp0y:i,cp1x:n,cp1y:i,cp2x:n,cp2y:i,cp3x:n,cp3y:i}}}function Zp(e,t,n){let[i,s]=Br(e),r=s.x!==i.x?(n.x-t.x)/(s.x-i.x):0,o=s.y!==i.y?(n.y-t.y)/(s.y-i.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:n.x,y1:n.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:n.x-(e.cp2x-i.x)*r,cp1y:n.y-(e.cp2y-i.y)*o,cp2x:n.x-(e.cp1x-i.x)*r,cp2y:n.y-(e.cp1y-i.y)*o,cp3x:n.x,cp3y:n.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:n.x,y1:n.y,stepX:n.x-(e.stepX-i.x)*r}}}function pV(e,t,n){let{moveTo:i}=e,[s,r]=Jpe(e),{x:o,y:a}=s,{x:l,y:c}=r;if(n<o)return Zp(e,s,s);if(t>l)return Zp(e,r,r);switch(e.type){case"linear":{let u=a===c?void 0:(c-a)/(l-o),d=u==null?a:u*(t-o)+a,h=u==null?a:u*(n-o)+a;return{type:"linear",moveTo:i,x0:t,y0:d,x1:n,y1:h}}case"step":if(n<=e.stepX){let u=e.y0;return{type:"step",moveTo:i,x0:t,y0:u,x1:n,y1:u,stepX:n}}else if(t>=e.stepX){let u=e.y1;return{type:"step",moveTo:i,x0:t,y0:u,x1:n,y1:u,stepX:t}}else{let{y0:u,y1:d,stepX:h}=e;return{type:"step",moveTo:i,x0:t,y0:u,x1:n,y1:d,stepX:h}}case"cubic":{let u=uC(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t),[d,h]=dC(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,u),p=uC(h[0].x,h[1].x,h[2].x,h[3].x,n);return[h,d]=dC(h[0].x,h[0].y,h[1].x,h[1].y,h[2].x,h[2].y,h[3].x,h[3].y,p),{type:"cubic",moveTo:i,cp0x:h[0].x,cp0y:h[0].y,cp1x:h[1].x,cp1y:h[1].y,cp2x:h[2].x,cp2y:h[2].y,cp3x:h[3].x,cp3y:h[3].y}}}}function tge(e){let t=[],n=0,i=NaN,s=NaN;for(let{x:r,y:o}of e){if(n>0){let a=n===1;t.push({type:"linear",moveTo:a,x0:i,y0:s,x1:r,y1:o})}n+=1,i=r,s=o}return t}var nge={start:0,middle:.5,end:1};function ige(e,t){let n=[],i=0,s=NaN,r=NaN,o=typeof t=="number"?t:nge[t];for(let{x:a,y:l}of e){if(i>0){let c=i===1,u=s+(a-s)*o;n.push({type:"step",moveTo:c,x0:s,y0:r,x1:a,y1:l,stepX:u})}i+=1,s=a,r=l}return n}var Ly=.05;function sge(e,t){let n=Array.isArray(e)?e:Array.from(e);if(n.length<=1)return[];let i=n.map((r,o)=>{let a=o===0?r:n[o-1],l=o===n.length-1?r:n[o+1],c=o===0||o===n.length-1;if(Math.sign(a.y-r.y)===Math.sign(l.y-r.y))return 0;if(!c){let u=Math.abs(a.y-l.y),d=Math.abs(r.y-a.y)/u,h=Math.abs(r.y-l.y)/u;if(d<=Ly||1-d<=Ly||h<=Ly||1-h<=Ly)return 0}return(l.y-a.y)/(l.x-a.x)});i[1]===0&&(i[0]*=2),i[i.length-2]===0&&(i[i.length-1]*=2);let s=[];for(let r=1;r<n.length;r+=1){let o=n[r-1],a=i[r-1],l=n[r],c=i[r],u=l.x-o.x,d=l.y-o.y,h=u*t/3,p=u*a*t/3,g=u*t/3,f=u*c*t/3;c===0&&Math.abs(p)>Math.abs(d)&&(h*=Math.abs(d/p),p=Math.sign(p)*Math.abs(d)),a===0&&Math.abs(f)>Math.abs(d)&&(g*=Math.abs(d/f),f=Math.sign(f)*Math.abs(d)),s.push({type:"cubic",moveTo:r===1,cp0x:o.x,cp0y:o.y,cp1x:o.x+h,cp1y:o.y+p,cp2x:l.x-g,cp2y:l.y-f,cp3x:l.x,cp3y:l.y})}return s}function Qt(e,t,n){return(t-e)*n+e}function rge(e,t){let{x0:n,y0:i,x1:s,y1:r}=e,a=(r-i)/(s-n)*(t-n)+i;return{leftCp1x:n,leftCp1y:i,leftCp2x:t,leftCp2y:a,stepX:t,stepY0:a,stepY1:a,rightCp1x:t,rightCp1y:a,rightCp2x:s,rightCp2y:r}}function oge(e,t){let{cp0x:n,cp0y:i,cp1x:s,cp1y:r,cp2x:o,cp2y:a,cp3x:l,cp3y:c}=e,u=uC(n,s,o,l,t),[d,h]=dC(n,i,s,r,o,a,l,c,u),p=d[3].y;return{leftCp1x:d[1].x,leftCp1y:d[1].y,leftCp2x:d[2].x,leftCp2y:d[2].y,stepX:t,stepY0:p,stepY1:p,rightCp1x:h[1].x,rightCp1y:h[1].y,rightCp2x:h[2].x,rightCp2y:h[2].y}}function age(e){let{x0:t,y0:n,x1:i,y1:s,stepX:r}=e;return{leftCp1x:(t+r)/2,leftCp1y:n,leftCp2x:(t+r)/2,leftCp2y:n,stepX:r,stepY0:n,stepY1:s,rightCp1x:(r+i)/2,rightCp1y:s,rightCp2x:(r+i)/2,rightCp2y:s}}function F3(e,t){return e.type==="linear"?rge(e,t):e.type==="cubic"?oge(e,t):age(e)}function gV(e,t,n,i,s,r,o){switch(t){case 0:o?e.moveTo(s,r):e.moveTo(n,i);break;case 1:o?e.lineTo(s,r):e.lineTo(n,i);break}}function fV(e,t,n,i,s,r){r?e.lineTo(t,n):e.lineTo(i,s)}function mV(e,t,n,i,s,r,o,a,l,c){c?e.cubicCurveTo(r,o,i,s,t,n):e.cubicCurveTo(i,s,r,o,a,l)}function vV(e,t,n,i,s,r,o){o?(e.lineTo(r,s),e.lineTo(r,n),e.lineTo(t,n)):(e.lineTo(r,n),e.lineTo(r,s),e.lineTo(i,s))}function QM(e,t,n,i){let[s,r]=Br(t);switch(gV(e,n,s.x,s.y,r.x,r.y,i),t.type){case"linear":fV(e,t.x0,t.y0,t.x1,t.y1,i);break;case"cubic":mV(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,i);break;case"step":vV(e,t.x0,t.y0,t.x1,t.y1,t.stepX,i);break}}function yV(e,t,n){let[i,s]=Br(e),[r,o]=Br(t),a=Qt(i.x,r.x,n),l=Qt(i.y,r.y,n),c=Qt(s.x,o.x,n),u=Qt(s.y,o.y,n);return[{x:a,y:l},{x:c,y:u}]}function JM(e,t,n,i,s,r){let[{x:o,y:a},{x:l,y:c}]=yV(t,n,i);if(gV(e,s,o,a,l,c,r),t.type==="cubic"&&n.type==="cubic"){let u=Qt(t.cp1x,n.cp1x,i),d=Qt(t.cp1y,n.cp1y,i),h=Qt(t.cp2x,n.cp2x,i),p=Qt(t.cp2y,n.cp2y,i);mV(e,o,a,u,d,h,p,l,c,r)}else if(t.type==="step"&&n.type==="step"){let u=Qt(t.stepX,n.stepX,i);vV(e,o,a,l,c,u,r)}else if(t.type==="linear"&&n.type==="linear")fV(e,o,a,l,c,r);else{let u;t.type==="step"?u=t.stepX:n.type==="step"?u=n.stepX:u=(o+l)/2;let d=F3(t,u),h=F3(n,u),p=Qt(d.leftCp1x,h.leftCp1x,i),g=Qt(d.leftCp1y,h.leftCp1y,i),f=Qt(d.leftCp2x,h.leftCp2x,i),m=Qt(d.leftCp2y,h.leftCp2y,i),v=Qt(d.stepX,h.stepX,i),y=Qt(d.stepY0,h.stepY0,i),w=Qt(d.stepY1,h.stepY1,i),x=Qt(d.rightCp1x,h.rightCp1x,i),D=Qt(d.rightCp1y,h.rightCp1y,i),M=Qt(d.rightCp2x,h.rightCp2x,i),E=Qt(d.rightCp2y,h.rightCp2y,i);r?(e.cubicCurveTo(M,E,x,D,v,w),e.lineTo(v,y),e.cubicCurveTo(f,m,p,g,o,a)):(e.cubicCurveTo(p,g,f,m,v,y),e.lineTo(v,w),e.cubicCurveTo(x,D,M,E,l,c))}}var CV=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(CV||{});function lge(e,t){return e==null||t==null||typeof e!="object"||typeof t!="object"?!1:"id"in e&&"id"in t?e.id===t.id:e.toString()===t.toString()}function Vn(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),t.type==="continuous"&&typeof e=="number")return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if(t.type==="log"&&typeof e=="number")return t.convert(e);if(t.type!=="category")return NaN;let n=t.domain.findIndex(s=>s===e);return n>=0||t.domain.findIndex(s=>lge(e,s))>=0?t.inset+t.step*n:NaN}function xs(e){return BM(e).valueOf()}function N3({data:e},t){return e.map((n,i)=>({xValue0Index:t.indexOf(xs(n.xValue0)),xValue1Index:t.indexOf(xs(n.xValue1)),datumIndex:i}))}function cge(e,t){let n=t.scales.x,i=e.scales.x;if(n?.type!=="category"||i?.type!=="category")return!0;let s=-1/0;for(let r of n.domain){let o=Vn(r,i);if(Number.isFinite(o)){if(o<s)return!1;s=o}}return!0}function uge(e,t){let n=-1/0;for(let i of e){let s=Vn(i.value,t.scales.x);if(Number.isFinite(s)){if(s<n)return!1;n=s}}return!0}function dge(e,t){let n=new Map;for(let{xValue0:u,xValue1:d}of e.data){let h=xs(u),p=xs(d);n.set(h,u).set(p,d)}let i=Array.from(n,([u,d])=>({axisValue:u,value:d}));i.sort((u,d)=>Vn(u.value,e.scales.x)-Vn(d.value,e.scales.x));let s=[];for(let{xValue0:u,xValue1:d}of t.data){let h=xs(u),p=xs(d);n.has(h)||(n.set(h,u),s.push({axisValue:h,value:u})),n.has(p)||(n.set(p,d),s.push({axisValue:p,value:d}))}s.sort((u,d)=>Vn(u.value,t.scales.x)-Vn(d.value,t.scales.x));let r=i,o=0;for(let u of s){for(let d=r.length-1;d>o;d-=1){let h=Vn(u.value,t.scales.x),p=Vn(r[d].value,t.scales.x);if(h>p){o=d+1;break}}r.splice(o,0,u),o+=1}if(!uge(r,t))return;let a=r.map(u=>u.axisValue),l=N3(t,a),c=N3(e,a);return{axisValues:a,oldDataAxisIndices:l,newDataAxisIndices:c}}function O3(e,t,n){if(n.xValue1Index===n.xValue0Index+1)return e;let i=Br(e),s=(i[1].x-i[0].x)/(n.xValue1Index-n.xValue0Index),r=i[0].x+(t-n.xValue0Index)*s,o=r+s;return pV(e,r,o)}function wV(e,t){let[n,i]=Br(e),s=Vn(0,t.scales.y);return Zp(e,{x:n.x,y:s},{x:i.x,y:s})}function bV(e){let[t,n]=Br(e);return ege(e,{x:(t.x+n.x)/2,y:(t.y+n.y)/2})}function SV(e,t,n,i,s,r){let o,a;if(s.xValue0Index>=r.xValue1Index){let d=i.findLast(p=>p.xValue1Index<=r.xValue1Index)?.datumIndex,h=d!=null?n.data[d]:void 0;o=h?.xValue1,a=h?.yValue1}else if(s.xValue0Index<=r.xValue0Index){let d=i.find(p=>p.xValue0Index>=r.xValue0Index)?.datumIndex,h=d!=null?n.data[d]:void 0;o=h?.xValue0,a=h?.yValue0}if(o==null||a==null)switch(t){case 0:return wV(e,n);case 1:return bV(e)}let l=Vn(o,n.scales.x),c=Vn(a,n.scales.y),u={x:l,y:c};return Zp(e,u,u)}function II(e,t){if(t==null)return;let n=xs(e.xValue0),i=xs(e.xValue1);return t.find(s=>xs(s.xValue0)===n&&xs(s.xValue1)===i)?.span}function _3(e,t,n,i,s,r,o){let a=e.data[i.datumIndex],l=a.span,c=II(a,s);if(c!=null)o.removed.push({from:c,to:c}),o.moved.push({from:c,to:l}),o.added.push({from:l,to:l});else{let u=SV(l,t,e,n,i,r);o.added.push({from:u,to:l})}}function B3(e,t,n,i,s,r,o){let a=e.data[i.datumIndex],l=a.span,c=II(a,s);if(c!=null)o.removed.push({from:l,to:l}),o.moved.push({from:l,to:c}),o.added.push({from:c,to:c});else{let u=SV(l,t,e,n,i,r);o.removed.push({from:l,to:u})}}function V3(e,t,n,i,s){let r=t[s.xValue0Index],o=n.data.find(m=>xs(m.xValue0)===r),a=t[s.xValue1Index],l=n.data.find(m=>xs(m.xValue1)===a);if(o==null||l==null)return;let[{x:c},{x:u}]=Br(e),d=Vn(o.xValue0,n.scales.x),h=Vn(o.yValue0,n.scales.y),p=Vn(l.xValue1,n.scales.x),g=Vn(l.yValue1,n.scales.y),f=i.data[s.datumIndex].span;return f=Zp(f,{x:d,y:h},{x:p,y:g}),f=pV(f,c,u),f}function hge(e,t,n,i,s,r,o,a,l){let c=s+1,u=o.find(w=>w.xValue0Index<=s&&w.xValue1Index>=c),d=r.find(w=>w.xValue0Index<=s&&w.xValue1Index>=c),h=t.zeroData,p=e.zeroData;if(u==null&&d!=null){_3(e,n,r,d,h,a,l);return}else if(u!=null&&d==null){B3(t,n,o,u,p,a,l);return}else if(u==null||d==null)return;let g;u.xValue0Index===d.xValue0Index&&u.xValue1Index===d.xValue1Index?g=0:u.xValue0Index<=d.xValue0Index&&u.xValue1Index>=d.xValue1Index?g=-1:u.xValue0Index>=d.xValue0Index&&u.xValue1Index<=d.xValue1Index?g=1:g=0;let f=t.data[u.datumIndex],m=O3(f.span,s,u),v=e.data[d.datumIndex],y=O3(v.span,s,d);if(g===1){let w=V3(m,i,t,e,d);w!=null?(l.removed.push({from:m,to:w}),l.moved.push({from:w,to:y}),l.added.push({from:y,to:y})):B3(t,n,o,u,p,a,l)}else if(g===-1){let w=V3(y,i,e,t,u);w!=null?(l.removed.push({from:m,to:m}),l.moved.push({from:m,to:w}),l.added.push({from:w,to:y})):_3(e,n,r,d,h,a,l)}else l.removed.push({from:m,to:m}),l.moved.push({from:m,to:y}),l.added.push({from:y,to:y})}function pge(e,t,n,i){let s={removed:[],moved:[],added:[]},{axisValues:r,oldDataAxisIndices:o,newDataAxisIndices:a}=e,l={xValue0Index:Math.max(o.at(0)?.xValue0Index??-1/0,a.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(o.at(-1)?.xValue1Index??1/0,a.at(-1)?.xValue1Index??1/0)};for(let c=0;c<r.length-1;c+=1)hge(t,n,i,r,c,a,o,l,s);return s}function G3(e,t,n){let{span:i}=t;switch(n){case 0:return II(t,e.zeroData)??wV(i,e);case 1:return bV(i)}}function gge(e,t,n){let i=[],s=[];for(let r of t.data){let o=r.span,a=G3(t,r,n);s.push({from:o,to:a})}for(let r of e.data){let o=r.span,a=G3(e,r,n);i.push({from:a,to:o})}return{removed:s,moved:[],added:i}}function Fp(e,t,n){if(!cge(e,t))return;let i=dge(e,t);return i==null?gge(e,t,n):pge(i,e,t,n)}function z3(e){return e.type==="continuous"||e.type==="log"}function H3(e){return e.type==="category"}function nd(e,t){return e===void 0||t===void 0?e!==void 0||t!==void 0:z3(e)&&z3(t)?e.type===t.type&&Pr(e.domain,t.domain)&&Pr(e.range,t.range):H3(e)&&H3(t)?e.inset===t.inset&&e.step===t.step&&Pr(e.domain,t.domain):!1}function Xp(e){return e==null?!1:e.type==="category"?e.domain.every(t=>t!=null):e.domain.every(t=>Number.isFinite(t)||t instanceof Date)&&e.range.every(t=>Number.isFinite(t))}function mC(e,t){let n,i=e.map(s=>s.point);switch(t.type){case"linear":n=tge(i);break;case"smooth":n=sge(i,t.tension);break;case"step":n=ige(i,t.position);break}return n.map((s,r)=>({span:s,xValue0:e[r].xDatum,yValue0:e[r].yDatum,xValue1:e[r+1].xDatum,yValue1:e[r+1].yDatum}))}function xV(e,t,n=.001){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}function AI({path:e},t){let n;for(let{span:i}of t){let[s,r]=Br(i),o=n!=null&&xV(n,s)?1:0;QM(e,i,o,!1),n=r}}function $y(e,t,n){let i;for(let s of n){let[r,o]=yV(s.from,s.to,e),a=i!=null&&xV(i,r)?1:0;JM(t.path,s.from,s.to,e,a,!1),i=o}}function RI(e,t,n){let i=(a,l)=>$y(a,l,t.removed),s=(a,l)=>$y(a,l,t.moved),r=(a,l)=>$y(a,l,t.added),o=TI(e,n);return{status:e,path:{addPhaseFn:r,updatePhaseFn:s,removePhaseFn:i},pathProperties:o}}function TI(e,t){let n=t==="none"?"updated":e,i={fromFn:s=>{let r;return e==="removed"?r={finish:{visible:!1}}:e==="added"?r={start:{visible:!0}}:r={},S({phase:Xs[n]},r)},toFn:s=>({phase:Xs[n]})};return t==="fade"?{fromFn:s=>{let r=e==="added"?0:s.opacity;return S({opacity:r},i.fromFn(s))},toFn:s=>S({opacity:e==="removed"?0:1},i.toFn(s))}:i}function DV(e,t,n){let i=e.scales.x?.type==="category",s=t.scales.x?.type==="category";if(i!==s||!Xp(e.scales.x)||!Xp(t.scales.x)||e.strokeData==null||t.strokeData==null)return;let r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");let o=Fp({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(o==null)return;let a=RI(r,o,"fade"),l=(n?.changed??!0)||!nd(e.scales.x,t.scales.x)||!nd(e.scales.y,t.scales.y)||r!=="updated";return{status:r,stroke:a,hasMotion:l}}function MV({path:e},{spans:t,phantomSpans:n}){for(let i=0;i<t.length;i+=1){let{span:s}=t[i],r=n[i].span;QM(e,s,0,!1),QM(e,r,1,!0),e.closePath()}}function Yy(e,{path:t},n,i){for(let s=0;s<n.length;s+=1){let r=n[s],o=i[s];JM(t,r.from,r.to,e,0,!1),JM(t,o.from,o.to,e,1,!0),t.closePath()}}function EV(e,t,n,i){let s=(l,c)=>Yy(l,c,t.removed,n.removed),r=(l,c)=>Yy(l,c,t.moved,n.moved),o=(l,c)=>Yy(l,c,t.added,n.added),a=TI(e,i);return{status:e,path:{addPhaseFn:o,updatePhaseFn:r,removePhaseFn:s},pathProperties:a}}function IV(e,t){let n=e.scales.x?.type==="category",i=t.scales.x?.type==="category";if(n!==i||!Xp(e.scales.x)||!Xp(t.scales.x))return;let s="updated";t.visible&&!e.visible?s="removed":!t.visible&&e.visible&&(s="added");let r=Fp({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(r==null)return;let o=Fp({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(o==null)return;let a=Fp({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(a==null)return;let l="none",c=EV(s,r,o,l),u=RI(s,a,l);return{status:s,fill:c,stroke:u}}function Qp({id:e},t,n,...i){let s={phase:n?Xs[n]:"trailing"};Oo(e,"markers",t,i,{opacity:0},{opacity:1},s),i.forEach(r=>r.cleanup())}function kI({id:e},t,...n){Oo(e,"markers",t,n,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),n.forEach(i=>i.cleanup())}function LI({id:e,nodeDataDependencies:t},n,...i){let s=t.seriesRectWidth;kt(e,"markers",n,i,{fromFn:(a,l)=>{let c=l.midPoint?.x??s,u=De(0,C_(c/s),1);return isNaN(u)&&(u=0),{scalingX:0,scalingY:0,delay:u,duration:Jy,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Ng(e){return{opacity:1,scalingX:1,scalingY:1}}function Jp(e,t){return{translationX:t.point?.x??NaN,translationY:t.point?.y??NaN}}function Og(e,{datumIndex:t}){let n=e.getNodeData();if(n===void 0)return;let i=n[t],{point:s}=i;if(i==null||s==null)return;let r=4+(s.focusSize??e.getFormattedMarkerStyle(i).size),o=r/2,a=i.point.x-o,l=i.point.y-o;return Pt.toCanvas(e.contentGroup,new Z(a,l,r,r))}function PI({id:e,visible:t,nodeDataDependencies:n},i,...s){let{seriesRectWidth:r,seriesRectHeight:o}=n;Oo(e,"path_properties",i,s,{clipX:0},{clipX:r},{phase:"initial",start:{clip:!0,clipY:o,visible:t},finish:{clip:!1,visible:t}})}function vC({id:e},t,n,i="add",...s){Oo(e,t,n,s,{opacity:0},{opacity:1},{phase:i})}function FI(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function yC({nodeDataDependencies:e},t){let n=i=>isFinite(i)?i:0;t.clipX=n(e.seriesRectWidth),t.clipY=n(e.seriesRectHeight)}var fge=.125,mge=.25,vge=(()=>{let e=class extends qa{constructor(t){super({moduleCtx:t,directionKeys:yc,directionNames:Cc,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:FI({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Yo,marker:(n,i)=>S(S({},Ng(n)),Jp(n,i))}}),this.properties=new Zt,this.connectsToYAxis=!0,this.backgroundGroup=new ye({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>hC||this.contextNodeData.strokeData.spans.length>hC)}attachSeries(t,n,i){super.attachSeries(t,n,i),t.appendChild(this.backgroundGroup)}detachSeries(t,n,i){super.detachSeries(t,n,i),t?.removeChild(this.backgroundGroup)}attachPaths([t,n]){this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(n),n.zIndex=-1}detachPaths([t,n]){this.backgroundGroup.removeChild(t),this.contentGroup.removeChild(n)}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}setSeriesIndex(t){let n=this.isStacked();return!super.setSeriesIndex(t)&&this._isStacked===n?!1:(this._isStacked=n,n?(this.backgroundGroup.zIndex=[0,t],this.contentGroup.zIndex=[1,t,0]):(this.backgroundGroup.zIndex=[1,t,0,0],this.contentGroup.zIndex=[1,t,0,1]),!0)}async processData(t){if(this.data==null||!this.properties.isValid())return;let{data:n,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:r=1}={}}=this,{xKey:o,yKey:a,yFilterKey:l,connectMissingData:c,normalizedTo:u}=this.properties,d=!this.ctx.animationManager.isSkipped(),h=this.axes.x?.scale,p=this.axes.y?.scale,{xScaleType:g,yScaleType:f}=this.getScaleInformation({xScale:h,yScale:p}),m={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},v=[];Vy(u)&&v.push(tw(Object.values(m),u)),d&&v.push(bd());let y={invalidValue:null};(Vy(u)||c)&&r>1&&(y.invalidValue=0),i||(y.forceValue=0),await this.requestDataModel(t,n,{props:[tr(o,g,{id:"xValue"}),Le(a,f,S({id:"yValueRaw"},y)),...l!=null?[Le(l,f,{id:"yFilterRaw"})]:[],...U4(a,f,R(S({id:"yValueStack"},y),{groupId:m.stack})),Le(a,f,R(S({id:"yValue"},y),{groupId:m.value})),...Ga(a,"window","current",R(S({id:"yValueEnd"},y),{groupId:m.values}),f),...Ga(a,"normal","current",R(S({id:"yValueCumulative"},y),{groupId:m.marker}),f),...v],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}xCoordinateRange(t,n){let{marker:i}=this.properties,s=this.axes.x.scale.convert(t),r=i.enabled?.5*i.size*n:0;return[s-r,s+r]}yCoordinateRange(t,n){let{marker:i}=this.properties,s=this.axes.y.scale.convert(t[0]),r=i.enabled?.5*i.size*n:0;return[s-r,s+r]}getSeriesDomain(t){let{processedData:n,dataModel:i,axes:s}=this;if(!n||!i)return[];let r=s.y;if(t==="x"){let a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",n);return a?.def.type==="key"&&a.def.valueType==="category"?l:Di(jo(l))}let o=this.domainForClippedRange("y",["yValueEnd"],"xValue",!0);if(r instanceof wg||r instanceof yg)return Di(o);{let a=Number.isFinite(o[1]-o[0])?[o[0]>0?0:o[0],o[1]<0?0:o[1]]:[];return Di(a)}}getSeriesRange(t,n){let[i,s]=this.domainForVisibleRange("y",["yValueEnd"],"xValue",n,!0);return[Math.min(i,0),Math.max(s,0)]}getVisibleItems(t,n,i){return this.countVisibleItems("xValue",["yValueEnd"],t,n,i)}createNodeData(){let{axes:t,data:n,processedData:i,dataModel:s}=this,r=t.x,o=t.y;if(!r||!o||!n||!s||i?.type!=="grouped"||!this.properties.isValid())return;let{yKey:a,xKey:l,yFilterKey:c,marker:u,label:d,fill:h,stroke:p,connectMissingData:g,interpolation:f}=this.properties,{scale:m}=r,{scale:v}=o,{isContinuousY:y}=this.getScaleInformation({xScale:m,yScale:v}),w=(m.bandwidth??0)/2,x=s.resolveKeysById(this,"xValue",i),D=s.resolveColumnById(this,"yValueEnd",i),M=s.resolveColumnById(this,"yValueRaw",i),E=s.resolveColumnById(this,"yValueCumulative",i),A=c!=null?s.resolveColumnById(this,"yFilterRaw",i):void 0,I=s.resolveColumnById(this,"yValueStack",i),T=(ne,ie,z)=>{let X;return(Vy(this.properties.normalizedTo)?y&&GC(z):!isNaN(z))&&(X=ie),{x:m.convert(ne)+w,y:v.convert(X),size:u.size}},P=[],O=[],{visibleSameStackCount:$}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),ae=!1,{dataSources:ue}=i,Q=ue.get(this.id)??[];for(let{datumIndex:ne}of s.forEachGroupDatum(this,i)){let ie=x[ne];if(ie==null)return;let z=Q[ne],X=M[ne],oe=E[ne],Ge=D[ne],ze=Number.isFinite(X),nt=T(ie,+oe,X),rt=A!=null?A[ne]===X:void 0;if(rt===!1&&(ae=!0),ze&&u&&O.push({series:this,itemId:a,datum:z,datumIndex:ne,midPoint:{x:nt.x,y:nt.y},cumulativeValue:Ge,yValue:X,xValue:ie,yKey:a,xKey:l,point:nt,fill:u.fill??h,stroke:u.stroke??p,strokeWidth:u.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:rt}),ze&&d){let Nt=this.getLabelText(d,{value:X,datum:z,xKey:l,yKey:a,xName:this.properties.xName,yName:this.properties.yName});P.push({series:this,itemId:a,datum:z,datumIndex:ne,x:nt.x,y:nt.y,labelText:Nt})}}let he=ne=>ne.flatMap(ie=>Array.isArray(ie)?mC(ie,f):new Array(ie.skip).fill(null)),ge=(ne,ie)=>({point:{x:m.convert(ne)+w,y:v.convert(ie)},xDatum:ne,yDatum:ie}),J=ne=>{let ie=[];for(let{datumIndexes:[z,X,oe]}of s.forEachGroupDatumTuple(this,i)){let Ge=x[X],ze=I[X],nt=ze[ne],rt=Number.isFinite(nt);if(g&&!rt)continue;let Nt=z!=null?I[z]:void 0,Ot=oe!=null?I[oe]:void 0,Xt=0,pi=0;for(let dt=0;dt<=ne;dt+=1){let bn=ze[dt];if(Number.isFinite(bn)){let Ri=Nt==null||Number.isFinite(Nt[dt]),Sw=Ot==null||Number.isFinite(Ot[dt]);Ri&&(Xt+=bn),Sw&&(pi+=bn)}}let on=ie[ie.length-1];if(!g&&(Xt!==pi||!rt))if(!rt&&Array.isArray(on)&&on.length===1)ie[ie.length-1]={skip:1};else{let dt=ge(Ge,Xt),bn=ge(Ge,pi);Array.isArray(on)?on.push(dt):on!=null&&(on.skip+=1),ie.push(rt?[bn]:{skip:0})}else{let dt=Math.max(Xt,pi),bn=ge(Ge,dt);Array.isArray(on)?on.push(bn):on!=null?(on.skip+=1,ie.push([bn])):ie.push([bn])}}return he(ie)},de=this.seriesGrouping?.stackIndex??0,Y=()=>{let ne=Array.from(s.forEachGroupDatum(this,i),({datumIndex:ie})=>{let z=x[ie],oe=I[ie][de];if(!(g&&!Number.isFinite(oe)))return ge(z,0)}).filter(ie=>ie!=null);return mC(ne,f)},te=J(de),ee=te.map(()=>null);for(let ne=de-1;ne>=-1;ne-=1){let ie;for(let z=0;z<ee.length;z+=1)ee[z]==null&&(ie??(ie=ne!==-1?J(ne):Y()),ee[z]=ie[z])}let Ce=te.map((ne,ie)=>ne??ee[ie]),me=te.filter(ne=>ne!=null);return{itemId:a,fillData:{itemId:a,spans:Ce,phantomSpans:ee},strokeData:{itemId:a,spans:me},labelData:P,nodeData:O,scales:this.calculateScaling(),visible:this.visible,stackVisible:$>0,crossFiltering:ae}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){let{opacity:n,visible:i,animationEnabled:s}=t,[r,o]=t.paths,a=this.contextNodeData?.crossFiltering===!0,l=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:l,strokeOpacity:this.properties.strokeOpacity*(a?mge:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:n,visible:i||s});let{fill:c}=this.properties;if(q_(c)){let u=this.getGradientFillOptions(c,this.properties.defaultColorRange);r.gradientFillOptions=u}r.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(a?fge:1),fillShadow:this.properties.shadow,opacity:n,visible:i||s}),yC(this,o),yC(this,r)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,n){for(let i of t)i.visible=n.visible;if(n.visible)this.updateFillPath(t,n),this.updateStrokePath(t,n);else for(let i of t)i.path.clear(),i.markDirty()}updateFillPath(t,n){let[i]=t;i.path.clear(),MV(i,n.fillData),i.markDirty()}updateStrokePath(t,n){let{spans:i}=n.strokeData,[,s]=t;s.path.clear(),AI(s,i),s.markDirty()}updateMarkerSelection(t){let{nodeData:n,markerSelection:i}=t,s=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?n:[])}getMarkerItemBaseStyle(t){let{marker:n}=this.properties,i=t?this.properties.highlightStyle.item:void 0;return{fill:i?.fill??n.fill,fillOpacity:i?.fillOpacity??n.fillOpacity,stroke:i?.stroke??n.stroke,strokeWidth:i?.strokeWidth??n.strokeWidth,strokeOpacity:i?.strokeOpacity??n.strokeOpacity}}getMarkerItemStyleOverrides(t,n,i,s,r,o){let{marker:a}=this.properties,{itemStyler:l}=a;if(l==null)return;let{id:c,properties:u}=this,{xKey:d,yKey:h}=u,{xDomain:p,yDomain:g}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));return this.cachedDatumCallback(qt(t,o?"highlight":"node"),()=>l(S(R(S({seriesId:c},Va(n,d,h,p,g)),{xValue:i,yValue:s,highlighted:o}),r)))}updateMarkerNodes(t){let{markerSelection:n,isHighlight:i}=t,{xKey:s,yKey:r,marker:o,fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d,highlightStyle:h}=this.properties,p=this.getSeriesDomain("x"),g=this.getSeriesDomain("y"),f=ke(i&&h.item,o.getStyle(),{fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d});n.each((m,v)=>{this.updateMarkerStyle(m,o,R(S({},Va(v,s,r,p,g)),{highlighted:i}),f,{selected:v.selected})}),i||this.properties.marker.markClean()}updateLabelSelection(t){let{labelData:n,labelSelection:i}=t;return i.update(n)}updateLabelNodes(t){let{labelSelection:n}=t,{enabled:i,fontStyle:s,fontWeight:r,fontSize:o,fontFamily:a,color:l}=this.properties.label;n.each((c,u)=>{let{x:d,y:h,labelText:p}=u;p&&i&&this.visible?(c.fontStyle=s,c.fontWeight=r,c.fontSize=o,c.fontFamily=a,c.textAlign="center",c.textBaseline="bottom",c.text=p,c.x=d,c.y=h-10,c.fill=l,c.visible=!0):c.visible=!1})}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,axes:r,properties:o}=this,{xKey:a,xName:l,yKey:c,yName:u,tooltip:d}=o,h=r.x,p=r.y;if(!i||!s||!h||!p)return;let{datumIndex:g}=t,f=s.dataSources.get(this.id)?.[g],m=i.resolveKeysById(this,"xValue",s)[g],v=i.resolveColumnById(this,"yValueRaw",s)[g];if(m==null)return;let y=this.getMarkerItemBaseStyle(!1);return Object.assign(y,this.getMarkerItemStyleOverrides(String(g),f,m,v,y,!1)),d.formatTooltip({heading:h.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:u,fallbackLabel:c,value:p.formatDatum(v)}]},S(S({seriesId:n,datum:f,title:u,xKey:a,xName:l,yKey:c,yName:u},y),this.getModuleTooltipParams()))}legendItemSymbol(){let{fill:t,stroke:n,fillOpacity:i,strokeOpacity:s,strokeWidth:r,lineDash:o,marker:a}=this.properties,l=!a.enabled||a.fill===void 0;return{marker:{shape:a.shape,fill:l?t:a.fill,fillOpacity:l?i:a.fillOpacity,stroke:a.stroke??n,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset,enabled:a.enabled||r<=0},line:{stroke:n,strokeOpacity:s,strokeWidth:r,lineDash:o}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];let{id:n,ctx:{legendManager:i},visible:s}=this,{yKey:r,yName:o,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:t,id:n,itemId:r,seriesId:n,enabled:s&&i.getItemEnabled({seriesId:n,itemId:r}),label:{text:a??o??r},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!l}]}animateEmptyUpdateReady(t){let{markerSelection:n,labelSelection:i,contextData:s,paths:r}=t,{animationManager:o}=this.ctx;this.updateAreaPaths(r,s),PI(this,o,...r),vn([n],Jp),LI(this,o,n),Ke(this,"labels",o,i)}animateReadyResize(t){let{contextData:n,paths:i}=t;this.updateAreaPaths(i,n),super.animateReadyResize(t)}animateWaitingUpdateReady(t){let{animationManager:n}=this.ctx,{markerSelection:i,labelSelection:s,contextData:r,paths:o,previousContextData:a}=t,[l,c]=o;if(l==null&&c==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);let u=()=>{this.resetPathAnimation(t),this.updateAreaPaths(o,r)},d=()=>{n.skipCurrentBatch(),u()};if(r==null||a==null){u(),Qp(this,n,"added",i),vC(this,"fill_path_properties",n,"add",l),vC(this,"stroke_path_properties",n,"add",c),Ke(this,"labels",n,s);return}if(r.crossFiltering!==a.crossFiltering){d();return}let h=IV(r,a);if(h===void 0){d();return}else if(h.status==="no-op")return;Qp(this,n,void 0,i),kt(this.id,"fill_path_properties",n,[l],h.fill.pathProperties),fC(this.id,"fill_path_update",n,[l],h.fill.path),kt(this.id,"stroke_path_properties",n,[c],h.stroke.pathProperties),fC(this.id,"stroke_path_update",n,[c],h.stroke.path),Ke(this,"labels",n,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,r)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ye}getFormattedMarkerStyle(t){let{xKey:n,yKey:i}=t,s=this.getSeriesDomain("x"),r=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,R(S({},Va(t,n,i,s,r)),{highlighted:!0}))}computeFocusBounds(t){return Og(this,t)}};return e.className="AreaSeries",e.type="area",e})(),yge={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new vge(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Qa,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}},paletteFactory:e=>{let{marker:t}=EI(e),n=e.themeTemplateParameters.get(dw);return{fill:t.fill,stroke:t.stroke,marker:t,defaultColorRange:n}}};function NI(e,t){for(let n of t){let i=n.datum;i===void 0?G.error("undefined datum"):e.addValue(n,i)}}function OI(e,t){let{x:n,y:i}=t,{nearest:s,distanceSquared:r}=e.getQuadTree().find(n,i);if(s!==void 0)return{datum:s.value,distance:Math.sqrt(r)}}var _I=class extends Uo{constructor(){super(...arguments),this.direction="vertical"}};C([b(V_)],_I.prototype,"direction",2);var AV=class extends qa{constructor(){super(...arguments),this.groupScale=new ag,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){let n=typeof t=="boolean"?1:.5,i=We(this.smallestDataInterval)?this.smallestDataInterval*n:0,s=jo(e)??[NaN,NaN];return typeof t=="boolean"?s[t?0:1]-=(t?1:-1)*i:(s[0]-=i,s[1]+=i),Di(s)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){let e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e){return Xe.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval):e.scale.bandwidth}xCoordinateRange(e){let t=this.axes[this.getCategoryDirection()],n=t.scale,i=this.getBandwidth(t)??0,s=Xe.is(n)?i*-.5:0,r=n.convert(e)+s;return[r,r+i]}yCoordinateRange(e){let n=this.axes[this.getBarDirection()].scale,i=e.map(s=>n.convert(s));if(i.length===1){let s=n.convert(0);return[Math.min(i[0],s),Math.max(i[0],s)]}return[Math.min(...i),Math.max(...i)]}updateGroupScale(e){let t=[],{groupScale:n}=this,i=this.getBandwidth(e),{index:s,visibleGroupCount:r}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let a=0;a<r;a++)t.push(String(a));return n.domain=t,n.range=[0,i??0],e instanceof iw?n.paddingInner=e.groupPaddingInner:e instanceof md?(n.paddingInner=e.groupPaddingInner,n.round=n.padding!==0):n.padding=0,{barWidth:n.bandwidth>=1?n.bandwidth:n.rawBandwidth,groupIndex:s}}resolveKeyDirection(e){return this.getBarDirection()==="x"?e==="x"?"y":"x":e}initQuadTree(e){NI(e,this.datumNodesIter())}pickNodeClosestDatum(e){return OI(this,e)}},BI=class extends gn{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};C([b(ut(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],BI.prototype,"placement",2);C([b(je)],BI.prototype,"padding",2);var Ft=class extends _I{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new or,this.label=new BI,this.tooltip=new Un,this.sparklineMode=!1,this.fastDataProcessing=!1}};C([b(B)],Ft.prototype,"xKey",2);C([b(B,{optional:!0})],Ft.prototype,"xName",2);C([b(B)],Ft.prototype,"yKey",2);C([b(B,{optional:!0})],Ft.prototype,"yName",2);C([b(B,{optional:!0})],Ft.prototype,"yFilterKey",2);C([b(B,{optional:!0})],Ft.prototype,"stackGroup",2);C([b(je,{optional:!0})],Ft.prototype,"normalizedTo",2);C([b(qe)],Ft.prototype,"fill",2);C([b(Qe)],Ft.prototype,"fillOpacity",2);C([b(qe)],Ft.prototype,"stroke",2);C([b(j)],Ft.prototype,"strokeWidth",2);C([b(Qe)],Ft.prototype,"strokeOpacity",2);C([b(Gr)],Ft.prototype,"lineDash",2);C([b(j)],Ft.prototype,"lineDashOffset",2);C([b(j)],Ft.prototype,"cornerRadius",2);C([b(le,{optional:!0})],Ft.prototype,"crisp",2);C([b(di,{optional:!0})],Ft.prototype,"itemStyler",2);C([b(K,{optional:!0})],Ft.prototype,"shadow",2);C([b(K)],Ft.prototype,"label",2);C([b(K)],Ft.prototype,"tooltip",2);C([b(le)],Ft.prototype,"sparklineMode",2);C([b(le)],Ft.prototype,"fastDataProcessing",2);function RV(e,t,n,i){if(t!=null){let[s,r]=t;if(s!==0||r!==1)return!1}if(Xe.is(e)){let s=e.calcBandwidth(i)-e.calcBandwidth(n);if(s>0&&s<1)return!1}return!0}var mM=e=>EC(e.yValue??0);function eg(e,t,n){let{startingX:i,startingY:s}=wge(e,t);return{isVertical:e,calculate:(o,a)=>{let l=e?o.x:i,c=e?s:o.y,u=e?o.width:0,d=e?0:o.height,{opacity:h=1}=o;a&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=a,u=e?a.width:0,d=e?0:a.height,e&&!mM(a)?c+=a.height:!e&&mM(a)&&(l+=a.width));let p;return o.clipBBox==null?p=void 0:mM(o)?p=e?new Z(l,c-d,u,d):new Z(l-u,c,u,d):p=new Z(l,c,u,d),{x:l,y:c,width:u,height:d,clipBBox:p,opacity:h}},mode:n}}function Cge(e,t){return{isVertical:e,calculate:n=>({x:e?n.x:n.x+n.width/2,y:e?n.y+n.height/2:n.y,width:e?n.width:0,height:e?0:n.height,clipBBox:n.clipBBox,opacity:n.opacity??1}),mode:t}}function tg(e){let t=r=>r==null||isNaN(r.x)||isNaN(r.y);return{toFn:(r,o,a)=>a==="removed"&&r.datum==null&&e.mode==="fade"?R(S({},ng(r,o)),{opacity:0}):a==="removed"||t(o)?e.calculate(o,r.previousDatum):{x:o.x,y:o.y,width:o.width,height:o.height,clipBBox:o.clipBBox,opacity:o.opacity??1},fromFn:(r,o,a)=>{a==="updated"&&t(o)?a="removed":a==="updated"&&t(r.previousDatum)&&(a="added");let l;a==="added"&&r.previousDatum==null&&e.mode==="fade"?l=R(S({},ng(r,o)),{opacity:0}):a==="unknown"||a==="added"?l=e.calculate(o,r.previousDatum):l={x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity??1};let c=Xs[a];return R(S({},l),{phase:c})},applyFn:(r,o,a)=>{r.setProperties(o),r.crisp=a==="end"&&(r.datum?.crisp??!1)}}}function wge(e,t){let n=t[e?"y":"x"],i=1/0,s=0;return n?(e?s=n.scale.convert(Xe.is(n.scale)?0:Math.max(...n.range)):i=n.scale.convert(Xe.is(n.scale)?0:Math.min(...n.range)),{startingX:i,startingY:s}):{startingX:i,startingY:s}}function ng(e,{x:t,y:n,width:i,height:s,clipBBox:r,opacity:o=1}){return{x:t,y:n,width:i,height:s,clipBBox:r,opacity:o,crisp:e.datum?.crisp??!1}}function VI(e,t){if(t===void 0)return;let{x:n,y:i,width:s,height:r}=t;return Pt.toCanvas(e.contentGroup,new Z(n,i,s,r))}function TV(e,t,n){if(t.enabled&&n){let{x:i,y:s,text:r,textAlign:o,textBaseline:a}=n,{color:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h}=t;e.setProperties({visible:!0,x:i,y:s,text:r,fill:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,textAlign:o,textBaseline:a})}else e.visible=!1}var bge={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function kV({isUpward:e,isVertical:t,placement:n,padding:i=0,rect:s}){let r=s.x+s.width/2,o=s.y+s.height/2,a="center",l="middle";if(n!=="inside-center"){let c=(e?1:-1)*(t?-1:1),{direction:u,textAlignment:d}=bge[n],h=(u+1)*.5;if(t){let p=e?s.y+s.height:s.y,g=s.height*c;o=p+g*h+i*d*c,l=d===c?"top":"bottom"}else{let p=e?s.x:s.x+s.width,g=s.width*c;r=p+g*h+i*d*c,a=d===c?"left":"right"}}return{x:r,y:o,textAlign:a,textBaseline:l}}var Sge=0,xge=1,Dge=2,Mge=3,Ege=4,LV=(()=>{let e=class extends AV{constructor(t){super({moduleCtx:t,directionKeys:yc,directionNames:Cc,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:ng,label:Yo}}),this.properties=new Ft,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(t){if(!this.properties.isValid()||!this.data)return;let{xKey:n,yKey:i,yFilterKey:s,normalizedTo:r,fastDataProcessing:o}=this.properties,{seriesGrouping:{groupIndex:a=this.id}={},data:l}=this,c=this.seriesGrouping?.groupCount??0,d=(this.seriesGrouping?.stackCount??0)>=1||r!=null,h=!o||c>1||d,p=!this.ctx.animationManager.isSkipped(),g=this.getCategoryAxis()?.scale,f=this.getValueAxis()?.scale,{isContinuousX:m,xScaleType:v,yScaleType:y}=this.getScaleInformation({xScale:g,yScale:f}),w=`bar-stack-${a}-yValues`,x=`${w}-trailing`,D=this.visible?{}:{forceValue:0},M=[tr(n,v,{id:"xValue"}),Le(i,y,S({id:"yValue-raw",invalidValue:null},D))];this.crossFilteringEnabled()&&M.push(Le(s,y,S({id:"yFilterValue",invalidValue:null},D))),d&&M.push(...Ga(i,"normal","current",S({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:w,separateNegative:!0},D),y),...Ga(i,"trailing","current",S({id:"yValue-start",invalidValue:null,missingValue:0,groupId:x,separateNegative:!0},D),y)),m&&M.push($4,Y4),We(r)&&M.push(tw([w,x],Math.abs(r))),p&&this.processedData&&M.push(Sd(this.id,this.processedData)),(p||!h)&&M.push(bd());let{dataModel:E,processedData:A}=await this.requestDataModel(t,l,{props:M,groupByKeys:h,groupByData:!h});this.dataAggregationFilters=this.aggregateData(E,A),this.smallestDataInterval=A.reduced?.smallestKeyInterval,this.largestDataInterval=A.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){let{processedData:n,dataModel:i}=this;if(i==null||n==null)return[];if(t===this.getCategoryDirection()){let a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",n);return a?.def.type==="key"&&a.def.valueType==="category"?l:this.padBandExtent(l)}let s=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",r=this.domainForClippedRange("y",[s],"xValue",!0),o=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",n):void 0;if(o!=null&&(r=[Math.min(r[0],o[0]),Math.max(r[1],o[1])]),this.getValueAxis()instanceof wg)return Di(r);{let a=Number.isFinite(r[1]-r[0])?[Math.min(0,r[0]),Math.max(0,r[1])]:[];return Di(a)}}getSeriesRange(t,n){let i=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",[s,r]=this.domainForVisibleRange("y",[i],"xValue",n,!0);return[Math.min(s,0),Math.max(r,0)]}getVisibleItems(t,n,i){let s=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";return this.countVisibleItems("xValue",[s],t,n,i)}aggregateData(t,n){}createNodeData(){let{dataModel:t,processedData:n,groupScale:i,dataAggregationFilters:s}=this,r=this.getCategoryAxis(),o=this.getValueAxis();if(!t||!n||!r||!o||!this.properties.isValid())return;let a=n.dataSources?.get(this.id);if(a==null)return;let l=r.scale,c=o.scale,{xKey:u,yKey:d,xName:h,yName:p,legendItemName:g,label:f}=this.properties,m=o.isReversed(),{barWidth:v,groupIndex:y}=this.updateGroupScale(r),w=i.convert(String(y)),x=Xe.is(l)?v*-.5:0,D=t.resolveKeysById(this,"xValue",n),M=t.resolveColumnById(this,"yValue-raw",n),E=this.crossFilteringEnabled()?t.resolveColumnById(this,"yFilterValue",n):void 0,A=!this.ctx.animationManager.isSkipped(),I=Y=>l.convert(D[Y])+w+x,T=this.properties.crisp??RV(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval),P=c.convert(0),O=({datum:Y,datumIndex:te,valueIndex:ee,xValue:Ce,yValue:me,cumulativeValue:Re,phantom:ne,currY:ie,prevY:z,x:X,width:oe,isPositive:Ge,yRange:ze,labelText:nt,opacity:rt,crossScale:Nt=1})=>{let Ot=Ge!==m,Xt=c.convert(ie),pi=c.convert(z),on=c.convert(ze),dt=this.getBarDirection()==="x",bn=oe*.5*(1-Nt),Ri={x:dt?Math.min(Xt,pi):X+bn,y:dt?X+bn:Math.min(Xt,pi),width:dt?Math.abs(pi-Xt):oe*Nt,height:dt?oe*Nt:Math.abs(pi-Xt)},Sw=new Z(Ri.x,Ri.y,Ri.width,Ri.height),Gg={x:dt?Math.min(P,on):X+bn,y:dt?X+bn:Math.min(P,on),width:dt?Math.abs(P-on):oe*Nt,height:dt?oe*Nt:Math.abs(P-on)},iA=this.shouldFlipXY()?Ri.height:Ri.width;return{series:this,itemId:ne?qt(d,ne):d,datum:Y,datumIndex:te,valueIndex:ee,cumulativeValue:Re,phantom:ne,xValue:Ce,yValue:me,yKey:d,xKey:u,capDefaults:{lengthRatioMultiplier:iA,lengthMax:iA},x:Gg.x,y:Gg.y,width:Gg.width,height:Gg.height,midPoint:{x:Ri.x+Ri.width/2,y:Ri.y+Ri.height/2},opacity:rt,topLeftCornerRadius:dt!==Ot,topRightCornerRadius:Ot,bottomRightCornerRadius:dt===Ot,bottomLeftCornerRadius:!Ot,clipBBox:Sw,crisp:T,label:nt!=null?S({text:nt},kV({isUpward:Ot,isVertical:!dt,placement:f.placement,padding:f.padding,rect:Ri})):void 0,missing:me==null,focusable:!ne}},$=[],ae=[],ue=[],Q=(Y,te,ee,Ce,me,Re,ne,ie)=>{let z=D[Y];if(z==null)return;let X=M[Y],oe=E!=null?Number(E[Y]):void 0,Ge=X>=0&&!Object.is(X,-0);if(!Number.isFinite(Re)||oe!=null&&!Number.isFinite(oe))return;let ze=X!=null?this.getLabelText(this.properties.label,{datum:a[Y],value:oe??X,xKey:u,yKey:d,xName:h,yName:p,legendItemName:g}):void 0,nt=oe!=null&&oe>X,rt=O({datum:a[Y],datumIndex:Y,valueIndex:te,xValue:z,yValue:oe??X,cumulativeValue:oe??Re,phantom:!1,currY:oe!=null?me+oe:Re,prevY:me,x:ee,width:Ce,isPositive:Ge,yRange:Math.max(me+(oe??-1/0),ne),labelText:ze,opacity:ie,crossScale:nt?.6:void 0});if(ae.push(rt),ue.push(rt),oe!=null){let Nt=O({datum:a[Y],datumIndex:Y,valueIndex:te,xValue:z,yValue:oe,cumulativeValue:oe,phantom:!0,currY:Re,prevY:me,x:ee,width:Ce,isPositive:Ge,yRange:ne,labelText:void 0,opacity:ie,crossScale:void 0});$.push(Nt)}},[he,ge]=l.range,J=ge-he,de=s?.find(Y=>Y.maxRange>J);if(n.type==="grouped"){let Y=v,te=t.hasColumnById(this,"yValue-start"),ee=te?t.resolveColumnById(this,"yValue-start",n):void 0,Ce=te?t.resolveColumnById(this,"yValue-end",n):void 0,me=te?t.resolveProcessedDataIndexById(this,"yValue-range"):-1;for(let{datumIndex:Re,valueIndex:ne,group:{aggregation:ie}}of t.forEachGroupDatum(this,n)){let z=I(Re),X=M[Re],oe=X>=0&&!Object.is(X,-0),Ge=te?Number(ee?.[Re]):0,ze=te?Number(Ce?.[Re]):X,nt=ze;te&&(nt=ie[me][oe?1:0]),Q(Re,ne,z,Y,Ge,ze,nt,1)}}else if(de==null){let Y=v,[te,ee]=this.visibleRange("xValue",r.range);n.input.count<1e3&&(te=0,ee=n.input.count);for(let Ce=te;Ce<ee;Ce+=1){let me=I(Ce),Re=Number(M[Ce]);Q(Ce,0,me,Y,0,Re,Re,1)}}else{let{indexData:Y,indices:te}=de,[ee,Ce]=this.visibleRange("xValue",r.range,te);for(let me=ee;me<Ce;me+=1){let Re=me*Ege,ne=Y[Re+Sge],ie=Y[Re+xge],z=Y[Re+Dge],X=Y[Re+Mge];if(ne===-1)continue;let oe=I((ne+ie)/2|0),Ge=Math.abs(I(ie)-I(ne))+v,ze=D[X]!=null?Number(M[X]):NaN,nt=D[z]!=null?Number(M[z]):NaN;if(ze>0){let rt=nt>=0?nt/ze:1;Q(X,0,oe,Ge,0,ze,ze,rt)}if(nt<0){let rt=ze<=0?ze/nt:1;Q(z,1,oe,Ge,0,nt,nt,rt)}}}return{itemId:d,nodeData:$.length>0?[...$,...ae]:ae,labelData:ue,scales:this.calculateScaling(),visible:this.visible||A,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new hi}getHighlightData(t,n){let i=t.find(s=>s.datum===n.datum&&!s.phantom);return i!=null?[i]:void 0}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,n=>this.getDatumId(n))}getItemBaseStyle(t){let{properties:n}=this,{cornerRadius:i}=n,s=t?n.highlightStyle.item:void 0;return{fill:s?.fill??n.fill,fillOpacity:s?.fillOpacity??n.fillOpacity,stroke:s?.stroke??n.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(n.strokeWidth),strokeOpacity:s?.strokeOpacity??n.strokeOpacity,lineDash:s?.lineDash??n.lineDash??[],lineDashOffset:s?.lineDashOffset??n.lineDashOffset,cornerRadius:i}}getItemStyleOverrides(t,n,i,s,r,o){let{id:a,properties:l}=this,{xKey:c,yKey:u,itemStyler:d}=l;if(d==null)return;let{xDomain:h,yDomain:p}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));return this.cachedDatumCallback(qt(t,o?"highlight":"node"),()=>d(S(R(S({seriesId:a},Va(n,c,u,h,p)),{xValue:i,yValue:s,highlighted:o}),r)))}updateDatumNodes(t){if(!this.properties.isValid())return;let{shadow:n}=this.properties,i=this.getCategoryDirection()==="x",s=this.getItemBaseStyle(t.isHighlight);t.datumSelection.each((r,o)=>{let a=this.getItemStyleOverrides(String(o.datumIndex),o.datum,o.xValue,o.yValue,s,t.isHighlight);r.opacity=o.opacity??0,$p(r,s,a);let l=a?.cornerRadius??s.cornerRadius;r.topLeftCornerRadius=o.topLeftCornerRadius?l:0,r.topRightCornerRadius=o.topRightCornerRadius?l:0,r.bottomRightCornerRadius=o.bottomRightCornerRadius?l:0,r.bottomLeftCornerRadius=o.bottomLeftCornerRadius?l:0,r.visible=i?(o.clipBBox?.width??o.width)>0:(o.clipBBox?.height??o.height)>0,r.crisp=o.crisp,r.fillShadow=n})}updateLabelSelection(t){let n=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(n,i=>{i.pointerEvents=1})}updateLabelNodes(t){t.labelSelection.each((n,i)=>{TV(n,this.properties.label,i.label)})}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,properties:r}=this,{xKey:o,xName:a,yKey:l,yName:c,legendItemName:u,stackGroup:d,tooltip:h}=r,p=this.getCategoryAxis(),g=this.getValueAxis();if(!i||!s||!p||!g)return;let{datumIndex:f}=t,m=s.dataSources.get(this.id)?.[f],v=i.resolveKeysById(this,"xValue",s)[f],y=i.resolveColumnById(this,"yValue-raw",s)[f];if(v==null)return;let w=this.getItemBaseStyle(!1);return Object.assign(w,this.getItemStyleOverrides(String(f),m,v,y,w,!1)),h.formatTooltip({heading:p.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:g.formatDatum(y)}]},S(S({seriesId:n,datum:m,title:c,xKey:o,xName:a,yKey:l,yName:c,legendItemName:u,stackGroup:d},w),this.getModuleTooltipParams()))}legendItemSymbol(){let{fill:t,stroke:n,strokeWidth:i,fillOpacity:s,strokeOpacity:r,lineDash:o,lineDashOffset:a}=this.properties;return{marker:{fill:t,fillOpacity:s,stroke:n,strokeWidth:i,strokeOpacity:r,lineDash:o,lineDashOffset:a}}}getLegendData(t){let{showInLegend:n}=this.properties;if(t!=="category"||!this.properties.isValid())return[];let{id:i,ctx:{legendManager:s},visible:r}=this,{yKey:o,yName:a,legendItemName:l}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:r&&s.getItemEnabled({seriesId:i,itemId:o}),label:{text:l??a??o},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!n}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:n,annotationSelections:i}){let s=tg(eg(this.isVertical(),this.axes,"normal"));kt(this.id,"nodes",this.ctx.animationManager,[t],s),Ke(this,"labels",this.ctx.animationManager,n),Ke(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){let{datumSelection:n,labelSelection:i,annotationSelections:s,previousContextData:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);let o=this.processedData?.reduced?.diff?.[this.id];o==null&&this.processedData?.reduced?.diff!=null&&(o={changed:!0,added:new Set(Array.from(n,({datum:d})=>this.getDatumId(d))),updated:new Set,removed:new Set,moved:new Set});let a=r==null?"fade":"normal",l=tg(eg(this.isVertical(),this.axes,a));kt(this.id,"nodes",this.ctx.animationManager,[n],l,(d,h)=>this.getDatumId(h),o);let c=r!=null&&(!nd(t.contextData.scales.x,r.scales.x)||!nd(t.contextData.scales.y,r.scales.y)||!nd(t.contextData.groupScale,t.previousContextData.groupScale));((o?.changed??!1)||c)&&(Ke(this,"labels",this.ctx.animationManager,i),Ke(this,"annotations",this.ctx.animationManager,...s))}getDatumId(t){return qt(t.xValue,t.valueIndex,t.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){let n=this.contextNodeData?.nodeData[t].clipBBox;return VI(this,n)}};return e.className="BarSeries",e.type="bar",e})(),PV={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new LV(e),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:cV([{type:"number",position:"left"},{type:"category",position:"bottom"}],e=>e?.direction==="horizontal"),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"backgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:Qa,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Fg},GI=class extends Wn{constructor(){super(...arguments),this.maxSize=30}};C([b(j),q()],GI.prototype,"maxSize",2);C([b(NC,{optional:!0}),q()],GI.prototype,"domain",2);var FV=class extends gn{constructor(){super(...arguments),this.placement="top"}};C([b(bE)],FV.prototype,"placement",2);var tt=class extends Uo{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new FV,this.tooltip=new Un,this.marker=new GI}};C([b(B)],tt.prototype,"xKey",2);C([b(B)],tt.prototype,"yKey",2);C([b(B)],tt.prototype,"sizeKey",2);C([b(B,{optional:!0})],tt.prototype,"labelKey",2);C([b(B,{optional:!0})],tt.prototype,"colorKey",2);C([b(B,{optional:!0})],tt.prototype,"xFilterKey",2);C([b(B,{optional:!0})],tt.prototype,"yFilterKey",2);C([b(B,{optional:!0})],tt.prototype,"sizeFilterKey",2);C([b(B,{optional:!0})],tt.prototype,"xName",2);C([b(B,{optional:!0})],tt.prototype,"yName",2);C([b(B,{optional:!0})],tt.prototype,"sizeName",2);C([b(B,{optional:!0})],tt.prototype,"labelName",2);C([b(B,{optional:!0})],tt.prototype,"colorName",2);C([b(NC,{optional:!0})],tt.prototype,"colorDomain",2);C([b(Ki)],tt.prototype,"colorRange",2);C([b(B,{optional:!0})],tt.prototype,"title",2);C([wt("marker.shape")],tt.prototype,"shape",2);C([wt("marker.size")],tt.prototype,"size",2);C([wt("marker.maxSize")],tt.prototype,"maxSize",2);C([wt("marker.domain",{optional:!0})],tt.prototype,"domain",2);C([wt("marker.fill",{optional:!0})],tt.prototype,"fill",2);C([wt("marker.fillOpacity")],tt.prototype,"fillOpacity",2);C([wt("marker.stroke",{optional:!0})],tt.prototype,"stroke",2);C([wt("marker.strokeWidth")],tt.prototype,"strokeWidth",2);C([wt("marker.strokeOpacity")],tt.prototype,"strokeOpacity",2);C([wt("marker.lineDash")],tt.prototype,"lineDash",2);C([wt("marker.lineDashOffset")],tt.prototype,"lineDashOffset",2);C([wt("marker.itemStyler",{optional:!0})],tt.prototype,"itemStyler",2);C([b(K)],tt.prototype,"label",2);C([b(K)],tt.prototype,"tooltip",2);var Ige=class extends cI{constructor(e,t,n,i){super(e,t,n,i),this.sizeKey=i.properties.sizeKey}},Age=(()=>{let e=class extends qa{constructor(t){super({moduleCtx:t,directionKeys:yc,directionNames:Cc,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Yo,marker:Ng},usesPlacedLabels:!0}),this.NodeEvent=Ige,this.clipFocusBox=!1,this.properties=new tt,this.sizeScale=new er,this.colorScale=new Wa}get pickModeAxis(){return"main-category"}async processData(t){if(!this.properties.isValid()||this.data==null||!this.visible)return;let n=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:r}=this.getScaleInformation({xScale:n,yScale:i}),o=this.colorScale.type,a=this.sizeScale.type,{xKey:l,yKey:c,sizeKey:u,xFilterKey:d,yFilterKey:h,sizeFilterKey:p,labelKey:g,colorDomain:f,colorRange:m,colorKey:v,marker:y}=this.properties,{dataModel:w,processedData:x}=await this.requestDataModel(t,this.data,{props:[Le(l,s,{id:"xValue"}),Le(c,r,{id:"yValue"}),...d!=null?[Le(d,s,{id:"xFilterValue"})]:[],...h!=null?[Le(h,r,{id:"yFilterValue"})]:[],...p!=null?[Le(p,a,{id:"sizeFilterValue"})]:[],Le(u,a,{id:"sizeValue"}),...v?[Le(v,o,{id:"colorValue"})]:[],...g?[Le(g,"band",{id:"labelValue"})]:[]]}),D=w.resolveProcessedDataIndexById(this,"sizeValue"),M=x.domain.values[D]??[];if(this.sizeScale.domain=y.domain?y.domain:M,v){let E=w.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=f??x.domain.values[E]??[],this.colorScale.range=m,this.colorScale.update()}this.animationState.transition("updateData")}xCoordinateRange(t,n,i){let{properties:s,sizeScale:r}=this,{size:o,sizeKey:a}=s,l=this.axes.x.scale.convert(t),c=a!=null?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,d=.5*(c!=null?r.convert(c[i]):o)*n;return[l-d,l+d]}yCoordinateRange(t,n,i){let{properties:s,sizeScale:r}=this,{size:o,sizeKey:a}=s,l=this.axes.y.scale.convert(t[0]),c=a!=null?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,d=.5*(c!=null?r.convert(c[i]):o)*n;return[l-d,l+d]}getSeriesDomain(t){let{dataModel:n,processedData:i}=this;if(!i||!n)return[];let s={x:"xValue",y:"yValue"},r=s[t],o=n.resolveProcessedDataDefById(this,r),a=n.getDomain(this,r,"value",i);if(o?.def.type==="value"&&o?.def.valueType==="category")return a;let c=s[t==="x"?"y":"x"],u=this.domainForClippedRange(t,[r],c,!1);return Di(jo(u))}getSeriesRange(t,n){return this.domainForVisibleRange("y",["yValue"],"xValue",n,!1)}getVisibleItems(t,n,i){return this.countVisibleItems("xValue",["yValue"],t,n,i)}createNodeData(){let{axes:t,dataModel:n,processedData:i,colorScale:s,sizeScale:r,visible:o}=this,{xKey:a,yKey:l,sizeKey:c,xFilterKey:u,yFilterKey:d,sizeFilterKey:h,labelKey:p,xName:g,yName:f,sizeName:m,labelName:v,label:y,colorKey:w,marker:x}=this.properties,{placement:D}=y,M=pn.anchor(x.shape),E=t.x,A=t.y;if(!(n&&i&&o&&E&&A))return;let I=n.resolveColumnById(this,"xValue",i),T=n.resolveColumnById(this,"yValue",i),P=c!=null?n.resolveColumnById(this,"sizeValue",i):void 0,O=w!=null?n.resolveColumnById(this,"colorValue",i):void 0,$=p!=null?n.resolveColumnById(this,"labelValue",i):void 0,ae=u!=null?n.resolveColumnById(this,"xFilterValue",i):void 0,ue=d!=null?n.resolveColumnById(this,"yFilterValue",i):void 0,Q=h!=null?n.resolveColumnById(this,"sizeFilterValue",i):void 0,he=E.scale,ge=A.scale,J=(he.bandwidth??0)/2,de=(ge.bandwidth??0)/2,Y=[];r.range=[x.size,x.maxSize];let te=y.getFont(),ee=Go.getMeasurer({font:te});return i.dataSources.get(this.id)?.forEach((Ce,me)=>{let Re=I[me],ne=T[me],ie=P?.[me],z=he.convert(Re)+J,X=ge.convert(ne)+de,oe;ae!=null&&ue!=null&&(oe=ae[me]===Re&&ue[me]===ne,Q!=null&&oe&&(oe=Q[me]===ie));let Ge=this.getLabelText(y,{value:$!=null?$[me]:ne,datum:Ce,xKey:a,yKey:l,sizeKey:c,labelKey:p,xName:g,yName:f,sizeName:m,labelName:v}),ze=ee.measureText(String(Ge)),nt=ie!=null?r.convert(ie):x.size,rt=O!=null?s.convert(O[me]):void 0;Y.push({series:this,itemId:l,yKey:l,xKey:a,datum:Ce,datumIndex:me,xValue:Re,yValue:ne,sizeValue:ie,point:{x:z,y:X,size:nt},midPoint:{x:z,y:X},fill:rt,label:S({text:Ge},ze),anchor:M,placement:D,selected:oe})}),{itemId:l,nodeData:Y,labelData:Y,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateMarkerSelection(t){let{nodeData:n,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let s=this.properties.marker.enabled?n:[];return i.update(s,void 0,r=>qt([r.xValue,r.yValue,r.label.text]))}getMarkerItemBaseStyle(t){let{properties:n}=this,{marker:i}=n,s=t?n.highlightStyle.item:void 0;return{fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(t,n,i,s){let{id:r,properties:o}=this,{xKey:a,yKey:l,sizeKey:c,labelKey:u,marker:d}=o,{itemStyler:h}=d;if(h!=null)return this.cachedDatumCallback(qt(t,s?"highlight":"node"),()=>h(S({seriesId:r,datum:n,xKey:a,yKey:l,sizeKey:c,labelKey:u,highlighted:s},i)))}updateMarkerNodes(t){let{markerSelection:n,isHighlight:i}=t,{xKey:s,yKey:r,sizeKey:o,labelKey:a,marker:l}=this.properties,{size:c,shape:u,fill:d,fillOpacity:h,stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:m,lineDashOffset:v}=ke(i&&this.properties.highlightStyle.item,l.getStyle()),y={size:c,shape:u,fill:d,fillOpacity:h,stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:m,lineDashOffset:v};this.sizeScale.range=[l.size,l.maxSize],n.each((w,x)=>{this.updateMarkerStyle(w,l,{datum:x,highlighted:i,xKey:s,yKey:r,sizeKey:o,labelKey:a},y,{selected:x.selected})}),i||this.properties.marker.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map(n=>R(S({},n.datum),{point:{x:n.x,y:n.y,size:n.datum.point.size}})),n=>{n.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){let{label:n}=this.properties;t.labelSelection.each((i,s)=>{i.text=s.label.text,i.fill=n.color,i.x=s.point?.x??0,i.y=s.point?.y??0,i.fontStyle=n.fontStyle,i.fontWeight=n.fontWeight,i.fontSize=n.fontSize,i.fontFamily=n.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,axes:r,properties:o}=this,{xKey:a,xName:l,yKey:c,yName:u,sizeKey:d,sizeName:h,labelKey:p,labelName:g,title:f,tooltip:m}=o,v=r.x,y=r.y;if(!i||!s||!v||!y)return;let{datumIndex:w}=t,x=s.dataSources.get(this.id)?.[w],D=i.resolveColumnById(this,"xValue",s)[w],M=i.resolveColumnById(this,"yValue",s)[w];if(D==null)return;let E=[{label:l,fallbackLabel:a,value:v.formatDatum(D)},{label:u,fallbackLabel:c,value:y.formatDatum(M)}];if(d!=null){let I=i.resolveColumnById(this,"sizeValue",s)[w];E.push({label:h,fallbackLabel:d,value:String(I)})}let A=this.getMarkerItemBaseStyle(!1);return Object.assign(A,this.getMarkerItemStyleOverrides(String(w),x,A,!1)),m.formatTooltip({title:f,symbol:this.legendItemSymbol(),data:E},S(S({seriesId:n,datum:x,title:c,xKey:a,xName:l,yKey:c,yName:u,sizeKey:d,sizeName:h,labelKey:p,labelName:g},A),this.getModuleTooltipParams()))}legendItemSymbol(){let{marker:t}=this.properties,{shape:n,fill:i,stroke:s,fillOpacity:r,strokeOpacity:o,strokeWidth:a,lineDash:l,lineDashOffset:c}=t;return{marker:{shape:n,fill:i??"rgba(0, 0, 0, 0)",stroke:s??"rgba(0, 0, 0, 0)",fillOpacity:r,strokeOpacity:o,strokeWidth:a,lineDash:l,lineDashOffset:c}}}getLegendData(){if(!this.properties.isValid())return[];let{id:t,ctx:{legendManager:n},visible:i}=this,{yKey:s,yName:r,title:o}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i&&n.getItemEnabled({seriesId:t,itemId:s}),label:{text:o??r??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:n}){kI(this,this.ctx.animationManager,t),Ke(this,"labels",this.ctx.animationManager,n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ye}getFormattedMarkerStyle(t){let{xKey:n,yKey:i,sizeKey:s,labelKey:r}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:n,yKey:i,sizeKey:s,labelKey:r,highlighted:!1})}computeFocusBounds(t){return Og(this,t)}};return e.className="BubbleSeries",e.type="bubble",e})(),Rge={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new Age(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}},paletteFactory:Fg},sn=class extends Uo{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new or,this.label=new gn,this.tooltip=new Un}};C([b(B)],sn.prototype,"xKey",2);C([b(B,{optional:!0})],sn.prototype,"yKey",2);C([b(B,{optional:!0})],sn.prototype,"xName",2);C([b(B,{optional:!0})],sn.prototype,"yName",2);C([b(qe,{optional:!0})],sn.prototype,"fill",2);C([b(Qe)],sn.prototype,"fillOpacity",2);C([b(qe,{optional:!0})],sn.prototype,"stroke",2);C([b(j)],sn.prototype,"strokeWidth",2);C([b(Qe)],sn.prototype,"strokeOpacity",2);C([b(Gr)],sn.prototype,"lineDash",2);C([b(j)],sn.prototype,"lineDashOffset",2);C([b(j)],sn.prototype,"cornerRadius",2);C([b(le)],sn.prototype,"areaPlot",2);C([b(cg,{optional:!0})],sn.prototype,"bins",2);C([b(ut(["count","sum","mean"],"a histogram aggregation"))],sn.prototype,"aggregation",2);C([b(j,{optional:!0})],sn.prototype,"binCount",2);C([b(K)],sn.prototype,"shadow",2);C([b(K)],sn.prototype,"label",2);C([b(K)],sn.prototype,"tooltip",2);var j3=10,Tge=(()=>{let e=class extends qa{constructor(t){super({moduleCtx:t,directionKeys:yc,directionNames:Cc,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:ng,label:Yo}}),this.properties=new sn,this.calculatedBins=[]}deriveBins(t){let n=LE(t[0],t[1],j3),i=Gp(t[0],t[1],j3),[s]=n,r=o=>[o,o+i];return[[s-i,s],...n.map(r)]}calculateNiceBins(t,n){let i=Math.floor(t[0]),s=t[1],r=n||1,{start:o,binSize:a}=this.calculateNiceStart(i,s,r);return this.getBins(o,s,a,r)}getBins(t,n,i,s){let r=[],o=this.calculatePrecision(i);for(let a=0;a<s;a++){let l=Math.round((t+a*i)*o)/o,c=Math.round((t+(a+1)*i)*o)/o;a===s-1&&(c=Math.max(c,n)),r[a]=[l,c]}return r}calculatePrecision(t){let n=10;if(isFinite(t)&&t>0)for(;t<1;)n*=10,t*=10;return n}calculateNiceStart(t,n,i){let s=Math.abs(n-t)/i,r=Math.floor(Math.log10(s)),o=Math.pow(10,r);return{start:Math.floor(t/o)*o,binSize:s}}async processData(t){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));let{xKey:n,yKey:i,areaPlot:s,aggregation:r}=this.properties,o=this.axes.x?.scale,a=this.axes.y?.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({yScale:a,xScale:o}),u=[tr(n,l),K4];if(i){let h=ZM("groupAgg");r==="count"||(r==="sum"?h=_4("groupAgg"):r==="mean"&&(h=B4("groupAgg"))),s&&(h=XM("groupAgg",h)),u.push(Le(i,c,{invalidValue:void 0}),h)}else{u.push(W4("count"));let h=ZM("groupAgg");s&&(h=XM("groupAgg",h)),u.push(h)}let d=h=>{let p=Di(h.domain.keys[0]);if(p.length===0)return h.domain.groups=[],()=>[];let g=bs(this.properties.binCount)?this.calculateNiceBins(p,this.properties.binCount):this.properties.bins??this.deriveBins(p),f=g.length;return this.calculatedBins=[...g],m=>{let v=m[0];if(dd(v)&&(v=v.getTime()),!bs(v))return[];for(let y=0;y<f;y++){let w=g[y];if(v>=w[0]&&v<w[1]||y===f-1&&v<=w[1])return w}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&u.push(Sd(this.id,this.processedData,!1)),await this.requestDataModel(t,this.data,{props:u,groupByFn:d}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(t){let{processedData:n,dataModel:i}=this;if(!n||!i||!this.calculatedBins.length)return[];let s=i.getDomain(this,"groupAgg","aggregate",n),r=this.calculatedBins?.[0][0],o=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return Di(t==="x"?[r,o]:s)}getSeriesRange(t,[n,i]){let{dataModel:s,processedData:r}=this;if(!s||r?.type!=="grouped")return[NaN,NaN];let o=this.axes.x.scale,a=0,l=-1/0;return r.groups.forEach(({keys:c,aggregation:u})=>{let[[d,h]=[0,0]]=u,[p,g]=c,[f,m]=Cn([o.convert(p),o.convert(g)]);if(m>=n&&f<=i){let v=d+h;l=Math.max(l,v)}}),a>l?[NaN,NaN]:[a,l]}createNodeData(){let{id:t,axes:n,processedData:i,dataModel:s}=this,r=n.x,o=n.y;if(!r||!o||!s)return;let{scale:a}=r,{scale:l}=o,{xKey:c,yKey:u,xName:d,yName:h}=this.properties,p=this.properties.label.formatter??(m=>String(m.value)),g=[],f={itemId:this.properties.yKey??this.id,nodeData:g,labelData:g,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||i==null||i.type!=="grouped"||(i.groups.forEach((m,v)=>{let{keys:y,datumIndices:w,aggregation:x}=m,[[D,M]=[0,0]]=x,E=w.length,A=y,[I,T]=A,P=[...s.forEachDatum(this,i,m)],O=a.convert(I),$=a.convert(T),ae=D+M,ue=l.convert(0),Q=l.convert(ae),he=Math.abs($-O),ge=Math.abs(Q-ue),J=Math.min(O,$),de=Math.min(ue,Q),Y;ae!==0&&(Y={x:J+he/2,y:de+ge/2,text:this.cachedDatumCallback(qt(v,"label"),()=>p({value:ae,datum:P,seriesId:t,xKey:c,yKey:u,xName:d,yName:h}))??String(ae)});let te={x:J+he/2,y:de+ge/2},ee=o.isReversed();g.push({series:this,datumIndex:v,datum:P,aggregatedValue:ae,frequency:E,domain:A,yKey:u,xKey:c,x:J,y:de,xValue:O,yValue:Q,width:he,height:ge,midPoint:te,topLeftCornerRadius:!ee,topRightCornerRadius:!ee,bottomRightCornerRadius:ee,bottomLeftCornerRadius:ee,label:Y,crisp:!0})}),g.sort((m,v)=>m.x-v.x)),f}nodeFactory(){return new hi}updateDatumSelection(t){let{nodeData:n,datumSelection:i}=t;return i.update(n,void 0,s=>s.domain.join("_"))}getItemBaseStyle(t){let{properties:n}=this,i=t?n.highlightStyle.item:void 0;return{fill:i?.fill??n.fill,fillOpacity:i?.fillOpacity??n.fillOpacity,stroke:i?.stroke??n.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(n.strokeWidth),strokeOpacity:i?.strokeOpacity??n.strokeOpacity,lineDash:i?.lineDash??n.lineDash,lineDashOffset:i?.lineDashOffset??n.lineDashOffset,cornerRadius:n.cornerRadius}}updateDatumNodes(t){let{isHighlight:n}=t,{shadow:i}=this.properties,s=this.getItemBaseStyle(n);t.datumSelection.each((r,o)=>{let{cornerRadius:a}=s,{topLeftCornerRadius:l,topRightCornerRadius:c,bottomRightCornerRadius:u,bottomLeftCornerRadius:d}=o;$p(r,s),r.topLeftCornerRadius=l?a:0,r.topRightCornerRadius=c?a:0,r.bottomRightCornerRadius=u?a:0,r.bottomLeftCornerRadius=d?a:0,r.crisp=o.crisp,r.fillShadow=i,r.visible=o.height>0})}updateLabelSelection(t){let{labelData:n,labelSelection:i}=t;return i.update(n,s=>{s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})}updateLabelNodes(t){let{fontStyle:n,fontWeight:i,fontFamily:s,fontSize:r,color:o}=this.properties.label,a=this.isLabelEnabled();t.labelSelection.each((l,c)=>{a&&c?.label?(l.text=c.label.text,l.x=c.label.x,l.y=c.label.y,l.fontStyle=n,l.fontWeight=i,l.fontFamily=s,l.fontSize=r,l.fill=o,l.visible=!0):l.visible=!1})}initQuadTree(t){let{value:n}=this.contentGroup.children().next();n&&NI(t,n.children())}pickNodeClosestDatum(t){return OI(this,t)}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,axes:r,properties:o,ctx:{localeManager:a}}=this,{xKey:l,xName:c,yKey:u,yName:d,tooltip:h}=o,p=r.x,g=r.y;if(!i||s?.type!=="grouped"||!p||!g)return;let f=t.datumIndex,m=s.groups[f],{aggregation:v,datumIndices:y,keys:w}=m,[[x,D]=[0,0]]=v,M=y.length,E=w,[A,I]=E,T=x+D,P={data:[...i.forEachDatum(this,s,m)],aggregatedValue:T,frequency:M,domain:E},O=[{label:c,fallbackLabel:l,value:`${p.formatDatum(A)} - ${p.formatDatum(I)}`},{label:a.t("seriesHistogramTooltipFrequency"),value:g.formatDatum(M)}];if(u!=null){let $;switch(o.aggregation){case"sum":$=a.t("seriesHistogramTooltipSum",{yName:d});break;case"mean":$=a.t("seriesHistogramTooltipMean",{yName:d});break;case"count":$=a.t("seriesHistogramTooltipCount",{yName:d});break}O.push({label:$,value:g.formatDatum(T)})}return h.formatTooltip({symbol:this.legendItemSymbol(),data:O},S({seriesId:n,datum:P,title:d,xKey:l,xName:c,yKey:u,yName:d,xRange:[A,I],frequency:M},this.getItemBaseStyle(!1)))}legendItemSymbol(){let{fill:t,fillOpacity:n,stroke:i,strokeWidth:s,strokeOpacity:r,lineDash:o,lineDashOffset:a}=this.properties;return{marker:{fill:t??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:n,strokeOpacity:r,strokeWidth:s,lineDash:o,lineDashOffset:a}}}getLegendData(t){if(t!=="category")return[];let{id:n,ctx:{legendManager:i},visible:s}=this,{xKey:r,yName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:n,itemId:r,seriesId:n,enabled:s&&i.getItemEnabled({seriesId:n,itemId:r}),label:{text:o??r??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!a}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:n}){let i=tg(eg(!0,this.axes,"normal"));kt(this.id,"datums",this.ctx.animationManager,[t],i),Ke(this,"labels",this.ctx.animationManager,n)}animateWaitingUpdateReady(t){let n=this.processedData?.reduced?.diff?.[this.id],i=tg(eg(!0,this.axes,"normal"));kt(this.id,"datums",this.ctx.animationManager,[t.datumSelection],i,(s,r)=>qt(r.domain),n),Ke(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return VI(this,this.contextNodeData?.nodeData[t])}};return e.className="HistogramSeries",e.type="histogram",e})(),kge={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new Tge(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},shadow:{enabled:!1,color:Qa,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:e})=>{let{fills:[t],strokes:[n]}=e(1);return{fill:t,stroke:n}}},rn=class extends Uo{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ad,this.marker=new Wn,this.label=new gn,this.tooltip=new Un,this.connectMissingData=!1,this.sparklineMode=!1}};C([b(B)],rn.prototype,"xKey",2);C([b(B)],rn.prototype,"yKey",2);C([b(B,{optional:!0})],rn.prototype,"xName",2);C([b(B,{optional:!0})],rn.prototype,"yName",2);C([b(B,{optional:!0})],rn.prototype,"yFilterKey",2);C([b(B,{optional:!0})],rn.prototype,"stackGroup",2);C([b(j,{optional:!0})],rn.prototype,"normalizedTo",2);C([b(B,{optional:!0})],rn.prototype,"title",2);C([b(qe)],rn.prototype,"stroke",2);C([b(j)],rn.prototype,"strokeWidth",2);C([b(Qe)],rn.prototype,"strokeOpacity",2);C([b(Gr)],rn.prototype,"lineDash",2);C([b(j)],rn.prototype,"lineDashOffset",2);C([b(K)],rn.prototype,"interpolation",2);C([b(K)],rn.prototype,"marker",2);C([b(K)],rn.prototype,"label",2);C([b(K)],rn.prototype,"tooltip",2);C([b(le)],rn.prototype,"connectMissingData",2);C([b(le)],rn.prototype,"sparklineMode",2);var Lge=.25,NV=(()=>{let e=class extends qa{constructor(t){super({moduleCtx:t,directionKeys:yc,directionNames:Cc,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:FI({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Yo,marker:(n,i)=>S(S({},Ng(n)),Jp(n,i))}}),this.clipFocusBox=!1,this.properties=new rn,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(t){if(this.data==null||!this.properties.isValid())return;let{data:n,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:r=0}={}}=this,{xKey:o,yKey:a,yFilterKey:l,connectMissingData:c,normalizedTo:u}=this.properties,d=!this.ctx.animationManager.isSkipped(),h=this.axes.x?.scale,p=this.axes.y?.scale,{isContinuousX:g,xScaleType:f,yScaleType:m}=this.getScaleInformation({xScale:h,yScale:p}),v=r>=1||u!=null,y={invalidValue:null};c&&v&&(y.invalidValue=0,i||(y.forceValue=0));let w=[];if((!g||v)&&w.push(tr(o,f,{id:"xKey"})),w.push(Le(o,f,{id:"xValue"}),Le(a,m,R(S({id:"yValueRaw"},y),{invalidValue:void 0}))),l!=null&&w.push(Le(l,m,{id:"yFilterRaw"})),v){let M=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];w.push(...Ga(a,"window","current",R(S({id:"yValueEnd"},y),{groupId:M[0]}),m),...Ga(a,"window-trailing","current",R(S({id:"yValueStart"},y),{groupId:M[1]}),m),...Ga(a,"normal","current",R(S({id:"yValueCumulative"},y),{groupId:M[2]}),m)),Vy(u)&&w.push(tw([M[0],M[1],M[2]],u))}d&&(w.push(bd(g?["xValue"]:void 0)),this.processedData&&w.push(Sd(this.id,this.processedData)));let{dataModel:x,processedData:D}=await this.requestDataModel(t,n,{props:w,groupByKeys:v,groupByData:!v});this.dataAggregationFilters=this.aggregateData(x,D),this.animationState.transition("updateData")}xCoordinateRange(t,n){let{marker:i}=this.properties,s=this.axes.x.scale.convert(t),r=i.enabled?.5*i.size*n:0;return[s-r,s+r]}yCoordinateRange(t,n){let{marker:i}=this.properties,s=this.axes.y.scale.convert(t[0]),r=i.enabled?.5*i.size*n:0;return[s-r,s+r]}getSeriesDomain(t){let{dataModel:n,processedData:i}=this;if(!n||!i)return[];if(t==="x"){let o=n.resolveProcessedDataDefById(this,"xValue"),a=n.getDomain(this,"xValue","value",i);return o?.def.type==="value"&&o.def.valueType==="category"?a:Di(jo(a))}let s=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw",r=this.domainForClippedRange("y",[s],"xValue",!0);return Di(r)}getSeriesRange(t,n){let i=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.domainForVisibleRange("y",[i],"xValue",n,!0)}getVisibleItems(t,n,i){let s=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.countVisibleItems("xValue",[s],t,n,i)}aggregateData(t,n){}createNodeData(){let{dataModel:t,processedData:n,axes:i,dataAggregationFilters:s}=this,r=i.x,o=i.y;if(!t||!n||!r||!o)return;let{xKey:a,yKey:l,yFilterKey:c,xName:u,yName:d,marker:h,label:p,connectMissingData:g,interpolation:f,legendItemName:m}=this.properties,v=this.dataModel?.hasColumnById(this,"yValueEnd"),y=r.scale,w=o.scale,x=(y.bandwidth??0)/2,D=(w.bandwidth??0)/2,M=h.enabled?h.size:0,E=n.dataSources.get(this.id)??[],A=t.resolveColumnById(this,"xValue",n),I=t.resolveColumnById(this,"yValueRaw",n),T=v?t.resolveColumnById(this,"yValueEnd",n):void 0,P=v?t.resolveColumnById(this,"yValueCumulative",n):I,O=c!=null?t.resolveColumnById(this,"yFilterRaw",n):void 0,$=z=>y.convert(A[z])+x,ae=z=>w.convert(P[z])+D,ue={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},Q=[],he,ge=z=>{let X=E[z],oe=A[z],Ge=I[z],ze=T?.[z],nt=O?.[z],rt=$(z),Nt=ae(z);if(!Number.isFinite(rt))return;if(Ge!=null){let Xt=p.enabled?this.getLabelText(p,{value:Ge,datum:X,xKey:a,yKey:l,xName:u,yName:d,legendItemName:m}):void 0;Q.push({series:this,datum:X,datumIndex:z,yKey:l,xKey:a,point:{x:rt,y:Nt,size:M},midPoint:{x:rt,y:Nt},cumulativeValue:ze,yValue:Ge,xValue:oe,capDefaults:ue,labelText:Xt,selected:nt})}if(he==null)return;let Ot=he[he.length-1];if(Ge!=null){let Xt={point:{x:rt,y:Nt},xDatum:oe,yDatum:Ge};Array.isArray(Ot)?Ot.push(Xt):Ot!=null?(Ot.skip+=1,he.push([Xt])):he.push([Xt])}else g||(Array.isArray(Ot)||Ot==null?he.push({skip:0}):Ot.skip+=1)},[J,de]=y.range,Y=de-J,ee=s?.find(z=>z.maxRange>Y)?.indices,[Ce,me]=this.visibleRange("xValue",r.range,ee);Ce=Math.max(Ce-1,0),me=Math.min(me+1,ee?.length??A.length),n.input.count<1e3&&(Ce=0,me=n.input.count),ee==null&&(he=[]);for(let z=Ce;z<me;z+=1)ge(ee?.[z]??z);let Re=he?.flatMap(z=>Array.isArray(z)?mC(z,f):[]),ne=Re!=null?{itemId:l,spans:Re}:void 0,ie=O?.some((z,X)=>z===I[X])??!1;return{itemId:l,nodeData:Q,labelData:Q,strokeData:ne,scales:this.calculateScaling(),visible:this.visible,crossFiltering:ie}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){let{paths:[n],opacity:i,visible:s,animationEnabled:r}=t,o=this.contextNodeData?.crossFiltering===!0;n.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(o?Lge:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),r||(n.visible=s),yC(this,n)}getMarkerItemBaseStyle(t){let{properties:n}=this,{marker:i}=n,s=t?n.highlightStyle.item:void 0;return{size:i.size,shape:i.shape,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(t,n,i,s){let{id:r,properties:o}=this,{xKey:a,yKey:l,marker:c}=o,{itemStyler:u}=c;if(u!=null)return this.cachedDatumCallback(qt(t,s?"highlight":"node"),()=>{let d=this.getSeriesDomain("x"),h=this.getSeriesDomain("y");return u(S(R(S({seriesId:r},Va(n,a,l,d,h)),{highlighted:s}),i))})}updateMarkerSelection(t){let{nodeData:n}=t,{markerSelection:i}=t;return n=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0?n:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(n,void 0,r=>qt(r.xValue))}updateMarkerNodes(t){let{markerSelection:n,isHighlight:i}=t,{xKey:s,yKey:r,stroke:o,strokeWidth:a,strokeOpacity:l,marker:c,highlightStyle:u}=this.properties,d=this.getSeriesDomain("x"),h=this.getSeriesDomain("y"),p=ke(i&&u.item,c.getStyle(),{stroke:o,strokeWidth:a,strokeOpacity:l}),g=this.ctx.animationManager.isSkipped();n.each((f,m)=>{this.updateMarkerStyle(f,c,R(S({},Va(m,s,r,d,h)),{highlighted:i}),p,{applyTranslation:g,selected:m.selected})}),i||c.markClean()}updateLabelSelection(t){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}updateLabelNodes(t){let{enabled:n,fontStyle:i,fontWeight:s,fontSize:r,fontFamily:o,color:a}=this.properties.label;t.labelSelection.each((l,c)=>{n&&c?.labelText?(l.fontStyle=i,l.fontWeight=s,l.fontSize=r,l.fontFamily=o,l.textAlign="center",l.textBaseline="bottom",l.text=c.labelText,l.x=c.point.x,l.y=c.point.y-10,l.fill=a,l.visible=!0):l.visible=!1})}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,axes:r,properties:o}=this,{xKey:a,xName:l,yKey:c,yName:u,tooltip:d}=o,h=r.x,p=r.y;if(!i||!s||!h||!p)return;let{datumIndex:g}=t,f=s.dataSources.get(this.id)?.[g],m=i.resolveColumnById(this,"xValue",s)[g],v=i.resolveColumnById(this,"yValueRaw",s)[g];if(m==null)return;let y=this.getMarkerItemBaseStyle(!1);return Object.assign(y,this.getMarkerItemStyleOverrides(String(g),f,y,!1)),d.formatTooltip({heading:h.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:u,fallbackLabel:c,value:p.formatDatum(v)}]},S(S({seriesId:n,datum:f,title:u,xKey:a,xName:l,yKey:c,yName:u},y),this.getModuleTooltipParams()))}legendItemSymbol(){let t="rgba(0, 0, 0, 0)",{stroke:n,strokeOpacity:i,strokeWidth:s,lineDash:r,marker:o}=this.properties;return{marker:{shape:o.shape,fill:o.fill??t,stroke:o.stroke??n??t,fillOpacity:o.fillOpacity,strokeOpacity:o.strokeOpacity,strokeWidth:o.strokeWidth,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset,enabled:o.enabled},line:{stroke:n??t,strokeOpacity:i,strokeWidth:s,lineDash:r}}}getLegendData(t){if(!(this.properties.isValid()&&t==="category"))return[];let{id:n,ctx:{legendManager:i},visible:s}=this,{yKey:r,yName:o,title:a,legendItemName:l,showInLegend:c}=this.properties;return[{legendType:"category",id:n,itemId:r,legendItemName:l,seriesId:n,enabled:s&&i.getItemEnabled({seriesId:n,itemId:r}),label:{text:l??a??o??r},symbol:this.legendItemSymbol(),hideInLegend:!c}]}updatePaths(t){this.updateLinePaths(t.paths,t.contextData)}plotNodeDataPoints(t,n){if(n.length===0)return;let i=n[0].point;t.moveTo(i.x,i.y);for(let s=1;s<n.length;s+=1){let{x:r,y:o}=n[s].point;t.lineTo(r,o)}}updateLinePaths(t,n){let i=n.strokeData?.spans,[s]=t;s.path.clear(),i!=null?AI(s,i):this.plotNodeDataPoints(s.path,n.nodeData),s.markDirty()}animateEmptyUpdateReady(t){let{markerSelection:n,labelSelection:i,annotationSelections:s,contextData:r,paths:o}=t,{animationManager:a}=this.ctx;this.updateLinePaths(o,r),PI(this,a,...o),vn([n],Jp),LI(this,a,n),Ke(this,"labels",a,i),Ke(this,"annotations",a,...s)}animateReadyResize(t){let{contextData:n,paths:i}=t;this.updateLinePaths(i,n),super.animateReadyResize(t)}animateWaitingUpdateReady(t){let{animationManager:n}=this.ctx,{markerSelection:i,labelSelection:s,annotationSelections:r,contextData:o,paths:a,previousContextData:l}=t,[c]=a;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);let u=()=>{this.resetPathAnimation(t),this.updateLinePaths(a,o)},d=()=>{n.skipCurrentBatch(),u()};if(o==null||l==null){u(),Qp(this,n,"added",i),vC(this,"path_properties",n,"add",c),Ke(this,"labels",n,s),Ke(this,"annotations",n,...r);return}if(o.crossFiltering!==l.crossFiltering){d();return}let h=DV(o,l,this.processedData?.reduced?.diff?.[this.id]);if(h===void 0){d();return}else if(h.status==="no-op")return;kt(this.id,"path_properties",n,[c],h.stroke.pathProperties),h.status==="added"?this.updateLinePaths(a,o):h.status==="removed"?this.updateLinePaths(a,l):fC(this.id,"path_update",n,[c],h.stroke.path),h.hasMotion&&(Qp(this,n,void 0,i),Ke(this,"labels",n,s),Ke(this,"annotations",n,...r))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ye}getFormattedMarkerStyle(t){let{xKey:n,yKey:i}=this.properties,s=this.getSeriesDomain("x"),r=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,R(S({},Va(t,n,i,s,r)),{highlighted:!0}))}computeFocusBounds(t){return Og(this,t)}};return e.className="LineSeries",e.type="line",e})(),OV={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new NV(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:e=>{let{marker:t}=EI(e);return{stroke:t.fill,marker:t}}},_V=class extends gn{constructor(){super(...arguments),this.placement="top"}};C([b(bE)],_V.prototype,"placement",2);var bt=class extends Uo{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new _V,this.tooltip=new Un,this.marker=new Wn}};C([b(B)],bt.prototype,"xKey",2);C([b(B)],bt.prototype,"yKey",2);C([b(B,{optional:!0})],bt.prototype,"labelKey",2);C([b(B,{optional:!0})],bt.prototype,"colorKey",2);C([b(B,{optional:!0})],bt.prototype,"xFilterKey",2);C([b(B,{optional:!0})],bt.prototype,"yFilterKey",2);C([b(B,{optional:!0})],bt.prototype,"xName",2);C([b(B,{optional:!0})],bt.prototype,"yName",2);C([b(B,{optional:!0})],bt.prototype,"labelName",2);C([b(B,{optional:!0})],bt.prototype,"colorName",2);C([b(NC,{optional:!0})],bt.prototype,"colorDomain",2);C([b(Ki)],bt.prototype,"colorRange",2);C([b(B,{optional:!0})],bt.prototype,"title",2);C([wt("marker.shape")],bt.prototype,"shape",2);C([wt("marker.size")],bt.prototype,"size",2);C([wt("marker.fill")],bt.prototype,"fill",2);C([wt("marker.fillOpacity")],bt.prototype,"fillOpacity",2);C([wt("marker.stroke")],bt.prototype,"stroke",2);C([wt("marker.strokeWidth")],bt.prototype,"strokeWidth",2);C([wt("marker.strokeOpacity")],bt.prototype,"strokeOpacity",2);C([wt("marker.lineDash")],bt.prototype,"lineDash",2);C([wt("marker.lineDashOffset")],bt.prototype,"lineDashOffset",2);C([wt("marker.itemStyler",{optional:!0})],bt.prototype,"itemStyler",2);C([b(K)],bt.prototype,"label",2);C([b(K)],bt.prototype,"tooltip",2);var Pge=(()=>{let e=class extends qa{constructor(t){super({moduleCtx:t,directionKeys:yc,directionNames:Cc,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Ng,label:Yo},usesPlacedLabels:!0}),this.clipFocusBox=!1,this.properties=new bt,this.colorScale=new Wa}get pickModeAxis(){return"main-category"}async processData(t){if(!this.properties.isValid()||this.data==null||!this.visible)return;let n=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:r}=this.getScaleInformation({xScale:n,yScale:i}),o=this.colorScale.type,{xKey:a,yKey:l,xFilterKey:c,yFilterKey:u,labelKey:d,colorKey:h,colorDomain:p,colorRange:g}=this.properties,{dataModel:f,processedData:m}=await this.requestDataModel(t,this.data,{props:[Le(a,s,{id:"xValue"}),Le(l,r,{id:"yValue"}),...c!=null?[Le(c,s,{id:"xFilterValue"})]:[],...u!=null?[Le(u,r,{id:"yFilterValue"})]:[],...h?[Le(h,o,{id:"colorValue"})]:[],...d?[Le(d,"band",{id:"labelValue"})]:[]]});if(h){let v=f.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=p??m.domain.values[v]??[],this.colorScale.range=g,this.colorScale.update()}this.animationState.transition("updateData")}xCoordinateRange(t,n){let i=this.axes.x.scale.convert(t),s=.5*this.properties.size*n;return[i-s,i+s]}yCoordinateRange(t,n){let i=this.axes.y.scale.convert(t[0]),s=.5*this.properties.size*n;return[i-s,i+s]}getSeriesDomain(t){let{dataModel:n,processedData:i}=this;if(!i||!n)return[];let s={x:"xValue",y:"yValue"},r=s[t],o=n.resolveProcessedDataDefById(this,r),a=n.getDomain(this,r,"value",i);if(o?.def.type==="value"&&o?.def.valueType==="category")return a;let c=s[t==="x"?"y":"x"],u=this.domainForClippedRange(t,[r],c,!1);return Di(jo(u))}getSeriesRange(t,n){return this.domainForVisibleRange("y",["yValue"],"xValue",n,!1)}getVisibleItems(t,n,i){return this.countVisibleItems("xValue",["yValue"],t,n,i)}createNodeData(){let{axes:t,dataModel:n,processedData:i,colorScale:s,visible:r}=this,{xKey:o,yKey:a,xFilterKey:l,yFilterKey:c,labelKey:u,colorKey:d,xName:h,yName:p,labelName:g,marker:f,label:m}=this.properties,{placement:v}=m,y=pn.anchor(f.shape),w=t.x,x=t.y;if(!(n&&i&&r&&w&&x))return;let D=n.resolveColumnById(this,"xValue",i),M=n.resolveColumnById(this,"yValue",i),E=d!=null?n.resolveColumnById(this,"colorValue",i):void 0,A=u!=null?n.resolveColumnById(this,"labelValue",i):void 0,I=l!=null?n.resolveColumnById(this,"xFilterValue",i):void 0,T=c!=null?n.resolveColumnById(this,"yFilterValue",i):void 0,P=w.scale,O=x.scale,$=(P.bandwidth??0)/2,ae=(O.bandwidth??0)/2,ue=[],Q=m.getFont(),he=Go.getMeasurer({font:Q});return(i.dataSources.get(this.id)??[]).forEach((J,de)=>{let Y=D[de],te=M[de],ee=P.convert(Y)+$,Ce=O.convert(te)+ae,me=I!=null&&T!=null?I[de]===Y&&T[de]===te:void 0,Re=this.getLabelText(m,{value:A!=null?A?.[de]:te,datum:J,xKey:o,yKey:a,labelKey:u,xName:h,yName:p,labelName:g}),ne=he.measureText(Re),ie=E!=null?s.convert(E[de]):void 0;ue.push({series:this,itemId:a,yKey:a,xKey:o,datum:J,datumIndex:de,xValue:Y,yValue:te,capDefaults:{lengthRatioMultiplier:f.getDiameter(),lengthMax:1/0},point:{x:ee,y:Ce,size:f.size},midPoint:{x:ee,y:Ce},fill:ie,label:S({text:Re},ne),anchor:y,placement:v,selected:me})}),{itemId:a,nodeData:ue,labelData:ue,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateMarkerSelection(t){let{nodeData:n,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?n:[])}getMarkerItemBaseStyle(t){let{properties:n}=this,{marker:i}=n,s=t?n.highlightStyle.item:void 0;return{fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(t,n,i,s){let{id:r,properties:o}=this,{xKey:a,yKey:l,labelKey:c,marker:u}=o,{itemStyler:d}=u;if(d!=null)return this.cachedDatumCallback(qt(t,s?"highlight":"node"),()=>d(S({seriesId:r,datum:n,xKey:a,yKey:l,labelKey:c,highlighted:s},i)))}updateMarkerNodes(t){let{markerSelection:n,isHighlight:i}=t,{xKey:s,yKey:r,labelKey:o,marker:a,highlightStyle:l}=this.properties,c=ke(i&&l.item,a.getStyle());n.each((u,d)=>{this.updateMarkerStyle(u,a,{datum:d,highlighted:i,xKey:s,yKey:r,labelKey:o},c,{selected:d.selected})}),i||a.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map(n=>R(S({},n.datum),{point:{x:n.x,y:n.y,size:n.datum.point.size}})),n=>{n.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){let{label:n}=this.properties;t.labelSelection.each((i,s)=>{i.text=s.label.text,i.fill=n.color,i.x=s.point?.x??0,i.y=s.point?.y??0,i.fontStyle=n.fontStyle,i.fontWeight=n.fontWeight,i.fontSize=n.fontSize,i.fontFamily=n.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,axes:r,properties:o}=this,{xKey:a,xName:l,yKey:c,yName:u,labelKey:d,labelName:h,title:p,tooltip:g}=o,f=r.x,m=r.y;if(!i||!s||!f||!m)return;let{datumIndex:v}=t,y=s.dataSources.get(this.id)?.[v],w=i.resolveColumnById(this,"xValue",s)[v],x=i.resolveColumnById(this,"yValue",s)[v];if(w==null)return;let D=this.getMarkerItemBaseStyle(!1);return Object.assign(D,this.getMarkerItemStyleOverrides(String(v),y,D,!1)),g.formatTooltip({symbol:this.legendItemSymbol(),title:p,data:[{label:l,fallbackLabel:a,value:f.formatDatum(w)},{label:u,fallbackLabel:c,value:m.formatDatum(x)}]},S(S({seriesId:n,datum:y,title:u,xKey:a,xName:l,yKey:c,yName:u,labelKey:d,labelName:h},D),this.getModuleTooltipParams()))}legendItemSymbol(){let{shape:t,fill:n,stroke:i,fillOpacity:s,strokeOpacity:r,strokeWidth:o,lineDash:a,lineDashOffset:l}=this.properties.marker;return{marker:{shape:t,fill:n??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:r,strokeWidth:o,lineDash:a,lineDashOffset:l}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];let{yKey:n,yName:i,title:s,showInLegend:r}=this.properties,{id:o,ctx:{legendManager:a},visible:l}=this;return[{legendType:"category",id:o,itemId:n,seriesId:o,enabled:l&&a.getItemEnabled({seriesId:o,itemId:n}),label:{text:s??i??n},symbol:this.legendItemSymbol(),hideInLegend:!r}]}animateEmptyUpdateReady(t){let{markerSelection:n,labelSelection:i,annotationSelections:s}=t;kI(this,this.ctx.animationManager,n),Ke(this,"labels",this.ctx.animationManager,i),Ke(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ye}getFormattedMarkerStyle(t){let{xKey:n,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:n,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(t){return Og(this,t)}};return e.className="ScatterSeries",e.type="scatter",e})(),Fge={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new Pge(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Fg},BV=class eE{constructor(t,n,i,s){this.startAngle=t,this.endAngle=n,this.innerRadius=i,this.outerRadius=s}clone(){let{startAngle:t,endAngle:n,innerRadius:i,outerRadius:s}=this;return new eE(t,n,i,s)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[DC](t,n){return new eE(this.startAngle*(1-n)+t.startAngle*n,this.endAngle*(1-n)+t.endAngle*n,this.innerRadius*(1-n)+t.innerRadius*n,this.outerRadius*(1-n)+t.outerRadius*n)}};function VV({startAngle:e,endAngle:t,innerRadius:n,outerRadius:i}){let s=1/0,r=1/0,o=-1/0,a=-1/0,l=(c,u)=>{s=Math.min(c,s),r=Math.min(u,r),o=Math.max(c,o),a=Math.max(u,a)};return l(n*Math.cos(e),n*Math.sin(e)),l(n*Math.cos(t),n*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),l(i*Math.cos(t),i*Math.sin(t)),Fa(0,e,t)&&l(i,0),Fa(Math.PI*.5,e,t)&&l(0,i),Fa(Math.PI,e,t)&&l(-i,0),Fa(Math.PI*1.5,e,t)&&l(0,-i),new Z(s,r,o-s,a-r)}function CC(e,t,n){let i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:s,outerRadius:r}=n;if(n.startAngle===n.endAngle||i<Math.min(s,r)||i>Math.max(s,r))return!1;let o=Vp(n.startAngle),a=Vp(n.endAngle),l=Math.atan2(t,e);return o<a?l<=a&&l>=o:l<=a&&l>=-Math.PI||l>=o&&l<=Math.PI}function W3(e,t){let{startAngle:n,endAngle:i,innerRadius:s,outerRadius:r}=t,o={x:r*Math.cos(n),y:r*Math.sin(n)},a={x:r*Math.cos(i),y:r*Math.sin(i)},l=s===0?{x:0,y:0}:{x:s*Math.cos(n),y:s*Math.sin(n)},c=s===0?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)};return Zu(e.start.x,e.start.y,e.end.x,e.end.y,o.x,o.y,l.x,l.y)||Zu(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,c.x,c.y)||E4(0,0,r,n,i,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function GV(e,t){let n={x:e.x,y:e.y},i={x:e.x+e.width,y:e.y},s={x:e.x,y:e.y+e.height},r={x:e.x+e.width,y:e.y+e.height};return W3({start:n,end:i},t)||W3({start:s,end:r},t)}function U3(e,t,n,i){if(n===0&&i===0)return 0;if(Math.asin(Math.abs(1*n)/(e+1*n))+Math.asin(Math.abs(1*i)/(e+1*i))-t<0)return 1;let r=0,o=1;for(let a=0;a<8;a+=1){let l=(r+o)/2;Math.asin(Math.abs(l*n)/(e+l*n))+Math.asin(Math.abs(l*i)/(e+l*i))-t<0?r=l:o=l}return r}var Nge=1e-6;function za(e,t){return VC(e,t)<Nge?t:gt(e-t)+t}function Py(e,t,n=0){let s=Math.abs(t-e)>=2*Math.PI?2*Math.PI:gt(t-e);return e=za(e,n),t=e+s,{startAngle:e,endAngle:t}}function Fy(e,t,n,i,s,r){let o=Math.sin(r),a=Math.cos(r),l=e**2+t**2-n**2,c,u,d,h;if(a>.5){let w=o/a,x=1+w**2,D=-2*(e+t*w),M=D**2-4*x*l;if(M<0)return;let E=(-D+Math.sqrt(M))/(2*x),A=(-D-Math.sqrt(M))/(2*x);c=E,u=E*w,d=A,h=A*w}else{let w=a/o,x=1+w**2,D=-2*(t+e*w),M=D**2-4*x*l;if(M<0)return;let E=(-D+Math.sqrt(M))/(2*x),A=(-D-Math.sqrt(M))/(2*x);c=E*w,u=E,d=A*w,h=A}let p=a,g=o,f=c*p+u*g,m=d*p+h*g,v=f>0?za(Math.atan2(u-t,c-e),i):NaN,y=m>0?za(Math.atan2(h-t,d-e),i):NaN;if(v>=i&&v<=s)return v;if(y>=i&&y<=s)return y}function Ny(e,t,n,i,s,r){let o=Math.hypot(e,t),a=(o**2-n**2+r**2)/(2*o),l=o-a,c=Math.atan2(t,e),u=Math.acos(-l/n),d=za(c+u,i),h=za(c-u,i);if(d>=i&&d<=s)return d;if(h>=i&&h<=s)return h}var vM=class{constructor(e,t,n,i,s){this.cx=e,this.cy=t,this.r=n,this.a0=i,this.a1=s,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){e==null||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){e==null||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},Pn=(()=>{let e=class extends Ii{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return VV(this).translate(this.centerX,this.centerY)}normalizedRadii(){let{concentricEdgeInset:t}=this,{innerRadius:n,outerRadius:i}=this;return n=n>0?n+t:0,i=Math.max(i-t,0),{innerRadius:n,outerRadius:i}}normalizedClipSector(){let{clipSector:t}=this;if(t==null)return;let{startAngle:n,endAngle:i}=Py(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:r}=this.normalizedRadii(),o=Py(t.startAngle,t.endAngle,n);return new BV(Math.max(n,o.startAngle),Math.min(i,o.endAngle),Math.max(s,t.innerRadius),Math.min(r,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,n,i,s,r,o,a,l){if(t<=0)return;let{startAngle:c,endAngle:u}=Py(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:h}=this.normalizedRadii(),p=this.normalizedClipSector();if(l&&d<=0)return;let g=l?this.getAngleOffset(d+t):this.getAngleOffset(h-t),f=a?c+g+n:u-g-n,m=l?d+t:h-t,v=m*Math.cos(f),y=m*Math.sin(f);if(p!=null&&(!a&&!(f>=c-1e-6&&f<=p.endAngle-1e-6)||a&&!(f>=p.startAngle+1e-6&&f<=u-1e-6)||l&&m<p.innerRadius-1e-6||!l&&m>p.outerRadius+1e-6))return;let w=new vM(v,y,t,i,s);if(p!=null){l?(w.clipStart(Fy(v,y,t,i,s,p.endAngle)),w.clipEnd(Fy(v,y,t,i,s,p.startAngle))):(w.clipStart(Fy(v,y,t,i,s,p.startAngle)),w.clipEnd(Fy(v,y,t,i,s,p.endAngle)));let A,I;if(a?(A=Ny(v,y,t,i,s,p.innerRadius),I=Ny(v,y,t,i,s,p.outerRadius)):(A=Ny(v,y,t,i,s,p.outerRadius),I=Ny(v,y,t,i,s,p.innerRadius)),w.clipStart(A),w.clipEnd(I),A!=null){let{x:T,y:P}=w.pointAt(A),O=za(Math.atan2(P,T),c);a?o?.clipStart(O):r.clipEnd(O)}if(I!=null){let{x:T,y:P}=w.pointAt(I),O=za(Math.atan2(P,T),c);a?r.clipStart(O):o?.clipEnd(O)}}if(p!=null){let{x:A,y:I}=w.pointAt((w.a0+w.a1)/2);if(!CC(A,I,p))return}let{x,y:D}=w.pointAt(a===l?w.a0:w.a1),M=za(Math.atan2(D,x),c),E=l?o:r;return a?E?.clipStart(M):E?.clipEnd(M),w}updatePath(){let{path:n,centerX:i,centerY:s,concentricEdgeInset:r,radialEdgeInset:o}=this,{startOuterCornerRadius:a,endOuterCornerRadius:l,startInnerCornerRadius:c,endInnerCornerRadius:u}=this,{startAngle:d,endAngle:h}=Py(this.startAngle,this.endAngle),{innerRadius:p,outerRadius:g}=this.normalizedRadii(),f=this.normalizedClipSector(),m=h-d,v=m>=2*Math.PI-1e-6;if(n.clear(),p===0&&g===0||p>g)return;if((f?.startAngle??d)===(f?.endAngle??h))return;if(v&&this.clipSector==null&&a===0&&l===0&&c===0&&u===0){n.moveTo(i+g*Math.cos(d),s+g*Math.sin(d)),n.arc(i,s,g,d,h),p>r&&(n.moveTo(i+p*Math.cos(h),s+p*Math.sin(h)),n.arc(i,s,p,h,d,!0)),n.closePath();return}else if(this.clipSector==null&&Math.abs(p-g)<1e-6){n.arc(i,s,g,d,h,!1),n.arc(i,s,g,h,d,!0),n.closePath();return}let y=this.getAngleOffset(p),w=this.getAngleOffset(g);if(m<2*w)return;let D=(f?.innerRadius??p)>r,M=p<r||m<2*y,E=g-p,A=Math.max(a,c,l,u),I=A>0?Math.min(E/A,1):1;a*=I,l*=I,c*=I,u*=I;let T=U3(g,m-2*w,-a,-l);if(a*=T,l*=T,!M&&D){let z=U3(p,m-2*y,c,u);c*=z,u*=z}else c=0,u=0;let P=Math.max(a+c,l+u),O=P>0?Math.min(E/P,1):1;a*=O,l*=O,c*=O,u*=O;let $=0,ae=0,ue=a/(g-a),Q=l/(g-l);if(ue>=0&&ue<.999999)$=Math.asin(ue);else{$=m/2;let z=g/(1/Math.sin($)+1);a=Math.min(z,a)}if(Q>=0&&Q<.999999)ae=Math.asin(Q);else{ae=m/2;let z=g/(1/Math.sin(ae)+1);l=Math.min(z,l)}let he=Math.asin(c/(p+c)),ge=Math.asin(u/(p+u)),J=f?.outerRadius??g,de=this.getAngleOffset(J),Y=new vM(0,0,J,d+de,h-de),te=f?.innerRadius??p,ee=this.getAngleOffset(te),Ce=D?new vM(0,0,te,d+ee,h-ee):void 0;f!=null&&(Y.clipStart(f.startAngle),Y.clipEnd(f.endAngle),Ce?.clipStart(f.startAngle),Ce?.clipEnd(f.endAngle));let me=this.arc(a,$,d-Math.PI*.5,d+$,Y,Ce,!0,!1),Re=this.arc(l,ae,h-ae,h+Math.PI*.5,Y,Ce,!1,!1),ne=this.arc(u,ge,h+Math.PI*.5,h+Math.PI-ge,Y,Ce,!1,!0),ie=this.arc(c,he,d+Math.PI+he,d+Math.PI*1.5,Y,Ce,!0,!0);if(M){let z=m<Math.PI*.5?o*(1+Math.cos(m))/Math.sin(m):NaN,X;z>0&&z<g?X=Math.max(Math.hypot(o,z),p):X=o,X=Math.max(X,p);let oe=d+m*.5;n.moveTo(i+X*Math.cos(oe),s+X*Math.sin(oe))}else if(!(ie?.isValid()===!0||Ce?.isValid()===!0)){let z=d+m/2,X=p*Math.cos(z),oe=p*Math.sin(z);n.moveTo(i+X,s+oe)}if(me?.isValid()===!0){let{cx:z,cy:X,r:oe,a0:Ge,a1:ze}=me;n.arc(i+z,s+X,oe,Ge,ze)}if(Y.isValid()){let{r:z,a0:X,a1:oe}=Y;n.arc(i,s,z,X,oe)}if(Re?.isValid()===!0){let{cx:z,cy:X,r:oe,a0:Ge,a1:ze}=Re;n.arc(i+z,s+X,oe,Ge,ze)}if(!M){if(ne?.isValid()===!0){let{cx:z,cy:X,r:oe,a0:Ge,a1:ze}=ne;n.arc(i+z,s+X,oe,Ge,ze)}if(Ce?.isValid()===!0){let{r:z,a0:X,a1:oe}=Ce;n.arc(i,s,z,oe,X,!0)}if(ie?.isValid()===!0){let{cx:z,cy:X,r:oe,a0:Ge,a1:ze}=ie;n.arc(i+z,s+X,oe,Ge,ze)}}n.closePath()}isPointInPath(t,n){let{startAngle:i,endAngle:s,innerRadius:r,outerRadius:o}=this.clipSector??this;return CC(t-this.centerX,n-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(r,o),outerRadius:Math.max(r,o)})}};return e.className="Sector",e})();C([we()],Pn.prototype,"centerX",2);C([we()],Pn.prototype,"centerY",2);C([we()],Pn.prototype,"innerRadius",2);C([we()],Pn.prototype,"outerRadius",2);C([we()],Pn.prototype,"startAngle",2);C([we()],Pn.prototype,"endAngle",2);C([we()],Pn.prototype,"clipSector",2);C([we()],Pn.prototype,"concentricEdgeInset",2);C([we()],Pn.prototype,"radialEdgeInset",2);C([we()],Pn.prototype,"startOuterCornerRadius",2);C([we()],Pn.prototype,"endOuterCornerRadius",2);C([we()],Pn.prototype,"startInnerCornerRadius",2);C([we()],Pn.prototype,"endInnerCornerRadius",2);var $t={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Tr={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},zV=class extends Ct{constructor(){super(...arguments),this.showInLegend=!1}};C([b(le)],zV.prototype,"showInLegend",2);var zI=class extends gn{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};C([b(B)],zI.prototype,"text",2);C([b(je)],zI.prototype,"spacing",2);var HI=class extends Se{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};C([b(qe)],HI.prototype,"fill",2);C([b(Qe)],HI.prototype,"fillOpacity",2);var Rd=class extends gn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};C([b(j)],Rd.prototype,"offset",2);C([b(je.restrict({min:0,max:360}))],Rd.prototype,"minAngle",2);C([b(j)],Rd.prototype,"minSpacing",2);C([b(j)],Rd.prototype,"maxCollisionOffset",2);C([b(le)],Rd.prototype,"avoidCollisions",2);var jI=class extends gn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};C([b(je)],jI.prototype,"positionOffset",2);C([b(Qe)],jI.prototype,"positionRatio",2);var fw=class extends Se{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};C([b(Ki,{optional:!0})],fw.prototype,"colors",2);C([b(j)],fw.prototype,"length",2);C([b(j)],fw.prototype,"strokeWidth",2);var Ve=class extends Xi{constructor(){super(...arguments),this.fills=Object.values($t),this.strokes=Object.values(Tr),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new lg(zI),this.title=new zV,this.innerCircle=new HI,this.shadow=new or,this.calloutLabel=new Rd,this.sectorLabel=new jI,this.calloutLine=new fw,this.tooltip=new Un}isValid(){let e=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(G.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):e}};C([b(B)],Ve.prototype,"angleKey",2);C([b(B,{optional:!0})],Ve.prototype,"angleName",2);C([b(B,{optional:!0})],Ve.prototype,"angleFilterKey",2);C([b(B,{optional:!0})],Ve.prototype,"radiusKey",2);C([b(B,{optional:!0})],Ve.prototype,"radiusName",2);C([b(j,{optional:!0})],Ve.prototype,"radiusMin",2);C([b(j,{optional:!0})],Ve.prototype,"radiusMax",2);C([b(B,{optional:!0})],Ve.prototype,"calloutLabelKey",2);C([b(B,{optional:!0})],Ve.prototype,"calloutLabelName",2);C([b(B,{optional:!0})],Ve.prototype,"sectorLabelKey",2);C([b(B,{optional:!0})],Ve.prototype,"sectorLabelName",2);C([b(B,{optional:!0})],Ve.prototype,"legendItemKey",2);C([b(Ki)],Ve.prototype,"fills",2);C([b(Ki)],Ve.prototype,"strokes",2);C([b(Qe)],Ve.prototype,"fillOpacity",2);C([b(Qe)],Ve.prototype,"strokeOpacity",2);C([b(Gr)],Ve.prototype,"lineDash",2);C([b(j)],Ve.prototype,"lineDashOffset",2);C([b(j)],Ve.prototype,"cornerRadius",2);C([b(di,{optional:!0})],Ve.prototype,"itemStyler",2);C([b(je)],Ve.prototype,"rotation",2);C([b(je)],Ve.prototype,"outerRadiusOffset",2);C([b(Qe)],Ve.prototype,"outerRadiusRatio",2);C([b(je,{optional:!0})],Ve.prototype,"innerRadiusOffset",2);C([b(Qe,{optional:!0})],Ve.prototype,"innerRadiusRatio",2);C([b(j)],Ve.prototype,"strokeWidth",2);C([b(je)],Ve.prototype,"sectorSpacing",2);C([b(le)],Ve.prototype,"hideZeroValueSectorsInLegend",2);C([b(CE)],Ve.prototype,"innerLabels",2);C([b(K)],Ve.prototype,"title",2);C([b(K)],Ve.prototype,"innerCircle",2);C([b(K)],Ve.prototype,"shadow",2);C([b(K)],Ve.prototype,"calloutLabel",2);C([b(K)],Ve.prototype,"sectorLabel",2);C([b(K)],Ve.prototype,"calloutLine",2);C([b(K)],Ve.prototype,"tooltip",2);function cc(e,t,n,i){let s=[n.convert(0),n.convert(1)],r=[i.convert(0),i.convert(1)],o=Math.PI/-2+tn(t),a=e?"initial":"update",l=({radius:g})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*g}),c=({radius:g})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*g});return{nodes:{toFn:(g,f,m,{prevLive:v})=>{let{startAngle:y,endAngle:w,innerRadius:x,outerRadius:D}=f,{stroke:M,fill:E}=f.sectorFormat;if(m==="removed"&&v?(y=v.datum?.endAngle,w=v.datum?.endAngle):m==="removed"&&!v&&(y=o,w=o),m==="removed"){let A=l(f);x=A.innerRadius,D=A.outerRadius}return{startAngle:y,endAngle:w,outerRadius:D,innerRadius:x,stroke:M,fill:E}},fromFn:(g,f,m,{prevFromProps:v})=>{let{startAngle:y,endAngle:w,innerRadius:x,outerRadius:D}=g,{fill:M,stroke:E}=f.sectorFormat;if(m==="unknown"||m==="added"&&!v?(y=o,w=o,x=f.innerRadius,D=f.outerRadius):m==="added"&&v&&(y=v.endAngle??o,w=v.endAngle??o,x=v.innerRadius??f.innerRadius,D=v.outerRadius??f.outerRadius),m==="added"&&!e){let A=c(f);x=A.innerRadius,D=A.outerRadius}return m==="updated"&&(M=g.fill??M,E=(typeof g.stroke=="string"?g.stroke:void 0)??E),{startAngle:y,endAngle:w,innerRadius:x,outerRadius:D,fill:M,stroke:E,phase:a}}},innerCircle:{fromFn:(g,f)=>({size:g.previousDatum?.radius??g.size??0,phase:a}),toFn:(g,f)=>({size:f.radius??0})}}}function WI(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function UI(e,t){let n=t.y-e.centerY,i=t.x-e.centerX,s=Math.atan2(n,i),r=e.getItemNodes();for(let o of r)if(o.datum.missing!==!0&&Fa(s,o.startAngle,o.endAngle)){let a=Math.sqrt(i*i+n*n),l=0;return a<o.innerRadius?l=o.innerRadius-a:a>o.outerRadius&&(l=a-o.outerRadius),{datum:o.datum,distance:l}}}var HV=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(HV||{}),mw=class extends aI{constructor(r){var o=r,{useLabelLayer:e=!1,pickModes:t=[1,0],canHaveAxes:n=!1,animationResetFns:i}=o,s=He(o,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(R(S({},s),{useLabelLayer:e,pickModes:t,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new ye),this.nodeData=[],this.itemSelection=Kt.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Kt.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=Kt.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=Kt.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=i,this.animationState=new pg("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3],!0):!1}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}labelFactory(){let e=new hn;return e.pointerEvents=1,e}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}resetAllAnimation(){let{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&vn([this.itemSelection,this.highlightSelection],e),t&&vn([this.labelSelection,this.highlightLabelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){let{item:t,label:n}=this.animationResetFns??{};t&&vn([this.highlightSelection],t),n&&vn([this.highlightLabelSelection],n)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){let t=this.getNodeData()?.[e.datumIndex];if(t!==void 0)return this.itemSelection.select(n=>n instanceof Ii&&n.datum===t)[0]}getSeriesRange(e,t){return[NaN,NaN]}},Oge=class extends mg{constructor(e,t,n,i){super(e,t,n,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},_ge=(()=>{let e=class extends mw{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:WI,label:Yo}}),this.properties=new Ve,this.phantomNodeData=void 0,this.backgroundGroup=new ui({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new er,this.radiusScale=new er,this.phantomGroup=this.backgroundGroup.appendChild(new ye({name:"phantom"})),this.phantomSelection=Kt.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ye({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Kt(this.calloutLabelGroup,ye),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ye({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new pn({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new pn({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new ye({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new ye({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=Kt.select(this.innerLabelsGroup,hn),this.innerCircleSelection=Kt.select(this.innerCircleGroup,()=>new pn({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=Oge,this.angleScale=new er,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,n,i){super.attachSeries(t,n,i),t?.appendChild(this.backgroundGroup)}detachSeries(t,n,i){super.detachSeries(t,n,i),t?.removeChild(this.backgroundGroup)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.backgroundGroup.zIndex=[0,t],!0):!1}nodeFactory(){return new Pn}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(this.data==null||!this.properties.isValid())return;let{visible:n,id:i}=this,{angleKey:s,angleFilterKey:r,radiusKey:o,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,u=(m,v,y)=>n&&this.ctx.legendManager.getItemEnabled({seriesId:i,itemId:y}),d=!this.ctx.animationManager.isSkipped(),h=[],p=[];c?h.push(tr(c,"band",{id:"legendItemKey"})):a?h.push(tr(a,"band",{id:"calloutLabelKey"})):l&&h.push(tr(l,"band",{id:"sectorLabelKey"}));let g=this.radiusScale.type,f=this.angleScale.type;o&&p.push(dI(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Le(o,g,{id:"radiusRaw"}),lc("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&p.push(Le(a,"band",{id:"calloutLabelValue"})),l&&p.push(Le(l,"band",{id:"sectorLabelValue"})),c&&p.push(Le(c,"band",{id:"legendItemValue"})),r&&p.push(Up(r,f,{id:"angleFilterValue",onlyPositive:!0,validation:u,invalidValue:0}),Le(r,f,{id:"angleFilterRaw"}),lc("angleFilterValue",[0,1],0,0)),d&&this.processedData&&h.length>0&&p.push(Sd(this.id,this.processedData)),p.push(bd()),await this.requestDataModel(t,this.data,{props:[...h,Up(s,f,{id:"angleValue",onlyPositive:!0,validation:u,invalidValue:0}),Le(s,f,{id:"angleRaw"}),lc("angleValue",[0,1],0,0),...p]});for(let m of this.processedData?.defs?.values??[]){let{id:v,missing:y,property:w}=m,x=QE(this,y);v!=="angleRaw"&&x>0&&G.warnOnce(`no value was found for the key '${String(w)}' on ${x} data element${x>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:t=[],phantomNodeData:n}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=n,this.nodeDataRefresh=!1}getProcessedDataValues(t,n){let i=t.resolveColumnById(this,"angleValue",n),s=t.resolveColumnById(this,"angleRaw",n),r=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterValue",n):void 0,o=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterRaw",n):void 0,a=this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",n):void 0,l=this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",n):void 0,c=this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",n):void 0,u=this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",n):void 0,d=this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",n):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:r,angleFilterRawValues:o,radiusValues:a,radiusRawValues:l,calloutLabelValues:c,sectorLabelValues:u,legendItemValues:d}}createNodeData(){let{id:t,processedData:n,dataModel:i,angleScale:s,ctx:{legendManager:r},visible:o}=this,{rotation:a,innerRadiusRatio:l}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(!i||n?.type!=="ungrouped")return;let{angleValues:c,angleRawValues:u,angleFilterValues:d,angleFilterRawValues:h,radiusValues:p,radiusRawValues:g,calloutLabelValues:f,sectorLabelValues:m,legendItemValues:v}=this.getProcessedDataValues(i,n),y=h?.some((I,T)=>I>u[T])??!1,w=0,x=0,D=[],M=h!=null?[]:void 0,E=n.dataSources.get(this.id)??[],A=n.invalidData?.get(this.id);return E.forEach((I,T)=>{if(A?.[T]===!0)return;let P=y?d[T]:c[T],O=h!=null&&!y?Math.sqrt(h[T]/u[T]):1,$=s.convert(w)+tn(a);w=P,x+=P;let ae=s.convert(w)+tn(a),ue=Math.abs(ae-$),Q=$+ue/2,he=u[T],J=(p?.[T]??1)*O,de=g?.[T],Y=v?.[T],te=this.getLabels(I,Q,ue,!0,f?.[T],m?.[T],Y),ee=this.getSectorFormat(I,T,!1),Ce=S({itemId:T,series:this,datum:I,datumIndex:T,angleValue:he,midAngle:Q,midCos:Math.cos(Q),midSin:Math.sin(Q),startAngle:$,endAngle:ae,radius:J,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(J),0),sectorFormat:ee,radiusValue:de,legendItemValue:Y,enabled:o&&r.getItemEnabled({seriesId:t,itemId:T}),focusable:!0},te);D.push(Ce),M?.push(R(S({},Ce),{radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1}))}),this.zerosumOuterRing.visible=x===0,this.zerosumInnerRing.visible=x===0&&l!=null&&l!==1&&l>0,{itemId:t,nodeData:D,labelData:D,phantomNodeData:M}}getLabels(t,n,i,s,r,o,a){let{calloutLabel:l,sectorLabel:c,legendItemKey:u}=this.properties,d=!s||l.enabled?this.properties.calloutLabelKey:void 0,h=!s||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!h&&!u)return{};let p={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},g={};return d&&i>=tn(l.minAngle)&&(g.calloutLabel=R(S({},this.getTextAlignment(n)),{text:this.getLabelText(l,R(S({},p),{value:r})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(g.sectorLabel={text:this.getLabelText(c,R(S({},p),{value:o}))}),u!=null&&a!=null&&(g.legendItem={key:u,text:a}),g}getTextAlignment(t){let n=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Vp(t),s=-.75*Math.PI,r=i-s,o=Math.floor(r/(Math.PI/2)),a=cE(o,n.length);return n[a]}getSectorFormat(t,n,i){let{angleKey:s,radiusKey:r,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l,fills:c,strokes:u,itemStyler:d}=this.properties,h=u[n%u.length],{fill:p,fillOpacity:g,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:w,cornerRadius:x}=ke(i&&this.properties.highlightStyle.item,{fill:c.length>0?c[n%c.length]:void 0,stroke:h,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),D;return d&&(D=this.cachedDatumCallback(this.getDatumId(t,n)+(i?"-highlight":"-hide"),()=>d({datum:t,angleKey:s,radiusKey:r,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l,fill:p,fillOpacity:g,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:w,cornerRadius:x,highlighted:i,seriesId:this.id}))),{fill:D?.fill??p,fillOpacity:D?.fillOpacity??g,stroke:D?.stroke??f,strokeWidth:D?.strokeWidth??m,strokeOpacity:D?.strokeOpacity??v,lineDash:D?.lineDash??y,lineDashOffset:D?.lineDashOffset??w,cornerRadius:D?.cornerRadius??x}}getInnerRadius(){let{radius:t}=this,{innerRadiusRatio:n=1,innerRadiusOffset:i=0}=this.properties,s=t*n+i;return s===t||s<0?0:s}getOuterRadius(){let{outerRadiusRatio:t,outerRadiusOffset:n}=this.properties;return Math.max(this.radius*t+n,0)}updateRadiusScale(t){let n=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=n,t&&(this.previousRadiusScale.range=n);let i=s=>R(S({},s),{innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){let t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;let i=2+(this.properties.title?.spacing??0),s=Math.max(0,-t);return-t-i-s}update({seriesRect:t}){let{title:n}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=No(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),n){let r=this.getTitleTranslationY();n.node.y=isFinite(r)?r:0;let o=n.node.getBBox();n.node.visible=n.enabled&&isFinite(r)&&!this.bboxIntersectsSurroundingSeries(o)}for(let r of[this.zerosumInnerRing,this.zerosumOuterRing])r.fillOpacity=0,r.stroke=this.properties.calloutLabel.color,r.strokeWidth=1,r.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){let{oldTitle:t}=this,{title:n}=this.properties;t!==n&&(t&&this.labelGroup?.removeChild(t.node),n&&(n.node.textBaseline="bottom",this.labelGroup?.appendChild(n.node)),this.oldTitle=n)}updateNodeMidPoint(){let t=n=>{let i=n.innerRadius+(n.outerRadius-n.innerRadius)/2;n.midPoint={x:n.midCos*Math.max(0,i),y:n.midSin*Math.max(0,i)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){let{itemSelection:t,highlightSelection:n,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:r,labelSelection:o,innerLabelsSelection:a}=this,l=this.nodeData.map(u=>R(S({},u),{sectorFormat:S({},u.sectorFormat)})),c=(u,d)=>{u.update(d,void 0,h=>this.getDatumId(h.datum,h.datumIndex)),this.ctx.animationManager.isSkipped()&&u.cleanup()};c(t,this.nodeData),c(n,l),c(i,this.phantomNodeData??[]),r.update(this.calloutNodeData,u=>{let d=new Zi;d.tag=0,d.pointerEvents=1,u.appendChild(d);let h=new hn;h.tag=1,h.pointerEvents=1,u.appendChild(h)}),o.update(this.nodeData),s.update(l),a.update(this.properties.innerLabels,u=>{u.pointerEvents=1})}updateInnerCircleSelection(){let{innerCircle:t}=this.properties,n=0,i=this.getInnerRadius();if(i>0){let r=Math.min(i,this.getOuterRadius());n=Math.ceil(r*2+1)}let s=t?[{radius:n}]:[];this.innerCircleSelection.update(s)}updateNodes(t){let n=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&n?.series===this,this.highlightLabel.visible=i&&n?.series===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((o,{radius:a})=>{o.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:a})});let s=this.ctx.animationManager.isSkipped(),r=(o,a,l,c)=>{let u=this.getSectorFormat(a.datum,a.itemId,c);a.sectorFormat.fill=u.fill,a.sectorFormat.stroke=u.stroke,s&&(o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius),(c||s)&&(o.fill=u.fill,o.stroke=u.stroke),o.strokeWidth=u.strokeWidth,o.fillOpacity=u.fillOpacity,o.strokeOpacity=u.strokeOpacity,o.lineDash=u.lineDash,o.lineDashOffset=u.lineDashOffset,o.cornerRadius=u.cornerRadius,o.fillShadow=this.properties.shadow;let d=Math.max((this.properties.sectorSpacing+(u.stroke!=null?u.strokeWidth:0))/2,0);o.inset=d,o.lineJoin=this.properties.sectorSpacing>=0||d>0?"miter":"round"};this.itemSelection.each((o,a,l)=>r(o,a,l,!1)),this.highlightSelection.each((o,a,l)=>{r(o,a,l,!0),o.visible=a.itemId===n?.itemId}),this.phantomSelection.each((o,a,l)=>r(o,a,l,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{calloutLine:t}=this.properties,n=t.length,i=t.strokeWidth,s=t.colors??this.properties.strokes,{offset:r}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,a)=>{let l=o.datum,{calloutLabel:c,outerRadius:u}=l;if(c?.text&&!c.hidden&&u!==0){o.visible=!0,o.strokeWidth=i,o.stroke=s[a%s.length],o.fill=void 0;let d=l.midCos*u,h=l.midSin*u,p=l.midCos*(u+n),g=l.midSin*(u+n);if((c.collisionTextAlign??c.collisionOffsetY!==0)&&c.box!=null){let m=c.box,v=p,y=g;p<m.x?v=m.x:p>m.x+m.width&&(v=m.x+m.width),g<m.y?y=m.y:g>m.y+m.height&&(y=m.y+m.height);let w=v-p,x=y-g,D=Math.sqrt(Math.pow(w,2)+Math.pow(x,2)),M=D-r;M>0&&(p=p+w*M/D,g=g+x*M/D)}o.x1=d,o.y1=h,o.x2=p,o.y2=g}else o.visible=!1})}getLabelOverflow(t,n,i){let s=-this.centerX,r=s+i.width,o=-this.centerY,a=o+i.height,l=1,c=1;n.x+l<s?c=(n.x+n.width-s)/n.width:n.x+n.width-l>r&&(c=(r-n.x)/n.width);let u=n.y+l<o||n.y+n.height-l>a,d=c===1?t.length:Math.floor(t.length*c)-1,h=this.bboxIntersectsSurroundingSeries(n);return{textLength:d,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:h}}bboxIntersectsSurroundingSeries(t){let{surroundingRadius:n}=this;if(n==null)return!1;let i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=n**2;return i.some(r=>r.x**2+r.y**2>s)}computeCalloutLabelCollisionOffsets(){let{radiusScale:t}=this,{calloutLabel:n,calloutLine:i}=this.properties,{offset:s,minSpacing:r}=n,o=t.convert(0),a=y=>!y.calloutLabel||y.outerRadius===0,l=this.calloutNodeData,c=l.filter(y=>!a(y));if(c.forEach(y=>{let w=y.calloutLabel;w!=null&&(w.hidden=!1,w.collisionTextAlign=void 0,w.collisionOffsetY=0)}),c.length<=1)return;let u=c.filter(y=>y.midCos<0).sort((y,w)=>y.midSin-w.midSin),d=c.filter(y=>y.midCos>=0).sort((y,w)=>y.midSin-w.midSin),h=c.filter(y=>y.midSin<0&&y.calloutLabel?.textAlign==="center").sort((y,w)=>y.midCos-w.midCos),p=c.filter(y=>y.midSin>=0&&y.calloutLabel?.textAlign==="center").sort((y,w)=>y.midCos-w.midCos),g=y=>{let w=y.calloutLabel;if(w==null)return Z.zero.clone();let x=y.outerRadius+i.length+s,D=y.midCos*x,M=y.midSin*x+w.collisionOffsetY,E=w.collisionTextAlign??w.textAlign,A=w.textBaseline;return hn.computeBBox(w.text,D,M,{font:this.properties.calloutLabel,textAlign:E,textBaseline:A})},f=(y,w,x)=>{let D=g(y).grow(r/2),M=g(w).grow(r/2);D.x<M.x+M.width&&D.x+D.width>M.x&&(x==="to-top"?D.y<M.y+M.height:D.y+D.height>M.y)&&(w.calloutLabel.collisionOffsetY=x==="to-top"?D.y-M.y-M.height:D.y+D.height-M.y)},m=y=>{let w=y.slice().sort((D,M)=>Math.abs(D.midSin)-Math.abs(M.midSin))[0],x=y.indexOf(w);for(let D=x-1;D>=0;D--){let M=y[D+1],E=y[D];f(M,E,"to-top")}for(let D=x+1;D<y.length;D++){let M=y[D-1],E=y[D];f(M,E,"to-bottom")}},v=y=>{let w=c.some(I=>I.calloutLabel.collisionOffsetY!==0),x=y.map(I=>g(I)),D=x.map(I=>I.clone().grow(r/2)),M=!1;for(let I=0;I<D.length&&!M;I++){let T=D[I];for(let P=I+1;P<y.length;P++){let O=D[P];if(T.collidesBBox(O)){M=!0;break}}}let E=l.map(I=>{let{startAngle:T,endAngle:P,outerRadius:O}=I;return{startAngle:T,endAngle:P,innerRadius:o,outerRadius:O}}),A=x.some(I=>E.some(T=>GV(I,T)));!M&&!w&&!A||y.filter(I=>I.calloutLabel.textAlign==="center").forEach(I=>{let T=I.calloutLabel;I.midCos<0?T.collisionTextAlign="right":I.midCos>0?T.collisionTextAlign="left":T.collisionTextAlign="center"})};m(u),m(d),v(h),v(p)}updateCalloutLabelNodes(t){let{radiusScale:n}=this,{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:o,color:a}=i,l=new hn;this.calloutLabelSelection.selectByTag(1).forEach(c=>{let{datum:u}=c,d=u.calloutLabel,h=n.convert(u.radius),p=Math.max(0,h);if(!d?.text||p===0||d.hidden){c.visible=!1;return}let g=p+r+o,f=u.midCos*g,m=u.midSin*g+d.collisionOffsetY,v={textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline};l.text=d.text,l.x=f,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v);let y=l.getBBox(),w=d.text,x=!0;if(i.avoidCollisions){let{textLength:D,hasVerticalOverflow:M}=this.getLabelOverflow(d.text,y,t);w=d.text.length===D?d.text:`${d.text.substring(0,D)}\u2026`,x=!M}c.text=w,c.x=f,c.y=m,c.setFont(this.properties.calloutLabel),c.setAlign(v),c.fill=a,c.visible=x})}computeLabelsBBox(t,n){let{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:o,maxCollisionOffset:a,minSpacing:l}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let c=[],u=new hn,d,{title:h}=this.properties;if(h?.text&&h.enabled){let p=this.getTitleTranslationY();isFinite(p)&&(u.text=h.text,u.x=0,u.y=p,u.setFont(h),u.setAlign({textBaseline:"bottom",textAlign:"center"}),d=u.getBBox(),c.push(d))}return this.calloutNodeData.forEach(p=>{let g=p.calloutLabel;if(!g||p.outerRadius===0)return null;let f=p.outerRadius+r+o,m=p.midCos*f,v=p.midSin*f+g.collisionOffsetY;u.text=g.text,u.x=m,u.y=v,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:g.collisionTextAlign??g.textAlign,textBaseline:g.textBaseline});let y=u.getBBox();if(g.box=y,Math.abs(g.collisionOffsetY)>a){g.hidden=!0;return}if(d){let w=-this.centerY,x=new Z(d.x-l,w,d.width+2*l,d.y+d.height+l-w);if(y.collidesBBox(x)){g.hidden=!0;return}}if(t.hideWhenNecessary){let{textLength:w,hasVerticalOverflow:x,hasSurroundingSeriesOverflow:D}=this.getLabelOverflow(g.text,y,n),M=g.text.length>2&&w<2;if(x||M||D){g.hidden=!0;return}}g.hidden=!1,c.push(y)}),c.length===0?null:Z.merge(c)}updateSectorLabelNodes(){let{radiusScale:t}=this,n=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:r,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.properties.sectorLabel,u=(d,h)=>{let{sectorLabel:p,outerRadius:g}=h,f=!1;if(p&&g!==0){let m=n*(1-l)+g*l+a;d.fill=c,d.fontStyle=s,d.fontWeight=r,d.fontSize=i,d.fontFamily=o,d.text=p.text,d.x=h.midCos*m,d.y=h.midSin*m,d.textAlign="center",d.textBaseline="middle";let v=d.getBBox(),y=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:w,endAngle:x}=h,D={startAngle:w,endAngle:x,innerRadius:n,outerRadius:g};y.every(([M,E])=>CC(M,E,D))&&(f=!0)}d.visible=f};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateInnerLabelNodes(){let t=[],n=[];this.innerLabelsSelection.each((d,h)=>{let{fontStyle:p,fontWeight:g,fontSize:f,fontFamily:m,color:v}=h;d.fontStyle=p,d.fontWeight=g,d.fontSize=f,d.fontFamily=m,d.text=h.text,d.x=0,d.y=0,d.fill=v,d.textAlign="center",d.textBaseline="alphabetic",t.push(d.getBBox()),n.push(h.spacing)});let i=d=>d===0?0:n[d],s=d=>d===n.length-1?0:n[d],r=t.reduce((d,h,p)=>d+h.height+i(p)+s(p),0),o=Math.max(...t.map(d=>d.width)),a=this.getInnerRadius(),c=Math.sqrt(Math.pow(o/2,2)+Math.pow(r/2,2))<=(a>0?a:this.getOuterRadius()),u=[];for(let d=0,h=-r/2;d<t.length;d++){let g=t[d].height+h+i(d);u.push(g),h=g+s(d)}this.innerLabelsSelection.each((d,h,p)=>{d.y=u[p],d.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(t){return UI(this,t)}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,properties:r}=this,{legendItemKey:o,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:u,angleKey:d,angleName:h,radiusKey:p,radiusName:g,tooltip:f}=r,m=this.properties.title.text;if(!i||!s)return;let{datumIndex:v}=t,y=s.dataSources.get(this.id)?.[v],{angleRawValues:w,legendItemValues:x,calloutLabelValues:D,sectorLabelValues:M}=this.getProcessedDataValues(i,s),E=w[v],A=x?.[v]??(a===d?void 0:D?.[v])??(c===d?void 0:M?.[v])??h;return f.formatTooltip({title:m,symbol:this.legendItemSymbol(v),data:[{label:A,fallbackLabel:d,value:Fo(E,3)}]},S({seriesId:n,datum:y,title:h,legendItemKey:o,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:u,angleKey:d,angleName:h,radiusKey:p,radiusName:g},this.getSectorFormat(y,v,!1)))}legendItemSymbol(t){let n=this.processedData?.dataSources.get(this.id)?.[t],i=this.getSectorFormat(n,t,!1);return{marker:{fill:i.fill,stroke:i.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}}}getLegendData(t){let{visible:n,processedData:i,dataModel:s,id:r,ctx:{legendManager:o}}=this;if(!s||!i||!this.properties.isValid()||t!=="category")return[];let{angleKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u,showInLegend:d}=this.properties;if(!u&&(!l||l===a)&&(!c||c===a))return[];let{angleRawValues:h,calloutLabelValues:p,sectorLabelValues:g,legendItemValues:f}=this.getProcessedDataValues(s,i),m=this.properties.title?.showInLegend&&this.properties.title.text,v=[],y=this.properties.hideZeroValueSectorsInLegend,w=i.dataSources.get(this.id),x=i.invalidData?.get(this.id);for(let D=0;D<i.input.count;D++){let M=w?.[D],E=h[D];if(x?.[D]===!0||y&&E===0)continue;let A=[];m&&A.push(m);let I=this.getLabels(M,2*Math.PI,2*Math.PI,!1,p?.[D],g?.[D],f?.[D]);u&&I.legendItem!==void 0?A.push(I.legendItem.text):l&&l!==a&&I.calloutLabel?.text!==void 0?A.push(I.calloutLabel?.text):c&&c!==a&&I.sectorLabel?.text!==void 0&&A.push(I.sectorLabel?.text),A.length!==0&&v.push({legendType:"category",id:r,datum:M,itemId:D,seriesId:r,enabled:n&&o.getItemEnabled({seriesId:r,itemId:D}),label:{text:A.join(" - ")},symbol:this.legendItemSymbol(D),legendItemName:u!=null?M[u]:void 0,hideInLegend:!d})}return v}setLegendState(t){let{id:n,ctx:{legendManager:i,updateService:s}}=this;t.forEach((r,o)=>i.toggleItem({enabled:r,seriesId:n,itemId:o})),i.update(),s.update(4)}animateEmptyUpdateReady(t){let{animationManager:n}=this.ctx,i=cc(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);kt(this.id,"nodes",n,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,r)=>this.getDatumId(r.datum,r.datumIndex)),kt(this.id,"innerCircle",n,[this.innerCircleSelection],i.innerCircle),Ke(this,"callout",n,this.calloutLabelSelection),Ke(this,"sector",n,this.labelSelection),Ke(this,"highlight",n,this.highlightLabelSelection),Ke(this,"inner",n,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:t,highlightSelection:n,phantomSelection:i,processedData:s,radiusScale:r,previousRadiusScale:o}=this,{animationManager:a}=this.ctx,l=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);let c=(l?.moved.size??0)===0,u=(s?.defs.keys.length??0)>0,d=s?.reduced?.animationValidation?.uniqueKeys??!0;(!c||!u||!d)&&this.ctx.animationManager.skipCurrentBatch();let h=!this.nodeData.some(g=>g.enabled),p=cc(!1,this.properties.rotation,r,o);kt(this.id,"nodes",a,[t,n,i],p.nodes,(g,f)=>this.getDatumId(f.datum,f.datumIndex),l),kt(this.id,"innerCircle",a,[this.innerCircleSelection],p.innerCircle),Ke(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Ke(this,"sector",this.ctx.animationManager,this.labelSelection),Ke(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==h&&(this.noVisibleData=h,Ke(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:t,highlightSelection:n,phantomSelection:i,radiusScale:s,previousRadiusScale:r}=this,{animationManager:o}=this.ctx,a=cc(!1,this.properties.rotation,s,r);kt(this.id,"nodes",o,[t,n,i],a.nodes,(l,c)=>this.getDatumId(c.datum,c.datumIndex)),kt(this.id,"innerCircle",o,[this.innerCircleSelection],a.innerCircle),_a(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),_a(this,"sector",this.ctx.animationManager,this.labelSelection),_a(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),_a(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(t,n){let{calloutLabelKey:i,sectorLabelKey:s,legendItemKey:r}=this.properties;return this.processedData?.reduced?.animationValidation?.uniqueKeys?r?qt(t[r]):i?qt(t[i]):s?qt(t[s]):`${n}`:`${n}`}};return e.className="DonutSeries",e.type="donut",e})(),Bge={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:Qa,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},legend:{enabled:!0}},Vge={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:Qa,xOffset:3,yOffset:3,blur:5}},legend:{enabled:!0}},jV=({takeColors:e,colorsCount:t})=>{let{fills:n,strokes:i}=e(t);return{fills:n,strokes:i,calloutLine:{colors:i}}},Gge={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new _ge(e),tooltipDefaults:{range:"exact"},themeTemplate:Bge,paletteFactory:jV},WV=class extends Ct{constructor(){super(...arguments),this.showInLegend=!1}};C([b(le)],WV.prototype,"showInLegend",2);var Td=class extends gn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};C([b(j)],Td.prototype,"offset",2);C([b(je.restrict({min:0,max:360}))],Td.prototype,"minAngle",2);C([b(j)],Td.prototype,"minSpacing",2);C([b(j)],Td.prototype,"maxCollisionOffset",2);C([b(le)],Td.prototype,"avoidCollisions",2);var $I=class extends gn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};C([b(je)],$I.prototype,"positionOffset",2);C([b(Qe)],$I.prototype,"positionRatio",2);var vw=class extends Se{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};C([b(Ki,{optional:!0})],vw.prototype,"colors",2);C([b(j)],vw.prototype,"length",2);C([b(j)],vw.prototype,"strokeWidth",2);var Ze=class extends Xi{constructor(){super(...arguments),this.fills=Object.values($t),this.strokes=Object.values(Tr),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new WV,this.shadow=new or,this.calloutLabel=new Td,this.sectorLabel=new $I,this.calloutLine=new vw,this.tooltip=new Un}};C([b(B)],Ze.prototype,"angleKey",2);C([b(B,{optional:!0})],Ze.prototype,"angleName",2);C([b(B,{optional:!0})],Ze.prototype,"angleFilterKey",2);C([b(B,{optional:!0})],Ze.prototype,"radiusKey",2);C([b(B,{optional:!0})],Ze.prototype,"radiusName",2);C([b(j,{optional:!0})],Ze.prototype,"radiusMin",2);C([b(j,{optional:!0})],Ze.prototype,"radiusMax",2);C([b(B,{optional:!0})],Ze.prototype,"calloutLabelKey",2);C([b(B,{optional:!0})],Ze.prototype,"calloutLabelName",2);C([b(B,{optional:!0})],Ze.prototype,"sectorLabelKey",2);C([b(B,{optional:!0})],Ze.prototype,"sectorLabelName",2);C([b(B,{optional:!0})],Ze.prototype,"legendItemKey",2);C([b(Ki)],Ze.prototype,"fills",2);C([b(Ki)],Ze.prototype,"strokes",2);C([b(Qe)],Ze.prototype,"fillOpacity",2);C([b(Qe)],Ze.prototype,"strokeOpacity",2);C([b(Gr)],Ze.prototype,"lineDash",2);C([b(j)],Ze.prototype,"lineDashOffset",2);C([b(j)],Ze.prototype,"cornerRadius",2);C([b(di,{optional:!0})],Ze.prototype,"itemStyler",2);C([b(je)],Ze.prototype,"rotation",2);C([b(je)],Ze.prototype,"outerRadiusOffset",2);C([b(Qe)],Ze.prototype,"outerRadiusRatio",2);C([b(j)],Ze.prototype,"strokeWidth",2);C([b(je)],Ze.prototype,"sectorSpacing",2);C([b(le)],Ze.prototype,"hideZeroValueSectorsInLegend",2);C([b(K)],Ze.prototype,"title",2);C([b(K)],Ze.prototype,"shadow",2);C([b(K)],Ze.prototype,"calloutLabel",2);C([b(K)],Ze.prototype,"sectorLabel",2);C([b(K)],Ze.prototype,"calloutLine",2);C([b(K)],Ze.prototype,"tooltip",2);var zge=class extends mg{constructor(e,t,n,i){super(e,t,n,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},Hge=(()=>{let e=class extends mw{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:WI,label:Yo}}),this.properties=new Ze,this.phantomNodeData=void 0,this.backgroundGroup=new ui({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new er,this.radiusScale=new er,this.phantomGroup=this.backgroundGroup.appendChild(new ye({name:"phantom"})),this.phantomSelection=Kt.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ye({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Kt(this.calloutLabelGroup,ye),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ye({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new pn({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=zge,this.angleScale=new er,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,n,i){super.attachSeries(t,n,i),t.appendChild(this.backgroundGroup)}detachSeries(t,n,i){super.detachSeries(t,n,i),t?.removeChild(this.backgroundGroup)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.backgroundGroup.zIndex=[0,t],!0):!1}nodeFactory(){let t=new Pn;return t.miterLimit=1e9,t}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(this.data==null||!this.properties.isValid())return;let{visible:n,id:i,ctx:{legendManager:s}}=this,{angleKey:r,angleFilterKey:o,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u}=this.properties,d=(v,y,w)=>n&&s.getItemEnabled({seriesId:i,itemId:w}),h=!this.ctx.animationManager.isSkipped(),p=[],g=[];u?p.push(tr(u,"band",{id:"legendItemKey"})):l?p.push(tr(l,"band",{id:"calloutLabelKey"})):c&&p.push(tr(c,"band",{id:"sectorLabelKey"}));let f=this.radiusScale.type,m=this.angleScale.type;a&&g.push(dI(a,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Le(a,f,{id:"radiusRaw"}),lc("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),l&&g.push(Le(l,"band",{id:"calloutLabelValue"})),c&&g.push(Le(c,"band",{id:"sectorLabelValue"})),u&&g.push(Le(u,"band",{id:"legendItemValue"})),o&&g.push(Up(o,m,{id:"angleFilterValue",onlyPositive:!0,validation:d,invalidValue:0}),Le(o,m,{id:"angleFilterRaw"}),lc("angleFilterValue",[0,1],0,0)),h&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&p.length>0&&g.push(Sd(this.id,this.processedData)),g.push(bd()),await this.requestDataModel(t,this.data,{props:[...p,Up(r,m,{id:"angleValue",onlyPositive:!0,validation:d,invalidValue:0}),Le(r,m,{id:"angleRaw"}),lc("angleValue",[0,1],0,0),...g]});for(let v of this.processedData?.defs?.values??[]){let{id:y,missing:w,property:x}=v,D=QE(this,w);y!=="angleRaw"&&D>0&&G.warnOnce(`no value was found for the key '${String(x)}' on ${D} data element${D>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:t=[],phantomNodeData:n}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=n,this.nodeDataRefresh=!1}getProcessedDataValues(t,n){let i=t.resolveColumnById(this,"angleValue",n),s=t.resolveColumnById(this,"angleRaw",n),r=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterValue",n):void 0,o=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterRaw",n):void 0,a=this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",n):void 0,l=this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",n):void 0,c=this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",n):void 0,u=this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",n):void 0,d=this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",n):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:r,angleFilterRawValues:o,radiusValues:a,radiusRawValues:l,calloutLabelValues:c,sectorLabelValues:u,legendItemValues:d}}createNodeData(){let{id:t,processedData:n,dataModel:i,angleScale:s,ctx:{legendManager:r},visible:o}=this,{rotation:a}=this.properties;if(!i||n?.type!=="ungrouped")return;let{angleValues:l,angleRawValues:c,angleFilterValues:u,angleFilterRawValues:d,radiusValues:h,radiusRawValues:p,calloutLabelValues:g,sectorLabelValues:f,legendItemValues:m}=this.getProcessedDataValues(i,n),v=d?.some((A,I)=>A>c[I])??!1,y=0,w=0,x=[],D=d!=null?[]:void 0,M=n.dataSources.get(this.id)??[],E=n.invalidData?.get(this.id);return M.forEach((A,I)=>{if(E?.[I]===!0)return;let T=v?u[I]:l[I],P=d!=null&&!v?Math.sqrt(d[I]/c[I]):1,O=s.convert(y)+tn(a);y=T,w+=T;let $=s.convert(y)+tn(a),ae=Math.abs($-O),ue=O+ae/2,Q=c[I],ge=(h?.[I]??1)*P,J=p?.[I],de=m?.[I],Y=this.getLabels(A,ue,ae,!0,g?.[I],f?.[I],de),te=this.getSectorFormat(A,I,!1),ee=S({itemId:I,series:this,datum:A,datumIndex:I,angleValue:Q,midAngle:ue,midCos:Math.cos(ue),midSin:Math.sin(ue),startAngle:O,endAngle:$,radius:ge,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(ge),0),sectorFormat:te,radiusValue:J,legendItemValue:de,enabled:o&&r.getItemEnabled({seriesId:t,itemId:I})},Y);x.push(ee),D?.push(R(S({},ee),{radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)}))}),this.zerosumOuterRing.visible=w===0,{itemId:t,nodeData:x,labelData:x,phantomNodeData:D}}getLabels(t,n,i,s,r,o,a){let{calloutLabel:l,sectorLabel:c,legendItemKey:u}=this.properties,d=!s||l.enabled?this.properties.calloutLabelKey:void 0,h=!s||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!h&&!u)return{};let p={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},g={};return d&&i>=tn(l.minAngle)&&(g.calloutLabel=R(S({},this.getTextAlignment(n)),{text:this.getLabelText(l,R(S({},p),{value:r})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(g.sectorLabel={text:this.getLabelText(c,R(S({},p),{value:o}))}),u!=null&&a!=null&&(g.legendItem={key:u,text:a}),g}getTextAlignment(t){let n=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Vp(t),s=-.75*Math.PI,r=i-s,o=Math.floor(r/(Math.PI/2)),a=cE(o,n.length);return n[a]}getSectorFormat(t,n,i){let{angleKey:s,radiusKey:r,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l,fills:c,strokes:u,itemStyler:d}=this.properties,h=u[n%u.length],{fill:p,fillOpacity:g,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:w,cornerRadius:x}=ke(i&&this.properties.highlightStyle.item,{fill:c.length>0?c[n%c.length]:void 0,stroke:h,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),D;return d&&(D=this.cachedDatumCallback(this.getDatumId(t,n)+(i?"-highlight":"-hide"),()=>d({datum:t,angleKey:s,radiusKey:r,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l,fill:p,strokeOpacity:v,stroke:f,strokeWidth:m,fillOpacity:g,lineDash:y,lineDashOffset:w,cornerRadius:x,highlighted:i,seriesId:this.id}))),{fill:D?.fill??p,fillOpacity:D?.fillOpacity??g,stroke:D?.stroke??f,strokeWidth:D?.strokeWidth??m,strokeOpacity:D?.strokeOpacity??v,lineDash:D?.lineDash??y,lineDashOffset:D?.lineDashOffset??w,cornerRadius:D?.cornerRadius??x}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){let n=[0,this.getOuterRadius()];this.radiusScale.range=n,t&&(this.previousRadiusScale.range=n);let i=s=>R(S({},s),{innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){let t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;let i=2+(this.properties.title?.spacing??0),s=Math.max(0,-t);return-t-i-s}update({seriesRect:t}){let{title:n}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=No(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),n){let r=this.getTitleTranslationY();n.node.y=isFinite(r)?r:0;let o=n.node.getBBox();n.node.visible=n.enabled&&isFinite(r)&&!this.bboxIntersectsSurroundingSeries(o)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){let{oldTitle:t}=this,{title:n}=this.properties;t!==n&&(t&&this.labelGroup?.removeChild(t.node),n&&(n.node.textBaseline="bottom",this.labelGroup?.appendChild(n.node)),this.oldTitle=n)}updateNodeMidPoint(){let t=n=>{let i=n.innerRadius+(n.outerRadius-n.innerRadius)/2;n.midPoint={x:n.midCos*Math.max(0,i),y:n.midSin*Math.max(0,i)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}updateSelections(){let{itemSelection:t,highlightSelection:n,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:r,labelSelection:o}=this,a=this.nodeData.map(c=>R(S({},c),{sectorFormat:S({},c.sectorFormat)})),l=(c,u)=>{c.update(u,void 0,d=>this.getDatumId(d.datum,d.datumIndex)),this.ctx.animationManager.isSkipped()&&c.cleanup()};l(t,this.nodeData),l(n,a),l(i,this.phantomNodeData??[]),r.update(this.calloutNodeData,c=>{let u=new Zi;u.tag=0,u.pointerEvents=1,c.appendChild(u);let d=new hn;d.tag=1,d.pointerEvents=1,c.appendChild(d)}),o.update(this.nodeData),s.update(a)}updateNodes(t){let n=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&n?.series===this,this.highlightLabel.visible=i&&n?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();let s=this.ctx.animationManager.isSkipped(),r=(o,a,l,c)=>{let u=this.getSectorFormat(a.datum,a.itemId,c);a.sectorFormat.fill=u.fill,a.sectorFormat.stroke=u.stroke,s&&(o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius),(c||s)&&(o.fill=u.fill,o.stroke=u.stroke),o.strokeWidth=u.strokeWidth,o.fillOpacity=u.fillOpacity,o.strokeOpacity=u.strokeOpacity,o.lineDash=u.lineDash,o.lineDashOffset=u.lineDashOffset,o.cornerRadius=u.cornerRadius,o.fillShadow=this.properties.shadow;let d=Math.max((this.properties.sectorSpacing+(u.stroke!=null?u.strokeWidth:0))/2,0);o.inset=d,o.lineJoin=this.properties.sectorSpacing>=0||d>0?"miter":"round"};this.itemSelection.each((o,a,l)=>r(o,a,l,!1)),this.highlightSelection.each((o,a,l)=>{r(o,a,l,!0),o.visible=a.itemId===n?.itemId}),this.phantomSelection.each((o,a,l)=>r(o,a,l,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{calloutLine:t}=this.properties,n=t.length,i=t.strokeWidth,s=t.colors??this.properties.strokes,{offset:r}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,a)=>{let l=o.datum,{calloutLabel:c,outerRadius:u}=l;if(c?.text&&!c.hidden&&u!==0){o.visible=!0,o.strokeWidth=i,o.stroke=s[a%s.length],o.fill=void 0;let d=l.midCos*u,h=l.midSin*u,p=l.midCos*(u+n),g=l.midSin*(u+n);if((c.collisionTextAlign??c.collisionOffsetY!==0)&&c.box!=null){let m=c.box,v=p,y=g;p<m.x?v=m.x:p>m.x+m.width&&(v=m.x+m.width),g<m.y?y=m.y:g>m.y+m.height&&(y=m.y+m.height);let w=v-p,x=y-g,D=Math.sqrt(Math.pow(w,2)+Math.pow(x,2)),M=D-r;M>0&&(p=p+w*M/D,g=g+x*M/D)}o.x1=d,o.y1=h,o.x2=p,o.y2=g}else o.visible=!1})}getLabelOverflow(t,n,i){let s=-this.centerX,r=s+i.width,o=-this.centerY,a=o+i.height,l=1,c=1;n.x+l<s?c=(n.x+n.width-s)/n.width:n.x+n.width-l>r&&(c=(r-n.x)/n.width);let u=n.y+l<o||n.y+n.height-l>a,d=c===1?t.length:Math.floor(t.length*c)-1,h=this.bboxIntersectsSurroundingSeries(n);return{textLength:d,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:h}}bboxIntersectsSurroundingSeries(t){let{surroundingRadius:n}=this;if(n==null)return!1;let i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=n**2;return i.some(r=>r.x**2+r.y**2>s)}computeCalloutLabelCollisionOffsets(){let{radiusScale:t}=this,{calloutLabel:n,calloutLine:i}=this.properties,{offset:s,minSpacing:r}=n,o=t.convert(0),a=y=>!y.calloutLabel||y.outerRadius===0,l=this.calloutNodeData,c=l.filter(y=>!a(y));if(c.forEach(y=>{let w=y.calloutLabel;w!=null&&(w.hidden=!1,w.collisionTextAlign=void 0,w.collisionOffsetY=0)}),c.length<=1)return;let u=c.filter(y=>y.midCos<0).sort((y,w)=>y.midSin-w.midSin),d=c.filter(y=>y.midCos>=0).sort((y,w)=>y.midSin-w.midSin),h=c.filter(y=>y.midSin<0&&y.calloutLabel?.textAlign==="center").sort((y,w)=>y.midCos-w.midCos),p=c.filter(y=>y.midSin>=0&&y.calloutLabel?.textAlign==="center").sort((y,w)=>y.midCos-w.midCos),g=y=>{let w=y.calloutLabel;if(w==null)return Z.zero.clone();let x=y.outerRadius+i.length+s,D=y.midCos*x,M=y.midSin*x+w.collisionOffsetY,E=w.collisionTextAlign??w.textAlign,A=w.textBaseline;return hn.computeBBox(w.text,D,M,{font:this.properties.calloutLabel,textAlign:E,textBaseline:A})},f=(y,w,x)=>{let D=g(y).grow(r/2),M=g(w).grow(r/2);D.x<M.x+M.width&&D.x+D.width>M.x&&(x==="to-top"?D.y<M.y+M.height:D.y+D.height>M.y)&&(w.calloutLabel.collisionOffsetY=x==="to-top"?D.y-M.y-M.height:D.y+D.height-M.y)},m=y=>{let w=y.slice().sort((D,M)=>Math.abs(D.midSin)-Math.abs(M.midSin))[0],x=y.indexOf(w);for(let D=x-1;D>=0;D--){let M=y[D+1],E=y[D];f(M,E,"to-top")}for(let D=x+1;D<y.length;D++){let M=y[D-1],E=y[D];f(M,E,"to-bottom")}},v=y=>{let w=c.some(I=>I.calloutLabel.collisionOffsetY!==0),x=y.map(I=>g(I)),D=x.map(I=>I.clone().grow(r/2)),M=!1;for(let I=0;I<D.length&&!M;I++){let T=D[I];for(let P=I+1;P<y.length;P++){let O=D[P];if(T.collidesBBox(O)){M=!0;break}}}let E=l.map(I=>{let{startAngle:T,endAngle:P,outerRadius:O}=I;return{startAngle:T,endAngle:P,innerRadius:o,outerRadius:O}}),A=x.some(I=>E.some(T=>GV(I,T)));!M&&!w&&!A||y.filter(I=>I.calloutLabel.textAlign==="center").forEach(I=>{let T=I.calloutLabel;I.midCos<0?T.collisionTextAlign="right":I.midCos>0?T.collisionTextAlign="left":T.collisionTextAlign="center"})};m(u),m(d),v(h),v(p)}updateCalloutLabelNodes(t){let{radiusScale:n}=this,{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:o,color:a}=i,l=new hn;this.calloutLabelSelection.selectByTag(1).forEach(c=>{let{datum:u}=c,d=u.calloutLabel,h=n.convert(u.radius),p=Math.max(0,h);if(!d?.text||p===0||d.hidden){c.visible=!1;return}let g=p+r+o,f=u.midCos*g,m=u.midSin*g+d.collisionOffsetY,v={textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline};l.text=d.text,l.x=f,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v);let y=l.getBBox(),w=d.text,x=!0;if(i.avoidCollisions){let{textLength:D,hasVerticalOverflow:M}=this.getLabelOverflow(d.text,y,t);w=d.text.length===D?d.text:`${d.text.substring(0,D)}\u2026`,x=!M}c.text=w,c.x=f,c.y=m,c.setFont(this.properties.calloutLabel),c.setAlign(v),c.fill=a,c.visible=x})}computeLabelsBBox(t,n){let{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:o,maxCollisionOffset:a,minSpacing:l}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let c=[],u=new hn,d,{title:h}=this.properties;if(h?.text&&h.enabled){let p=this.getTitleTranslationY();isFinite(p)&&(u.text=h.text,u.x=0,u.y=p,u.setFont(h),u.setAlign({textBaseline:"bottom",textAlign:"center"}),d=u.getBBox(),c.push(d))}return this.calloutNodeData.forEach(p=>{let g=p.calloutLabel;if(!g||p.outerRadius===0)return null;let f=p.outerRadius+r+o,m=p.midCos*f,v=p.midSin*f+g.collisionOffsetY;u.text=g.text,u.x=m,u.y=v,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:g.collisionTextAlign??g.textAlign,textBaseline:g.textBaseline});let y=u.getBBox();if(g.box=y,Math.abs(g.collisionOffsetY)>a){g.hidden=!0;return}if(d){let w=-this.centerY,x=new Z(d.x-l,w,d.width+2*l,d.y+d.height+l-w);if(y.collidesBBox(x)){g.hidden=!0;return}}if(t.hideWhenNecessary){let{textLength:w,hasVerticalOverflow:x,hasSurroundingSeriesOverflow:D}=this.getLabelOverflow(g.text,y,n),M=g.text.length>2&&w<2;if(x||M||D){g.hidden=!0;return}}g.hidden=!1,c.push(y)}),c.length===0?null:Z.merge(c)}updateSectorLabelNodes(){let{radiusScale:t}=this,n=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:r,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.properties.sectorLabel,u=n>0,d=this.ctx.legendManager.getData(this.id)?.filter(p=>p.enabled).length===1,h=(p,g)=>{let{sectorLabel:f,outerRadius:m,startAngle:v,endAngle:y}=g,w=!1;if(f&&m!==0){let x=n*(1-l)+m*l+a;p.fill=c,p.fontStyle=s,p.fontWeight=r,p.fontSize=i,p.fontFamily=o,p.text=f.text,!u&&d?(p.x=0,p.y=0):(p.x=g.midCos*x,p.y=g.midSin*x),p.textAlign="center",p.textBaseline="middle";let M=p.getBBox(),E=[[M.x,M.y],[M.x+M.width,M.y],[M.x+M.width,M.y+M.height],[M.x,M.y+M.height]],A={startAngle:v,endAngle:y,innerRadius:n,outerRadius:m};E.every(([I,T])=>CC(I,T,A))&&(w=!0)}p.visible=w};this.labelSelection.each(h),this.highlightLabelSelection.each(h)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}pickNodeClosestDatum(t){return UI(this,t)}getTooltipContent(t){let{id:n,dataModel:i,processedData:s,properties:r}=this,{legendItemKey:o,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:u,angleKey:d,angleName:h,radiusKey:p,radiusName:g,tooltip:f}=r,m=this.properties.title.text;if(!i||!s)return;let{datumIndex:v}=t,y=s.dataSources.get(this.id)?.[v],{angleRawValues:w,legendItemValues:x,calloutLabelValues:D,sectorLabelValues:M}=this.getProcessedDataValues(i,s),E=w[v],A=x?.[v]??(a===d?void 0:D?.[v])??(c===d?void 0:M?.[v])??h;return f.formatTooltip({title:m,symbol:this.legendItemSymbol(v),data:[{label:A,fallbackLabel:d,value:Fo(E,3)}]},S({seriesId:n,datum:y,title:h,legendItemKey:o,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:u,angleKey:d,angleName:h,radiusKey:p,radiusName:g},this.getSectorFormat(y,v,!1)))}legendItemSymbol(t){let n=this.processedData?.dataSources.get(this.id)?.[t],i=this.getSectorFormat(n,t,!1);return{marker:{fill:i.fill,stroke:i.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}}}getLegendData(t){let{id:n,visible:i,processedData:s,dataModel:r,ctx:{legendManager:o}}=this;if(!r||!s||t!=="category")return[];let{angleKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u,showInLegend:d}=this.properties;if(!u&&(!l||l===a)&&(!c||c===a))return[];let{calloutLabelValues:h,sectorLabelValues:p,legendItemValues:g,angleRawValues:f}=this.getProcessedDataValues(r,s),m=this.properties.title?.showInLegend&&this.properties.title.text,v=[],y=this.properties.hideZeroValueSectorsInLegend,w=s.dataSources.get(this.id),x=s.invalidData?.get(this.id);for(let D=0;D<s.input.count;D++){let M=w?.[D],E=f[D];if(x?.[D]===!0||y&&E===0)continue;let A=[];m&&A.push(m);let I=this.getLabels(M,2*Math.PI,2*Math.PI,!1,h?.[D],p?.[D],g?.[D]);u&&I.legendItem!==void 0?A.push(I.legendItem.text):l&&l!==a&&I.calloutLabel?.text!==void 0?A.push(I.calloutLabel?.text):c&&c!==a&&I.sectorLabel?.text!==void 0&&A.push(I.sectorLabel?.text),A.length!==0&&v.push({legendType:"category",id:n,datum:M,itemId:D,seriesId:n,enabled:i&&o.getItemEnabled({seriesId:n,itemId:D}),label:{text:A.join(" - ")},symbol:this.legendItemSymbol(D),legendItemName:u!=null?M[u]:void 0,hideInLegend:!d})}return v}setLegendState(t){let{id:n,ctx:{legendManager:i,updateService:s}}=this;t.forEach((r,o)=>i.toggleItem({enabled:r,seriesId:n,itemId:o})),i.update(),s.update(4)}animateEmptyUpdateReady(t){let{animationManager:n}=this.ctx,i=cc(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);kt(this.id,"nodes",n,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,r)=>this.getDatumId(r.datum,r.datumIndex)),Ke(this,"callout",n,this.calloutLabelSelection),Ke(this,"sector",n,this.labelSelection),Ke(this,"highlight",n,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:t,highlightSelection:n,phantomSelection:i,processedData:s,radiusScale:r,previousRadiusScale:o}=this,{animationManager:a}=this.ctx,l=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);let c=(l?.moved.size??0)===0,u=(s?.defs.keys.length??0)>0,d=s?.reduced?.animationValidation?.uniqueKeys??!0;(!c||!u||!d)&&this.ctx.animationManager.skipCurrentBatch();let h=cc(!1,this.properties.rotation,r,o);kt(this.id,"nodes",a,[t,n,i],h.nodes,(p,g)=>this.getDatumId(g.datum,g.datumIndex),l),Ke(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Ke(this,"sector",this.ctx.animationManager,this.labelSelection),Ke(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:t,highlightSelection:n,phantomSelection:i,radiusScale:s,previousRadiusScale:r}=this,{animationManager:o}=this.ctx,a=cc(!1,this.properties.rotation,s,r);kt(this.id,"nodes",o,[t,n,i],a.nodes,(l,c)=>this.getDatumId(c.datum,c.datumIndex)),_a(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),_a(this,"sector",this.ctx.animationManager,this.labelSelection),_a(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(t,n){let{calloutLabelKey:i,sectorLabelKey:s,legendItemKey:r}=this.properties;return this.processedData?.reduced?.animationValidation?.uniqueKeys?r?qt(t[r]):i?qt(t[i]):s?qt(t[s]):`${n}`:`${n}`}};return e.className="PieSeries",e.type="pie",e})(),jge={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new Hge(e),tooltipDefaults:{range:"exact"},themeTemplate:Vge,paletteFactory:jV};function UV(){Nr.register(nV,Qpe,Spe,yge,PV,Rge,OV,Fge,Gge,jge,kge);for(let e of[wd,md,yg,iw,wg])Ro.register(e.type,{moduleFactory:t=>new e(t)})}function Wge(){for(let e of Nr.modules){if(e.packageType==="enterprise"&&!phe(e)&&G.errorOnce("Unexpected enterprise module registered: "+e.identifier),e.type==="root"&&e.themeTemplate)for(let t of e.chartTypes)$M.set(t,e.themeTemplate);if(e.type==="series"){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);Si.register(e.identifier,e)}if(e.type==="series-option"&&e.themeTemplate)for(let t of e.seriesTypes)Si.setThemeTemplate(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(let t of e.axisTypes){let n=Ro.getThemeTemplate(t),i=ke(e.themeTemplate,n);Ro.setThemeTemplate(t,i)}e.type==="axis"&&Ro.register(e.identifier,e),e.type==="legend"&&JE.register(e.identifier,e)}if(Nr.hasEnterpriseModules()){let e=ghe();e.length>0&&G.errorOnce("Enterprise modules expected but not registered: ",e)}}var ud=class extends _E{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}updatePosition(){super.updatePosition();let e=sC(this),t=NE(e);this.axisGroup.setProperties(this.getAxisTransform()),this.gridLineGroupSelection.each(t),this.tickLineGroupSelection.each(t),this.tickLabelGroupSelection.each(OE())}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};C([b(ut(["polygon","circle"],"a polar axis shape"))],ud.prototype,"shape",2);C([b(Qe)],ud.prototype,"innerRadiusRatio",2);var Uge=(()=>{let e=class extends QC{constructor(t,n){super(t,n),this.padding=new Ya(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(t){let{layoutBox:n}=t;n.shrink(this.seriesArea.padding.toJson());let i=n.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach(s=>s.update()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(t,n,i,s){let r=this.axes.find(c=>c.direction==="x"),o=this.axes.find(c=>c.direction==="y");if(!(r instanceof ud)||!(o instanceof ud))return;let a=r.scale,l=o.innerRadiusRatio;r.innerRadiusRatio=l,r.computeRange(),r.gridLength=s,o.gridAngles=a.ticks({nice:r.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.map(c=>a.convert(c)),o.gridRange=r.range,o.range=[s,s*l],[r,o].forEach(c=>{c.translation.x=t.x+n,c.translation.y=t.y+i,c.calculateLayout()})}async computeCircle(t){let n=this.series.filter($ge),i=this.axes.filter(Yge),s=(u,d,h)=>{this.updateAxes(t,u,d,h),n.forEach(g=>{g.centerX=u,g.centerY=d,g.radius=h});let p=n.filter(g=>g.type==="donut"||g.type==="pie");if(p.length>1){let g=p.map(f=>{let m=f.getInnerRadius();return{series:f,innerRadius:m}}).sort((f,m)=>f.innerRadius-m.innerRadius);g.at(-1).series.surroundingRadius=void 0;for(let f=0;f<g.length-1;f++)g[f].series.surroundingRadius=g[f+1].innerRadius}},r=t.width/2,o=t.height/2,a=Math.max(0,Math.min(t.width,t.height)/2),l=a;s(r,o,l);let c=async({hideWhenNecessary:u=!1}={})=>{let d=[];for(let g of sc(i,n)){let f=await g.computeLabelsBBox({hideWhenNecessary:u},t);f&&d.push(f)}if(d.length===0){s(r,o,a);return}let h=Z.merge(d),p=this.refineCircle(h,l,t);s(p.centerX,p.centerY,p.radius),l=p.radius};await c(),await c(),await c(),await c({hideWhenNecessary:!0}),await c({hideWhenNecessary:!0});for(let u of sc(i,n))await u.computeLabelsBBox({hideWhenNecessary:!0},t);return{radius:l,centerX:r,centerY:o}}refineCircle(t,n,i){let r=-n,o=-n,a=n,l=n,c=Math.max(0,r-t.x),u=Math.max(0,o-t.y),d=Math.max(0,t.x+t.width-a),h=Math.max(0,t.y+t.height-l);c=d=Math.max(c,d),u=h=Math.max(u,h);let p=i.width-c-d,g=i.height-u-h,f=Math.min(p,g)/2,m=.5*i.width/2,v=.5*i.height/2,y=Math.min(m,v);if(f<y){f=y;let D=c+d,M=u+h;if(2*f+M>i.height){let E=i.height-2*f;Math.min(u,h)*2>E?(u=E/2,h=E/2):u>h?u=E-h:h=E-u}if(2*f+D>i.width){let E=i.width-2*f;Math.min(c,d)*2>E?(c=E/2,d=E/2):c>d?c=E-d:d=E-c}}let w=c+2*f+d,x=u+2*f+h;return{centerX:(i.width-w)/2+c+f,centerY:(i.height-x)/2+u+f,radius:f}}};return e.className="PolarChart",e.type="polar",e})();function $ge(e){return e instanceof mw}function Yge(e){return e instanceof ud}var Kge={type:"chart",name:"polar",detect:w4,create(e,t){return new Uge(e,t)}},ko={isEnterprise:!1};var qge=void 0,Zge=void 0;Zge=qge;var Xge=void 0,Qge=void 0;Qge=Xge;var $V=(e=>(e.POINTER="pointer",e.NODE="node",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e))($V||{}),Jge=void 0,efe=void 0;efe=Jge;var tfe=void 0,nfe=void 0;nfe=tfe;var Cs=Symbol("IGNORED_PROP");function Ui(e,t){let n={};for(let[i,s]of Object.entries(t))s!==Cs&&Object.hasOwn(e,i)&&(n[i]=s);return n}function YV(e){if(e===void 0)return;let{enabled:t,showArrow:n,range:i,position:s,delay:r,wrapping:o}=e;return Object.fromEntries(Object.entries({enabled:t,showArrow:n,range:i,position:s,delay:r,wrapping:o}).filter(([l,c])=>c!==void 0))}function ife(e){return e.type==="radial-gauge"}function sfe(e){return e.type==="linear-gauge"}function rfe(e){let dt=e,{animation:t,background:n,container:i,contextMenu:s,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:u,overrideDevicePixelRatio:d,padding:h,subtitle:p,theme:g,title:f,width:m,type:v,cursor:y,nodeClickRange:w,tooltip:x,value:D,scale:M={},startAngle:E,endAngle:A,highlightStyle:I,segmentation:T,bar:P,needle:O,targets:$,outerRadius:ae,innerRadius:ue,outerRadiusRatio:Q,innerRadiusRatio:he,cornerRadius:ge,cornerMode:J,label:de,secondaryLabel:Y,spacing:te}=dt,ee=He(dt,["animation","background","container","contextMenu","footnote","height","listeners","locale","minHeight","minWidth","overrideDevicePixelRatio","padding","subtitle","theme","title","width","type","cursor","nodeClickRange","tooltip","value","scale","startAngle","endAngle","highlightStyle","segmentation","bar","needle","targets","outerRadius","innerRadius","outerRadiusRatio","innerRadiusRatio","cornerRadius","cornerMode","label","secondaryLabel","spacing"]),{fills:Ce,fillMode:me,fill:Re,fillOpacity:ne,stroke:ie,strokeWidth:z,strokeOpacity:X,lineDash:oe,lineDashOffset:Ge,min:ze=0,max:nt=1,interval:rt={},label:Nt={}}=M,Ot=Ui(e,{animation:t,background:n,container:i,contextMenu:s,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:u,overrideDevicePixelRatio:d,padding:h,subtitle:p,theme:g,title:f,tooltip:YV(x),width:m}),Xt=Ui(M,{fills:Ce,fillMode:me,fill:Re,fillOpacity:ne,stroke:ie,strokeWidth:z,strokeOpacity:X,lineDash:oe,lineDashOffset:Ge}),pi=Ui(e,S({startAngle:Cs,endAngle:Cs,needle:O!=null?S({enabled:!0},O):Cs,scale:Xt,type:v,cursor:y,nodeClickRange:w,listeners:a,tooltip:x,value:D,highlightStyle:I,segmentation:T,bar:P,targets:$,outerRadius:ae,innerRadius:ue,outerRadiusRatio:Q,innerRadiusRatio:he,cornerRadius:ge,cornerMode:J,label:de,secondaryLabel:Y,spacing:te},ee)),on=[{type:"angle-number",min:ze,max:nt,startAngle:E,endAngle:A,interval:rt??{},label:Nt??{}},{type:"radius-number"}];return R(S({},Ot),{series:[pi],axes:on})}function ofe(e){let dt=e,{animation:t,background:n,container:i,contextMenu:s,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:u,overrideDevicePixelRatio:d,padding:h,subtitle:p,theme:g,title:f,width:m,type:v,cursor:y,nodeClickRange:w,tooltip:x,value:D,scale:M={},direction:E="vertical",thickness:A,highlightStyle:I,segmentation:T,bar:P,targets:O,cornerRadius:$,cornerMode:ae,label:ue}=dt,Q=He(dt,["animation","background","container","contextMenu","footnote","height","listeners","locale","minHeight","minWidth","overrideDevicePixelRatio","padding","subtitle","theme","title","width","type","cursor","nodeClickRange","tooltip","value","scale","direction","thickness","highlightStyle","segmentation","bar","targets","cornerRadius","cornerMode","label"]),{fills:he,fillMode:ge,fill:J,fillOpacity:de,stroke:Y,strokeWidth:te,strokeOpacity:ee,lineDash:Ce,lineDashOffset:me,min:Re=0,max:ne=1,interval:ie={},label:z={}}=M,X=Ui(e,{animation:t,background:n,container:i,contextMenu:s,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:u,overrideDevicePixelRatio:d,padding:h,subtitle:p,theme:g,title:f,tooltip:YV(x),width:m}),oe=Ui(M,{fills:he,fillMode:ge,fill:J,fillOpacity:de,stroke:Y,strokeWidth:te,strokeOpacity:ee,lineDash:Ce,lineDashOffset:me}),Ge=Ui(e,S({scale:oe,type:v,cursor:y,nodeClickRange:w,listeners:a,tooltip:x,value:D,direction:E,thickness:A,highlightStyle:I,segmentation:T,bar:P,targets:O,cornerRadius:$,cornerMode:ae,label:ue},Q)),bn=z,{placement:ze}=bn,nt=He(bn,["placement"]),rt,Nt,Ot=E==="horizontal";Ot?(rt=ze==="before"?"top":"bottom",Nt="left"):(rt=ze==="after"?"right":"left",Nt="bottom");let Xt={type:"number",position:rt,min:Re,max:ne,reverse:!Ot,interval:ie,label:nt,nice:!1},pi={type:"number",position:Nt,min:0,max:1,label:{enabled:!1}},on=Ot?[Xt,pi]:[pi,Xt];return R(S({},X),{series:[Ge],axes:on})}function $3(e,t){if(t==null)return e;let s=t,{targets:n}=s,i=He(s,["targets"]);return e=ke(e,i),e.targets!=null&&n!=null&&(e.targets=Qy(e.targets,n)),e}function afe(e,t){if(ife(e)){let y=$3(e,t);return rfe(y)}else if(sfe(e)){let y=$3(e,t);return ofe(y)}let{animation:n,background:i,container:s,contextMenu:r,footnote:o,height:a,listeners:l,locale:c,minHeight:u,minWidth:d,padding:h,subtitle:p,theme:g,title:f,tooltip:m,width:v}=e;return Ui(e,{animation:n,background:i,container:s,contextMenu:r,footnote:o,height:a,listeners:l,locale:c,minHeight:u,minWidth:d,padding:h,subtitle:p,theme:g,title:f,tooltip:m,width:v})}var vs={stroke:Lt},Tn={fill:Mg},Y3={color:"white",fill:Lt},xo={color:Lt},wC={color:Dg,fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"}},Oy=R(S({},wC),{textAlign:"left"}),tE=R(S({},wC),{fontSize:{$ref:"fontSize"},color:Ag,fill:Eg,stroke:Ig,strokeWidth:1,divider:{stroke:Rg,strokeWidth:1,strokeOpacity:.5}}),yM=R(S({},vs),{background:{fill:en,fillOpacity:.2},handle:S({},Tn),text:S({},xo),statistics:S({},tE)}),lfe={line:R(S({},vs),{handle:S({},Tn),text:S({},xo)}),"horizontal-line":R(S({},vs),{handle:S({},Tn),axisLabel:S({},Y3),text:S({},xo)}),"vertical-line":R(S({},vs),{handle:S({},Tn),axisLabel:S({},Y3),text:S({},xo)}),"disjoint-channel":R(S({},vs),{background:{fill:en,fillOpacity:.2},handle:S({},Tn),text:S({},xo)}),"parallel-channel":R(S({},vs),{background:{fill:en,fillOpacity:.2},handle:S({},Tn),text:S({},xo)}),"fibonacci-retracement":R(S({},vs),{strokes:Yp,rangeStroke:Lt,handle:S({},Tn),text:R(S({},xo),{position:"center"}),label:R(S({},wC),{color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}})}),"fibonacci-retracement-trend-based":R(S({},vs),{strokes:Yp,rangeStroke:Lt,handle:S({},Tn),text:R(S({},xo),{position:"center"}),label:R(S({},wC),{color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}})}),callout:R(S(S({},vs),Oy),{color:{$ref:"textColor"},handle:S({},Tn),fill:en,fillOpacity:.2}),comment:R(S({},Oy),{color:"white",fontWeight:700,handle:S({},Tn),fill:Lt}),note:R(S({},Oy),{color:Lg,fill:Lt,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:S({},Tn),background:{fill:Tg,stroke:kg,strokeWidth:1}}),text:R(S({},Oy),{handle:S({},Tn)}),arrow:R(S({},vs),{handle:S({},Tn),text:S({},xo)}),"arrow-up":{fill:Sg,handle:R(S({},Tn),{stroke:Lt})},"arrow-down":{fill:xg,handle:R(S({},Tn),{stroke:Lt})},"date-range":S({},yM),"price-range":S({},yM),"date-price-range":S({},yM),"quick-date-price-range":{up:R(S({},vs),{fill:en,fillOpacity:.2,handle:S({},Tn),statistics:R(S({},tE),{color:"#fff",fill:en,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})}),down:R(S({},vs),{stroke:qp,fill:Kp,fillOpacity:.2,handle:R(S({},Tn),{stroke:qp}),statistics:R(S({},tE),{color:"#fff",fill:Kp,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})})}};function dn(e,t){if(yn(e))return t(e)}var cfe=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],ufe=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];function dfe(e,t,n){let $=e,{dateKey:i="date",highKey:s="high",openKey:r="open",lowKey:o="low",closeKey:a="close",volumeKey:l="volume",chartType:c="candlestick",navigator:u=!1,volume:d=!0,rangeButtons:h=!0,statusBar:p=!0,toolbar:g=!0,zoom:f=!0,theme:m,data:v}=$,y=He($,["dateKey","highKey","openKey","lowKey","closeKey","volumeKey","chartType","navigator","volume","rangeButtons","statusBar","toolbar","zoom","theme","data"]),w=pfe(m,c,i,s,o,r,a),x=hfe(m,n,r,a,d,l),M={navigator:S({enabled:u},d?{miniChart:{enabled:u,series:[{type:"line",xKey:i,yKey:l,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null)},E=typeof m=="string"?!0:m?.overrides?.common?.annotations?.axesButtons?.enabled??!0,A={annotations:{enabled:g,optionsToolbar:{enabled:g},snap:!0,axesButtons:{enabled:E},toolbar:{enabled:g,buttons:ufe,padding:0},data:v,xKey:i,volumeKey:d?l:void 0}},I=p?{statusBar:{enabled:!0,data:v,highKey:s,openKey:r,lowKey:o,closeKey:a,volumeKey:d?l:void 0}}:null,T={zoom:{enabled:f,autoScaling:{enabled:!0},enableIndependentAxes:!0}},P={ranges:{enabled:h}},O=d?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return S(S(S(S(S(S({theme:S({baseTheme:typeof m=="string"?m:"ag-financial"},ke(typeof m=="object"?m:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:g},annotations:S({},lfe)}}})),animation:{enabled:!1},legend:{enabled:!1},series:[...x,...w],axes:[{type:"number",position:"right",keys:[r,a,s,o],interval:{maxSpacing:dn(m,ae=>ae.overrides?.common?.axes?.number?.interval?.maxSpacing)??45},label:{format:dn(m,ae=>ae.overrides?.common?.axes?.number?.label?.format)??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...O,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:v},A),M),I),T),P),y)}function hfe(e,t,n,i,s,r){if(!s)return[];let o=dn(e,l=>l.overrides?.bar?.series?.fill),a=o?{fill:o}:{itemStyler({datum:l}){let{up:c,down:u}=t().palette;return{fill:l[n]<l[i]?c?.fill:u?.fill}}};return[R(S({type:"bar",xKey:"date",yKey:r,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:dn(e,l=>l.overrides?.bar?.series?.fillOpacity)??.5},a),{focusPriority:1,fastDataProcessing:!0})]}var CM="range-area";function pfe(e,t,n,i,s,r,o){let a={xKey:n,openKey:r,closeKey:o,highKey:i,lowKey:s},l={xKey:n,yKey:o},c={pickOutsideVisibleMinorAxis:!0};switch(t??"candlestick"){case"ohlc":return gfe(c,a);case"line":return ffe(c,e,l);case"step-line":return mfe(c,e,l);case"hlc":return vfe(c,e,l,a);case"high-low":return yfe(c,e,a);case"candlestick":return K3(c,a);case"hollow-candlestick":return Cfe(c,e,a);default:return G.warnOnce(`unknown chart type: ${t}; expected one of: ${cfe.join(", ")}`),K3(c,a)}}function gfe(e,t){return[S(S({type:"ohlc",focusPriority:0},e),t)]}function ffe(e,t,n){return[R(S(S({type:"line",focusPriority:0},e),n),{stroke:dn(t,i=>i.overrides?.line?.series?.stroke)??Id,marker:dn(t,i=>i.overrides?.line?.series?.marker)??{enabled:!1}})]}function mfe(e,t,n){return[R(S(S({type:"line",focusPriority:0},e),n),{stroke:dn(t,i=>i.overrides?.line?.series?.stroke)??Id,interpolation:dn(t,i=>i.overrides?.line?.series?.interpolation)??{type:"step"},marker:dn(t,i=>i.overrides?.line?.series?.marker)??{enabled:!1}})]}function vfe(e,t,n,{xKey:i,highKey:s,closeKey:r,lowKey:o}){let a=KV(CM,t);return[R(S({type:CM,focusPriority:0},e),{xKey:i,yHighKey:s,yLowKey:r,fill:a.fill??Sg,stroke:a.stroke??ow,fillOpacity:dn(t,l=>l.overrides?.["range-area"]?.series?.fillOpacity)??.3,strokeWidth:dn(t,l=>l.overrides?.["range-area"]?.series?.strokeWidth)??2}),R(S({type:CM,focusPriority:0},e),{xKey:i,yHighKey:r,yLowKey:o,fill:a.fill??xg,stroke:a.stroke??aw,fillOpacity:dn(t,l=>l.overrides?.["range-area"]?.series?.fillOpacity)??.3,strokeWidth:dn(t,l=>l.overrides?.["range-area"]?.series?.strokeWidth)??2}),R(S(S({type:"line"},e),n),{stroke:dn(t,l=>l.overrides?.line?.series?.stroke)??cw,strokeWidth:dn(t,l=>l.overrides?.line?.series?.strokeWidth)??2,marker:dn(t,l=>l.overrides?.line?.series?.marker)??{enabled:!1}})]}function yfe(e,t,{xKey:n,highKey:i,lowKey:s}){let r=KV("range-bar",t);return[R(S({type:"range-bar"},e),{xKey:n,yHighKey:i,yLowKey:s,fill:r.fill??lw,stroke:r.stroke??Id,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0})]}function K3(e,t){return[S(S({type:"candlestick",focusPriority:0},e),t)]}function Cfe(e,t,n){let i=dn(t,s=>s.overrides?.candlestick?.series?.item);return[R(S(S({type:"candlestick",focusPriority:0},e),n),{item:{up:{fill:i?.up?.fill??"transparent"}}})]}function KV(e,t){let n=dn(t,s=>s.overrides?.[e]?.series?.fill),i=dn(t,s=>s.overrides?.[e]?.series?.stroke);return{fill:n,stroke:i}}var qV={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:hw,lineDash:[0],label:{enabled:!1}}},wM=R(S({},qV),{nice:!1}),bM={position:{type:"sparkline"}},SM={style:[{stroke:{$ref:"gridLineColor"}}],width:2},wfe={number:{gridLine:SM},time:{gridLine:SM},category:{gridLine:SM}},bfe={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:R(S({},wM),{interval:{values:[0]}}),log:S({},wM),time:S({},wM),category:S({},qV)}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:R(S({},bM),{range:"nearest"}),axes:wfe},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3},tooltip:bM}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4,tooltip:bM}}}},ZV=li(Sfe);function Sfe(e,t){return typeof e=="string"?R(S({},t),{baseTheme:e}):e!=null?R(S({},e),{baseTheme:ZV(e.baseTheme,t)}):t}function XV(e){if(Array.isArray(e)&&e.length!==0){let t=e[0];if(typeof t=="number")return{data:e.map((i,s)=>({x:s,y:i})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(t))return{data:e.map(i=>({x:i[0],y:i[1],datum:i})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}return{data:e}}function xfe(e,t){switch(e?.type){case"number":{let{type:n,min:i,max:s,reverse:r}=e;return Ui(e,{type:n,reverse:r,min:i,max:s})}case"time":{let{type:n,min:i,max:s,reverse:r}=e;return Ui(e,{type:n,reverse:r,min:i,max:s})}case"category":{let{type:n,paddingInner:i,paddingOuter:s,reverse:r}=e;return Ui(e,{type:n,reverse:r,paddingInner:i,paddingOuter:s})}}return{type:t}}function Dfe(e,t,n){let i={};return e?.stroke!=null&&(i.style=[{stroke:e?.stroke}],i.enabled??(i.enabled=!0)),e?.strokeWidth!=null&&(i.width=e?.strokeWidth,i.enabled??(i.enabled=!0)),n.type==="bar"&&n.direction!=="horizontal"&&(i.enabled??(i.enabled=!0)),e?.visible!=null&&(i.enabled=e.visible),i.enabled??(i.enabled=t),i}var Mfe=li((e,t,n)=>i=>{let s=i.datum[i.xKey],r=i.datum[i.yKey],o=n!=null?i.datum[n]:i.datum,a=t?.renderer?.({context:e,datum:o,xValue:s,yValue:r});if(typeof a=="string")return a;let l=a?.title,c=a?.content;return l!=null&&c!=null?{heading:l,title:void 0,data:[{label:void 0,value:c}]}:{heading:l??c??r.toFixed(2),title:void 0,data:[]}});function Efe(e){let ae=e,{background:t,container:n,height:i,listeners:s,locale:r,minHeight:o,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:u,theme:d,data:h,crosshair:p,axis:g,min:f,max:m,tooltip:v,context:y}=ae,w=He(ae,["background","container","height","listeners","locale","minHeight","minWidth","overrideDevicePixelRatio","padding","width","theme","data","crosshair","axis","min","max","tooltip","context"]),x=Ui(e,{background:t,container:n,height:i,listeners:s,locale:r,minHeight:o,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:u,tooltip:Cs,context:Cs,data:Cs,crosshair:Cs,axis:Cs,min:Cs,max:Cs,theme:Cs}),{data:D,series:[M]=[],datumKey:E}=XV(h),A=w;M!=null&&Object.assign(A,M),A.tooltip=R(S({},v),{renderer:Mfe(y,v,E)}),x.theme=ZV(d,bfe),x.data=D,x.series=[A];let I=A.type!=="bar"||A.direction!=="horizontal",[T,P]=I?["bottom","left"]:["left","bottom"],O=S(R(S({},xfe(g,"category")),{position:T}),Ui(e,{crosshair:p})),$=S({type:"number",gridLine:Dfe(g,!1,e),position:P},Ui(e,{min:f,max:m}));return x.axes=I?[$,O]:[O,$],x}var Ife={"price-volume":dfe,gauge:afe,sparkline:Efe},Afe={sparkline:XV};function q3(e,t){let n=[],i=S4(e),s=Ho(e),r=s?Mt.get(s):"unknown";for(let o of vd)if(!(r!=="unknown"&&!o.chartTypes.includes(r))){if(o.type==="root"||o.type==="legend"){let a=e[o.optionsKey];if(a==null)continue;o.optionsInnerKey?a[o.optionsInnerKey]&&(n.push(`${o.optionsKey}.${o.optionsInnerKey}`),delete a[o.optionsInnerKey]):(n.push(o.optionsKey),delete e[o.optionsKey])}else if(o.type==="axis"){if(!("axes"in e)||!e.axes?.some(a=>a.type===o.identifier))continue;n.push(`axis[type=${o.identifier}]`),e.axes=e.axes.filter(a=>a.type!==o.identifier)}else if(o.type==="axis-option"){if(!("axes"in e)||!e.axes?.some(a=>a[o.optionsKey]))continue;n.push(`axis.${o.optionsKey}`),e.axes.forEach(a=>{a[o.optionsKey]&&delete a[o.optionsKey]})}else if(o.type==="series"){if(o.community||!e.series?.some(a=>a.type===o.identifier))continue;n.push(`series[type=${o.identifier}]`),e.series=e.series.filter(a=>a.type!==o.identifier)}else if(o.type==="series-option"){if(!e.series?.some(a=>a[o.optionsKey]))continue;n.push(`series.${o.optionsKey}`),e.series.forEach(a=>{a[o.optionsKey]&&delete a[o.optionsKey]})}}if(n.length&&!t){i&&(n=["AgCharts.createGauge"]);let o="ag-charts-enterprise",a="https://www.ag-grid.com/charts/javascript/installation/";e.mode==="integrated"&&(o="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",a="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),G.warnOnce([`unable to use these enterprise features as '${o}' has not been loaded:`,"",...n,"",`See: ${a}`].join(`
`))}}function Rfe(e){let t="mode"in e&&e.mode==="integrated";for(let n of Nr.byType("root","legend")){let i=e[n.optionsKey],s=i!=null&&i.enabled===!1,r=!("removable"in n)||n.removable===!0||n.removable==="standalone-only"&&!t;s&&r&&delete e[n.optionsKey]}}function nE(e){return e?.up||e?.down||e?.neutral?"user-full":e?.fills||e?.strokes?"user-indexed":"inbuilt"}var _y="white",iE={get cartesian(){return{seriesTypes:Mt.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Mt.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Mt.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:Mt.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:Mt.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:Mt.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:Mt.gaugeTypes,commonOptions:[]}}},Tfe={"radial-gauge":!0,"linear-gauge":!0};function Z3(e){return Tfe[e]===!0}var kfe=Object.values(iE).reduce((e,{commonOptions:t})=>e.concat(t),[]),ys=class sE{static getAxisDefaults(t){return ke(t,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,style:[{stroke:{$ref:"gridLineColor"},lineDash:[]}]},crossLines:{enabled:!1,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"backgroundColor"}},padding:{top:{$ref:"padding"},right:{$ref:"padding"},bottom:{$ref:"padding"},left:{$ref:"padding"}},seriesArea:{padding:{top:0,right:0,bottom:0,left:0}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.4166666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:Na,textAlign:Oa},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:Na,textAlign:Oa},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:Na,textAlign:Oa},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}}},tooltip:{enabled:!0,darkTheme:td,delay:0},overlays:{darkTheme:td},listeners:{}}}constructor(t={}){let{overrides:n,palette:i}=Jt(t),s=this.createChartConfigPerChartType(this.getDefaults()),r={};n&&this.mergeOverrides(s,r,n);let c=this.getDefaultColors(),{fills:o,strokes:a}=c,l=He(c,["fills","strokes"]);this.palette=Ip(ke(i,S({fills:Object.values(o),strokes:Object.values(a)},l))),this.paletteType=nE(i),this.config=Ip(this.templateTheme(s)),this.presets=Ip(r)}mergeOverrides(t,n,i){for(let{seriesTypes:s,commonOptions:r}of Object.values(iE)){let o=S({},i.common);for(let a of kfe)r.includes(a)||delete o[a];if(o)for(let a of s){let l=a;Z3(l)||(t[l]=ke(o,t[l]))}}Mt.seriesTypes.forEach(s=>{let r=s,o=i[r];Z3(r)?n[r]=o:t[r]=ke(o,t[r])})}createChartConfigPerChartType(t){for(let[n,{seriesTypes:i}]of Object.entries(iE)){let s=$M.get(n);for(let r of i)t[r]??(t[r]=Jt(s))}return t}getDefaults(){let t=(n,i)=>{let s={},r=S(S(S({axes:{}},JE.getThemeTemplates()),this.getChartDefaults()),$M.get(n));for(let o of i){s[o]=ke(Si.getThemeTemplate(o),s[o]??Jt(r));let{axes:a}=s[o];for(let l of Ro.keys())a[l]=ke(a[l],Ro.getThemeTemplate(l),sE.cartesianAxisDefault[l])}return s};return ke(t("cartesian",Mt.cartesianTypes),t("polar",Mt.polarTypes),t("hierarchy",Mt.hierarchyTypes),t("topology",Mt.topologyTypes),t("flow-proportion",Mt.flowProportionTypes),t("standalone",Mt.standaloneTypes),t("gauge",Mt.gaugeTypes))}static applyTemplateTheme(t,n,i){if(mt(t))for(let s=0;s<t.length;s++){let r=t[s];typeof r=="symbol"&&i?.has(r)&&(t[s]=i.get(r))}else for(let[s,r]of Object.entries(t))typeof r=="symbol"&&i?.has(r)&&(t[s]=i.get(r))}templateTheme(t,n=!0){let i=n?Jt(t):t,s=this.getTemplateParameters();return Io(i,sE.applyTemplateTheme,void 0,void 0,s),i}getDefaultColors(){return{fills:$t,strokes:Tr,up:{fill:$t.GREEN,stroke:Tr.GREEN},down:{fill:$t.RED,stroke:Tr.RED},neutral:{fill:$t.GRAY,stroke:Tr.GRAY},altUp:{fill:$t.BLUE,stroke:Tr.BLUE},altDown:{fill:$t.ORANGE,stroke:Tr.ORANGE},altNeutral:{fill:$t.GRAY,stroke:Tr.GRAY}}}getPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:[.675]},backgroundColor:_y,borderColor:{$foregroundBackgroundMix:[.818]},foregroundColor:"#464646",fontFamily:"Verdana, sans-serif",fontSize:12,fontWeight:400,gridLineColor:{$foregroundBackgroundAccentMix:[.93,.085]},padding:20,subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:[.975]},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:"#181d1f",chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},inputBackgroundColor:{$ref:"backgroundColor"},inputTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"backgroundColor"}}}getTemplateParameters(){let{isEnterprise:t}=ko,n=new Map;n.set(td,!1),n.set(wI,t),n.set(CI,!t),n.set(bg,"#d9d9d9"),n.set(rw,_y),n.set(Qa,"#00000080"),n.set(Ai,[$t.ORANGE,$t.YELLOW,$t.GREEN]),n.set(dw,[$t.BLUE,$t.RED]),n.set(hw,"#aaa"),n.set(Ts,[$t.GREEN,$t.YELLOW,$t.RED]),n.set(jr,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),n.set(Na,"block"),n.set(Oa,"center"),n.set(pw,["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),n.set(gw,["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),n.set(Yp,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),n.set(uw,_y),n.set(Lt,$t.BLUE),n.set(en,$t.BLUE),n.set(Dg,$t.BLUE),n.set(Mg,_y),n.set(Eg,"#fafafa"),n.set(Ig,"#ddd"),n.set(Ag,"#000"),n.set(Rg,"#181d1f"),n.set(Kp,"#e35c5c"),n.set(qp,"#e35c5c"),n.set(Tg,"#fafafa"),n.set(kg,"#ddd"),n.set(Lg,"#000"),n.set(Pg,"top"),n.set(kr,!1);let i=this.getDefaultColors();return n.set(ow,this.palette.up?.stroke??i.up.stroke),n.set(Sg,this.palette.up?.fill??i.up.fill),n.set(aw,this.palette.down?.stroke??i.down.stroke),n.set(xg,this.palette.down?.fill??i.down.fill),n.set(Id,this.palette.neutral?.stroke??i.neutral.stroke),n.set(lw,this.palette.neutral?.fill??i.neutral.fill),n.set(bI,this.palette.altUp?.stroke??i.up.stroke),n.set(xI,this.palette.altUp?.fill??i.up.fill),n.set(SI,this.palette.altDown?.stroke??i.down.stroke),n.set(DI,this.palette.altDown?.fill??i.down.fill),n.set(MI,this.palette.altNeutral?.fill??i.altNeutral.fill),n.set(cw,this.palette.altNeutral?.stroke??i.altNeutral.stroke),n}};ys.cartesianAxisDefault={number:ys.getAxisDefaults({line:{enabled:!1}}),log:ys.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:ys.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:kr},crosshair:{enabled:!1}}),"grouped-category":ys.getAxisDefaults({tick:{enabled:!0,stroke:bg},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}}),time:ys.getAxisDefaults({gridLine:{enabled:kr}}),"ordinal-time":ys.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:kr}}),"angle-category":ys.getAxisDefaults({label:{spacing:5},gridLine:{enabled:kr}}),"angle-number":ys.getAxisDefaults({label:{spacing:5},gridLine:{enabled:kr}}),"radius-category":ys.getAxisDefaults({line:{enabled:!1}}),"radius-number":ys.getAxisDefaults({line:{enabled:!1}})};var Ko=ys,By="#192232",ni={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ul={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},kd=class extends Ko{getDefaultColors(){return{fills:ni,strokes:Ul,up:{fill:ni.GREEN,stroke:Ul.GREEN},down:{fill:ni.RED,stroke:Ul.RED},neutral:{fill:ni.GRAY,stroke:Ul.GRAY},altUp:{fill:ni.BLUE,stroke:Ul.BLUE},altDown:{fill:ni.ORANGE,stroke:Ul.ORANGE},altNeutral:{fill:ni.GRAY,stroke:Ul.GRAY}}}getPublicParameters(){return R(S({},super.getPublicParameters()),{axisColor:{$foregroundBackgroundMix:[.263]},backgroundColor:By,borderColor:{$foregroundBackgroundMix:[.784]},chromeBackgroundColor:{$foregroundBackgroundMix:[.93]},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundAccentMix:[.743,.01]},subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.57]},chromeTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$foregroundBackgroundAccentMix:[.35,.1]}})}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(td,!0),e.set(uw,By),e.set(bg,"#7f8389"),e.set(Ai,[ni.ORANGE,ni.YELLOW,ni.GREEN]),e.set(Ts,[ni.GREEN,ni.YELLOW,ni.RED]),e.set(jr,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),e.set(pw,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.set(gw,["#192834","#3b5164","#496275","#577287","#668399"]),e.set(rw,By),e.set(Lt,ni.BLUE),e.set(Dg,"#fff"),e.set(en,ni.BLUE),e.set(Mg,By),e.set(Eg,"#28313e"),e.set(Ig,"#4b525d"),e.set(Ag,"#fff"),e.set(Rg,"#fff"),e.set(Tg,"#28313e"),e.set(kg,"#4b525d"),e.set(Lg,"#fff"),e}constructor(e){super(e)}},fs={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},$l={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Lfe=class extends kd{getDefaultColors(){return{fills:S({},fs),strokes:S({},$l),up:{fill:fs.GREEN,stroke:$l.GREEN},down:{fill:fs.RED,stroke:$l.RED},neutral:{fill:fs.BLUE,stroke:$l.BLUE},altUp:{fill:fs.GREEN,stroke:$l.GREEN},altDown:{fill:fs.RED,stroke:$l.RED},altNeutral:{fill:fs.GRAY,stroke:$l.GRAY}}}getPublicParameters(){return R(S({},super.getPublicParameters()),{gridLineColor:{$foregroundBackgroundAccentMix:[.88,.01]},padding:0})}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[fs.GREEN,fs.BLUE,fs.RED]),e.set(Lt,fs.BLUE),e.set(en,fs.BLUE),e.set(Na,"overlay"),e.set(Oa,"left"),e.set(Pg,"bottom"),e.set(kr,!0),e}},ms={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Yl={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Pfe=class extends Ko{getDefaultColors(){return{fills:S({},ms),strokes:S({},Yl),up:{fill:ms.GREEN,stroke:Yl.GREEN},down:{fill:ms.RED,stroke:Yl.RED},neutral:{fill:ms.BLUE,stroke:Yl.BLUE},altUp:{fill:ms.GREEN,stroke:Yl.GREEN},altDown:{fill:ms.RED,stroke:Yl.RED},altNeutral:{fill:ms.GRAY,stroke:Yl.GRAY}}}getPublicParameters(){return R(S({},super.getPublicParameters()),{gridLineColor:{$foregroundBackgroundAccentMix:[.94,.01]},padding:0})}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[ms.GREEN,ms.BLUE,ms.RED]),e.set(Lt,ms.BLUE),e.set(en,ms.BLUE),e.set(Na,"overlay"),e.set(Oa,"left"),e.set(Pg,"bottom"),e.set(kr,!0),e}},ii={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Kl={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Ffe=class extends kd{getDefaultColors(){return{fills:ii,strokes:Kl,up:{fill:ii.GREEN,stroke:Kl.GREEN},down:{fill:ii.RED,stroke:Kl.RED},neutral:{fill:ii.GRAY,stroke:Kl.GRAY},altUp:{fill:ii.BLUE,stroke:Kl.BLUE},altDown:{fill:ii.RED,stroke:Kl.RED},altNeutral:{fill:ii.GRAY,stroke:Kl.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[ii.ORANGE,ii.YELLOW,ii.GREEN]),e.set(jr,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),e.set(Ts,[ii.GREEN,ii.YELLOW,ii.RED]),e.set(Lt,ii.BLUE),e.set(en,ii.BLUE),e}},si={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},ql={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Nfe=class extends Ko{getDefaultColors(){return{fills:si,strokes:ql,up:{fill:si.GREEN,stroke:ql.GREEN},down:{fill:si.RED,stroke:ql.RED},neutral:{fill:si.GRAY,stroke:ql.GRAY},altUp:{fill:si.BLUE,stroke:ql.BLUE},altDown:{fill:si.RED,stroke:ql.RED},altNeutral:{fill:si.GRAY,stroke:ql.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[si.ORANGE,si.YELLOW,si.GREEN]),e.set(jr,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),e.set(Ts,[si.GREEN,si.YELLOW,si.RED]),e.set(Lt,si.BLUE),e.set(en,si.BLUE),e}},Wt={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Zl={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},Ofe=class extends kd{getDefaultColors(){return{fills:Wt,strokes:Zl,up:{fill:Wt.GREEN,stroke:Zl.GREEN},down:{fill:Wt.RED,stroke:Zl.RED},neutral:{fill:Wt.GRAY,stroke:Zl.GRAY},altUp:{fill:Wt.BLUE,stroke:Zl.BLUE},altDown:{fill:Wt.RED,stroke:Zl.RED},altNeutral:{fill:Wt.GRAY,stroke:Zl.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[Wt.BLUE,Wt.RED]),e.set(jr,[Wt.BLUE,Wt.PURPLE,Wt.MAGENTA,Wt.PINK,Wt.RED,Wt.ORANGE,Wt.YELLOW,Wt.GREEN]),e.set(Ts,[Wt.BLUE,Wt.RED]),e.set(Lt,Wt.BLUE),e.set(en,Wt.BLUE),e}},Ut={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Xl={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},_fe=class extends Ko{getDefaultColors(){return{fills:Ut,strokes:Xl,up:{fill:Ut.GREEN,stroke:Xl.GREEN},down:{fill:Ut.RED,stroke:Xl.RED},neutral:{fill:Ut.GRAY,stroke:Xl.GRAY},altUp:{fill:Ut.BLUE,stroke:Xl.BLUE},altDown:{fill:Ut.RED,stroke:Xl.RED},altNeutral:{fill:Ut.GRAY,stroke:Xl.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[Ut.BLUE,Ut.RED]),e.set(jr,[Ut.BLUE,Ut.PURPLE,Ut.MAGENTA,Ut.PINK,Ut.RED,Ut.ORANGE,Ut.YELLOW,Ut.GREEN]),e.set(Ts,[Ut.BLUE,Ut.RED]),e.set(Lt,Ut.BLUE),e.set(en,Ut.BLUE),e}},Bn={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Ta={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Bfe=class extends kd{getDefaultColors(){return{fills:R(S({},Bn),{RED:Bn.ORANGE}),strokes:R(S({},Ta),{RED:Ta.ORANGE}),up:{fill:Bn.GREEN,stroke:Ta.GREEN},down:{fill:Bn.ORANGE,stroke:Ta.ORANGE},neutral:{fill:Bn.GRAY,stroke:Ta.GRAY},altUp:{fill:Bn.BLUE,stroke:Ta.BLUE},altDown:{fill:Bn.ORANGE,stroke:Ta.ORANGE},altNeutral:{fill:Bn.GRAY,stroke:Ta.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[Bn.ORANGE,Bn.YELLOW,Bn.GREEN]),e.set(Ts,[Bn.GREEN,Bn.YELLOW,Bn.ORANGE]),e.set(Lt,Bn.BLUE),e.set(en,Bn.BLUE),e}},ri={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},wo={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Vfe=class extends Ko{getDefaultColors(){return{fills:R(S({},ri),{RED:ri.ORANGE}),strokes:R(S({},wo),{RED:wo.ORANGE}),up:{fill:ri.GREEN,stroke:wo.GREEN},down:{fill:ri.ORANGE,stroke:wo.ORANGE},neutral:{fill:wo.GRAY,stroke:wo.GRAY},altUp:{fill:ri.BLUE,stroke:wo.BLUE},altDown:{fill:ri.ORANGE,stroke:wo.ORANGE},altNeutral:{fill:ri.GRAY,stroke:wo.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[ri.ORANGE,ri.YELLOW,ri.GREEN]),e.set(Ts,[ri.GREEN,ri.YELLOW,ri.ORANGE]),e.set(Lt,ri.BLUE),e.set(en,ri.BLUE),e}},oi={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Ql={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Gfe=class extends kd{getDefaultColors(){return{fills:oi,strokes:Ql,up:{fill:oi.GREEN,stroke:Ql.GREEN},down:{fill:oi.RED,stroke:Ql.RED},neutral:{fill:oi.GRAY,stroke:Ql.GRAY},altUp:{fill:oi.BLUE,stroke:Ql.BLUE},altDown:{fill:oi.ORANGE,stroke:Ql.ORANGE},altNeutral:{fill:oi.GRAY,stroke:Ql.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[oi.ORANGE,oi.YELLOW,oi.GREEN]),e.set(jr,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),e.set(Ts,[oi.GREEN,oi.YELLOW,oi.RED]),e.set(Lt,oi.BLUE),e.set(en,oi.BLUE),e}},ai={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Jl={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},zfe=class extends Ko{getDefaultColors(){return{fills:ai,strokes:Jl,up:{fill:ai.GREEN,stroke:Jl.GREEN},down:{fill:ai.RED,stroke:Jl.RED},neutral:{fill:ai.GRAY,stroke:Jl.GRAY},altUp:{fill:ai.BLUE,stroke:Jl.BLUE},altDown:{fill:ai.ORANGE,stroke:Jl.ORANGE},altNeutral:{fill:ai.GRAY,stroke:Jl.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(Ai,[ai.ORANGE,ai.YELLOW,ai.GREEN]),e.set(jr,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),e.set(Ts,[ai.GREEN,ai.YELLOW,ai.RED]),e.set(Lt,ai.BLUE),e.set(en,ai.BLUE),e}},id=li(()=>new Ko),Hfe=li(()=>new kd),YI={"ag-default-dark":Hfe,"ag-sheets-dark":li(()=>new Bfe),"ag-polychroma-dark":li(()=>new Ofe),"ag-vivid-dark":li(()=>new Gfe),"ag-material-dark":li(()=>new Ffe),"ag-financial-dark":li(()=>new Lfe),null:id,undefined:id,"ag-default":id,"ag-sheets":li(()=>new Vfe),"ag-polychroma":li(()=>new _fe),"ag-vivid":li(()=>new zfe),"ag-material":li(()=>new Nfe),"ag-financial":li(()=>new Pfe)},bC=li(jfe);function jfe(e){if(e instanceof Ko)return e;if(e==null||typeof e=="string"){let n=YI[e];return n?n():(G.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),id())}let{errors:t}=SC(e,Ufe,"theme");if(!t.length){let n=Wfe(e),i=n.baseTheme?bC(n.baseTheme):id();return new i.constructor(n)}for(let{message:n}of t)G.warnOnce(n);return id()}function Wfe(e){let t=e,n,i,s=[];for(;typeof t=="object";)n??(n=t.palette),i??(i=t.params),t.overrides&&s.push(t.overrides),t=t.baseTheme;return{baseTheme:t,overrides:ke(...s),params:i,palette:n}}var Ufe={baseTheme:rc(Wi,XD),overrides:XD,params:XD,palette:{fills:AM(Wi),strokes:AM(Wi),up:{fill:Wi,stroke:Wi},down:{fill:Wi,stroke:Wi},neutral:{fill:Wi,stroke:Wi}}},$fe=new Set(["map-shape-background","map-line-background"]),Yfe=(()=>{let e=class Rr{constructor(n,i,s,r,o,a=!1){this.themeParameters={},this.debug=ct.create(!0,"opts"),this.optionMetadata=r??{},this.processedOverrides=i??{};let l=null;if(n instanceof Rr){if(l=n,this.specialOverrides=l.specialOverrides,!o)throw new Error("AG Charts - internal error: deltaOptions must be supplied.");this.userOptions=ke(o,Jt(l.userOptions,Rr.OPTIONS_CLONE_OPTS))}else this.userOptions=n,this.specialOverrides=this.specialOverridesDefaults(S({},s));a&&this.removeLeftoverSymbols(this.userOptions);let c,u,d,h,p;!a&&o!=null&&Rr.isFastPathDelta(o)&&l!=null?{activeTheme:c,processedOptions:u,defaultAxes:d,fastDelta:h}=this.fastSetup(o,l):{activeTheme:c,processedOptions:u,defaultAxes:d,themeParameters:p}=this.slowSetup(i,o,a),this.activeTheme=c,this.processedOptions=u,this.defaultAxes=d,this.fastDelta=h,this.themeParameters=p??{}}static isFastPathDelta(n){for(let i of Object.keys(n))if(!this.FAST_PATH_OPTIONS.has(i))return!1;return!0}fastSetup(n,i){let{activeTheme:s,defaultAxes:r,processedOptions:o}=i,{presetType:a}=this.optionMetadata,l=a?Afe[a]:void 0;a!=null&&n.data!=null&&l!=null&&(n=ke(l(n.data),n)),this.fastSeriesSetup(n,o);let c=ke(n,o);return{activeTheme:s,defaultAxes:r,processedOptions:c,fastDelta:n}}fastSeriesSetup(n,i){n.series&&(n.series?.every((s,r)=>FB(s,i.series?.[r]??{}))?delete n.series:n.series=n.series.map((s,r)=>ke(s,i.series?.[r]??{})))}slowSetup(n,i,s=!1){let r=Jt(this.userOptions,Rr.OPTIONS_CLONE_OPTS);i&&(r=ke(i,r),s&&this.removeLeftoverSymbols(r));let{presetType:o}=this.optionMetadata;if(o!=null){let w=Ife[o],x=this.userOptions,D=this.userOptions.type,M=D!=null?bC(this.userOptions.theme).presets[D]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",x),r=w?.(x,M,()=>this.activeTheme)??r}ko.isEnterprise||q3(r);let a=bC(r.theme);this.sanityCheck(r),this.removeDisabledOptions(r);let l=this.optionsType(r),y=this.getSeriesThemeConfig(l,a),{axes:c={},annotations:u={},series:d}=y,h=He(y,["axes","annotations","series"]),[p,g]=this.splitAnnotationsOptions(u);this.annotationThemes=Jt(g);let f=this.getDefaultAxes(r,d),m=ke(n,r,p,h,f);this.processAxesOptions(m,c),this.processSeriesOptions(m,a),this.processMiniChartSeriesOptions(m,a),m=Jt(m,Rr.OPTIONS_CLONE_OPTS);let v=this.getThemeParameters(a,m);return this.resolveThemeOperations(v,v),this.resolveThemeOperations(v,m),this.resolveThemeOperations(v,this.annotationThemes),(nI(m)||b4(m)||Ehe(m))&&m.legend?.enabled==null&&(m.legend??(m.legend={}),m.legend.enabled=m.series.length>1),this.enableConfiguredOptions(m,this.userOptions),a.templateTheme(m,!1),this.removeDisabledOptions(r),Rfe(m),ko.isEnterprise||q3(m,!0),this.debug("AgCharts.createOrUpdate() - processed options",m),{activeTheme:a,processedOptions:m,defaultAxes:f,themeParameters:v}}diffOptions(n){return this===n?{}:n==null?this.processedOptions:this.fastDelta??No(n.processedOptions,this.processedOptions)}getSeriesThemeConfig(n,i){return i?.config[n]??{}}getDefaultAxes(n,i){let s=this.optionsType(n),r=n.series?.find(o=>(o.type??"line")===s)??{};return Si.isDerivedDefaultAxes(s)&&(r=ke(r,i)),Si.cloneDefaultAxes(s,r)}optionsType(n){return n.series?.[0]?.type??"line"}sanityCheck(n){this.axesTypeIntegrity(n),this.seriesTypeIntegrity(n),this.soloSeriesIntegrity(n)}splitAnnotationsOptions(n){let l=n,{axesButtons:i=null,enabled:s=null,optionsToolbar:r=null,toolbar:o=null}=l,a=He(l,["axesButtons","enabled","optionsToolbar","toolbar"]);return i==null&&s==null&&r==null&&o==null?[{},a]:[{annotations:{axesButtons:i,enabled:s,optionsToolbar:r,toolbar:o}},a]}processAxesOptions(n,i){"axes"in n&&(n.axes=n.axes?.map(s=>{let p=ke(i[s.type]?.[s.position],i[s.type]),{crossLines:r}=p,o=He(p,["crossLines"]);s.crossLines&&(s.crossLines=Qy(s.crossLines,r));let a=o.gridLine?.style;s.gridLine?.style&&a?.length&&(s.gridLine.style=s.gridLine.style.map((f,m)=>f.stroke!=null||f.lineDash!=null?ke(f,a.at(m%a.length)):f));let g=ke(s,o),{top:l,right:c,bottom:u,left:d}=g;return He(g,["top","right","bottom","left"])}))}processSeriesOptions(n,i){let s=this.getTooltipPositionDefaults(n),r=yn(n.theme)?nE(n.theme?.palette):"inbuilt",o={colourIndex:0,userPalette:r},a=n.series?.map(l=>{l.type??(l.type=this.getDefaultSeriesType(n));let f=this.getSeriesThemeConfig(l.type,i).series??{},{innerLabels:c}=f,u=He(f,["innerLabels"]),d=$fe.has(l.type)?{colourIndex:0,userPalette:r}:o,h=this.getSeriesPalette(l.type,d,i),p=this.getTooltipRangeDefaults(n,l.type),g=ke(this.getSeriesGroupingOptions(l),l,s,p,u,h,{visible:!0});return g.innerLabels&&(g.innerLabels=Qy(g.innerLabels,c)),g});n.series=this.setSeriesGroupingOptions(a??[])}processMiniChartSeriesOptions(n,i){let s=n.navigator?.miniChart?.series;if(s==null)return;let r={colourIndex:0,userPalette:yn(n.theme)?nE(n.theme.palette):"inbuilt"};s=s.map(o=>{o.type??(o.type="line");let c=this.getSeriesThemeConfig(o.type,i).series??{},{innerLabels:a}=c,l=He(c,["innerLabels"]);return ke(this.getSeriesGroupingOptions(o),o,l,this.getSeriesPalette(o.type,r,i))}),n.navigator.miniChart.series=this.setSeriesGroupingOptions(s)}getThemeParameters(n,i){let s=n.getPublicParameters();if(!Hn(i.theme)||!i.theme.params)return s;let r=jn(c=>xi(c)&&Tt.validColorString(c),"a color"),o={accentColor:r,axisColor:r,backgroundColor:r,borderColor:r,foregroundColor:r,fontFamily:Wi,fontSize:Do,fontWeight:rc(Wi,Do),gridLineColor:r,padding:Do,subtleTextColor:r,textColor:r,chromeBackgroundColor:r,chromeFontFamily:Wi,chromeFontSize:Do,chromeFontWeight:rc(Wi,Do),chromeSubtleTextColor:r,chromeTextColor:r,inputBackgroundColor:r,inputTextColor:r,crosshairLabelBackgroundColor:r,crosshairLabelTextColor:r},{valid:a,errors:l}=SC(i.theme.params,o);for(let{message:c}of l)G.warnOnce(c);return ke(a,s)}resolveThemeOperations(n,i){let s=NB(i,n,new Set(["palette","data"]));this.debug("resolveTheme()",s)}getSeriesPalette(n,i,s){let r=Si.getPaletteFactory(n),{colourIndex:o,userPalette:a}=i,{fills:l=[],strokes:c=[]}=s.palette;return r?.({userPalette:a,colorsCount:Math.max(l.length,c.length),themeTemplateParameters:s.getTemplateParameters(),palette:s.palette,takeColors(u){return i.colourIndex+=u,{fills:x2(l,u,o),strokes:x2(c,u,o)}}})}getSeriesGroupingOptions(n){let i=Si.isGroupable(n.type),s=Si.isStackable(n.type),r=Si.isStackedByDefault(n.type);n.grouped&&!i&&G.warnOnce(`unsupported grouping of series type "${n.type}".`),(n.stacked||n.stackGroup)&&!s&&G.warnOnce(`unsupported stacking of series type "${n.type}".`);let{grouped:o,stacked:a}=n;return a??(a=(r||n.stackGroup!=null)&&!(i&&o)),o??(o=!0),{stacked:s&&a,grouped:i&&o&&!(s&&a)}}setSeriesGroupingOptions(n){let i=this.getSeriesGrouping(n);this.debug("setSeriesGroupingOptions() - series grouping: ",i);let s={},r=i.reduce((o,a)=>{var l;return a.groupType==="default"||(o[l=a.seriesType]??(o[l]=0),o[a.seriesType]+=a.groupType==="stack"?1:a.series.length),o},{});return i.flatMap(o=>{var a;switch(s[a=o.seriesType]??(s[a]=0),o.groupType){case"stack":{let l=s[o.seriesType]++;return o.series.map((c,u)=>Object.assign(c,{seriesGrouping:{groupId:o.groupId,groupIndex:l,groupCount:r[o.seriesType],stackIndex:u,stackCount:o.series.length}}))}case"group":return o.series.map(l=>Object.assign(l,{seriesGrouping:{groupId:o.groupId,groupIndex:s[o.seriesType]++,groupCount:r[o.seriesType],stackIndex:0,stackCount:0}}))}return o.series}).map(c=>{var u=c,{stacked:o,grouped:a}=u,l=He(u,["stacked","grouped"]);return l})}getSeriesGroupId(n){return[n.type,n.xKey,n.stacked?n.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(n){let i=new Map;return n.reduce((s,r)=>{let o=r.type;if(!r.stacked&&!r.grouped)s.push({groupType:"default",seriesType:o,series:[r],groupId:"__default__"});else{let a=this.getSeriesGroupId(r);if(!i.has(a)){let c={groupType:r.stacked?"stack":"group",seriesType:o,series:[],groupId:a};i.set(a,c),s.push(c)}i.get(a).series.push(r)}return s},[])}getDefaultSeriesType(n){switch(Xu.detectChartDefinition(n).name){case"cartesian":return"line";case"polar":return"pie";case"hierarchy":return"treemap";case"topology":return"map-shape";case"flow-proportion":return"sankey";case"standalone":return"pyramid";case"gauge":return"radial-gauge";default:throw new Error("Invalid chart options type detected.")}}getTooltipPositionDefaults(n){let i=n.tooltip?.position;if(!Hn(i))return;let{type:s,xOffset:r,yOffset:o}=i,a={};return xi(s)&&Tae($V,s)&&(a.type=s),We(r)&&(a.xOffset=r),We(o)&&(a.yOffset=o),{tooltip:{position:a}}}getTooltipRangeDefaults(n,i){return{tooltip:{range:n.tooltip?.range??Si.getTooltipDefauls(i)?.range}}}axesTypeIntegrity(n){if("axes"in n&&n.axes){let i=n.axes;for(let{type:s}of i)if(!Ahe(s)){delete n.axes;let r=[...Ro.keys()].join(", ");G.warnOnce(`unknown axis type: ${s}; expected one of: ${r}`)}}}seriesTypeIntegrity(n){n.series=n.series?.filter(({type:i})=>{if(i==null||Ihe(i)||she(i))return!0;G.warnOnce(`unknown series type: ${JSON.stringify(i)}; expected one of: ${y4.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(n){let i=n.series;if(i&&i.length>1&&i.some(s=>Si.isSolo(s.type))){let s=this.optionsType(n);if(Si.isSolo(s))G.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),n.series=i.slice(0,1);else{let{solo:r,nonSolo:o}=lE(i,l=>Si.isSolo(l.type)?"solo":"nonSolo"),a=bae(r.map(l=>l.type)).join(", ");G.warn(`Unable to mix these series types with the lead series type: ${a}`),n.series=o}}}static enableConfiguredJsonOptions(n,i){typeof i=="object"&&"enabled"in i&&!i._enabledFromTheme&&n.enabled==null&&(i.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(n){n._enabledFromTheme!=null&&delete n._enabledFromTheme}enableConfiguredOptions(n,i){Io(i,Rr.enableConfiguredJsonOptions,new Set(["data","theme"]),n),Io(n,Rr.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static removeDisabledOptionJson(n){"enabled"in n&&n.enabled===!1&&Object.keys(n).forEach(i=>{i!=="enabled"&&delete n[i]})}removeDisabledOptions(n){Io(n,Rr.removeDisabledOptionJson,new Set(["data","theme"]))}static removeLeftoverSymbolsJson(n){if(!(!n||!yn(n)))for(let[i,s]of Object.entries(n))kae(s)&&delete n[i]}removeLeftoverSymbols(n){Io(n,Rr.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(n){if(n.window!=null?l_(n.window):typeof window<"u"?n.window=window:typeof global<"u"&&(n.window=global.window),n.document!=null?a_(n.document):typeof document<"u"?n.document=document:typeof global<"u"&&(n.document=global.document),n.window==null)throw new Error("AG Charts - unable to resolve global window");if(n.document==null)throw new Error("AG Charts - unable to resolve global document");return n}};return e.OPTIONS_CLONE_OPTS=new Set(["data","container"]),e.FAST_PATH_OPTIONS=new Set(["data","width","height"]),e})(),QV=Yfe,Kfe=100,KI=class nc{constructor(t,n,i,s,r,o=Kfe){this.name=t,this.buildItem=n,this.releaseItem=i,this.destroyItem=s,this.maxPoolSize=r,this.cleanupTimeMs=o,this.freePool=[],this.busyPool=new Set}static getPool(t,n,i,s,r){return this.pools.has(t)||this.pools.set(t,new nc(t,n,i,s,r)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}obtain(t){if(this.freePool.length===0&&this.isFull())throw new Error("AG Charts - pool exhausted");let n=this.freePool.pop();return n==null?(n=this.buildItem(t),nc.debug(`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,n)):nc.debug(`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,n),this.busyPool.add(n),{item:n,release:()=>this.release(n)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");nc.debug(`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),nc.debug(`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t),this.cleanPoolTimer&&clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=setTimeout(()=>{this.cleanPool()},this.cleanupTimeMs)}cleanPool(){let t=this.freePool.splice(0);for(let n of t)this.destroyItem(n);nc.debug(`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`)}destroy(){this.cleanPool();for(let t of this.busyPool.values())this.destroyItem(t);this.busyPool.clear()}};KI.pools=new Map;KI.debug=ct.create(!0,"pool");var qfe=KI;Xu.registerMany([bpe,Kge]);var Mo=ct.create(!0,"opts"),Ba=(()=>{let e=class{static licenseCheck(t){this.licenseChecked||(this.licenseManager=ko.licenseManager?.(t),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){return ko.licenseManager?.({}).getLicenseDetails(t)}static getInstance(t){return X3.getInstance(t)}static create(t,n){return Mo.group("AgCharts.create()",()=>{this.licenseCheck(t);let i=X3.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:n});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&ko.injectWatermark?.(i.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),i})}static createFinancialChart(t){return Mo.group("AgCharts.createFinancialChart()",()=>this.create(t,{presetType:"price-volume"}))}static createGauge(t){return Mo.group("AgCharts.createGauge()",()=>this.create(t,{presetType:"gauge"}))}static __createSparkline(t){return Mo.group("AgCharts.__createSparkline()",()=>{let s=t,{pool:n}=s,i=He(s,["pool"]);return this.create(i,{presetType:"sparkline",pool:n??!0})})}};return e.licenseChecked=!1,e})(),Lr=class La{static getInstance(t){let n=QC.getInstance(t);return n?A3.chartInstances.get(n):void 0}static initialiseModules(){La.initialised||(UV(),Wge(),La.initialised=!0)}static createOrUpdate(t){let{proxy:n}=t,{userOptions:i,licenseManager:s,processedOverrides:r=n?.chart.chartOptions.processedOverrides??{},specialOverrides:o=n?.chart.chartOptions.specialOverrides??{},optionsMetadata:a=n?.chart.chartOptions.optionMetadata??{},deltaOptions:l,stripSymbols:c=!1}=t,u=ko.styles!=null?[["ag-charts-enterprise",ko.styles]]:[],{presetType:d}=a;La.initialiseModules(),Mo(()=>[">>> AgCharts.createOrUpdate() user options",Jt(i)]);let h=i;Ba.optionsMutationFn&&h&&(h=Ba.optionsMutationFn(Jt(h),d),Mo(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",Jt(h)]));let M=h??{},{document:p,window:g,styleContainer:f}=M,m=He(M,["document","window","styleContainer"]),v=(l?n?.chart.getChartOptions():m)??m,y=new QV(v,r,R(S({},o),{document:p,window:g,styleContainer:f}),a,l,c),w=!1,x=n?.chart,D;return(x==null||Xu.detectChartDefinition(y.processedOptions)!==Xu.detectChartDefinition(x.chartOptions.processedOptions))&&(D=this.getPool(y)?.obtain(y),D?x=D.item:(w=!0,x=La.createChartInstance(y,x)),u.forEach(([E,A])=>{x?.ctx.domManager.addStyles(E,A)})),n==null?(n=new A3(x,La.callbackApi,s),n.releaseChart=D?.release):(D||w)&&(n.releaseChart?.(),n.chart=x,n.releaseChart=D?.release),Mo.check()&&typeof window<"u"&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[x.id]=x),x.queuedUserOptions.push(y.userOptions),x.queuedChartOptions.push(y),x.requestFactoryUpdate(E=>{Mo.group(">>>> Chart.applyOptions()",()=>{E.applyOptions(y);let A=E.queuedUserOptions.indexOf(y.userOptions)+1;E.queuedUserOptions.splice(0,A),E.queuedChartOptions.splice(0,A)})}),n}static markRemovedProperties(t,n,i=!1){if(typeof t!="object")return i;for(let[s,r]of Object.entries(t))typeof r>"u"&&(Object.assign(t,{[s]:Symbol("UNSET")}),i||(i=!0));return i}static updateUserDelta(t,n){n=Jt(n,new Set(["data"]));let i=Io(n,La.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);Mo(()=>[">>> AgCharts.updateUserDelta() user delta",Jt(n)]),La.createOrUpdate({proxy:t,deltaOptions:n,stripSymbols:i})}static createChartInstance(t,n){let i=n?.destroy({keepTransferableResources:!0});return Xu.detectChartDefinition(t.processedOptions).create(t,i)}static getPool(t){if(t.optionMetadata.pool===!0)return qfe.getPool(t.optionMetadata.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};Lr.caretaker=new jB(jp);Lr.initialised=!1;Lr.callbackApi={caretaker:Lr.caretaker,create(e,t,n,i){return Lr.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:n,optionsMetadata:i})},update(e,t){return Lr.createOrUpdate({userOptions:e,proxy:t})},updateUserDelta(e,t){return Lr.updateUserDelta(e,t)}};Lr.detachAndClear=e=>e.detachAndClear();Lr.destroy=e=>e.destroy();var X3=Lr,JV={};Is(JV,{Arc:()=>qo,BBox:()=>Z,Caption:()=>Ct,CategoryScale:()=>ag,Group:()=>ye,Line:()=>Zi,LinearScale:()=>er,Marker:()=>pn,Path:()=>Ii,RadialColumnShape:()=>ar,Rect:()=>hi,Scene:()=>ZE,Sector:()=>Pn,Shape:()=>Es,TranslatableGroup:()=>ui,getRadialColumnWidth:()=>eG,toRadians:()=>tn});var qo=(()=>{let e=class extends Ii{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return Zs(gt(this.startAngle),gt(this.endAngle))}updatePath(){let t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?t.closePath():this.type===2&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new Z(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(t,n){let i=this.getBBox();return this.type!==0&&i.containsPoint(t,n)&&this.path.isPointInPath(t,n)}};return e.className="Arc",e})();C([we()],qo.prototype,"centerX",2);C([we()],qo.prototype,"centerY",2);C([we()],qo.prototype,"radius",2);C([we()],qo.prototype,"startAngle",2);C([we()],qo.prototype,"endAngle",2);C([we()],qo.prototype,"counterClockwise",2);C([we()],qo.prototype,"type",2);function xM(e,t,n){let i=Math.sqrt(e**2+t**2),r=Math.atan2(t,e)+n;return{x:Math.cos(r)*i,y:Math.sin(r)*i}}var ar=(()=>{let e=class extends Ii{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){let{innerRadius:t,outerRadius:n,columnWidth:i}=this,s=this.getRotation(),r=-i/2,o=i/2,a=-n,l=-t,c=1/0,u=1/0,d=-1/0,h=-1/0;for(let p=0;p<4;p+=1){let{x:g,y:f}=xM(p%2===0?r:o,p<2?a:l,s);c=Math.min(g,c),u=Math.min(f,u),d=Math.max(g,d),h=Math.max(f,h)}return new Z(c,u,d-c,h-u)}getRotation(){let{startAngle:t,endAngle:n}=this,i=VC(t,n);return gt(t+i/2+Math.PI/2)}updatePath(){let{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){let{columnWidth:t,innerRadius:n,outerRadius:i,path:s}=this,r=-t/2,o=t/2,a=-i,l=-n,c=this.getRotation(),u=[[r,l],[r,a],[o,a],[o,l]].map(([d,h])=>xM(d,h,c));s.clear(!0),s.moveTo(u[0].x,u[0].y),s.lineTo(u[1].x,u[1].y),s.lineTo(u[2].x,u[2].y),s.lineTo(u[3].x,u[3].y),s.closePath()}updateBeveledPath(){let{columnWidth:t,path:n,outerRadius:i,innerRadius:s,axisInnerRadius:r,axisOuterRadius:o,isRadiusAxisReversed:a}=this,l=Zs(s,r),c=Math.asin(t/2/s),u=this.getRotation(),d=(I,T)=>xM(I,T,u),h=(I,T)=>Math.sqrt(I**2+T**2),p=(I,T)=>T>I?0:Math.sqrt(I**2-T**2),g=(I,T,P)=>P?I<T:I>T,f=l&&!isNaN(c)&&c<Math.PI/6,m=-t/2,v=t/2,y=-i,w=-s*(f?Math.cos(c):1),x=g(o,h(s,t/2),!a);if(x){let I=p(o,s);m=-I,v=I}n.clear(!0);let D=d(m,w);n.moveTo(D.x,D.y);let M=Zs(s,i),E=g(o,h(i,t/2),!a);if(M&&f)n.arc(0,0,s,gt(-c-Math.PI/2)+u,gt(c-Math.PI/2)+u,!1);else if(E){let I=-p(o,t/2),T=p(o,i);if(!x){let P=d(m,I);n.lineTo(P.x,P.y)}if(n.arc(0,0,o,Math.atan2(I,m)+u,Math.atan2(y,-T)+u,!1),!Zs(T,0)){let P=d(T,y);n.lineTo(P.x,P.y)}n.arc(0,0,o,Math.atan2(y,T)+u,Math.atan2(I,v)+u,!1)}else{let I=d(m,y),T=d(v,y);n.lineTo(I.x,I.y),n.lineTo(T.x,T.y)}let A=d(v,w);if(n.lineTo(A.x,A.y),f)n.arc(0,0,s,gt(c-Math.PI/2)+u,gt(-c-Math.PI/2)+u,!0);else{let I=d(m,w);n.lineTo(I.x,I.y)}n.closePath()}};return e.className="RadialColumnShape",e})();C([we()],ar.prototype,"isBeveled",2);C([we()],ar.prototype,"columnWidth",2);C([we()],ar.prototype,"startAngle",2);C([we()],ar.prototype,"endAngle",2);C([we()],ar.prototype,"outerRadius",2);C([we()],ar.prototype,"innerRadius",2);C([we()],ar.prototype,"axisInnerRadius",2);C([we()],ar.prototype,"axisOuterRadius",2);C([we()],ar.prototype,"isRadiusAxisReversed",2);function eG(e,t,n,i,s){let r=VC(e,t),o=r*(1-i)/2;if(e+=o,t-=o,r<.001)return 2*n*s;if(r>=2*Math.PI){let p=e+r/2;e=p-Math.PI,t=p+Math.PI}let a=n*Math.cos(e),l=n*Math.sin(e),c=n*Math.cos(t),u=n*Math.sin(t),d=Math.floor(Math.sqrt((a-c)**2+(l-u)**2)),h=2*n*s;return Math.max(1,Math.min(h,d))}var tG={};Is(tG,{ChartTheme:()=>Ko,DEFAULT_ANNOTATION_HANDLE_FILL:()=>Mg,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Ag,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Rg,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Kp,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>qp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Eg,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Ig,DEFAULT_BACKGROUND_COLOUR:()=>rw,DEFAULT_CAPTION_ALIGNMENT:()=>Oa,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Na,DEFAULT_COLOR_RANGE:()=>dw,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>Ai,DEFAULT_FIBONACCI_STROKES:()=>Yp,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>en,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Lt,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>jr,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>Ts,DEFAULT_GRIDLINE_ENABLED:()=>kr,DEFAULT_HIERARCHY_FILLS:()=>pw,DEFAULT_HIERARCHY_STROKES:()=>gw,DEFAULT_POLAR_SERIES_STROKE:()=>uw,DEFAULT_SEPARATION_LINES_COLOUR:()=>bg,DEFAULT_SHADOW_COLOUR:()=>Qa,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>hw,DEFAULT_TEXTBOX_COLOR:()=>Lg,DEFAULT_TEXTBOX_FILL:()=>Tg,DEFAULT_TEXTBOX_STROKE:()=>kg,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Dg,DEFAULT_TOOLBAR_POSITION:()=>Pg,IS_COMMUNITY:()=>CI,IS_DARK_THEME:()=>td,IS_ENTERPRISE:()=>wI,PALETTE_ALT_DOWN_FILL:()=>DI,PALETTE_ALT_DOWN_STROKE:()=>SI,PALETTE_ALT_NEUTRAL_FILL:()=>MI,PALETTE_ALT_NEUTRAL_STROKE:()=>cw,PALETTE_ALT_UP_FILL:()=>xI,PALETTE_ALT_UP_STROKE:()=>bI,PALETTE_DOWN_FILL:()=>xg,PALETTE_DOWN_STROKE:()=>aw,PALETTE_NEUTRAL_FILL:()=>lw,PALETTE_NEUTRAL_STROKE:()=>Id,PALETTE_UP_FILL:()=>Sg,PALETTE_UP_STROKE:()=>ow,getChartTheme:()=>bC,themeNames:()=>Zfe,themeSymbols:()=>yI,themes:()=>YI});var Zfe=Object.keys(YI),nG={};Is(nG,{Color:()=>Tt,interpolateColor:()=>g_});var Xfe={};Is(Xfe,{AND:()=>Vr,ARRAY:()=>cg,ARRAY_OF:()=>_o,AbstractBarSeries:()=>AV,AbstractBarSeriesProperties:()=>_I,ActionOnSet:()=>Ei,AnchoredPopover:()=>sG,Animation:()=>b_,AnimationManager:()=>n4,Arc:()=>qo,Axis:()=>_E,AxisGroupZIndexMap:()=>EB,AxisInterval:()=>fc,AxisLabel:()=>fn,AxisTick:()=>fd,AxisTickGenerator:()=>RB,AxisTicks:()=>xme,BBox:()=>Z,BBoxValues:()=>xC,BOOLEAN:()=>le,BOOLEAN_ARRAY:()=>ece,Background:()=>xd,BackgroundModule:()=>nV,BandScale:()=>og,BarSeries:()=>LV,BarSeriesModule:()=>PV,BaseModuleInstance:()=>WC,BaseProperties:()=>Se,BaseToolbar:()=>tA,ButtonWidget:()=>fg,COLOR_GRADIENT:()=>O_,COLOR_STRING:()=>qe,COLOR_STRING_ARRAY:()=>Ki,CachedTextMeasurer:()=>tB,CachedTextMeasurerPool:()=>Go,Caption:()=>Ct,CartesianAxis:()=>gg,CartesianSeries:()=>qa,CartesianSeriesNodeEvent:()=>cI,CartesianSeriesProperties:()=>Uo,CategoryAxis:()=>md,CategoryScale:()=>ag,ChangeDetectableProperties:()=>pI,Chart:()=>QC,ChartAxisDirection:()=>RE,ChartEventManager:()=>i4,ChartOptions:()=>QV,ChartUpdateType:()=>Lp,CollapseMode:()=>CV,Color:()=>Tt,ColorScale:()=>Wa,ConicGradient:()=>Ame,ContextMenuRegistry:()=>s4,ContinuousScale:()=>Xe,DATE:()=>vE,DATE_ARRAY:()=>tce,DATE_OR_DATETIME_MS:()=>yE,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>yc,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Cc,DEFAULT_TOOLTIP_CLASS:()=>zn,DEFAULT_TOOLTIP_DARK_CLASS:()=>R4,DIRECTION:()=>V_,DOMManager:()=>ZB,DataController:()=>m4,DataModel:()=>f4,DataModelSeries:()=>aI,DataService:()=>ZC,Debug:()=>ct,Default:()=>$a,Deprecated:()=>Qfe,DeprecatedAndRenamedTo:()=>Jfe,DragInterpreter:()=>l4,DraggablePopover:()=>rG,DropShadow:()=>or,ExtendedPath2D:()=>Wp,FONT_SIZE_RATIO:()=>vI,FONT_STYLE:()=>Bo,FONT_WEIGHT:()=>Vo,FUNCTION:()=>di,FloatingToolbar:()=>Pme,GREATER_THAN:()=>dg,Gradient:()=>BC,Group:()=>ye,GroupedCategoryAxis:()=>iw,HdpiCanvas:()=>qE,HierarchyNode:()=>yme,HierarchySeries:()=>Cme,HierarchySeriesProperties:()=>Ja,HighlightManager:()=>r4,HighlightProperties:()=>lI,HighlightStyle:()=>Cg,INTERACTION_RANGE:()=>_C,INTERPOLATION_STEP_POSITION:()=>hV,INTERPOLATION_TYPE:()=>dV,Image:()=>Ld,InteractionManager:()=>t4,InteractionState:()=>e4,InterpolationProperties:()=>Ad,Invalidating:()=>hd,LABEL_PLACEMENT:()=>bE,LARGEST_KEY_INTERVAL:()=>Y4,LESS_THAN:()=>ug,LINE_CAP:()=>nce,LINE_DASH:()=>Gr,LINE_JOIN:()=>ice,LINE_STYLE:()=>sce,Label:()=>gn,LayoutElement:()=>WE,LayoutManager:()=>zB,LegendMarkerLabel:()=>rr,Line:()=>Zi,LineSeries:()=>NV,LineSeriesModule:()=>OV,LinearGradient:()=>NM,LinearScale:()=>er,Listeners:()=>zo,LogScale:()=>rI,LonLatBBox:()=>wme,MARKER_SHAPE:()=>gI,MATCHING_CROSSLINE_TYPE:()=>FE,MAX_SPACING:()=>z_,MIN_SPACING:()=>G_,Marker:()=>pn,Menu:()=>Tme,MercatorScale:()=>bme,ModuleRegistry:()=>Xu,Motion:()=>PM,NAN:()=>FC,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Xs,NUMBER:()=>je,NUMBER_ARRAY:()=>NC,NUMBER_OR_NAN:()=>pd,NativeWidget:()=>cd,NiceMode:()=>SB,Node:()=>Ha,NumberAxis:()=>wd,OBJECT:()=>K,OBJECT_ARRAY:()=>CE,OR:()=>ja,OVERFLOW_STRATEGY:()=>oce,ObserveChanges:()=>Ua,OrdinalTimeScale:()=>Fr,PHASE_METADATA:()=>Bp,PHASE_ORDER:()=>Wu,PLACEMENT:()=>ace,PLAIN_OBJECT:()=>P_,POSITION:()=>wE,POSITION_TOP_COORDINATES:()=>iC,POSITIVE_NUMBER:()=>j,PREV_NEXT_KEYS:()=>Ju,Padding:()=>Ya,ParallelStateMachine:()=>Mce,Path:()=>Ii,PointerEvents:()=>h_,PolarAxis:()=>ud,PolarSeries:()=>mw,PolarZIndexMap:()=>HV,Popover:()=>eA,PropertiesArray:()=>lg,ProxyInteractionService:()=>QB,ProxyOnWrite:()=>Ece,ProxyProperty:()=>wt,ProxyPropertyOnWrite:()=>wn,QUICK_TRANSITION:()=>Jy,RATIO:()=>Qe,REAL_NUMBER:()=>F_,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>hC,RadialColumnShape:()=>ar,Range:()=>ir,Rect:()=>hi,RepeatType:()=>w_,Rotatable:()=>gd,RotatableGroup:()=>bce,RotatableText:()=>nB,SKIP_JS_BUILTINS:()=>pE,SMALLEST_KEY_INTERVAL:()=>$4,SORT_DOMAIN_GROUPS:()=>K4,STRING:()=>B,STRING_ARRAY:()=>__,Scalable:()=>ME,ScalableGroup:()=>wce,Scene:()=>ZE,SceneChangeDetection:()=>q,ScenePathChangeDetection:()=>we,Sector:()=>Pn,SectorBox:()=>BV,Selection:()=>Kt,Series:()=>XC,SeriesContentZIndexMap:()=>D4,SeriesGroupingChangedEvent:()=>iI,SeriesItemHighlightStyle:()=>Wo,SeriesMarker:()=>Wn,SeriesNodeEvent:()=>mg,SeriesNodePickMode:()=>M4,SeriesProperties:()=>Xi,SeriesTooltip:()=>Un,SeriesZIndexMap:()=>x4,Shape:()=>Es,SimpleTextMeasurer:()=>IE,SliderWidget:()=>KE,StateMachine:()=>pg,StateMachineProperty:()=>xce,StopProperties:()=>xE,SvgPath:()=>JI,TEXT_ALIGN:()=>B_,TEXT_WRAP:()=>OC,TICK_INTERVAL:()=>bB,Text:()=>hn,TextUtils:()=>Yt,TextWrapper:()=>AE,ThemeConstants:()=>iV,ThemeSymbols:()=>yI,TimeScale:()=>pB,Toolbar:()=>kme,ToolbarButtonProperties:()=>_g,ToolbarButtonWidget:()=>oG,ToolbarWidget:()=>qC,Tooltip:()=>Hr,TooltipManager:()=>aC,TooltipPosition:()=>Cd,Transformable:()=>Pt,TransformableText:()=>ad,Translatable:()=>gc,TranslatableGroup:()=>ui,TranslatableLine:()=>rC,UNION:()=>ut,UpdateService:()=>u4,VERTICAL_ALIGN:()=>rce,Validate:()=>b,Vec2:()=>Uu,Vec4:()=>UM,WIDGET_HTML_EVENTS:()=>jE,Widget:()=>zr,WidgetEventUtil:()=>Ao,ZIndexMap:()=>wB,ZoomManager:()=>c4,accumulateGroup:()=>q4,accumulateStack:()=>Z4,accumulatedValue:()=>V4,accumulativeValueProperty:()=>Up,addHitTestersToQuadtree:()=>NI,adjustLabelPlacement:()=>kV,angleBetween:()=>VC,animationValidation:()=>bd,applyShapeStyle:()=>$p,areScalingEqual:()=>nd,area:()=>XM,buildFormatter:()=>rg,buildResetPathFn:()=>FI,calculateDefaultTimeTickFormat:()=>R_,calculateDerivativeExtrema:()=>KM,calculateDerivativeExtremaXY:()=>I4,calculateLabelChartPadding:()=>yB,calculateLabelTranslation:()=>VM,calculatePlacement:()=>qM,checkCrisp:()=>RV,clamp:()=>De,clampArray:()=>TM,clippedRoundRect:()=>Uy,collapsedStartingBarPosition:()=>eg,compareDates:()=>sB,computeBarFocusBounds:()=>VI,computeMarkerFocusBounds:()=>Og,countExpandingSearch:()=>a4,countFractionDigits:()=>IC,createButton:()=>Dme,createCheckbox:()=>Mme,createDatumId:()=>qt,createDeprecationWarning:()=>qI,createElement:()=>Ne,createElementId:()=>vue,createIcon:()=>iG,createId:()=>As,createSelect:()=>Eme,createSvgElement:()=>Ds,createTextArea:()=>Ime,dateToNumber:()=>Gn,datesSortOrder:()=>kE,datumKeys:()=>lC,datumStylerProperties:()=>Va,deconstructSelectionsOrNodes:()=>TC,deepClone:()=>Jt,deepFreeze:()=>Ip,defaultTimeTickFormat:()=>mE,diff:()=>Sd,downloadUrl:()=>c_,drawCorner:()=>Mp,drawMarkerUnitPolygon:()=>Dp,easing:()=>PM,enterpriseModule:()=>ko,evaluateBezier:()=>cC,extent:()=>jo,extractDecoratedProperties:()=>v_,findMinMax:()=>Cn,findQuadtreeMatch:()=>OI,findRangeExtent:()=>sd,fixNumericExtent:()=>Di,focusCursorAtEnd:()=>fue,formatNumber:()=>mB,formatPercent:()=>fB,formatValue:()=>Fo,fromToMotion:()=>kt,generateUUID:()=>_ae,getAngleRatioRadians:()=>$_,getColorStops:()=>K_,getDateTicksForInterval:()=>PE,getDatumRefPoint:()=>XE,getDocument:()=>Lo,getElementBBox:()=>LB,getIconClassNames:()=>UC,getLastFocus:()=>YE,getMissCount:()=>QE,getPath:()=>hE,getPathComponents:()=>g4,getRadialColumnWidth:()=>eG,getWindow:()=>ft,groupAccumulativeValueProperty:()=>Ga,groupAverage:()=>B4,groupCount:()=>ZM,groupStackValueProperty:()=>U4,groupSum:()=>_4,hasNoModifiers:()=>KC,inRange:()=>u_,initMenuKeyNav:()=>YB,initRovingTabIndex:()=>$B,interpolatePoints:()=>mC,isAgFlowProportionChartOptions:()=>Mhe,isAgGaugeChartOptions:()=>S4,isAgHierarchyChartOptions:()=>xhe,isAgStandaloneChartOptions:()=>b4,isAgTopologyChartOptions:()=>Dhe,isBetweenAngles:()=>Fa,isButtonClickEvent:()=>$E,isContinuous:()=>GC,isDecoratedObject:()=>RC,isDenseInterval:()=>Hp,isInputPending:()=>PB,isInteger:()=>d_,isNegative:()=>EC,isNumberEqual:()=>Zs,isProperties:()=>_r,isScaleValid:()=>Xp,jsonApply:()=>kp,jsonDiff:()=>No,jsonPropertyCompare:()=>FB,jsonResolveOperations:()=>NB,jsonWalk:()=>Io,keyProperty:()=>tr,labelDirectionHandling:()=>CB,legendSymbolSvg:()=>A4,lineDistanceSquared:()=>Tp,listDecoratedProperties:()=>ac,makeAccessibleClickListener:()=>Kue,mapValues:()=>ele,markerFadeInAnimation:()=>Qp,markerPaletteFactory:()=>EI,markerScaleInAnimation:()=>kI,markerSwipeScaleInAnimation:()=>LI,mergeArrayDefaults:()=>Qy,mergeDefaults:()=>ke,midpointStartingBarPosition:()=>Cge,mod:()=>cE,moduleRegistry:()=>Nr,motion:()=>Nme,nearestSquared:()=>MC,nearestSquaredInContainer:()=>Hae,normaliseGroupTo:()=>tw,normalisePropertyTo:()=>lc,normalisedExtentWithMetadata:()=>oI,normalizeAngle180:()=>Vp,normalizeAngle360:()=>gt,normalizeAngle360Inclusive:()=>fce,objectsEqual:()=>uc,objectsEqualWith:()=>dE,pairUpSpans:()=>Fp,partialAssign:()=>LM,pathFadeInAnimation:()=>vC,pathMotion:()=>fC,pathSwipeInAnimation:()=>PI,pickByMatchingAngle:()=>UI,plotAreaPathFill:()=>MV,plotInterpolatedAreaSeriesFillSpans:()=>Yy,plotInterpolatedLinePathStroke:()=>$y,plotLinePathStroke:()=>AI,predicateWithMessage:()=>et,prepareAreaFillAnimationFns:()=>EV,prepareAreaPathAnimation:()=>IV,prepareAxisAnimationContext:()=>sC,prepareAxisAnimationFunctions:()=>xB,prepareBarAnimationFunctions:()=>tg,prepareLinePathAnimation:()=>DV,prepareLinePathPropertyAnimation:()=>TI,prepareLinePathStrokeAnimationFns:()=>RI,preparePieSeriesAnimationFunctions:()=>cc,range:()=>zp,rangedValueProperty:()=>dI,resetAxisGroupFn:()=>DB,resetAxisLabelSelectionFn:()=>OE,resetAxisLineSelectionFn:()=>MB,resetAxisSelectionFn:()=>NE,resetBarSelectionsFn:()=>ng,resetIds:()=>Oae,resetLabelFn:()=>Yo,resetMarkerFn:()=>Ng,resetMarkerPositionFn:()=>Jp,resetMotion:()=>vn,resetPieSelectionsFn:()=>WI,round:()=>jae,rowCountProperty:()=>W4,sanitizeHtml:()=>ed,scale:()=>Vn,sectorBox:()=>VV,seriesLabelFadeInAnimation:()=>Ke,seriesLabelFadeOutAnimation:()=>_a,setAttribute:()=>ot,setAttributes:()=>dc,setDocument:()=>a_,setElementBBox:()=>oC,setElementStyle:()=>Qs,setPath:()=>gE,setWindow:()=>l_,shallowClone:()=>zE,singleSeriesPaletteFactory:()=>Fg,solveBezier:()=>uC,sortAndUniqueDates:()=>_M,splitBezier:()=>dC,staticFromToMotion:()=>Oo,stopPageScrolling:()=>KB,sum:()=>xpe,sumValues:()=>ew,swapAxisCondition:()=>cV,toDegrees:()=>mce,toRadians:()=>tn,tooltipContentAriaLabel:()=>T4,trailingAccumulatedValue:()=>G4,trailingAccumulatedValueProperty:()=>Epe,updateClipPath:()=>yC,updateLabelNode:()=>TV,validateCrossLineValues:()=>vB,valueProperty:()=>Le,visibleRangeIndices:()=>o4,without:()=>kM});function qI(){return(e,t)=>{let n=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");G.warnOnce(n)}}function Qfe(e,t){let n=qI(),i=t?.default;return Po((s,r,o)=>(o!==i&&n(r.toString(),e),o))}function Jfe(e,t){let n=qI();return Po((i,s,r)=>(r!==i[e]&&(n(s.toString(),`Use [${e}] instead.`),gE(i,e,t?t(r):r)),Xy),(i,s)=>(n(s.toString(),`Use [${e}] instead.`),hE(i,e)))}var Uu={add:eme,angle:ome,apply:fme,equal:pme,distance:ime,distanceSquared:sme,from:gme,gradient:lme,intercept:cme,intersectAtX:dme,intersectAtY:ume,length:XI,lengthSquared:nme,multiply:tme,normalized:rme,origin:QI,required:mme,rotate:ame,round:hme,sub:ZI};function eme(e,t){return typeof t=="number"?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}}function ZI(e,t){return typeof t=="number"?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function tme(e,t){return typeof t=="number"?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}function XI(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function nme(e){return e.x*e.x+e.y*e.y}function ime(e,t){let n=ZI(e,t);return Math.sqrt(n.x*n.x+n.y*n.y)}function sme(e,t){let n=ZI(e,t);return n.x*n.x+n.y*n.y}function rme(e){let t=XI(e);return{x:e.x/t,y:e.y/t}}function ome(e,t=QI()){return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function ame(e,t,n=QI()){let i=XI(e);return{x:n.x+i*Math.cos(t),y:n.y+i*Math.sin(t)}}function lme(e,t,n){let i=t.x-e.x;return(n==null?t.y-e.y:n-t.y-(n-e.y))/i}function cme(e,t,n){return(n==null?e.y:n-e.y)-t*e.x}function ume(e,t,n=0,i){return{x:e===1/0?1/0:(n-t)/e,y:i==null?n:i-n}}function dme(e,t,n=0,i){let s=e===1/0?1/0:e*n+t;return{x:n,y:i==null?s:i-s}}function hme(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function pme(e,t){return e.x===t.x&&e.y===t.y}function gme(e,t){if(typeof e=="number")return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)}function fme(e,t){return e.x=t.x,e.y=t.y,e}function mme(e){return{x:e?.x??0,y:e?.y??0}}function QI(){return{x:0,y:0}}var vme=(()=>{let e=class Ky{constructor(n,i,s,r,o,a,l,c,u){this.series=n,this.datumIndex=i,this.datum=s,this.sizeValue=r,this.colorValue=o,this.sumSize=a,this.depth=l,this.parent=c,this.children=u,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(n,i=Ky.Walk.PreOrder){i===Ky.Walk.PreOrder&&n(this),this.children.forEach(s=>{s.walk(n,i)}),i===Ky.Walk.PostOrder&&n(this)}*[Symbol.iterator](){yield this;for(let n of this.children)yield*n}};return e.Walk={PreOrder:0,PostOrder:1},e})(),yme=vme,Cme=class extends XC{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new Wa,this.animationState=new pg("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}processData(){let{NodeClass:e}=this,{childrenKey:t,sizeKey:n,colorKey:i,colorRange:s}=this.properties,r=0,o=1/0,a=-1/0,l=(h,p,g)=>{let f=g.depth!=null?g.depth+1:0,m=t!=null?h[t]:void 0,v=m==null||m.length===0,y=n!=null?h[n]:void 0;Number.isFinite(y)?y=Math.max(y,0):y=v?1:0;let w=y;r=Math.max(r,f);let x=i!=null?h[i]:void 0;return typeof x=="number"&&(o=Math.min(o,x),a=Math.max(a,x)),c(new e(this,p,h,y,x,w,f,g,[]),m)},c=(h,p)=>{let{datumIndex:g}=h;return p?.forEach((f,m)=>{let v=l(f,g.concat(m),h);h.children.push(v),h.sumSize+=v.sumSize}),h},u=c(new e(this,[],void 0,0,void 0,0,void 0,void 0,[]),this.data),d=[o,a];this.colorScale.domain=o<a?[o,a]:[0,1],this.colorScale.range=s??["black"],this.colorScale.update(),this.rootNode=u,this.maxDepth=r,this.colorDomain=d}update({seriesRect:e}){this.updateSelections(),this.updateNodes();let t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(e){let{colorKey:t,colorName:n,colorRange:i}=this.properties,{id:s,ctx:{legendManager:r},visible:o}=this;return e==="gradient"&&t!=null&&i!=null?[{legendType:"gradient",enabled:o&&r.getItemEnabled({seriesId:s}),seriesId:s,colorName:n,colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){return this.datumSelection.at(e+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(e){for(let{index:t,datum:n}of this.datumSelection)if(Pr(n.datumIndex,e))return t-1;return 0}pickFocus(e){if(!this.rootNode?.children.length)return;let t=De(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:n,otherIndexDelta:i}=e,s=this.removeMeIndexPathForIndex(t),r=s.reduce((l,c)=>l.children[c],this.rootNode);if(i>0&&r.hasChildren)s=[...s,0];else if(i<0&&s.length>1)s=s.slice(0,-1);else if(i===0&&n!==0){let l=r.parent.children.length-1;s=s.slice(),s[s.length-1]=De(0,s[s.length-1]+n,l)}let o=s.reduce((l,c)=>l.children[c],this.rootNode),a=this.computeFocusBounds(this.datumSelection.at(t+1));if(a!=null)return{datum:o,datumIndex:this.removeMeIndexForIndexPath(s),otherIndex:o.depth,bounds:a,clipFocusBox:!0}}getDatumAriaText(e,t){if(!(e instanceof this.NodeClass)){G.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t})}},Ja=class extends Xi{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values($t),this.strokes=Object.values(Tr)}};C([b(B)],Ja.prototype,"childrenKey",2);C([b(B,{optional:!0})],Ja.prototype,"sizeKey",2);C([b(B,{optional:!0})],Ja.prototype,"colorKey",2);C([b(B,{optional:!0})],Ja.prototype,"colorName",2);C([b(Ki)],Ja.prototype,"fills",2);C([b(Ki)],Ja.prototype,"strokes",2);C([b(Ki,{optional:!0})],Ja.prototype,"colorRange",2);var wme=class{constructor(e,t,n,i){this.lon0=e,this.lat0=t,this.lon1=n,this.lat1=i}merge(e){this.lon0=Math.min(this.lon0,e.lon0),this.lat0=Math.min(this.lat0,e.lat0),this.lon1=Math.max(this.lon1,e.lon1),this.lat1=Math.max(this.lat1,e.lat1)}},yw=Math.PI/180,DM=e=>e*yw,MM=e=>-Math.log(Math.tan(Math.PI*.25+e*yw*.5)),EM=e=>e/yw,IM=e=>(Math.atan(Math.exp(-e))-Math.PI*.25)/(yw*.5),bme=class rE extends kC{constructor(t,n){super(),this.domain=t,this.range=n,this.type="mercator",this.bounds=rE.bounds(t)}static bounds(t){let[[n,i],[s,r]]=t,o=DM(n),a=MM(i),l=DM(s),c=MM(r);return new Z(Math.min(o,l),Math.min(a,c),Math.abs(l-o),Math.abs(c-a))}static fixedScale(){return new rE([[EM(0),IM(0)],[EM(1),IM(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...t){let n=-1/0,i=1/0,s=-1/0,r=1/0;for(let o of t)for(let[a,l]of o)n=Math.min(a,n),i=Math.max(a,i),s=Math.min(l,s),r=Math.max(l,r);return{domain:[[n,s],[i,r]],animatable:!0}}convert([t,n]){let[[i,s],[r,o]]=this.range,a=(r-i)/this.bounds.width,l=(o-s)/this.bounds.height;return[(DM(t)-this.bounds.x)*a+i,(MM(n)-this.bounds.y)*l+s]}invert([t,n]){let[[i,s],[r,o]]=this.range,a=(r-i)/this.bounds.width,l=(o-s)/this.bounds.height;return[EM((t-i)/a+this.bounds.x),IM((n-s)/l+this.bounds.y)]}},Sme=(()=>{let e=class oE{constructor(){this.id=As(this),this.axisGroup=new ui({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=Kt.select(this.axisGroup,hn),this.interval=new fc,this.label=new fn,this.scale=new er,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(n){n.appendChild(this.axisGroup)}calculateLayout(){let n=[],i=this.generateTicks(),{translationX:s,translationY:r}=this;return this.labelSelection.update(i.ticks.map(o=>this.createLabelDatum(o)),void 0,o=>o.tickId),this.labelSelection.each((o,a)=>{o.setProperties(a),a.visible&&n.push(o.getBBox())}),this.axisGroup.setProperties({translationX:s,translationY:r}),Z.merge(n)}getLabelParams(n){let{padding:i}=this,{translate:s}=n;switch(this.position){case"top":case"bottom":return{x:s,y:i,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:i,y:s,textAlign:"start",textBaseline:"middle"}}}inRange(n,i=.001){let[s,r]=Cn(this.scale.range);return n>=s-i&&n<=r+i}createLabelDatum(n){let{x:i,y:s,textBaseline:r,textAlign:o}=this.getLabelParams(n);return{visible:!!n.tickLabel,tickId:n.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:n.tickLabel,textAlign:o,textBaseline:r,x:i,y:s}}generateTicks(){let{minSpacing:n,maxSpacing:i}=this.interval,{maxTickCount:s,minTickCount:r,tickCount:o}=hB(sd(this.scale.range),1,n,i,oE.DefaultTickCount,oE.DefaultMinSpacing),a=this.getTicksData({nice:!0,interval:this.interval.step,tickCount:o,minTickCount:r,maxTickCount:s});if(this.position==="bottom"||this.position==="top"){let l=Go.getMeasurer({font:this.label}),{domain:c}=this.scale,d=c[0]>c[1]?-1:1,h=-1/0*d;a.ticks=a.ticks.filter(p=>Math.sign(p.translate-h)!==d?!1:(h=p.translate+l.textWidth(p.tickLabel,!0)*d,!0))}return a}getTicksData(n){let i=[],s=n.nice?this.scale.niceDomain(n):this.scale.domain,r=this.scale.ticks(n,s),o=r.reduce((c,u)=>Math.max(c,IC(u)),0),a=BE(),l=this.label.format?this.scale.tickFormatter({domain:s,ticks:r,fractionDigits:o,specifier:this.label.format}):c=>Fo(c,o);for(let c=0;c<r.length;c++){let u=r[c],d=this.scale.convert(u);if(!this.inRange(d))continue;let h=this.label.formatter?.({value:u,index:c,fractionDigits:o})??l(u),p=a(h);i.push({tick:u,tickId:p,tickLabel:h,translate:d})}return{rawTicks:r,fractionDigits:o,ticks:i}}};return e.DefaultTickCount=5,e.DefaultMinSpacing=10,e})(),xme=Sme;function Dme(e,t){let n=Ne("button",Cw("ag-charts-input ag-charts-button",t));return e.label!==void 0?n.append(e.label):(n.append(iG(e.icon)),n.ariaLabel=e.altText),n.addEventListener("click",e.onPress),dc(n,t),n}function Mme(e,t){let n=Ne("input",Cw("ag-charts-input ag-charts-checkbox",t));return n.type="checkbox",n.checked=e.checked,n.addEventListener("change",i=>e.onChange(n.checked,i)),n.addEventListener("keydown",i=>{$E(i)&&(i.preventDefault(),n.click())}),dc(n,t),n}function Eme(e,t){let n=Ne("select",Cw("ag-charts-input ag-charts-select",t));return n.append(...e.options.map(i=>{let s=Ne("option");return s.value=i.value,s.textContent=i.label,s})),ot(n,"data-preventdefault",!1),n.value=e.value,n.addEventListener("change",i=>e.onChange(n.value,i)),dc(n,t),n}function Ime(e,t){let n=Ne("textarea",Cw("ag-charts-input ag-charts-textarea",t));return n.value=e.value,n.addEventListener("input",i=>e.onChange(n.value,i)),dc(n,t),ot(n,"data-preventdefault",!1),n}function iG(e){let t=Ne("span",`ag-charts-icon ag-charts-icon-${e}`);return ot(t,"aria-hidden",!0),t}function Cw(e,t){return t==null?e:`${e} ${t.class}`}var Ame=class extends BC{constructor(e,t,n=0,i){super(e,t,i),this.angle=n}createCanvasGradient(e,t){let{angle:i}=this,s=gt(tn(i+90)),r=t.x+t.width*.5,o=t.y+t.height*.5;return e.createConicGradient(s,r,o)}},JI=class extends Ii{constructor(e=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=e}get d(){return this._d}set d(e){if(e!==this._d){this._d=e,this.commands.length=0;for(let[t,n,i]of e.matchAll(/([A-Z])([0-9. ]*)/g)){let s=i.split(/\s+/g).map(Number);this.commands.push([n,s])}this.checkPathDirty()}}updatePath(){let{path:e,x:t,y:n}=this;e.clear();let i=t,s=n;for(let[r,o]of this.commands)switch(r){case"M":e.moveTo(t+o[0],n+o[1]),i=t+o[0];break;case"C":e.cubicCurveTo(t+o[0],n+o[1],t+o[2],n+o[3],t+o[4],n+o[5]),i=t+o[4],s=n+o[5];break;case"H":e.lineTo(t+o[0],s),i=n+o[0];break;case"L":e.lineTo(t+o[0],n+o[1]),i=t+o[0],s=n+o[1];break;case"V":e.lineTo(i,n+o[0]),s=n+o[0];break;case"Z":e.closePath();break;default:throw new Error(`Could not translate command '${r}' with '${o.join(" ")}'`)}e.closePath()}};C([we()],JI.prototype,"x",2);C([we()],JI.prototype,"y",2);var Ld=class extends Ha{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){let{ctx:t}=e,n=this.sourceImage;n&&(t.globalAlpha=this.opacity,t.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height)),super.render(e)}};C([q()],Ld.prototype,"x",2);C([q()],Ld.prototype,"y",2);C([q()],Ld.prototype,"width",2);C([q()],Ld.prototype,"height",2);C([q()],Ld.prototype,"opacity",2);var Rme={};Is(Rme,{ButtonWidget:()=>fg,NativeWidget:()=>cd,SliderWidget:()=>KE,ToolbarWidget:()=>qC,WIDGET_HTML_EVENTS:()=>jE,Widget:()=>zr,WidgetEventUtil:()=>Ao});var Q3="canvas-overlay",eA=class extends WC{constructor(e,t,n){super(),this.ctx=e,this.hideFns=[],this.moduleId=`popover-${t}`,n?.detached?this.element=Ne("div"):this.element=e.domManager.addChild(Q3,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push(()=>e.domManager.removeChild(Q3,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){let{lastFocus:t=this.lastFocus}=e??{};this.element.children.length!==0&&(this.hideFns.forEach(n=>n()),t?.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");let n=Ne("div","ag-charts-popover");if(t.ariaLabel!=null&&n.setAttribute("aria-label",t.ariaLabel),t.class!=null&&n.classList.add(t.class),n.replaceChildren(...e),this.element.replaceChildren(n),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){let i=YE(t.sourceEvent);i!==void 0&&(this.lastFocus=i,this.initialFocus=t.initialFocus)}return n}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){let t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),e.x!=null&&t.style.setProperty("left",`${Math.floor(e.x)}px`),e.y!=null&&t.style.setProperty("top",`${Math.floor(e.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}},sG=class extends eA{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}showWithChildren(e,t){let n=t.anchor??this.anchor,i=t.fallbackAnchor??this.fallbackAnchor,s=super.showWithChildren(e,t);return n&&this.setAnchor(n,i),ft().requestAnimationFrame(()=>{this.repositionWithinBounds()}),s}repositionWithinBounds(){let{anchor:e,ctx:t,fallbackAnchor:n}=this,i=this.getPopoverElement();if(!e||!i)return;let s=t.domManager.getBoundingClientRect(),{offsetWidth:r,offsetHeight:o}=i,a=De(0,e.x,s.width-r),l=De(0,e.y,s.height-o);a!==e.x&&n?.x!=null&&(a=De(0,n.x-r,s.width-r)),l!==e.y&&n?.y!=null&&(l=De(0,n.y-o,s.height-o)),this.updatePosition({x:a,y:l})}},Tme=class extends sG{show(e){let t=e.items.map(i=>this.createRow(e,i)),n=this.showWithChildren(t,e);n.classList.add("ag-charts-menu"),n.setAttribute("role","menu"),this.menuCloser=YB({orientation:"vertical",menu:n,buttons:t,sourceEvent:e.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push(()=>{this.menuCloser?.finishClosing(),this.menuCloser=void 0})}createRow(e,t){let{menuItemRole:n="menuitem"}=e,i=t.value===e.value,s=Ne("div","ag-charts-menu__row");if(s.setAttribute("role",n),n==="menuitemradio"&&s.setAttribute("aria-checked",(e.value===t.value).toString()),typeof t.value=="string"&&(s.dataset.popoverId=t.value),s.classList.toggle("ag-charts-menu__row--active",i),t.icon!=null){let l=Ne("span",`ag-charts-menu__icon ${UC(t.icon)}`);s.appendChild(l)}let r=t.strokeWidth!=null;if(r&&(s.classList.toggle("ag-charts-menu__row--stroke-width-visible",r),s.style.setProperty("--strokeWidth",r?`${t.strokeWidth}px`:null)),t.label!=null){let l=Ne("span","ag-charts-menu__label");l.textContent=this.ctx.localeManager.t(t.label),s.appendChild(l)}"altText"in t&&(s.ariaLabel=this.ctx.localeManager.t(t.altText));let o=()=>{e.onPress?.(t)},a=l=>{$E(l)&&(o(),l.preventDefault(),l.stopPropagation())};return s.addEventListener("keydown",a),s.addEventListener("click",a),s.addEventListener("mousemove",()=>{s.focus({preventScroll:!0})}),s}},rG=class extends eA{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)}),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(e){let t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:Uu.from(e.clientX,e.clientY),position:Uu.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){let{dragStartState:t}=this,n=this.getPopoverElement();if(!t||!n)return;let i=Uu.sub(Uu.from(e.clientX,e.clientY),t.client),s=Uu.add(t.position,i),r=this.ctx.domManager.getBoundingClientRect(),o={};s.x>=r.x&&s.x+n.offsetWidth<=r.width&&(o.x=s.x),s.y>=r.y&&s.y+n.offsetHeight<=r.height&&(o.y=s.y),this.updatePosition(o)}onDragEnd(){this.dragStartState=void 0}},_g=class extends Se{};C([b(B,{optional:!0})],_g.prototype,"icon",2);C([b(B,{optional:!0})],_g.prototype,"label",2);C([b(B,{optional:!0})],_g.prototype,"ariaLabel",2);C([b(B,{optional:!0})],_g.prototype,"tooltip",2);var oG=class extends fg{constructor(e){super(),this.localeManager=e}update(e){let{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let n="";if(e.icon!=null&&(n=`<span class="${UC(e.icon)} ag-charts-toolbar__icon"></span>`),e.label!=null){let i=t.t(e.label);n=`${n}<span class="ag-charts-toolbar__label">${i}</span>`}this.elem.innerHTML=n}setChecked(e){ot(this.elem,"aria-checked",e)}},J3="ag-charts-toolbar__button--active",tA=class extends qC{constructor(e,t="horizontal"){super(t),this.localeManager=e,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new zo,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",t==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",t==="vertical")}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){for(let e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){let{buttonWidgets:t}=this;for(let[n,i]of e.entries())(this.buttonWidgets.at(n)??this.createButton(n,i)).update(i);for(let n=e.length;n<t.length;n++)this.buttonWidgets.at(n)?.destroy();this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){this.buttonWidgets.at(e)?.update(t)}clearActiveButton(){for(let e of this.buttonWidgets)e.toggleClass(J3,!1)}toggleActiveButtonByIndex(e){if(e!==-1)for(let[t,n]of this.buttonWidgets.entries())n.toggleClass(J3,e!=null&&e===t)}toggleButtonEnabledByIndex(e,t){e!==-1&&this.buttonWidgets.at(e)?.setEnabled(t)}toggleSwitchCheckedByIndex(e,t){e!==-1&&this.buttonWidgets.at(e)?.setChecked(t)}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){this.buttonWidgets.at(e)?.setHidden(t)}getButtonWidgetBounds(e){let t=this.getBounds(),n=e.getBounds();return new Z(n.x+t.x,n.y+t.y,n.width,n.height)}refreshButtonClasses(){let{buttonWidgets:e,hasPrefix:t}=this,n,i,s;for(let[r,o]of e.entries())n=!t&&r===0||s!=o.section,i=r===e.length-1||o.section!=e.at(r+1)?.section,o.toggleClass("ag-charts-toolbar__button--first",n),o.toggleClass("ag-charts-toolbar__button--last",i),o.toggleClass("ag-charts-toolbar__button--gap",r>0&&n),s=o.section}createButton(e,t){let n=this.createButtonWidget();return n.addClass("ag-charts-toolbar__button"),n.addListener("click",i=>{let s=S({index:e},t instanceof Se?t.toJson():t),r=this.getButtonWidgetBounds(n);this.events.dispatch("button-pressed",{event:i,button:s,buttonBounds:r})}),n.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:e}})}),t.section&&(n.section=t.section),this.buttonWidgets.push(n),this.addChild(n),n}},kme=class extends tA{createButtonWidget(){return new oG(this.localeManager)}},Lme=class extends rG{constructor(e,t,n){super(e,t),this.onPopoverMoved=n,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t){this.showWithChildren(e,R(S({},t),{class:"ag-charts-floating-toolbar"}))}hide(){this.dragged=!1,super.hide()}getBounds(){let e=this.getPopoverElement();return new Z(e?.offsetLeft??0,e?.offsetTop??0,e?.offsetWidth??0,e?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,n){let i=this.getPopoverElement();if(!i)return;let s=e.position??"above",{offsetWidth:r,offsetHeight:o}=i,a=e.y-o-n,l=e.x-r/2;s==="below"?a=e.y+n:s==="right"?(a=e.y-o/2,l=e.x+t):s==="above-left"&&(l=e.x),this.updatePosition({x:l,y:a})}ignorePointerEvents(){let e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){let e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){let t=this.getBounds(),n=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(De(0,e.x,n.width-t.width)),e.y=Math.floor(De(0,e.y,n.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},Pme=class extends tA{constructor(e,t){super(e.localeManager),this.hasPrefix=!0,this.popover=new Lme(e,t,this.onPopoverMoved.bind(this)),this.dragHandle=new Fme(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(e){this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){let e=this.popover.getBounds();if(this.popoverBounds?.equals(e))return;this.popoverBounds=e.clone();let t=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:t})}getButtonWidgetBounds(e){let t=this.popover.getBounds(),n=super.getButtonWidgetBounds(e),i=this.dragHandle.getBounds();return new Z(n.x+t.x-i.width,n.y+t.y,n.width,n.height)}},Fme=class extends cd{constructor(e){super(Ne("div","ag-charts-floating-toolbar__drag-handle"));let t=new cd(Ne("span",`${UC("drag-handle")} ag-charts-toolbar__icon`));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},Nme=S(S({},o_),H_),S1e={VERSION:jp,_Scene:JV,_Theme:tG,_Util:nG,create:Ba.create.bind(Ba),createSparkline:Ba.__createSparkline.bind(Ba),setup:UV,isEnterprise:!1};var Ome=(()=>{class e{chart;_nativeElement;_initialised=!1;ngZone;ngAfterViewInit(){let n=this.patchChartOptions(this.options);this.chart=this.runOutsideAngular(()=>this.createChart(n)),this._initialised=!0,this.chart.chart.waitForUpdate().then(()=>{this.onChartReady.emit(this.chart)})}ngOnChanges(n){this.runOutsideAngular(()=>{!this._initialised||!this.chart||this.chart.update(this.patchChartOptions(this.options))})}ngOnDestroy(){this._initialised&&this.chart&&(this.chart.destroy(),this.chart=void 0,this._initialised=!1)}patchChartOptions(n){let i=s=>{let r=s??{};for(let[o,a]of Object.entries(r))typeof a=="function"&&(r[o]=(...l)=>{this.runInsideAngular(()=>a(...l))})};return i(n?.legend?.listeners),i(n?.listeners),n.series?.forEach(s=>{i(s.listeners)}),n.container?n:R(S({},n),{container:this._nativeElement})}runOutsideAngular(n){return this.ngZone?this.ngZone.runOutsideAngular(n):n()}runInsideAngular(n){return this.ngZone?this.ngZone.run(n):n()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=qn({type:e,selectors:[["ng-component"]],standalone:!1,features:[vr],decls:0,vars:0,template:function(i,s){},encapsulation:2})}return e})(),aG=(()=>{class e extends Ome{ngZone;options={};onChartReady=new N;constructor(n,i){super(),this.ngZone=i,this._nativeElement=n.nativeElement}createChart(n){return Ba.create(n)}static \u0275fac=function(i){return new(i||e)(Be(vi),Be(lt))};static \u0275cmp=qn({type:e,selectors:[["ag-charts"]],inputs:{options:"options"},outputs:{onChartReady:"onChartReady"},features:[Bs],decls:0,vars:0,template:function(i,s){},encapsulation:2})}return e})();var ww=class e{options=On({title:{text:"Player Overleveled - Mob XP Drop Graph"},axes:[{type:"number",position:"bottom",title:{text:"Player Mob Level Offset"},keys:["lvlOffset"],interval:{step:1},reverse:!0},{type:"number",position:"left",title:{text:"Mob XP"},keys:["xp"],interval:{step:20}}],series:[...this.generateSeries()]});static maxLvl=70;generateSeries(){let t=[];console.debug("Generating series");for(let n=1;n<=e.maxLvl;n++)console.debug("Generating series for level",n),t.push({type:"line",data:[...w2(n),...b2(n)].map(i=>new nA(i)).sort((i,s)=>i.lvlOffset-s.lvlOffset),xKey:"lvlOffset",yKey:"xp",yName:"PL"+n,interpolation:{type:"smooth"}});return console.debug("Series generated",t),t}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=qn({type:e,selectors:[["fo2tools-page-xp-graph"]],decls:1,vars:1,consts:[[2,"height","100%",3,"options"]],template:function(n,i){n&1&&os(0,"ag-charts",0),n&2&&Vs("options",i.options())},dependencies:[aG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]})},nA=class{lvlOffset;mobLvl;playerLvl;xp;constructor(t){this.mobLvl=t.mobLvl,this.playerLvl=t.playerLvl,this.xp=t.xp,this.lvlOffset=this.mobLvl-this.playerLvl}};var lG=[{path:"",redirectTo:"/mobs/value",pathMatch:"full"},{path:"mobs/value",pathMatch:"full",component:Cy},{path:"xp",pathMatch:"full",component:ww},{path:"**",redirectTo:"/mobs/value"}];var Vg="Service workers are disabled or not supported by this browser";function _me(e){return ol(()=>Jo(new Error(e)))}var Pd=class{serviceWorker;worker;registration;events;constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=_me(Vg);else{let i=Lc(t,"controllerchange").pipe(Me(()=>t.controller)),s=ol(()=>be(t.controller)),r=cr(s,i);this.worker=r.pipe(xn(u=>!!u)),this.registration=this.worker.pipe(Dn(()=>t.getRegistration()));let c=Lc(t,"message").pipe(Me(u=>u.data)).pipe(xn(u=>u&&u.type)).pipe($w());c.connect(),this.events=c}}postMessage(t,n){return this.worker.pipe(ln(1),Gt(i=>{i.postMessage(S({action:t},n))})).toPromise().then(()=>{})}postMessageWithOperation(t,n,i){let s=this.waitForOperationCompleted(i),r=this.postMessage(t,n);return Promise.all([r,s]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=i=>i.type===t:n=i=>t.includes(i.type),this.events.pipe(xn(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(ln(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(xn(n=>n.nonce===t),ln(1),Me(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Bme=(()=>{class e{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new St;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=al,this.notificationClicks=al,this.subscription=al;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Me(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Me(s=>s.data)),this.pushManager=this.sw.registration.pipe(Me(s=>s.pushManager));let i=this.pushManager.pipe(Dn(s=>s.getSubscription()));this.subscription=mf(i,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Vg));let i={userVisibleOnly:!0},s=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(s.length));for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return i.applicationServerKey=r,this.pushManager.pipe(Dn(o=>o.subscribe(i)),ln(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Vg));let n=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(ln(1),Dn(n)).toPromise()}decodeBase64(n){return atob(n)}static \u0275fac=function(i){return new(i||e)(Ie(Pd))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),Vme=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=al,this.unrecoverable=al;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Vg));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Vg));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(i){return new(i||e)(Ie(Pd))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();var cG=new se("");function Gme(e,t,n){return()=>{if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let i=e.get(lt),s=e.get(En);i.runOutsideAngular(()=>{let o=navigator.serviceWorker,a=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",a),s.onDestroy(()=>{o.removeEventListener("controllerchange",a)})});let r;if(typeof n.registrationStrategy=="function")r=n.registrationStrategy();else{let[o,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":r=be(null);break;case"registerWithDelay":r=uG(+a[0]||0);break;case"registerWhenStable":let l=vt(e.get(En).whenStable());r=a[0]?mf(l,uG(+a[0])):l;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}i.runOutsideAngular(()=>r.pipe(ln(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function uG(e){return be(null).pipe(Ww(e))}function zme(e){return new Pd(e.enabled!==!1?navigator.serviceWorker:void 0)}var Bg=class{enabled;scope;registrationStrategy};function dG(e,t={}){return eo([Bme,Vme,{provide:cG,useValue:e},{provide:Bg,useValue:t},{provide:Pd,useFactory:zme,deps:[Bg]},{provide:Vm,useFactory:Gme,deps:[cn,cG,Bg],multi:!0}])}var hG={providers:[aL(),bP(lG),BL(_L()),dG("ngsw-worker.js",{enabled:!lL(),registrationStrategy:"registerWhenStable:30000"})]};var bw=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=qn({type:e,selectors:[["fo2tools-root"]],decls:25,vars:0,consts:[["src","./f2logo.png","alt","FO2.app Logo","height","64"],["routerLink","/mobs/value"],["routerLink","/xp"],["href","https://fo2db.com/"],["href","https://indiealexh.com"],["href","https://github.com/indiealexh/fo2app"]],template:function(n,i){n&1&&(Bt(0,"header")(1,"div"),os(2,"img",0),jt(),un(3," FO2.app "),Bt(4,"nav")(5,"ul")(6,"li")(7,"a",1),un(8,"Mob Value"),jt()(),Bt(9,"li")(10,"a",2),un(11,"XP Chart"),jt()()()()(),Bt(12,"main"),os(13,"router-outlet"),jt(),Bt(14,"footer"),un(15,"Fantasy Online 2 Assets are copyright of Pixel Games LLC; Original Data Collected from "),Bt(16,"a",3),un(17,"fo2db"),jt(),un(18,"; Distributed under the MIT License, FO2.app created by and Copyright 2025 "),Bt(19,"a",4),un(20,"indiealexh"),jt(),un(21,"; "),Bt(22,"a",5),un(23,"GitHub Repo"),jt(),un(24,`;
`),jt())},dependencies:[YS,wP],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}header[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:0 1rem;flex:0 0 auto}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:row;list-style:none;margin:0;padding:0}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 1rem}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;overflow:auto}"],changeDetection:0})};NL(bw,hG).catch(e=>console.error(e));
